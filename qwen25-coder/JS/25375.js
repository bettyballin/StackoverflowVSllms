let knownPostIds = []; // Initialize this array outside of the update function to store known post IDs\n\nsetInterval(update, 3000); // Directly pass the function reference\n\nfunction update() {\n    $.get("getlatest.php", { id: latestmessage }, function(response) {\n        $("#forum_entries").prepend(response);\n        \n        // Collect new post IDs from the response\n        let newPostIds = [];\n        $(response).find('div').each(function() {\n            newPostIds.push(this.id); // Assuming each div has an ID which is a number (PK)\n        });\n\n        // Highlight only the newly added posts\n        newPostIds.forEach(id => {\n            if (!knownPostIds.includes(id)) {\n                $('#' + id).effect("highlight", {}, 1500);\n                knownPostIds.push(id); // Add to known IDs to avoid highlighting twice in future updates\n            }\n        });\n\n        latestmessage = $.cookie('last_post_id'); // Update the last message ID after all processes are done\n    }, "html");\n}