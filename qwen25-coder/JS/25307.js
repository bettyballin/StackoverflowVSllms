function FD_XMLHttpRequest() {\n    var xmlHttpReq = false;\n    if (window.XMLHttpRequest) { // Mozilla/Safari\n        xmlHttpReq = new XMLHttpRequest();\n    } else if (window.ActiveXObject) { // IE\n        xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");\n    }\n\n    // Create a wrapper object to hold the request and additional properties\n    var wrapper = {\n        req: xmlHttpReq,\n        onReturnFunc: null,\n        targetDivId: null\n    };\n\n    // Attach methods or event handlers if needed, pointing them back to xmlHttpReq methods\n    wrapper.send = function(method, url, async, user, password) {\n        wrapper.req.onreadystatechange = function() {\n            if (wrapper.onReturnFunc && wrapper.req.readyState === 4) {\n                wrapper.onReturnFunc(wrapper);\n            }\n        };\n        wrapper.req.open(method, url, async, user, password);\n        wrapper.req.send();\n    };\n\n    return wrapper;\n}\n\n// Usage\nmyXHReq = new FD_XMLHttpRequest();\nmyXHReq.onReturnFunc = someFunction; \nmyXHReq.targetDivId = "myDiv";\nmyXHReq.send('GET', 'someurl.com');