if ("WebSocket" in window) {\n    var ws = new WebSocket("ws://yourserver/chat");\n\n    ws.onopen = function() {\n        console.log("Connected to chat server.");\n    };\n\n    ws.onmessage = function(event) {\n        $("#empty_chat").append(event.data);\n        // write to chat wall\n    };\n\n    ws.onerror = function(error) {\n        console.error("WebSocket error: ", error);\n    };\n\n    ws.onclose = function() {\n        console.log("Disconnected from chat server.");\n        setTimeout(function() {\n            checkChat(); // Fallback to polling if WebSocket fails\n        }, 5000);\n    };\n} else {\n    console.log("Your browser does not support WebSockets.");\n    checkChat(); // Use fallback AJAX polling\n}