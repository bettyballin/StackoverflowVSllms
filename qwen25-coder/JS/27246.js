document.addEventListener('input', function(event) {\n    const selection = window.getSelection();\n    if (!selection.rangeCount) return;\n    \n    let range = selection.getRangeAt(0);\n    let node = range.startContainer;\n    let startOffset = range.startOffset;\n\n    // Get the current text content of the editable element\n    let textContent = event.target.textContent || '';\n\n    // Perform replacements\n    let newTextContent = textContent.replace(/(^|[\s\{\[\(\-])"([^"\n\r]*)"/g, '$1\u201C$2\u201D');  // Replace "text"\n    newTextContent = newTextContent.replace(/(^|[\s\{\[\(\-])'([^'\n\r]*)'/g, '$1\u2018$2\u2019');  // Replace 'text'\n    \n    if (textContent !== newTextContent) {\n        event.target.textContent = newTextContent;\n        \n        // Adjust cursor position\n        range.setStart(node, startOffset + (newTextContent.length - textContent.length));\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n});