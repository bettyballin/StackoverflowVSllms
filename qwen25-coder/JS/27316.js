function animateBeforeSubmit() {\n  return new Promise((resolve) => {\n    if (userImage) {\n      userImage.fadeOut(1500, function() {\n        ajaxSpinner.fadeIn(1500, resolve);\n      });\n    } else {\n      resolve(); // Resolve immediately if no animations are needed\n    }\n  });\n}\n\nfunction prepImageArea(formData, jqForm, options, veto) {\n  animateBeforeSubmit().then(() => {\n    // Proceed with the AJAX submission after animations complete\n    return $.ajax(options.url, options);\n  }).catch((error) => {\n    console.error("Error during form submission:", error);\n  });\n}\n\nfunction imageUploaded(data) {\n  var data = evalJson(data);\n  userImage.attr('src', data.large_thumb);\n  ajaxSpinner.fadeOut(1500, function() {\n    userImage.fadeIn(1500);\n  });\n}\n\n// Options for the jQuery Form plugin\nvar options = {\n  beforeSubmit: prepImageArea,\n  success: imageUploaded\n};\n\n$('#yourFormId').submit(function(event) {\n  event.preventDefault(); // Prevent default form submission\n  $(this).ajaxSubmit(options); // Use AJAX to submit the form with provided options\n});