$(document).ready(function() {\n  $('#section-list').nestedSortable({\n    listType: 'ul',\n    items: 'li',\n    excludeRoot: true,\n    forcePlaceholderSize: true,\n    handle: 'div',\n    helper: 'clone',\n    opacity: .6,\n    placeholder: 'placeholder',\n    tabSize: 25,\n    toleranceElement: '> div',\n    maxLevels: 3,\n\n    stop: function(event, ui) {\n      if(ui.item.parent().hasClass('question-list')) { // If moving inside a question list\n        var newSectionId = ui.item.closest("ul[id^='question-list-']").attr('id').split('-')[1];\n        var newQuestionPositions = $(ui.item).closest("ul").sortable('toArray');\n\n        updateQuestions(newSectionId, newQuestionPositions);\n      }\n    }\n  });\n\n  function updateQuestions(sectionId, positions) {\n    $.ajax({\n      url: '/questions/update_positions',\n      type: 'POST',\n      data: { section_id: sectionId, positions: positions },\n      success: function(response) {\n        // Optionally handle response if necessary\n      }\n    });\n  }\n});