$(document).ready(function() {\n     jQuery.ajaxSetup({\n         'beforeSend': function(xhr) {\n             xhr.setRequestHeader("Accept", "text/javascript")\n         }\n     });\n\n     $("#business_submit").click(function(event) {\n         event.preventDefault(); // Prevent default form submission\n         \n         $('.error').hide();\n         var name = $("input#business_name").val(),\n             address = $("#business_address").val(),\n             city = $("#business_city").val(),\n             state = $("#business_state").val(),\n             zip = $("#business_zip").val(),\n             phone = $("#business_phone").val(),\n             category = $("#business_business_category_id").val();\n\n         // Simple validation\n         if (!name || !address || !city || !state || !zip || !phone || category == " - Choose one - ") {\n             if (!name) { $('#namelabel').show(); $("#business_name").focus(); }\n             if (!address) { $('#addresslabel').show(); $("#business_address").focus(); }\n             if (!city) { $('#citylabel').show(); $("#business_city").focus(); }\n             if (!state) { $('#statelabel').show(); $("#business_state").focus(); }\n             if (!zip) { $('#ziplabel').show(); $("#business_zip").focus(); }\n             if (!phone) { $('#phonelabel').show(); $("#business_phone").focus(); }\n             if (category == " - Choose one - ") { $('#categorylabel').show(); $("#business_business_category_id").focus(); }\n             \n             return false;\n         }\n\n         var form = $('#new_business');\n         $.ajax({\n             type: "POST",\n             url: form.attr('action'),\n             data: form.serialize(),\n             dataType: 'script' // Ensure the server responds with JavaScript which will trigger your create.js.erb\n         });\n     });\n   });