var lastRequest = null;\n\nfunction fetchData() {\n    if (lastRequest) {\n        // Ensure previous request is not still pending.\n        lastRequest.cancel();\n    }\n    \n    lastRequest = new Ajax('xmldata.jsp?time=' + $time(), {\n        method: 'get',\n        onComplete: dataLoaded,\n        autoCancel: true\n    }).request();\n}\n\n// Call fetchData every 10 seconds, but ensure previous request is handled.\n(function periodicFetch() {\n    fetchData();\n    setTimeout(periodicFetch, 10000);\n})();