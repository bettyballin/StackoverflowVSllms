function updateChat() {\n    $.get("chat_data.php", function(data) {\n        $("div#chattable").html(data);\n    }).fail(function(jqXHR, textStatus, errorThrown) {\n        console.error('Error fetching chat data:', textStatus, errorThrown);\n    });\n\n    window.setTimeout(updateChat, 2000); // Pass the function reference directly\n}\n\n$(document).ready(function() {\n    updateChat();\n});