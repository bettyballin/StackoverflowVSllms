function calculateTotals() {\n    $('#results').load('getResults.php', null, showStatusFinished);\n    showLoadStatus();\n    startPolling();\n}\n\nfunction showLoadStatus() {\n    $('#status').html('<img src="loading.gif" alt="Loading..." />');\n}\n\nfunction showStatusFinished() {\n    clearInterval(intervalId); // Stop polling\n    $('#status').html('Finished.');\n}\n\nlet intervalId;\n\nfunction startPolling() {\n    intervalId = setInterval(function () {\n        $.ajax({\n            url: 'getProgress.php',\n            type: 'GET',\n            dataType: 'json',\n            success: function (data) {\n                if (data.progress) {\n                    $('#status').html('Processing line ' + data.currentLine + ' of ' + data.totalLines);\n                }\n            },\n            error: function () {\n                clearInterval(intervalId); // Stop polling on error\n            }\n        });\n    }, 1000); // Poll every second\n}