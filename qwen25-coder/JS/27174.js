document.getElementById('downloadForm').addEventListener('submit', function(event) {\n    event.preventDefault(); // Prevent form submission from reloading the page\n    \n    var formData = new FormData(this);\n    \n    fetch('/process-download.php', {\n        method: 'POST',\n        body: formData,\n    })\n    .then(response => response.blob())\n    .then(blob => {\n        const url = window.URL.createObjectURL(blob);\n        \n        document.getElementById('downloadLink').href = url;\n        document.getElementById('downloadLink').click();\n        \n        // Clean up the object URL after triggering the download\n        setTimeout(() => {\n            window.URL.revokeObjectURL(url);\n        }, 100);\n    })\n    .catch(error => console.error('Error:', error));\n});