<script type="text/javascript">\nfunction validate(frm_name) {\n    var hiddenFeild = document.getElementById('product');\n    var addedItems = hiddenFeild.value.trim(); // Trim to remove any leading/trailing spaces\n    if (addedItems === '') {\n        alert("No Product Added.");\n        return false;\n    }\n    var brokenItems = addedItems.split(",");\n    if (brokenItems.length < 3) {\n        alert("Please Add One More Product.");\n        return false;\n    }\n    return true;\n}\n\nfunction removeme(id) {\n    var compareDiv = document.getElementById('compare_product');\n    var remDiv = document.getElementById(id);\n    if (remDiv) { // Check if the element exists\n        compareDiv.removeChild(remDiv);\n    }\n    var hiddenFeild = document.getElementById('product');\n    var addedItems = hiddenFeild.value.trim(); // Trim to remove any leading/trailing spaces\n    var brokenItems = addedItems.split(",");\n    hiddenFeild.value = '';\n    for (var i = 0; i < brokenItems.length; i++) {\n        if (brokenItems[i] == id && brokenItems[i].trim() !== '') { // Add trim check to avoid blank items\n            continue;\n        }\n        if (hiddenFeild.value === '') {\n            hiddenFeild.value += brokenItems[i];\n        } else {\n            hiddenFeild.value += ',' + brokenItems[i];\n        }\n    }\n}\n\nfunction selectProduct() {\n    var flag = 0;\n    var compareDiv = document.getElementById('compare_product');\n    var proValue = document.getElementById('frm_product').value;\n    if (proValue != 0) {\n        var product = proValue.split("productvalue");\n        var productid = product[0].trim(); // Trim to remove any leading/trailing spaces\n        var productname = product[1];\n        var hiddenFeild = document.getElementById('product');\n        var addedItems = hiddenFeild.value.trim(); // Trim to remove any leading/trailing spaces\n        if (addedItems === '') {\n            addedItems = [];\n        } else {\n            addedItems = addedItems.split(",");\n        }\n        for (var i = 0; i < addedItems.length; i++) {\n            if (addedItems[i].trim() == productid) { // Add trim check to avoid false negatives\n                flag = 1;\n                alert('Already Added');\n                break;\n            }\n        }\n        if (flag === 0 && productid !== '') { // Check for empty product id\n            hiddenFeild.value += (hiddenFeild.value.trim() === '' ? '' : ',') + productid;\n            compareDiv.innerHTML += '<div id="' + productid + '" style="height:30px;"><div style="float:left;" id="added_product">' + productname + '</div><div style="float:right;"><input onClick="removeme(\'' + productid + '\');" id="remove" name="remove" type="button" value="remove" /></div></div>';\n        }\n    }\n}\n</script>