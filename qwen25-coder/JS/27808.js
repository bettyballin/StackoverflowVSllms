$(document).ready(function() {\n    var $headers = $('.header');\n    \n    $headers.each(function() {\n        var $thisHeader = $(this);\n        // Find all '.test' elements until the next '.header'\n        var $groupedTests = $thisHeader.nextUntil('.header', '.test');\n        \n        // Wrap them in a div with class 'wrap'\n        $thisHeader.add($groupedTests).wrapAll('<div class="wrap"></div>');\n    });\n});