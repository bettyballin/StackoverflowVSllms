var prm = Sys.WebForms.PageRequestManager.getInstance();\n\nprm.add_endRequest(SetupTimer);\n\n// Initial setup on document ready\n$(document).ready(function() {\n    SetupTimer();\n});\n\nfunction SetupTimer() {\n    var serverTime = new Date();\n    var cutoffTime = new Date($("#<%= cutoffTime.ClientID %>").val());\n    serverTime.setHours(serverTime.getHours());\n\n    // Check if the countdown is already initialized and destroy it\n    if ($('#timer').data('countdown')) {\n        $('#timer').countdown('destroy');\n    }\n\n    // Condition to check if we need to setup a new timer\n    if (serverTime < cutoffTime) {\n        $('#timer').countdown({ \n            until: cutoffTime, \n            serverTime: serverTime, \n            onExpiry: OrderingEnded, \n            format: 'yowdHMS' \n        });\n    } else {\n        // If the time has already passed, call the expiry function directly\n        OrderingEnded();\n    }\n}\n\nfunction OrderingEnded() {\n    // Function to handle count down expiration\n    console.log('Ordering has ended.');\n    // Your AJAX call code here\n}