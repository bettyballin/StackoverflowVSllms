var submissionReady = false;\n\nfunction prepImageArea() {\n  if (userImage) {\n    userImage.fadeOut(1500, function() {\n      ajaxSpinner.fadeIn(1500, function() {\n        // Set submissionReady to true only after the animations are complete.\n        submissionReady = true;\n        \n        // Trigger the form submission manually\n        $('#yourFormId').ajaxSubmit(options);\n      });\n    });\n  }\n}\n\nfunction submitFormWhenReady() {\n  if (!submissionReady) {\n    setTimeout(submitFormWhenReady, 100); // Retry after a short delay\n  } else {\n    // This function is only called once the animations are done.\n  }\n}\n\n// Options for the jQuery Form plugin\nvar options = {\n  beforeSubmit: prepImageArea,\n  success: imageUploaded\n};\n\n// Initially trigger the preparation process and wait for it to complete\n$('#yourFormId').submit(function(event) {\n    event.preventDefault(); // Prevent default form submission\n    submitFormWhenReady();\n});