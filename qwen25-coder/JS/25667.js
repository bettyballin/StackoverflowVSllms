<script type="text/javascript">\n    var isAjaxRequest = false;\n\n    // Initialize PageRequestManager to set flag before and after async postback\n    Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(function (sender, args) {\n        isAjaxRequest = true;\n    });\n\n    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function (sender, args) {\n        isAjaxRequest = false;\n    });\n\n    // Add onbeforeunload event to check the flag\n    window.onbeforeunload = function(e) {\n        if (!isAjaxRequest) {\n            var message = "You have unsaved changes.";\n            e = e || window.event;\n            // For IE and Firefox\n            if (e) { \n                e.returnValue = message; \n            }\n            // For Safari\n            return message;\n        }\n    };\n</script>