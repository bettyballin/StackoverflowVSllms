<script type="text/javascript">\n    var usernameok = false;\n    var emailok = false;\n    var httpxml;\n\n    function initXMLHttpRequest() {\n        if (window.XMLHttpRequest) { // For modern browsers and IE7+\n            httpxml = new XMLHttpRequest();\n        } else if (window.ActiveXObject) { // For older versions of IE\n            try {\n                httpxml = new ActiveXObject("Msxml2.XMLHTTP");\n            } catch (e) {\n                try {\n                    httpxml = new ActiveXObject("Microsoft.XMLHTTP");\n                } catch (e) {}\n            }\n        }\n    }\n\n    function make_request() {\n        initXMLHttpRequest();\n    }\n\n    function checksubmit() {\n        if (usernameok && emailok) {\n            document.getElementById("button").disabled = false;\n        } else {\n            document.getElementById("button").disabled = true;\n        }\n    }\n\n    function handleStateChange(responseText, callback) {\n        if (httpxml.readyState === 4) {\n            if (responseText.indexOf("Ok") >= 0) {\n                callback(true);\n            } else {\n                callback(false);\n            }\n            checksubmit();\n        }\n    }\n\n    function username(usernameInput) {\n        make_request();\n\n        httpxml.onreadystatechange = function() {\n            handleStateChange(httpxml.responseText, function(isValid) {\n                usernameok = isValid;\n            });\n        };\n\n        user_url = "check_username.php?username=" + encodeURIComponent(usernameInput.value);\n        httpxml.open("GET", user_url, true);\n        httpxml.send(null);\n    }\n\n    function email(emailInput) {\n        make_request();\n\n        httpxml.onreadystatechange = function() {\n            handleStateChange(httpxml.responseText, function(isValid) {\n                emailok = isValid;\n            });\n        };\n\n        email_url = "check_email.php?email=" + encodeURIComponent(emailInput.value);\n        httpxml.open("GET", email_url, true);\n        httpxml.send(null);\n    }\n</script>