let visibilityChangeSupported = typeof document.hidden !== 'undefined';\n\nfunction handleTabClose() {\n    if (document.hidden) {\n        // This could be an AJAX call to your server to invalidate the session\n        navigator.sendBeacon('/logout');\n    }\n}\n\nwindow.addEventListener('beforeunload', function (e) {\n    if (!visibilityChangeSupported) {\n        navigator.sendBeacon('/logout');\n    }\n});\n\nif (visibilityChangeSupported) {\n    document.addEventListener('visibilitychange', handleTabClose);\n}