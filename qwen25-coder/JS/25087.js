// Updated getComments function to support a callback\nfunction getComments(type, id, callback) {\n    $.getJSON("/ajax/" + type + "/comments?jsoncallback=&id=" + id, function(data) {\n        $('#commentList').empty(); // Empty the comments list before appending new ones\n        for (var x = 0; x < data.length; x++) {\n            var div = $("<div>").addClass("comment").appendTo("#commentList");\n            var fieldset = $("<fieldset>");\n            var legend = $("<legend>").addClass("commentHeader");\n            if (data[x].url === "") {\n                legend.text((x + 1) + ' - ' + data[x].name);\n            } else {\n                $("<a>").attr({ href: data[x].url }).text((x + 1) + ' - ' + data[x].name).appendTo(legend);\n            }\n            legend.appendTo(fieldset);\n            $("<div>").addClass("date").text(data[x].timestamp).appendTo(fieldset);\n            $("<p>").addClass("comment").text(data[x].content).appendTo(fieldset);\n            fieldset.appendTo(div);\n        }\n        if (typeof callback === 'function') {\n            callback();\n        }\n    });\n}\n\n// Usage of getComments with a callback function\n$('#commentList').empty();\ngetComments('blog', $('input#blogId').val(), function() {\n    window.location = "#addComment";\n    $('#comAdd').removeAttr('disabled');\n});