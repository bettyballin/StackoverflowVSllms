// Example: Part of background.js script in WebExtensions\n\nbrowser.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if(request.action === "discoverServices") {\n        // Communicate with native service discovery app via Native Messaging API\n        let port = browser.runtime.connectNative("service-discovery-app");\n        port.postMessage({action: "discover"});\n        port.onMessage.addListener(response => {\n            console.log("Received services:", response.services);\n            sendResponse({services: response.services});\n        });\n    }\n});