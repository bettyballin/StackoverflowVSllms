var xmlhttp;\n\nfunction GetXmlHttpObject() {\n    //var xmlHttp = null;\n    try {\n        xmlhttp = new XMLHttpRequest();\n    } catch (e) {\n        try {\n            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");\n        } catch (e) {\n            try {\n                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");\n            } catch (E) {\n                xmlhttp = false;\n            }\n        }\n    }\n    return xmlhttp;\n}\n\nfunction login() {\n    alert("Entered Login()");\n    if (!xmlhttp) {\n        xmlhttp = GetXmlHttpObject();\n    }\n\n    var url = "http://server.com/ALUauth.php";\n    url += "?nocache=" + Math.random();  // Avoid caching\n    xmlhttp.onreadystatechange = statechangedLogin;\n    xmlhttp.open("GET", url, true);\n    xmlhttp.send(null);\n}\n\nfunction statechangedLogin() {\n    if (xmlhttp.readyState == 4) {\n        alert("Entered State Changed Login");\n        if (xmlhttp.responseText == "Please <a href=http://server.com/ALUauth.php?login>login</a>") {\n            document.getElementById("ALUauth").innerHTML = xmlhttp.responseText;\n        } else {\n            GetEmailId();\n        }\n    }\n}\n\nfunction GetEmailId() {\n    alert("Entered GetEmailId()");\n    var url = "http://server.com/GetPostEmail.php";\n    url += "?sid=" + Math.random();  // Avoid caching\n    if (!xmlhttp) {\n        xmlhttp = GetXmlHttpObject();\n    }\n    xmlhttp.onreadystatechange = statechangedLogin2;\n    xmlhttp.open("GET", url, true);\n    xmlhttp.send(null);\n}\n\nfunction statechangedLogin2() {\n    if (xmlhttp.readyState == 4) {\n        alert("Enter State Changed Login 2");\n        if (xmlhttp.responseText == "Login again") {\n            window.location = "http://server.com/profile.html";\n        }\n    }\n}