var message = tinyMCE.activeEditor.getContent();\n\nif(message.length > 0) {\n    message = Base64.encode(message);\n    // Ensure that the message is URL-encoded\n    var parameters = 'message=' + encodeURIComponent(message);\n    var url = "ChatResponse.aspx";\n    ajaxPost.open("POST", url, true);\n    ajaxPost.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");\n    // Content-Length and Connection headers are generally not necessary to set manually in modern browsers\n    ajaxPost.send(parameters);\n}