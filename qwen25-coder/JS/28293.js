// Client-side script using Google Gears to initiate sync\nvar gears = google.gears.factory;\nvar db = gears.create('beta.database');\nvar mgr = gears.create('beta.workerpool');\n\nfunction synchronizeData() {\n    var worker = mgr.createWorker(gears.create('beta.blobbuilder').append(syncScript).toBlob());\n    worker.onmessage = function(a) {\n        console.log("Sync status: " + a.body);\n    };\n    worker.onerror = function (msg, url, line) {\n        alert("Error in sync script: '" + msg + "' (" + url + ":" + line + ")");\n    };\n    \n    // Initiate the synchronization with parameters or filters\n    worker.sendMessage({action: 'sync', filterByHostname: window.location.hostname});\n}\n\n// Sync script that runs in a separate thread\nvar syncScript = "onmessage = function(a) { \\n  if(a.body.action == 'sync') { \\n      var xhr = google.gears.factory.create('beta.httprequest'); \\n      // Send request to server with hostname filter \\n      xhr.open('GET', '/server/sync?hostname=' + encodeURIComponent(a.body.filterByHostname), true); \\n      xhr.onreadystatechange = function() { \\n          if(xhr.readyState == 4) { \\n              var data = JSON.parse(xhr.responseText); \\n              // Process the synchronization data \\n              self.onmessage({body: 'Sync complete'}); \\n          } \\n      }; \\n      xhr.send(); \\n    } \\n}";