// Assume this function is called when processing an AJAX request response\nfunction handleResponse(response) {\n    if (response.data.redirectUrl) {\n        // Set a flag indicating that a redirect will occur\n        sessionStorage.setItem('isRedirecting', 'true');\n        \n        // Perform the redirection\n        window.location.href = response.data.redirectUrl;\n    }\n}\n\n// OnBeforeUnload event handler\nwindow.addEventListener('beforeunload', function(event) {\n    if (sessionStorage.getItem('isRedirecting') !== 'true') {\n        // Only prompt if a redirect is not confirmed to occur\n        event.preventDefault();\n        event.returnValue = ''; // Returning non-empty string makes browser show prompt dialog\n    }\n    \n    // Clean up the flag\n    sessionStorage.removeItem('isRedirecting');\n});