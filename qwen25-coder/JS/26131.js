function checkUser() {\n    return new Promise((resolve, reject) => {\n        var request;\n        \n        if(window.XMLHttpRequest) {\n            // Non-IE browsers\n            request = new XMLHttpRequest();\n        }\n        else if (window.ActiveXObject) {\n            // IE\n            try {\n                request = new ActiveXObject("Msxml2.XMLHTTP");\n            } catch (e) {\n                try {\n                    request = new ActiveXObject("Microsoft.XMLHTTP");\n                } catch (e) {\n                    reject(new Error("Your browser does not support AJAX"));\n                }\n            }\n        }\n\n        var stu_id = document.getElementById("stu_id").value;\n        var dName = document.getElementById("dName").value;\n        var fileName = "check_user.php?dName=" + encodeURIComponent(dName) + "&stu_id=" + encodeURIComponent(stu_id);\n        request.open("GET", fileName, true);\n\n        request.onreadystatechange = function() {\n            if (request.readyState == 4) {\n                if (request.status === 200) {\n                    var resp = parseInt(request.responseText, 10);\n                    if(resp === 1) {\n                        alert("The display name has already been taken.");\n                        resolve(false);\n                    }\n                    else if(resp === 2) {\n                        alert("This student ID has already been registered");\n                        resolve(false);\n                    }\n                    else if(resp === 0) {\n                        resolve(true);\n                    } else {\n                        reject(new Error("Unexpected response"));\n                    }\n                } else {\n                    reject(new Error("Request failed with status " + request.status));\n                }\n            }\n        };\n\n        request.onerror = function() {\n            reject(new Error("Network error"));\n        };\n\n        request.send(null);\n    });\n}\n\n// Usage example\ncheckUser().then(function(status) {\n    if (!status) {\n        alert("Validation failed.");\n    } else {\n        // Proceed with form submission or further actions\n        alert("Check is successful. Submitting the form...");\n    }\n}).catch(function(error) {\n    console.error("Error during check: ", error);\n});