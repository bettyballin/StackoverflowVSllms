function truncateText(text, maxWidth) {\n    let canvas = document.createElement('canvas');\n    let context = canvas.getContext('2d');\n    context.font = '16px Arial'; // Adjust font and size as needed\n\n    let truncated = '';\n    for (let i = 0; i < text.length; i++) {\n        truncated += text[i];\n        if (context.measureText(truncated + '...').width > maxWidth) {\n            return truncated.slice(0, -1) + '...'; // Remove last character and add ellipsis\n        }\n    }\n    return text;\n}\n\n// Usage example:\nlet originalText = "My very long query is a test";\nlet maxPixelWidth = 200; // Set your maximum width in pixels\ndocument.getElementById('searchHistory').innerText = truncateText(originalText, maxPixelWidth);