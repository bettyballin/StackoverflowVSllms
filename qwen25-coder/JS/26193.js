<script type="text/javascript">\n    function pageLoad() {\n        var panels = ["Panel1", "Panel2"]; // List your panel client IDs here\n        initializePanels(panels);\n    }\n\n    function initializePanels(panelIds) {\n        panelIds.forEach(function (panelId) {\n            var extender = $find(panelId + "_CollapsibleExtender");\n            if (extender) {\n                updatePanelState(extender);\n                // Attach event handlers\n                extender.add_expanded(onPanelExpanded);\n                extender.add_collapsed(onPanelCollapsed);\n            }\n        });\n    }\n\n    function onPanelExpanded(sender, args) {\n        var panelId = sender.get_CollapsedControlID();\n        setPanelState(panelId, true);\n    }\n\n    function onPanelCollapsed(sender, args) {\n        var panelId = sender.get_CollapsedControlID();\n        setPanelState(panelId, false);\n    }\n\n    function updatePanelState(extender) {\n        var isExpanded = extender.get_IsClientExpanded();\n        var panelId = extender.get_CollapsedControlID();\n        setPanelState(panelId, isExpanded);\n    }\n\n    function setPanelState(panelId, isExpanded) {\n        var stateField = document.getElementById("hiddenPanelStates");\n        var states = getStatesFromHiddenField(stateField.value);\n\n        if (states[panelId] !== undefined) {\n            states[panelId] = isExpanded;\n        } else {\n            states[panelId] = isExpanded;\n        }\n\n        stateField.value = JSON.stringify(states);\n    }\n\n    function getPanelState(panelId) {\n        var stateField = document.getElementById("hiddenPanelStates");\n        var states = getStatesFromHiddenField(stateField.value);\n        return states[panelId];\n    }\n\n    function getStatesFromHiddenField(value) {\n        return value ? JSON.parse(value) : {};\n    }\n</script>