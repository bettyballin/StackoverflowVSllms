let lastTimestamp = null;\nlet pollInterval = 5000; // Start with 5 seconds\nconst maxPollInterval = 30000; // Maximum of 30 seconds\n\nfunction fetchMessages() {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', `messages?timestamp=${lastTimestamp}`, true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n            const messages = JSON.parse(xhr.responseText);\n            if (messages.length > 0) {\n                lastTimestamp = new Date(messages[messages.length - 1].timestamp).getTime();\n                updateChatUI(messages); // Assume updateChatUI is a function that updates the UI with new messages\n                pollInterval = 5000; // Reset to initial interval on message arrival\n            } else {\n                pollInterval = Math.min(pollInterval * 2, maxPollInterval);\n            }\n            setTimeout(fetchMessages, pollInterval);\n        }\n    };\n    xhr.send();\n}\n\n// Start the process when page load\nfetchMessages();