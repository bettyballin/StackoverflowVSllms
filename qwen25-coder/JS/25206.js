function longPoll() {\n    var xhr = new XMLHttpRequest();\n    xhr.open("GET", "longpoll.php", true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) { // done\n            if (xhr.status === 200) {\n                try {\n                    var response = JSON.parse(xhr.responseText);\n                    console.log(response.message);\n\n                    // Now, let's poll again\n                    longPoll();\n                } catch (e) {\n                    console.error("Invalid response from server: " + e);\n                }\n            }\n        }\n    };\n    xhr.onerror = function () {\n        console.error("Server connection failed.");\n    };\n\n    xhr.send();\n}\n\n// Start the initial long polling request\nlongPoll();