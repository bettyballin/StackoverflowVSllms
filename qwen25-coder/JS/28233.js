document.addEventListener("DOMContentLoaded", function() {\n    let lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));\n\n    if ("IntersectionObserver" in window) {\n        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {\n            entries.forEach(function(entry) {\n                if (entry.isIntersecting) {\n                    let lazyImage = entry.target;\n                    lazyImage.src = lazyImage.dataset.src;\n                    lazyImage.classList.remove("lazy");\n                    lazyImageObserver.unobserve(lazyImage);\n                }\n            });\n        });\n\n        lazyImages.forEach(function(lazyImage) {\n            lazyImageObserver.observe(lazyImage);\n        });\n    } else {\n        // Fallback for browsers that do not support IntersectionObserver\n        let imageCheck = setInterval(checkIfInView, 100);\n\n        function checkIfInView() {\n            if (lazyImages.length === 0) {\n                clearInterval(imageCheck);\n            }\n\n            lazyImages.forEach(function(image, index) {\n                if (image.offsetTop < window.innerHeight && image.offsetLeft < window.innerWidth) {\n                    loadFullImage(image, index);\n                }\n            });\n        }\n\n        function loadFullImage(img, i) {\n            img.src = img.dataset.src;\n            img.classList.remove("lazy");\n            lazyImages.splice(i, 1);\n        }\n    }\n});