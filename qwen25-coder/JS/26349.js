function getResults() {\n    var r = Math.random();\n    var someVar = document.getElementById("myvar").value;\n    var myUrl = "url/of/my/phpScript.php?";\n    myUrl += "r=" + r;\n    myUrl += "&someVar=" + encodeURIComponent(someVar);\n    startLoading();\n\n    fetch(myUrl)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok ' + response.statusText);\n            }\n            const reader = response.body.getReader();\n            return readStream(reader, '');\n        })\n        .catch(error => console.error('There is a problem with the fetch operation:', error))\n        .then(finalResult => {\n            document.getElementById(div).innerHTML = finalResult;\n            stopLoading();\n        });\n}\n\nfunction readStream(reader, chunks) {\n    return reader.read()\n        .then(({done, value}) => {\n            if (done) {\n                // Complete! We can now process the complete content\n                return chunks;\n            }\n\n            // Convert value to a String and then append it to chunks.\n            const chunk = new TextDecoder('utf-8').decode(value);\n            const updatedChunks = chunks + chunk;\n\n            // Print partial results every 1024 bytes or so (you can adjust this based on requirements)\n            if (updatedChunks.length > 2048) {\n                console.log(updatedChunks);\n                document.getElementById(div).innerHTML += updatedChunks;\n                return readStream(reader, '');\n            }\n\n            return readStream(reader, updatedChunks);\n        });\n}