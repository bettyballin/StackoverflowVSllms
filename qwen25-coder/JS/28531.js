var MyCode = {\n    req: new XMLHttpRequest(), // firefox only at the moment\n\n    service_url: "http://url/to/Service.asmx",\n\n    sayhello: function() {\n        var self = this;  // Save a reference to 'this'\n        if (self.req.readyState == 4 || self.req.readyState == 0) {\n            self.req.open("POST", self.service_url + '/HelloWorld', true);\n            self.req.setRequestHeader('Content-Type','application/json; charset=utf-8');\n            self.req.onreadystatechange = function() { self.handleReceive(); };  // Use the saved reference\n            var param = '{}';\n            self.req.send(param);\n        }\n    },\n\n    handleReceive: function() {\n        if (this.req.readyState == 4) {\n            // todo: using eval for json is dangerous\n            var response = JSON.parse(this.req.responseText);  // Safer than using eval\n            alert(response);\n        }\n    }\n}