function changePage(slug) {\n  var content = $('#content');\n  var title   = $('#name');\n  $.getJSON('http://' + location.host + '/' + slug + '.json', function(data) {\n    // Fade out the main element first\n    $('#main').fadeOut('slow', function() {\n      // Once fadeOut is complete, change the content\n      title.html(data.name);\n      content.html(data.content);\n      // Then fade in the main element with updated content\n      $(this).fadeIn('slow');\n    });\n  });\n}\n\nvar app = new Sammy.Application(function() { with(this){\n  get('#/', function() { with(this) {\n    changePage('_home');\n  }});\n  get('#/:page', function() { with(this) {\n    changePage(params['page']);\n  }});\n}});\n\n$(function(){app.run();});