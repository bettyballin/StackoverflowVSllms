function getInputSelection(input) {\n    var start = 0, end = 0, normalizedValue, range,\n        textInputRange, len, endRange;\n\n    if (typeof input.selectionStart == "number" && typeof input.selectionEnd == "number") {\n        start = input.selectionStart;\n        end = input.selectionEnd;\n    } else if (document.selection) {\n        range = document.selection.createRange();\n\n        if (range.parentElement() == input) {\n            len = input.value.length;\n            normalizedValue = input.value.replace(/\r\n/g, "\n");\n\n            // Create a working TextRange that matches the input's text field\n            textInputRange = input.createTextRange();\n            textInputRange.moveToBookmark(range.getBookmark());\n\n            // Check if the beginning of the selection is at the very end\n            // of the input\n            endRange = input.createTextRange();\n            endRange.collapse(false);\n\n            if (textInputRange.compareEndPoints("StartToEnd", endRange) > -1) {\n                start = len;\n                end = len;\n            } else {\n                start = -textInputRange.moveStart("character", -len);\n                start += normalizedValue.slice(0, start).split("\n").length - 1;\n\n                if (textInputRange.compareEndPoints("EndToEnd", endRange) > -1) {\n                    end = len;\n                } else {\n                    end = -textInputRange.moveEnd("character", -len);\n                    end += normalizedValue.slice(0, end).split("\n").length - 1;\n                }\n            }\n        }\n    }\n\n    return { start: start, end: end };\n}\n\n// Usage\nvar inputField = document.getElementById('myInputTextField');\nvar selection = getInputSelection(inputField);\nconsole.log("Selection starts at:", selection.start);\nconsole.log("Selection ends at:", selection.end);