var infiltrationResult;\n\nfunction checkInfiltration(thisOption) {\n    var trNode = document.createElement('tr');\n    var tdNode = document.createElement('td');\n    var hrefNode = document.createElement('a');\n\n    var infPlanetID = thisOption.getAttribute('value');\n\n    var myURL = "http://www.hyperiums.com/servlet/Planetinf?securitylevel=90&newinfiltr=New+infiltration&planetid=" + PlanetID + "&infplanetid=" + infPlanetID;\n\n    GM_xmlhttpRequest({\n        method: 'GET',\n        url: myURL,\n        headers: {\n            'User-agent': 'Mozilla/4.0 (compatible) Greasemonkey',\n            'Accept': 'application/atom+xml,application/xml,text/xml',\n        },\n        onload: function(responseDetails) {\n            if (responseDetails.responseText.match(/<b>Invalid order<\/td><\/tr><tr><td><BR><center><font color=#AAAA77 face=verdana,arial size=2>The target planet is blocking all infiltrations[\s\S]<BR><BR>/im)) {\n                // Successful match\n                infiltrationResult = 'Invalid Order';\n            } else {\n                // Match attempt failed\n                infiltrationResult = 'Infiltration Successfully Created';\n            }\n            handleInfiltrationResult(infiltrationResult);\n        }\n    });\n}\n\nfunction handleInfiltrationResult(result) {\n    alert(result);\n    // Any other logic that depends on the result goes here\n}\n\nwhile (thisOption) {\n    checkInfiltration(thisOption);\n    thisOption = /* get next option */; // Ensure you update thisOption to iterate correctly\n}