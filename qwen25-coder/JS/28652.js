function link_to_remove_fields(name, f) {\n  return f.hidden_field(:_destroy) +\n    '<a href="#" class="remove_nested_fields">Remove ' + name + '</a>';\n}\n\nfunction link_to_add_fields(name, f, association) {\n  new_id = new Date().getTime();\n  regexp = new RegExp('new_' + association, 'g');\n  return '<div><a href="#" class="add_nested_fields" data-association="' +\n    association + '">' +\n    '+' + name + '</a></div>';\n}\n\ndocument.addEventListener("turbolinks:load", function() {\n  $(document).on('click', '.remove_nested_fields', function(event) {\n    $(this).prev('input[type=hidden]').val('1');\n    $(this).closest('.nested-fields').hide();\n    event.preventDefault();\n  });\n\n  $(document).on('click', '.add_nested_fields', function(event) {\n    association = $(this).data('association');\n    time = new Date().getTime();\n    regexp = new RegExp("new_" + association, "g");\n    new_html = $('#' + association + '_fields_template').html()\n      .replace(regexp, time);\n    $(this).before(new_html);\n    event.preventDefault();\n  });\n});