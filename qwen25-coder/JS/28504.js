$(document).ready(function() {\n  $(".prodInfo").on('mouseenter', function(e) {   \n    var popupItem = $("#div_infoPopupItem");\n    var prod = $(this).attr('id');\n\n    popupInit(popupItem, e);\n\n    $.ajax({\n      type: 'GET',\n      url: 'prodInfo.aspx',\n      data: 'id=' + prod,\n      success: function(prodInfo) {\n        var prd = prodInfo.split(';;');\n        // Populate the popup item with product info\n        // ...\n        popupItem.animate({ opacity: 1 }, { queue:false, duration: 120 });\n      }\n    });\n  });\n\n  $(".prodInfo").on('click', function(e) {\n    e.preventDefault();\n    var prod = $(this).attr('id');\n    var frame = $("#div_frame");\n    var overlay = $("#div_overlay");\n\n    $.get('prodInfo.aspx', { id: prod }, function(result) {\n      var info = result.split(';;');\n\n      // Populate the frame with product info\n      // ...\n\n      overlay.animate({ top: '0' }, { queue: false, duration: 280 })\n             .animate({ height: '100%' }, 280, '', function() {\n               frame.animate({ opacity: 0.92 }, 320);\n             });\n\n      // Temporarily unbind the click event to prevent retriggering\n      $(".prodInfo").off('click');\n    });\n  });\n\n  $("#img_close").on('click', function(e) {\n    e.preventDefault();\n    var frame = $("#div_frame");\n    var overlay = $("#div_overlay");\n\n    frame.animate({ opacity: 0 }, 100, '', function() {\n      overlay.animate({ top: "50%" }, { queue: false, duration: 120 })\n             .animate({ height: "0px" }, 120);\n\n      // Rebind the click event after the frame is closed\n      $(".prodInfo").on('click', function(e) {\n        e.preventDefault();\n        var prod = $(this).attr('id');\n        var frame = $("#div_frame");\n        var overlay = $("#div_overlay");\n\n        $.get('prodInfo.aspx', { id: prod }, function(result) {\n          var info = result.split(';;');\n\n          // Populate the frame with product info\n          // ...\n\n          overlay.animate({ top: '0' }, { queue: false, duration: 280 })\n                 .animate({ height: '100%' }, 280, '', function() {\n                   frame.animate({ opacity: 0.92 }, 320);\n                 });\n\n          // Unbind the click event again\n          $(".prodInfo").off('click');\n        });\n      });\n    });\n  });\n});