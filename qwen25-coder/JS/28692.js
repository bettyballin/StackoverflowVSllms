$(function() {\n    var IntervalId;\n    var counter = 0; // Move counter outside so its value persists\n    var divs = $('#div1,#div2,#div3');\n\n    function first_function() {\n        function showDiv () {\n            divs.hide() // hide all divs\n                .filter(function (index) { return index == counter % 3; }) \n                .show('fast'); // and show it\n            counter++;\n        }; \n        showDiv();     \n        IntervalId = setInterval(showDiv, 5000);\n    }; \n\n    function second_function(){  \n        clearInterval(IntervalId); \n    }  \n\n    $("#link1").toggle(\n        first_function,\n        second_function\n    );\n});