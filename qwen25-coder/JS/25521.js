$(document).ready(function() {\n    function Map(container) {\n        const maxRows = 8;\n        const cols = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\n        const x_axis = { 'a':1,'b':2, 'c':3, 'd':4, 'e':5, 'f':6, 'g':7, 'h':8 };\n        const x_axis_alpha = { 1:'a',2:'b', 3:'c', 4:'d', 5:'e', 6:'f', 7:'g', 8:'h' };\n\n        function render_board() {\n            let jqMap = $('<div />');\n            jqMap.attr('id', 'chessboard');\n\n            for (let x = 0; x < maxRows; x++) {\n                let jqRow = $('<span />');\n                jqRow.addClass('row');\n                for (let i = 0; i < cols.length; i++) {\n                    let jqCol = $('<span />');\n                    jqCol.attr('id', cols[i] + (x + 1));\n                    jqRow.append(jqCol);\n                }\n                jqMap.append(jqRow);\n            }\n\n            $('#' + container).append(jqMap);\n        }\n\n        function add_piece(where, id, moves) {\n            let jqPiece = $('<div>Piece ' + id + '</div>');\n            let jqWhere = $('#' + where);\n            jqPiece.attr('id', 'piece-' + id);\n            jqPiece.addClass('army');\n            jqPiece.draggable({\n                cursor: 'move',\n                grid: [82, 82],\n                containment: '#chessboard',\n                revert: 'invalid',\n                stop: function(ev, ui) {\n                    check_allowable_moves(where, moves);\n                }\n            });\n            jqWhere.append(jqPiece);\n\n            check_allowable_moves(where, moves);\n        }\n\n        function check_allowable_moves(location, moveRadius) {\n            $('.allowable').droppable("destroy");\n            $('.allowable').removeClass('allowable');\n\n            let x = x_axis[location[0]];\n            let y = parseInt(location[1], 10);\n\n            for (let dx = -moveRadius; dx <= moveRadius; dx++) {\n                for (let dy = -moveRadius; dy <= moveRadius; dy++) {\n                    if (Math.abs(dx) + Math.abs(dy) > moveRadius) continue; // Only allow Lâˆž norm moves\n\n                    let newX = x + dx;\n                    let newY = y + dy;\n\n                    if (newX >= 1 && newX <= maxRows && newY >= 1 && newY <= maxRows) {\n                        let newLocationId = x_axis_alpha[newX] + newY;\n                        let jqCell = $('#' + newLocationId);\n                        jqCell.addClass('allowable');\n                        jqCell.droppable({\n                            accept: '.army',\n                            drop: function(ev, ui) {\n                                check_allowable_moves(newLocationId, moveRadius); // Update allowable moves\n                            }\n                        });\n                    }\n                }\n            }\n        }\n\n        render_board();\n        add_piece('d5', 1, 2); // Example piece with ID 1 that can move up to 2 squares\n    }\n\n    let map = new Map('content');\n});