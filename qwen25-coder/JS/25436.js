const jschardet = require('jschardet');\n\nfunction detectCharset(buffer) {\n    const result = jschardet.detect(buffer);\n    return result.encoding;\n}\n\n// Example usage in an Express POST handler:\napp.post('/path', (req, res) => {\n    let charset = 'UTF-8'; // Default to UTF-8\n    if (req.headers['content-type'] && req.headers['content-type'].includes('charset=')) {\n        const contentTypeParts = req.headers['content-type'].split(';');\n        for (let part of contentTypeParts) {\n            if (part.includes('charset=')) {\n                charset = part.trim().split('=')[1];\n                break;\n            }\n        }\n    } else {\n        // Detect charset using jschardet\n        charset = detectCharset(Buffer.from(req.body));\n    }\n\n    console.log(`Detected charset: ${charset}`);\n    res.send(`Received form data with charset: ${charset}`);\n});