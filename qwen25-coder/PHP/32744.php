require_once __DIR__ . '/vendor/autoload.php';\n\n// Autoload Composer dependencies.\nsession_start();\n\n$client = new Google_Client();\n$client->setAuthConfig('path/to/your/client_credentials.json'); // Path to your client_secret.json file\n$client->addScope(Google_Service_Oauth2::USERINFO_EMAIL);\n$client->addScope(Google_Service_Oauth2::USERINFO_PROFILE);\n\nif (!isset($_GET['code'])) {\n    $auth_url = $client->createAuthUrl();\n    header('Location: ' . filter_var($auth_url, FILTER_SANITIZE_URL));\n} else {\n    $client->authenticate($_GET['code']);\n    $_SESSION['access_token'] = $client->getAccessToken();\n\n    // Redirect back to avoid refreshing the page from causing a re-authentication\n    $redirect_uri = 'http://' . $_SERVER['HTTP_HOST'] . '/your-script.php';\n    header('Location: ' . filter_var($redirect_uri, FILTER_SANITIZE_URL));\n}\n\nif (isset($_SESSION['access_token']) && $_SESSION['access_token']) {\n    // Get user data\n    $client->setAccessToken($_SESSION['access_token']);\n    $oauth2 = new Google_Service_Oauth2($client);\n    $user_info = $oauth2->userinfo_v2_me->get();\n\n    echo 'Your Name: ' . filter_var($user_info->name, FILTER_SANITIZE_STRING) . '<br>';\n    echo 'Your Email: ' . filter_var($user_info->email, FILTER_SANITIZE_EMAIL) . '<br>';\n} else {\n    echo "<a href='?logout'>Logout</a>";\n}\n\nif (isset($_GET['logout'])) {\n    unset($_SESSION['access_token']);\n}