<?php\n\nfunction getBrowserLocale() {\n    if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {\n        // Split the header into an array of languages\n        $acceptLanguages = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']);\n\n        // Take the first language listed by the browser as the top preference\n        $preferredLanguage = strtolower(trim(current($acceptLanguages)));\n\n        // Normalize the language code for Windows systems if necessary\n        switch ($preferredLanguage) {\n            case 'de':\n                return PHP_OS_FAMILY === 'Windows' ? 'deu' : 'de';\n            // Add more cases if needed, e.g., other specific language codes that need adjusting\n            default:\n                return $preferredLanguage;\n        }\n    }\n\n    // Default to English (United States) if no preference is given by the browser\n    return PHP_OS_FAMILY === 'Windows' ? 'eng' : 'en';\n}\n\n// Set the locale based on the user's preferred language\n$locale = getBrowserLocale() . '.' . strtoupper(getBrowserLocale()) . '@utf8';\nsetlocale(LC_ALL, $locale);\n\necho "Set locale to: " . setlocale(LC_ALL, 0);\n?>