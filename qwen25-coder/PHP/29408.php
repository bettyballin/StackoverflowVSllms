function splitAndUploadFile($filePath, $ftpHost, $ftpUsername, $ftpPassword, $chunkSize = 2 * 1024 * 1024) {\n    $fileHandle = fopen($filePath, 'rb');\n    if ($fileHandle === false) {\n        die("Failed to open file: " . $filePath);\n    }\n\n    $ftpConnection = ftp_connect($ftpHost);\n    if (!$ftpConnection) {\n        fclose($fileHandle);\n        die("Could not connect to FTP server: " . $ftpHost);\n    }\n\n    if (!ftp_login($ftpConnection, $ftpUsername, $ftpPassword)) {\n        fclose($fileHandle);\n        ftp_close($ftpConnection);\n        die("Invalid FTP username or password provided.");\n    }\n\n    $partNumber = 1;\n    while (!feof($fileHandle)) {\n        $data = fread($fileHandle, $chunkSize);\n        if ($data === false) {\n            fclose($fileHandle);\n            ftp_close($ftpConnection);\n            die('Error reading file');\n        }\n\n        $remotePath = basename($filePath) . '.' . str_pad((string)$partNumber, 3, '0', STR_PAD_LEFT);\n        if (!ftp_nb_put($ftpConnection, $remotePath, $data, FTP_BINARY)) {\n            fclose($fileHandle);\n            ftp_close($ftpConnection);\n            die("Failed to upload part: " . $remotePath);\n        }\n\n        echo "Uploaded chunk $partNumber\n";\n        $partNumber++;\n    }\n\n    fclose($fileHandle);\n    ftp_close($ftpConnection);\n\n    return $partNumber - 1;\n}\n\nsplitAndUploadFile('/path/to/your/largefile.zip', 'ftp.example.com', 'username', 'password');