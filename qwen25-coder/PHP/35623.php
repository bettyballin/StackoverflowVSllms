<?php\n$host = 'your_database_host';\n$dbname = 'your_database_name';\n$username = 'your_username';\n$password = 'your_password';\n\ntry {\n    $pdo = new PDO("oci:dbname=//$host/$dbname", $username, $password);\n    // Set the PDO error mode to exception\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n    // Query the queue table for emails scheduled to be sent today at 6 PM\n    $stmt = $pdo->query("SELECT * FROM email_queue WHERE send_datetime <= SYSDATE");\n    $emails = $stmt->fetchAll();\n\n    foreach ($emails as $email) {\n        $to = $email['to_email'];\n        $subject = $email['subject'];\n        $message = $email['body'];\n\n        // Attachments handling (you might need to handle this better)\n        $attachments = unserialize($email['attachments']);\n\n        // Create boundary\n        $boundary = md5('unique_boundary_phrase');\n\n        // Headers\n        $headers = "MIME-Version: 1.0\r\n";\n        $headers .= "From: your-email@example.com\r\n";\n        $headers .= "Content-Type: multipart/mixed; boundary=\"$boundary\"\r\n";\n\n        // Message body\n        $body = "--$boundary\r\n";\n        $body .= "Content-Type: text/plain; charset=ISO-8859-1\r\n";\n        $body .= "Content-Transfer-Encoding: 7bit\r\n\r\n";\n        $body .= $message . "\r\n";\n\n        // Attachments\n        foreach ($attachments as $attachment) {\n            $content = chunk_split(base64_encode(file_get_contents($attachment['path'])));\n            $body .= "--$boundary\r\n";\n            $body .= "Content-Type: application/octet-stream; name=\"" . basename($attachment['name']) . "\"\r\n";\n            $body .= "Content-Transfer-Encoding: base64\r\n";\n            $body .= "Content-Disposition: attachment;filename=\"" . basename($attachment['name']) . "\"\r\n\r\n";\n            $body .= $content. "\r\n";\n        }\n        \n        $sent = mail($to, $subject, $body, $headers);\n        \n        if ($sent) {\n            // Delete or mark as sent in the queue\n            $pdo->query("DELETE FROM email_queue WHERE id = {$email['id']}");\n        } else {\n            error_log('Failed to send email to: ' . $to);\n        }\n    }\n\n} catch(PDOException $e) {\n    echo "Error: " . $e->getMessage();\n}\n ?>