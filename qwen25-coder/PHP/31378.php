<?php\n// Connect to MySQL\n$conn = mysqli_connect('host', 'user', 'password', 'database');\n\nif (mysqli_connect_errno()) {\n    die("Failed to connect: " . mysqli_connect_error());\n}\n\n// Start a transaction\nmysqli_query($conn, "BEGIN");\n\ntry {\n    // Insert into Table1 and get the last inserted ID\n    $insertTable1 = "INSERT INTO Table1 (column1, column2) VALUES ('value1', 'value2')";\n    mysqli_query($conn, $insertTable1);\n    $table1Id = mysqli_insert_id($conn);\n\n    // Insert into Table2 and get the last inserted ID\n    $insertTable2 = "INSERT INTO Table2 (columnA, columnB) VALUES ('valueA', 'valueB')";\n    mysqli_query($conn, $insertTable2);\n    $table2Id = mysqli_insert_id($conn);\n\n    // Insert into LinkTable using the IDs from Table1 and Table2\n    $insertLinkTable = "INSERT INTO LinkTable (table1_id, table2_id) VALUES ($table1Id, $table2Id)";\n    mysqli_query($conn, $insertLinkTable);\n\n    // Commit the transaction if everything is successful\n    mysqli_query($conn, "COMMIT");\n} catch (Exception $e) {\n    // Rollback the transaction in case of an error\n    mysqli_query($conn, "ROLLBACK");\n    echo "Transaction failed: " . $e->getMessage();\n}\n\n// Close the connection\nmysqli_close($conn);\n?>