<?php\n\nsession_start();\n\n// Simulated database connection and functions\nfunction getAlbumByToken($token) {\n    // Retrieve album ID based on token from your database\n    return [\n        'id' => 5,\n        'is_valid' => true, // Check if token is valid and not expired\n        'user_ip' => '127.0.0.1', // Additional security check for user IP\n    ];\n}\n\n$token = isset($_GET['t']) ? $_GET['t'] : '';\nif (!empty($token)) {\n    $albumInfo = getAlbumByToken($token);\n    if ($albumInfo['is_valid'] && ($_SERVER['REMOTE_ADDR'] === $albumInfo['user_ip'])) {\n        // Store album ID and token in session\n        $_SESSION['album_access_token'] = [\n            'id' => $albumInfo['id'],\n            'token' => $token,\n            'expires_at' => time() + 3600, // Session expires after an hour\n        ];\n        header('Location: /album/' . $albumInfo['id']);\n        exit;\n    } else {\n        echo "Access denied.";\n        http_response_code(403);\n        exit;\n    }\n}\n\nfunction checkAlbumAccess($albumId) {\n    return isset($_SESSION['album_access_token']) &&\n           $_SESSION['album_access_token']['id'] == $albumId &&\n           time() < $_SESSION['album_access_token']['expires_at'];\n}\n\n// Example usage\nif (checkAlbumAccess(5)) {\n    echo "You have access to this album.";\n} else {\n    echo "No access to this album.";\n}