class Friend extends AppModel {\n       public $validate = [\n           'friend_pairs' => [\n               'rule' => ['customCheckForPairs'],\n               'message' => 'At least one name/email pair must be provided',\n               'allowEmpty' => false,\n           ],\n       ];\n\n       public function customCheckForPairs() {\n           foreach ($this->data['Friend'] as $pair) {\n               if (!empty($pair['name']) && !empty($pair['email'])) {\n                   return true;\n               }\n           }\n           return false;\n       }\n   }