<?php\n// This is the directory where images will be saved\n$target = "images/";\n$ok = 0;\n\n// This gets all the other information from the form\n$name = filter_input(INPUT_POST, 'nameMember', FILTER_SANITIZE_STRING);\n$bandMember = filter_input(INPUT_POST, 'bandMember', FILTER_SANITIZE_STRING);\n$pic = basename($_FILES['photo']['name']);\n$about = filter_input(INPUT_POST, 'aboutMember', FILTER_SANITIZE_STRING);\n$bands = filter_input(INPUT_POST, 'otherBands', FILTER_SANITIZE_STRING);\n\n// Check if file is uploaded\nif (!empty($pic)) {\n    $uploaded_type = $_FILES['photo']['type'];\n    $uploaded_size = $_FILES['photo']['size'];\n\n    // Validate file type and size\n    if ($uploaded_type != "image/jpeg" && $uploaded_type != "image/gif") {\n        echo "Invalid file type. Only JPEG or GIF files are allowed.<br>";\n    } elseif ($uploaded_size > 350000) {\n        echo "Your file is too large, 35Kb is the largest file you can upload.<br>";\n    } else {\n        $ok = 1;\n    }\n} else {\n    // If no file is uploaded, default image will be used\n    $pic = 'default.jpg'; // Assuming you have a default image named 'default.jpg'\n    $ok = 1;\n}\n\nif ($ok == 0) {\n    echo "Sorry, your file was not uploaded. Please try again with the correct format.";\n} else {\n    // Connects to your Database using MySQLi\n    $mysqli = new mysqli("localhost", "*******", "******", "project");\n    \n    if ($mysqli->connect_error) {\n        die("Connection failed: " . $mysqli->connect_error);\n    }\n\n    // Use prepared statements to prevent SQL injection\n    $stmt = $mysqli->prepare("INSERT INTO dbProfile (nameMember, bandMember, photo, aboutMember, otherBands) VALUES (?, ?, ?, ?, ?)");\n    $stmt->bind_param("sssss", $name, $bandMember, $pic, $about, $bands);\n\n    if ($stmt->execute()) {\n        echo "Your information has been added to the database.<br/>";\n\n        // Write the photo to the server\n        $target = $target . basename($_FILES['photo']['name']);\n        if (move_uploaded_file($_FILES['photo']['tmp_name'], $target)) {\n            echo "The file ". basename( $_FILES['photo']['name']). " has been uploaded.<br/>";\n        } else {\n            echo "<p>There may have been a problem uploading your file.</p>";\n        }\n    } else {\n        echo "<p>Error: " . $stmt->error . "</p>";\n    }\n\n    $stmt->close();\n    $mysqli->close();\n\n    print "<a class=\"blue\" href=\"createMember.php\">Add Another Record</a> | <a class=\"blue\" href=\"listMember.php\">Band Member Profiles and Affiliates Menu</a>";\n}\n?>