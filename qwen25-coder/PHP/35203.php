private function scan_cleanup($scans) {\n    // Create an array of patient IDs for reviewed scans\n    $reviewed_patient_ids = [];\n    foreach ($scans as $scan) {\n        if ($scan['reviewed'] == 1) {\n            $reviewed_patient_ids[$scan['patientid']] = true;\n        }\n    }\n\n    // Filter out unreviewed scans that have a reviewed version\n    return array_filter($scans, function($scan) use ($reviewed_patient_ids) {\n        if ($scan['reviewed'] == 0 && isset($reviewed_patient_ids[$scan['patientid']])) {\n            return false; // Skip this scan as it has a reviewed version\n        }\n        return true;\n    });\n}\n\n// Usage\n$this->scans = $this->scan_cleanup($this->scans);