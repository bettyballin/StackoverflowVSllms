<?php\nsession_start();\n\n// Generate a unique token for this download request\n$downloadToken = uniqid();\n$_SESSION['downloads'][$downloadToken] = ['completed' => false, 'fileName' => basename($file)];\n\n$file = '/var/www/html/file-to-download.xyz';\nheader('Content-Type: application/octet-stream');\nheader('Content-Length: ' . filesize($file));\nheader('Content-Disposition: attachment; filename=' . basename($file));\n\n// Pass the token to JavaScript\necho "<script>var downloadToken = '$downloadToken';</script>";\n\nreadfile($file);\nexit;\n?>