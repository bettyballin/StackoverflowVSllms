function selectServer(array $servers) {\n    // Calculate total free space across all servers\n    $totalFreeSpace = array_sum(array_column($servers, 'free_space'));\n\n    // Initialize an array for adjusted weights\n    $adjustedWeights = [];\n\n    foreach ($servers as $index => $server) {\n        // Calculate the base weight multiplier (default is 1.0)\n        // This can be changed if you want to assign static weights\n        $baseWeightMultiplier = 1.0;\n\n        // Calculate adjusted weight considering free space and base weight\n        $adjustedWeights[$index] = ($server['free_space'] / $totalFreeSpace) * $baseWeightMultiplier;\n    }\n\n    // Generate a random number between 0 and 1\n    $randomNumber = mt_rand() / mt_getrandmax();\n\n    // Select server based on adjusted weights\n    $cumulativeProbability = 0.0;\n    foreach ($adjustedWeights as $index => $weight) {\n        $cumulativeProbability += $weight;\n        if ($randomNumber < $cumulativeProbability) {\n            return $servers[$index];\n        }\n    }\n\n    // Fallback to first server if none selected (should not happen)\n    return $servers[0];\n}\n\n// Example usage\n$servers = [\n    ['host' => 'server1', 'free_space' => 200],  // in GB\n    ['host' => 'server2', 'free_space' => 300],\n    ['host' => 'server3', 'free_space' => 400]\n];\n\n$selectedServer = selectServer($servers);\necho "Selected server: {$selectedServer['host']}";