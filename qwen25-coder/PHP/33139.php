<?php\n$mesg = "";\n\nif (isset($_POST['Upload'])) {\n    // Check for errors\n    if ($_FILES['uploaded']['error'] !== UPLOAD_ERR_OK) {\n        $mesg = "Error uploading file: " . $_FILES['uploaded']['name'] . ' Error Code: ' . $_FILES['uploaded']['error'];\n        exit;\n    }\n\n    // Size condition\n    if ($_FILES['uploaded']['size'] > 350000) {\n        $mesg = "Your file is too large.";\n        exit;\n    }\n\n    // Sanitize the filename\n    $filename = basename($_FILES['uploaded']['name']);\n    $sanitized_filename = preg_replace("/[^A-Za-z0-9.]/", '', $filename);\n\n    if (move_uploaded_file($_FILES['uploaded']['tmp_name'], "upload/" . $sanitized_filename)) {\n        $mesg = "The file " . htmlspecialchars($sanitized_filename) . " has been uploaded";\n    } else {\n        $mesg = "Sorry, there was a problem uploading your file.";\n    }\n} else {\n    $mesg = "Select a File to upload.";\n}\n\necho htmlspecialchars($mesg);\n\n?>\n\n<br /><br />\n<form enctype="multipart/form-data" action="" method="POST">\nPlease choose a file: <input name="uploaded" type="file" /><br />\n<input type="submit" name="Upload" value="Upload" />\n</form>