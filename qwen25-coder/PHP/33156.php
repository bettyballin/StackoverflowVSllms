<?php\n// Retrieve pk from POST data\nif (isset($_POST["pk"])) {\n    $pk = $_POST["pk"];\n}\n\n$con = mysqli_connect("localhost", "x", "x", "x");\necho "Upload: " . $_FILES["file"]["name"] . "<br />";\necho "Type: " . $_FILES["file"]["type"] . "<br />";\necho "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";\necho "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";\n\n// Sanitize and secure the file name\n$fileName = basename($_FILES["file"]["name"]);\n$uploadPath = "./" . $fileName;\n\n// Validate and check for file upload errors before moving the uploaded file\nif ($_FILES["file"]["error"] == 0) {\n    // Move the uploaded file to a new location\n    if (move_uploaded_file($_FILES["file"]["tmp_name"], $uploadPath)) {\n        echo "Stored in: " . $uploadPath;\n\n        $fileQuery = "INSERT INTO FILES VALUES (?, ?)";\n        if ($fileInsert = $con->prepare($fileQuery)) {\n            $fileInsert->bind_param("ss", $pk, $fileName);\n            $fileInsert->execute();\n            $fileInsert->close();\n        } else {\n            print_r($con->error);\n        }\n    } else {\n        echo "Failed to move uploaded file.";\n    }\n} else {\n    echo "Error uploading file: " . $_FILES["file"]["error"];\n}\n?>