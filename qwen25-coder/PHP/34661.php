<?php\nfunction addUser($username, $password) {\n    // Using escapeshellarg to prevent shell injection\n    $command = sprintf('sudo /usr/sbin/adduser --disabled-password %s', escapeshellarg($username));\n    exec($command, $output, $returnVar);\n\n    if ($returnVar !== 0) {\n        throw new \Exception("Failed to add user. Output: " . implode("\n", $output));\n    }\n\n    // Set the password\n    $passwordCommand = sprintf('echo %s:%s | sudo /usr/sbin/chpasswd', escapeshellarg($username), escapeshellarg($password));\n    exec($passwordCommand, $outputPass, $returnVarPass);\n\n    if ($returnVarPass !== 0) {\n        throw new \Exception("Failed to set password. Output: " . implode("\n", $outputPass));\n    }\n}\n\ntry {\n    addUser('newuser', 'securePassword123!');\n} catch (\Exception $e) {\n    echo $e->getMessage();\n}\n?>