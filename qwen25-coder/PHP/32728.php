<?php\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    // Check if file was uploaded without errors\n    if (isset($_FILES["uploaded_file"]) && $_FILES["uploaded_file"]["error"] == 0) {\n        $allowedTypes = [\n            "image/jpeg" => ".jpg",\n            "image/png" => ".png",\n            "application/pdf" => ".pdf",\n            "text/plain" => ".txt"\n        ];\n\n        $filename = $_FILES["uploaded_file"]["name"];\n        $filetype = $_FILES["uploaded_file"]["type"];\n        $filesize = $_FILES["uploaded_file"]["size"];\n\n        // Verify file extension\n        $ext = pathinfo($filename, PATHINFO_EXTENSION);\n        if (!array_key_exists($filetype, $allowedTypes) || stripos($filename, '.' . $allowedTypes[$filetype]) === false) {\n            die("Error: Please select a valid file format.");\n        }\n\n        // Verify file size - 3MB maximum\n        $maxsize = 3 * 1024 * 1024;\n        if ($filesize > $maxsize) die("Error: File size is larger than the allowed limit.");\n\n        // Change name of uploaded file to prevent collisions and move file\n        $newfilename = 'uploads/' . uniqid() . '.' . $allowedTypes[$filetype];\n        if (move_uploaded_file($_FILES["uploaded_file"]["tmp_name"], $newfilename)) {\n            echo "Your file was uploaded successfully.";\n        } else {\n            echo "There was an error uploading your file. Please try again!";\n        }\n    } else {\n        echo "Error: " . $_FILES["uploaded_file"]["error"];\n    }\n}\n?>