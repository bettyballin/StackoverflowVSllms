function procLogin($user, $pass, $remember) {\n    global $session, $form;\n    $retval = $session->login($user, $pass, $remember);\n    \n    if ($retval) {\n        $role = $session->getUserRole(); // Assume thereâ€™s a method to get the user's role\n        header("Location: " . $session->referrer);\n        echo json_encode(array('success' => true, 'role' => $role));\n        exit; // Ensure no further output is sent\n    } else {\n        $_SESSION['value_array'] = $_POST;\n        $_SESSION['error_array'] = $form->getErrorArray();\n        header("Location: " . $session->referrer);\n        echo json_encode(array('success' => false, 'role' => null));\n        exit; // Ensure no further output is sent\n    }\n}