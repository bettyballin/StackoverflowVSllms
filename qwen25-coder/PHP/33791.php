// Setup the database connection and enable the profiler.\n$profiler = new Doctrine_Connection_Profiler();\n$conn = Doctrine_Manager::connection('mysql://user:password@localhost/dbname', 'doctrine_connection');\n$conn->setListener($profiler);\n\n// Execute a test query to generate some events (ensure this is done after setting up the profiler).\nDoctrine_Query::create()->from('TableName')->limit(1)->fetchOne();\n\n// Fetch and display profiling information.\n$query_count = 0;\n$time = 0;\necho "<table width='100%' border='1'>";\nforeach ($profiler as $event) {\n    if ($event->getName() != 'execute') {\n        continue;\n    }\n    $query_count++;\n    echo "<tr>";\n    $time += $event->getElapsedSecs();\n    echo "<td>" . htmlspecialchars($event->getName()) . "</td><td>" . sprintf("%f", $event->getElapsedSecs()) . "</td>";\n    echo "<td>" . htmlspecialchars($event->getQuery()) . "</td>";\n    $params = $event->getParams();\n    if (!empty($params)) {\n        echo "<td>";\n        echo join(', ', array_map('htmlspecialchars', $params));\n        echo "</td>";\n    }\n    echo "</tr>";\n}\necho "</table>";\necho "Total time: " . $time . ", query count: $query_count <br>\n";