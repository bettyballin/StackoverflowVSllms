<?php\n\nfunction generateUniqueCode($pdo, $length = 8) {\n    // Define a safe character set that excludes ambiguous characters.\n    $characters = '23456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\n    $codeLength = $length;\n    \n    while (true) {\n        $generatedCode = '';\n        for ($i = 0; $i < $codeLength; $i++) {\n            // Randomly select a character from the safe set.\n            $randomIndex = random_int(0, strlen($characters) - 1);\n            $generatedCode .= $characters[$randomIndex];\n        }\n        \n        // Check if this code already exists in the database to avoid duplicates.\n        $stmt = $pdo->prepare('SELECT COUNT(*) FROM scratch_codes WHERE code = :code');\n        $stmt->execute([':code' => $generatedCode]);\n        $count = $stmt->fetchColumn();\n        \n        if ($count === 0) {\n            // Code is unique, return it.\n            return $generatedCode;\n        }\n    }\n}\n\n// Create a PDO instance (make sure to handle exceptions in production).\n$dsn = 'mysql:host=localhost;dbname=your_database';\n$username = 'your_username';\n$password = 'your_password';\n\ntry {\n    $pdo = new PDO($dsn, $username, $password);\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n    // Generate a unique code\n    $uniqueCode = generateUniqueCode($pdo);\n    echo "Generated Code: " . $uniqueCode;\n\n} catch (PDOException $e) {\n    die("Could not connect to the database: " . $e->getMessage());\n}\n\n?>