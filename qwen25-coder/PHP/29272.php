<?php\n\n$input = "asdasd asdasd  asdas1\n asda234 4545    54\n  34545 345  34534\n34 345";\n\n// Replace two or more spaces with the same number of &nbsp;\n$output = preg_replace('/ {2,}/', function ($matches) {\n    return str_repeat('&nbsp;', strlen($matches[0]));\n}, $input);\n\n// Replace single space at the start of lines with a &nbsp;\n$output = preg_replace('/^ /m', '&nbsp;', $output);\n\necho htmlspecialchars($output);\n?>