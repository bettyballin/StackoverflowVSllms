<?php\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    $target_dir = "uploads/";\n    \n    // Check if image file is a actual image or fake image\n    $check = getimagesize($_FILES["image"]["tmp_name"]);\n    if ($check !== false) {\n        // Generate a unique filename to prevent overwriting files and security issues\n        $extension = pathinfo(basename($_FILES["image"]["name"]), PATHINFO_EXTENSION);\n        $target_file = $target_dir . uniqid() . '.' . strtolower($extension);\n\n        // Allow certain file formats\n        if(strtolower($extension) == "jpg" || strtolower($extension) == "jpeg"\n            || strtolower($extension) == "png" || strtolower($extension) == "gif") {\n\n            // Check for errors in the upload process\n            if ($_FILES["image"]["error"] === UPLOAD_ERR_OK) {\n                if (move_uploaded_file($_FILES["image"]["tmp_name"], $target_file)) {\n                    echo "The file ". htmlspecialchars( basename( $_FILES["image"]["name"])). " has been uploaded.";\n                } else {\n                    echo "Sorry, there was an error uploading your file.";\n                }\n            } else {\n                echo "Error: " . $_FILES['image']['error'];\n            }\n        } else {\n            echo "Sorry, only JPG, JPEG, PNG & GIF files are allowed.";\n        }\n    } else {\n        echo "File is not an image.";\n    }\n}\n?>