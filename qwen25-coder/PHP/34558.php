// Session start\nsession_start();\nif (isset($_SERVER['REQUEST_METHOD']) && $_SERVER['REQUEST_METHOD'] == "POST") {\n    // Check for language from the form\n    $lang = isset($_POST['lang']) ? $_POST['lang'] : null;\n    \n    // If the language is set via image input, it might come through coordinates, adjust accordingly\n    if (!isset($lang) && isset($_POST['lang_x'])) { // Assuming 'en' was the value for the image input name\n        $lang = 'en'; // You should dynamically handle this based on your image inputs\n    }\n\n    // Sanitize the language variable to prevent potential security issues\n    $lang = preg_replace('/[^a-zA-Z0-9\-_]/', '', $lang);\n\n    if (!empty($lang)) {\n        $_SESSION['site_lang'] = $lang;\n        header("Location: " . $_SESSION['page_refer']);\n        exit();\n    }\n} else {\n    // Showing form with flags... which returns var 'lang'\n}\n?>