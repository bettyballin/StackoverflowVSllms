$mysqli = new mysqli("host", "user", "password", "database");\n$stmt = $mysqli->prepare("\nSELECT tblpm.* \nFROM tblpm\nINNER JOIN (\n    SELECT thread_id, MAX(date_sent) AS max_date_sent\n    FROM tblpm\n    WHERE receiver_id = ?\n    GROUP BY thread_id\n) AS latest_messages ON tblpm.thread_id = latest_messages.thread_id AND tblpm.date_sent = latest_messages.max_date_sent\nWHERE tblpm.receiver_id = ?\nORDER BY tblpm.date_sent DESC");\n\n$stmt->bind_param('ii', $usrID, $usrID);\n$stmt->execute();\n$result = $stmt->get_result();\n\nwhile ($row = $result->fetch_assoc()) {\n    // Process your data here\n}