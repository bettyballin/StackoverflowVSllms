function negotiateContent(array $supportedTypes): ?string {\n    // Check if we have HTTP_ACCEPT in server headers\n    $acceptHeader = $_SERVER['HTTP_ACCEPT'] ?? '';\n\n    // Split the header by commas to get individual media types\n    $types = explode(',', $acceptHeader);\n\n    // Prepare an array to hold weighted preferences\n    $preferences = [];\n\n    foreach ($types as $type) {\n        // Split each type by ; to separate type and quality parameter\n        $parts = explode(';', trim($type));\n        $mediaType = $parts[0];\n        \n        // Assume a default quality of 1.0 if not specified\n        $quality = 1.0;\n        if (isset($parts[1])) {\n            // Extract the q value if present\n            parse_str(str_replace(' ', '', $parts[1]), $params);\n            $quality = isset($params['q']) ? (float)$params['q'] : 1.0;\n        }\n        \n        // Store the media type with its quality in preferences array\n        if ($quality > 0) {\n            $preferences[$mediaType] = $quality;\n        }\n    }\n\n    // Sort types by their quality preference descending\n    arsort($preferences, SORT_NUMERIC);\n\n    // Check which supported types are available in the sorted list\n    foreach (array_keys($preferences) as $type) {\n        if (in_array($type, $supportedTypes)) {\n            return $type;\n        }\n    }\n\n    // If no suitable type is found, return null or a default value\n    return 'text/html'; // Or null if you prefer to handle it differently\n}\n\n// Example usage\n$supportedTypes = ['application/xhtml+xml', 'text/html'];\n$preferredType = negotiateContent($supportedTypes);\nif ($preferredType === 'application/xhtml+xml') {\n    header('Content-Type: application/xhtml+xml');\n    echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>XHTML Example</title></head><body><p>Hello, world!</p></body></html>';\n} else {\n    header('Content-Type: text/html');\n    echo '<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>HTML Example</title></head><body><p>Hello, world!</p></body></html>';\n}