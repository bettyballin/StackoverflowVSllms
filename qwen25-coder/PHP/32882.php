function addParam($url, $paramName, $paramValue) {\n    $separator = strpos($url, '?') !== false ? '&' : '?';\n    // Parse the URL into components\n    $parsedUrl = parse_url($url);\n    if (!isset($parsedUrl['query'])) {\n        return $url . $separator . http_build_query([$paramName => $paramValue]);\n    }\n    // Convert query string to array of parameters\n    parse_str($parsedUrl['query'], $queryParams);\n    // Update the parameter value\n    $queryParams[$paramName] = $paramValue;\n    // Rebuild the URL with updated query parameters\n    return http_build_url($url, ['query' => http_build_query($queryParams)]);\n}\n\n// Helper function to rebuild the URL with updated components\nfunction http_build_url($url, $parts) {\n    $parsedUrl = parse_url($url);\n    foreach ($parts as $key => $value) {\n        if (isset($value)) {\n            $parsedUrl[$key] = $value;\n        }\n    }\n    return (isset($parsedUrl['scheme']) ? $parsedUrl['scheme'] . '://' : '') .\n           (isset($parsedUrl['host']) ? $parsedUrl['host'] : '') .\n           (isset($parsedUrl['port']) ? ':' . $parsedUrl['port'] : '') .\n           (isset($parsedUrl['path']) ? $parsedUrl['path'] : '') .\n           (isset($parsedUrl['query']) ? '?' . $parsedUrl['query'] : '') .\n           (isset($parsedUrl['fragment']) ? '#' . $parsedUrl['fragment'] : '');\n}\n\n// Usage example\n$printPageURL = "http://www.somesite.com/print.php?newUser=1";\n$redirectURL = addParam($printPageURL, 'mode', 1);\necho $redirectURL; // Output: http://www.somesite.com/print.php?newUser=1&mode=1