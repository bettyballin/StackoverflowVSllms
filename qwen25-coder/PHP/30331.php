// Ensure the form is valid:\n$table = new Subscribers();\n$rowset = $table->fetchAll();\n\n$attachmentPath = $form->getElement('attachment')->getValue(); // Get the file path\n\nforeach ($rowset as $row) {\n    $mail = new Zend_Mail();\n    \n    $mail->setBodyText($form->getElement('body')->getValue())\n         ->setFrom('weekly-update@email.com', 'Weekly Update')\n         ->addTo($row->email, $row->name) // Add the recipient with name if available\n         ->setSubject($form->getElement('subject')->getValue());\n\n    // Read the file contents and attach it\n    $fileContents = file_get_contents($attachmentPath);\n    \n    // Create the attachment\n    $attachment = $mail->createAttachment(\n        $fileContents, \n        'application/pdf',  // MIME type for PDF files\n        Zend_Mime::ENCODING_BASE64, // Set encoding to base64\n        Zend_Mime::DISPOSITION_ATTACHMENT,\n        basename($attachmentPath)\n    );\n\n    // Send the email\n    try {\n        $mail->send();\n    } catch (Exception $e) {\n        error_log("Failed to send email to {$row->email}: " . $e->getMessage());\n    }\n}