<?php\n\n// Simulated messages database or source\n$messages = ["Hello", "How are you?", "Long polling is fun!"];\n$currentMessageIndex = 0;\n\nheader("Content-Type: application/json");\n\nfunction sendResponse($message) {\n    echo json_encode(['message' => $message]);\n    ob_flush();\n    flush();\n}\n\n// Simulate fetching new data\nfunction getNewMessage(&$currentMessageIndex, $messages) {\n    global $currentMessageIndex;\n\n    sleep(5); // Wait 5 seconds before sending a response (simulate delay)\n\n    if ($currentMessageIndex < count($messages)) {\n        return $messages[$currentMessageIndex++];\n    } else {\n        $currentMessageIndex = 0; // Restart from the beginning\n        return null;\n    }\n}\n\n// Main loop to handle long polling\nwhile (true) {\n    $newMessage = getNewMessage($currentMessageIndex, $messages);\n    if ($newMessage !== null) {\n        sendResponse($newMessage);\n        exit;\n    } else {\n        // In a real-world scenario, you might also want to add a timeout here\n        // to ensure the connection doesn't hang indefinitely.\n    }\n}\n?>