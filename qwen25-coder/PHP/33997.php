<?php\n\n// Function to check server load average\nfunction isServerBusy($threshold = 1.0) {\n    $load = sys_getloadavg();\n    // Check first minute load average against threshold\n    return $load[0] > $threshold;\n}\n\n// Function to check MySQL process list\nfunction isMysqlBusy($db, $threshold = 5) {\n    $result = $db->query("SHOW PROCESSLIST");\n    if ($result === false) {\n        throw new Exception("Failed to get MySQL process list: " . $db->error);\n    }\n    // Count the number of processes\n    return $result->num_rows > $threshold;\n}\n\n// Example usage\n$mysqli = new mysqli('localhost', 'user', 'password', 'database');\n\nif (!$mysqli->connect_error) {\n    if (isServerBusy() || isMysqlBusy($mysqli)) {\n        echo "Server or MySQL is busy.\n";\n    } else {\n        echo "Server and MySQL are not busy. Running cleanup...\n";\n        // Run your cleanup script here\n    }\n} else {\n    echo "Failed to connect to MySQL: " . $mysqli->connect_error;\n}\n\n$mysqli->close();\n?>