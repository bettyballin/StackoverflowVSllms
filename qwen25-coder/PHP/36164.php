<?php\n$command = 'hg clone 2>&1 /path/to/repository';\n$outputFile = tempnam(sys_get_temp_dir(), 'hgclone');\n$descriptorspec = array(\n   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from\n   1 => $outputFile,        // stdout is written to the designated file\n   2 => &$outputFile         // stderr is also written to the designed file\n);\n\n$process = proc_open($command, $descriptorspec, $pipes);\nif (is_resource($process)) {\n    // Close stdin as we don't need to write anything\n    fclose($pipes[0]);\n    \n    // You can periodically read from the output file here\n    // and send updates back to the user via AJAX or similar.\n    while (!feof(fopen($outputFile, 'r'))) {\n        $currentOutput = file_get_contents($outputFile);\n        // Send $currentOutput to your user interface for feedback\n        echo "Current Output:\n";\n        echo nl2br(htmlspecialchars($currentOutput));\n        \n        ob_flush();\n        flush();\n        sleep(1); // Wait a bit before checking the output file again\n    }\n    \n    // Close the process\n    $return_value = proc_close($process);\n}\n\n// Remove the temporary file if it's no longer needed\nunlink($outputFile);\n?>