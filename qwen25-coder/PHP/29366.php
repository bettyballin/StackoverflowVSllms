<?php\n$memcached = new Memcached();\n$serverAdded = $memcached->addServer('127.0.0.1', 11211);\n\nif (!$serverAdded) {\n    trigger_error("Failed to add server", E_USER_ERROR);\n}\n\n$key = 'therows1';\n$data = $memcached->get($key);\n\nif ($data === false) { // Use strict comparison\n    // Data not in cache, get from MySQL and store in cache\n    $myfriends = findfriend2(); // this function gets our array from mysql\n    if ($memcached->set($key, $myfriends, 30)) {\n        echo '<pre>';\n        print_r($myfriends); // print the mysql version\n        echo '</pre>';\n    } else {\n        trigger_error("Failed to set data in cache", E_USER_WARNING);\n        // Fallback: directly use MySQL data if caching fails\n        echo '<pre>';\n        print_r($myfriends);\n        echo '</pre>';\n    }\n} else {\n    echo '<pre>';\n    print_r($data); //print the cached version\n    echo '</pre>';\n}\n?>