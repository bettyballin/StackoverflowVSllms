<?php\n\nfunction calculateTotalPrice($cartItems, $itemType1, $itemType2, $discount) {\n    $hasItemType1 = false;\n    $hasItemType2 = false;\n\n    foreach ($cartItems as $item) {\n        if ($item['type'] == $itemType1 && $item['quantity'] > 0) {\n            $hasItemType1 = true;\n        }\n        if ($item['type'] == $itemType2 && $item['quantity'] > 0) {\n            $hasItemType2 = true;\n        }\n    }\n\n    $subtotal = 0;\n    foreach ($cartItems as $item) {\n        $subtotal += $item['price'] * $item['quantity'];\n    }\n\n    if ($hasItemType1 && $hasItemType2) {\n        return max(0, $subtotal - $discount); // Ensure total doesn't go below zero\n    }\n\n    return $subtotal;\n}\n\n// Example usage:\n$cartItems = [\n    ['type' => 'book', 'price' => 35, 'quantity' => 1],\n    ['type' => 'magazine', 'price' => 20, 'quantity' => 1]\n];\n\n$totalPrice = calculateTotalPrice($cartItems, 'book', 'magazine', 50);\necho "Total Price: $" . $totalPrice;\n\n?>