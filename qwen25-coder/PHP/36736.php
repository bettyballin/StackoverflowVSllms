function wikiToXhtml($wikiText) {\n    // Convert headings\n    $xhtml = preg_replace('/===(.+?)===/', '<h3>$1</h3>', $wikiText);\n    $xhtml = preg_replace('/==(.*?)==/', '<h2>$1</h2>', $xhtml);\n\n    // Convert bold and italic\n    $xhtml = preg_replace("/'''(.*?)'''/", '<strong>$1</strong>', $xhtml);\n    $xhtml = preg_replace("/''(.*?)''/", '<em>$1</em>', $xhtml);\n\n    // Convert strikethrough\n    $xhtml = preg_replace('/<s>(.*?)<\/s>/', '<del>$1</del>', $xhtml);\n\n    // Convert lists (unordered)\n    $xhtml = preg_replace_callback(\n        '/^\*(.+)$/m',\n        function ($matches) {\n            return '<li>' . trim($matches[1]) . '</li>';\n        },\n        $xhtml\n    );\n    $xhtml = preg_replace('/<li>(.*?)<\/li>/', '<ul><li>$1</li></ul>', $xhtml);\n\n    // Convert lists (ordered)\n    $xhtml = preg_replace_callback(\n        '/^#(.+)$/m',\n        function ($matches) {\n            return '<li>' . trim($matches[1]) . '</li>';\n        },\n        $xhtml\n    );\n    $xhtml = preg_replace('/<li>(.*?)<\/li>/', '<ol><li>$1</li></ol>', $xhtml);\n\n    // Convert links\n    $xhtml = preg_replace('/\[http:\/\/(.*?) (.*?)\]/', "<a href=\"http://$1\">$2</a>", $xhtml);\n    $xhtml = preg_replace('/\[\[(.*?):(.*?)\]\]/', '<img src="$2" alt="$1" />', $xhtml);\n\n    // Convert blockquote\n    $xhtml = preg_replace('/> (.*)/', '<blockquote>$1</blockquote>', $xhtml);\n\n    // Convert source code\n    $xhtml = preg_replace_callback(\n        '/<source lang="([^"]+)">(.+?)<\/source>/s',\n        function ($matches) {\n            return "<pre><code class=\"language-{$matches[1]}\">" . htmlspecialchars($matches[2]) . "</code></pre>";\n        },\n        $xhtml\n    );\n\n    // Replace multiple new lines with a single <br>\n    $xhtml = preg_replace("/\n{2,}/", '<br>', $xhtml);\n\n    return $xhtml;\n}\n\n$wikiText = "Default text\n== Heading 1 ==\n=== Heading 2 ===\n'''Bold'''\n''Italic''\n<s>Strikethrough</s>\n* List item 1\n# Numbered item 1\n[[Image:http://domain.com/image.png|Image name]]\n[http://google.com Link text goes here]\n> Blockquote\n<source lang=\"language\">Source code</source>";\n\necho wikiToXhtml($wikiText);