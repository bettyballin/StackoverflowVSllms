<?php\n// Database configuration\n$host = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database';\n\ntry {\n    // Create connection\n    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8", $username, $password);\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n    // Batch size and offset\n    $batchSize = 25;\n    $offset = 0;\n\n    while (true) {\n        // Fetch emails in batches\n        $stmt = $pdo->prepare("SELECT * FROM email_queue LIMIT :limit OFFSET :offset");\n        $stmt->bindParam(':limit', $batchSize, PDO::PARAM_INT);\n        $stmt->bindParam(':offset', $offset, PDO::PARAM_INT);\n        $stmt->execute();\n        $emails = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        // Break if no more emails to process\n        if (empty($emails)) {\n            break;\n        }\n\n        // Send each email\n        foreach ($emails as $email) {\n            $to = $email['recipient'];\n            $subject = $email['subject'];\n            $message = $email['body'];\n            $headers = 'From: your-email@example.com' . "\r\n" .\n                       'Reply-To: your-email@example.com' . "\r\n" .\n                       'X-Mailer: PHP/' . phpversion();\n\n            if (mail($to, $subject, $message, $headers)) {\n                // Mark email as sent\n                $updateStmt = $pdo->prepare("UPDATE email_queue SET status = 'sent' WHERE id = :id");\n                $updateStmt->bindParam(':id', $email['id']);\n                $updateStmt->execute();\n            }\n        }\n\n        // Move to the next batch\n        $offset += $batchSize;\n    }\n} catch (PDOException $e) {\n    echo "Error: " . $e->getMessage();\n}\n?>