function file_lines($fname) {\n    $handle = fopen($fname, 'r');\n    if ($handle === false) {\n        throw new Exception("Could not open file {$fname}");\n    }\n    \n    while (($line = fgets($handle)) !== false) {\n        yield rtrim($line); // Yield each line one at a time\n    }\n    \n    fclose($handle);\n}\n\nforeach (file_lines('somefile') as $line) {\n    // Process the line\n}