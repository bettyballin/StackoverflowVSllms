<?php\n\nfunction processSMSResponse($response, $code) {\n    // Convert both response and code to lowercase for consistent comparison\n    $lowerCode = strtolower($code);\n    $pattern = '/^\s*' . preg_quote($lowerCode, '/') . '\s+(\d{1,5})\s*$/';\n\n    if (preg_match($pattern, strtolower($response), $matches)) {\n        // Extract the digits part\n        $digits = $matches[1];\n        \n        // Check that each digit is between 1 and 5\n        for ($i = 0; $i < strlen($digits); $i++) {\n            if (!in_array($digits[$i], ['1', '2', '3', '4', '5'])) {\n                return "Error: Digits must be between 1 and 5.";\n            }\n        }\n\n        // Ensure exactly 5 digits are provided\n        if (strlen($digits) !== 5) {\n            return "Error: Exactly 5 digits are required.";\n        }\n\n        // Split the digits into an array\n        $digitArray = str_split($digits);\n        return $digitArray;\n    } else {\n        return "Error: Invalid format. Please use the format '<code> <XXXXX>'.";\n    }\n}\n\n// Example usage:\n$response = "Freetrip 12345";\n$code = "Freetrip";\n$result = processSMSResponse($response, $code);\n\nif (is_array($result)) {\n    echo "Digits received: " . implode(", ", $result) . PHP_EOL;\n} else {\n    echo $result . PHP_EOL;\n}\n?>