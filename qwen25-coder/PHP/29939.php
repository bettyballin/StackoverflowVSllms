<?php\nsession_start();\n\nif (!isset($_SESSION['pid'])) {\n    // Start the process and store its PID in session\n    $descriptorspec = array(\n       0 => array("pipe", "r"),  // stdin is a pipe that the child will read from\n       1 => array("pipe", "w"),  // stdout is a pipe that the child will write to\n   );\n\n   // Command to execute\n   $cmd = '/usr/bin/wget http://example.com/largefile.zip -O largefile.zip';\n   $process = proc_open($cmd, $descriptorspec, $pipes);\n\n   if (is_resource($process)) {\n       $_SESSION['pid'] = $process;\n   }\n}\n\n$process = $_SESSION['pid'];\n\n// Read output until the process ends\nwhile (!feof($pipes[1])) {\n    // Get current line of output\n    $line = fgets($pipes[1]);\n    \n    // If line contains percentage, extract it\n    if (preg_match('/([0-9\.]+)%/', $line, $matches)) {\n        echo $matches[1];\n        exit;\n    }\n}\n\n// Close the process pipes and process\nfclose($pipes[0]);\nfclose($pipes[1]);\nproc_close($process);\n\nunset($_SESSION['pid']);\n\necho 100; // Indicate completion\n?>