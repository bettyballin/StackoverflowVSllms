<?php\nfunction calculateOccurrences($eventId, $startDate, $endDate) {\n    // Connect to MySQL (make sure this part is secure)\n    $db = new mysqli('localhost', 'username', 'password', 'database');\n\n    $query = "SELECT * FROM recurrences WHERE event_id = ?";\n    $stmt = $db->prepare($query);\n    $stmt->bind_param("i", $eventId);\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    while ($row = $result->fetch_assoc()) {\n        extract($row);\n\n        // Calculate occurrences based on type\n        $currentDate = clone $startDate;\n        while ($currentDate <= $endDate) {\n            echo "Event occurs on: " . $currentDate->format('Y-m-d H:i:s') . "\n";\n\n            if ($type == 'daily') {\n                $currentDate->add(new DateInterval('P' . $interval . 'D'));\n            } elseif ($type == 'weekly') {\n                $currentDate->add(new DateInterval('P' . $interval * 7 . 'D'));\n            } elseif ($type == 'monthly') {\n                // Add one month, then adjust to the same day of the month\n                $currentDate->modify("+" . $interval . " months");\n            } elseif ($type == 'yearly') {\n                $currentDate->modify("+" . $interval . " years");\n            }\n\n            // If an end_date is specified, stop adding more occurrences\n            if (!is_null($end_date) && $currentDate > new DateTime($end_date)) {\n                break;\n            }\n        }\n    }\n}\n\n// Usage example\n$eventId = 1;\n$startDate = new DateTime('2023-10-01');\n$endDate = new DateTime('2024-10-01');\n\ncalculateOccurrences($eventId, $startDate, $endDate);\n?>