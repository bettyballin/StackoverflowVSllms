$doc = new DOMDocument('1.0', 'UTF-8');\n// Suppress warnings due to malformed HTML\n@$doc->loadHTML($text, LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD);\n\n$anchors = $doc->getElementsByTagName('a');\n\nforeach ($anchors as $a) {\n    // Backup original node\n    $originalNode = $a;\n    // Clone the node for manipulation\n    $newNode = $a->cloneNode(true);\n    if (!is_null($a->parentNode)) {\n        // Replace the old node with a clean version of itself\n        $a->parentNode->replaceChild(\n            $doc->importNode($newNode, true), \n            $originalNode\n        );\n    }\n    $newNode->setAttribute('href', 'http://google.com');\n}\n\n// Save XML in UTF-8 and then convert to HTML entities minimal\nreturn mb_convert_encoding($doc->saveXML(), 'HTML-ENTITIES', 'UTF-8');