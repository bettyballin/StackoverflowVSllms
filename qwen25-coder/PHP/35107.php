<?php\n$file = '/path/to/your/datafile.txt';\n\n// Open file for writing\n$handle = fopen($file, 'c+');\n\nif ($handle) {\n    // Lock the file for exclusive access (no other process can write to it)\n    if (flock($handle, LOCK_EX)) {\n        try {\n            // Read the contents, modify them as needed, and then write back to the file\n            $content = fread($handle, filesize($file));\n            \n            // Example: append some data\n            fwrite($handle, PHP_EOL . 'New data here.');\n\n            // Optionally truncate the file if it's being rewritten from scratch\n            // ftruncate($handle, 0);\n\n        } finally {\n            // Always unlock the file when you are finished\n            flock($handle, LOCK_UN);\n        }\n    }\n\n    fclose($handle);\n} else {\n    echo "Could not open file.";\n}\n?>