<?php\n// Establish connections\n$connectionDb1 = new mysqli('host_db1', 'user_db1', 'password_db1', 'db1');\n$connectionDb2 = new mysqli('host_db2', 'user_db2', 'password_db2', 'db2');\n\nif ($connectionDb1->connect_error || $connectionDb2->connect_error) {\n    die("Connection failed: " . ($connectionDb1->connect_error ?: $connectionDb2->connect_error));\n}\n\n// Fetch ids from db2.accounts\n$query = "SELECT id FROM accounts";\n$result = $connectionDb2->query($query);\n\n$ids = [];\nwhile ($row = $result->fetch_assoc()) {\n    $ids[] = intval($row['id']);\n}\n\nif (!empty($ids)) {\n    // Prepare the DELETE query using IN clause with placeholders\n    $placeholders = implode(',', array_fill(0, count($ids), '?'));\n    $deleteQuery = "DELETE FROM players WHERE acc NOT IN ($placeholders)";\n    \n    // Use prepared statement to prevent SQL injection\n    if ($stmt = $connectionDb1->prepare($deleteQuery)) {\n        $types = str_repeat('i', count($ids)); // Assuming ids are integers\n        $refs = array_merge([$stmt], array_map(function (&$v) { return &$v; }, $ids));\n        \n        call_user_func_array([$stmt, 'bind_param'], $refs);\n        \n        if ($stmt->execute()) {\n            echo "Rows deleted successfully.";\n        } else {\n            echo "Error deleting rows: " . $stmt->error;\n        }\n        \n        $stmt->close();\n    } else {\n        echo "Failed to prepare the statement: " . $connectionDb1->error;\n    }\n} else {\n    echo "No ids found in db2.accounts.";\n}\n\n// Close connections\n$connectionDb1->close();\n$connectionDb2->close();\n?>