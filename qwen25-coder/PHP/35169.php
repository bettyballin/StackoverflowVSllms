function auto_assign_category_thumbnail($post_ID, $post) {\n    // Check that it's not just quick save or autosave.\n    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE || defined('XMLRPC_REQUEST')) {\n        return;\n    }\n\n    // Get all categories associated with the post.\n    $categories = get_the_category($post_ID);\n\n    // If no categories are assigned, do nothing.\n    if (!$categories) {\n        return;\n    }\n\n    foreach ($categories as $category) {\n        $cat_id = $category->term_id;\n\n        // Check if the category already has a thumbnail.\n        if (get_term_meta($cat_id, 'thumbnail_id', true)) {\n            continue; // Skip categories that already have thumbnails.\n        }\n\n        // Fetch all images attached to the post.\n        $attachments = get_children(array(\n            'post_parent' => $post_ID,\n            'post_status' => 'inherit',\n            'post_type' => 'attachment',\n            'post_mime_type' => 'image'\n        ));\n\n        // If there are no attachments, continue to next category.\n        if (empty($attachments)) {\n            continue;\n        }\n\n        // Get the ID of the first image attached to the post.\n        $first_image_id = reset(array_keys($attachments));\n\n        // Set this image as the category thumbnail.\n        update_term_meta($cat_id, 'thumbnail_id', $first_image_id);\n    }\n}\n\nadd_action('save_post', 'auto_assign_category_thumbnail', 10, 2);\n\n// Optionally, add admin notice if no images found\nfunction check_category_thumbnail_notice() {\n    global $post;\n\n    // Check if it's a category edit page.\n    if (!isset($post->taxonomy) || $post->taxonomy !== 'category') {\n        return;\n    }\n\n    // Get the thumbnail ID for this category.\n    $thumbnail_id = get_term_meta($post->ID, 'thumbnail_id', true);\n\n    if (!$thumbnail_id) {\n        echo '<div class="notice notice-warning">\n            <p>No image set as thumbnail for this category. Ensure that a post in this category has an image attached.</p>\n          </div>';\n    }\n}\n\nadd_action('admin_notices', 'check_category_thumbnail_notice');