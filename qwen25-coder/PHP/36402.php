foreach($results as $result) {\n    if (!$condition) {\n        ErrorHandler::addErrorToStack('Unexpected result.');\n        break; // Exit the loop on error\n    }\n\n    doSomething();\n}\n\n// If we didn't encounter an error, proceed with the main logic\nif (!ErrorHandler::hasErrors()) { // Assuming there's a method to check for errors\n    // do what I want cos I know there was no error\n}