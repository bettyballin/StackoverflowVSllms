$unsafeFunctionName = $_POST['function_name'];\n$safeFunctionName   = safe($unsafeFunctionName); // assuming safe() sanitizes/validates the input\n\n// Start output buffering\nob_start();\n\n// Call the function\n$safeFunctionName();\n\n// Capture the output and clean the buffer\n$output = ob_get_clean();\n\n// If the function returned a value, use it; otherwise, use the captured output\n$resultValue = $output ?: '';\n\nif (is_callable($safeFunctionName)) {\n    $returnValue = $safeFunctionName();\n    if (!empty($returnValue)) {\n        $resultValue = $returnValue;\n    }\n}\n\n$xmlResult = "<return_value>" . htmlspecialchars($resultValue) . "</return_value>";