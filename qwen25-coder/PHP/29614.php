<?php\n\n$text = <<<TEXT\nlease 172.17.2.3 {\n  starts 4 2009/07/16 11:54:39;\n  ends 4 2009/07/16 12:54:39;\n  cltt 4 2009/07/16 11:54:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:01;\n  uid "\001\000PV\300\000\001";\n  client-hostname "Yasin-PC";\n}\nlease 172.17.2.4 {\n  starts 4 2009/07/16 12:24:39;\n  ends 4 2009/07/16 13:24:39;\n  cltt 4 2009/07/16 12:24:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:02;\n  uid "\001\000PV\300\000\002";\n  client-hostname "Another-PC";\n}\nlease 172.17.2.3 {\n  starts 4 2009/07/16 12:54:39;\n  ends 4 2009/07/16 13:54:39;\n  cltt 4 2009/07/16 12:54:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:01;\n  uid "\001\000PV\300\000\001";\n  client-hostname "Yasin-PC";\n}\nTEXT;\n\n// Regex pattern to match lease blocks\n$pattern = '/lease\s+(\d+\.\d+\.\d+\.\d+)\s*\{([^}]*)\}/';\n\npreg_match_all($pattern, $text, $matches);\n\n$leases = [];\nforeach ($matches[1] as $index => $ip) {\n    // Clean up and split lease information\n    $info = array_map('trim', explode(';', trim($matches[2][$index])));\n    \n    // Store in an associative array with IP as key\n    $leaseData = [];\n    foreach ($info as $line) {\n        if (empty($line)) continue;\n        list($key, $value) = preg_split('/\s+/', $line, 2);\n        $leaseData[$key] = trim($value, '"');\n    }\n    \n    // Check for duplicate IPs and handle them\n    if (!isset($leases[$ip])) {\n        $leases[$ip][] = $leaseData;\n    } else {\n        $leases[$ip][] = $leaseData;\n    }\n}\n\nprint_r($leases);\n\n?>