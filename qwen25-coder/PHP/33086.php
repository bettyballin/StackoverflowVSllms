<?php\n\nfunction getApacheUser() {\n    // Define a temporary filename\n    $tempFile = tempnam(sys_get_temp_dir(), 'owner_check_');\n    \n    if ($tempFile) {\n        // Attempt to open and write to this file\n        $fh = fopen($tempFile, 'w');\n\n        if ($fh === false) {\n            throw new Exception("Unable to create test file.");\n        }\n\n        fwrite($fh, "Test content");\n        fclose($fh);\n\n        clearstatcache();  // Clear stat cache to get the current owner\n\n        // Get file owner\n        $owner = posix_getpwuid(fileowner($tempFile));\n\n        // Clean up by deleting the temp file\n        unlink($tempFile);\n\n        if ($owner) {\n            return $owner['name'];\n        } else {\n            throw new Exception("Cannot determine the file owner.");\n        }\n    }\n\n    return null;\n}\n\ntry {\n    $apacheUser = getApacheUser();\n    echo "Apache/PHP runs as user: " . $apacheUser;\n\n} catch (Exception $e) {\n    echo "Error: " . $e->getMessage();\n}\n?>