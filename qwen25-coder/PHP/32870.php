<?php\n$local = '127.0.0.1'; // replace with your local address\n$port = 58380; // replace with your port\n\n$sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);\nsocket_bind($sock, $local, $port) or die('Could not bind to address');\n\n// Set a timeout for the socket read operation\n$options = [\n    'l_onoff' => 1,\n    'l_linger' => 0\n];\nsocket_set_option($sock, SOL_SOCKET, SO_LINGER, $options);\n\n$timeout = ['sec' => 2 , 'usec' => 0]; // Timeout to be 2 seconds\nsocket_set_option($sock, SOL_SOCKET, SO_RCVTIMEO, $timeout);\n\nwhile (true) {\n    $buf = socket_read($sock, 1024);\n    if ($buf !== false && !empty($buf)) {\n        echo "Received data: " . $buf . PHP_EOL;\n    } else {\n        // Handle the case where no data was received or timeout occurred\n        usleep(10000); // Sleep for a short period to avoid high CPU usage\n    }\n}\n\nsocket_close($sock);\n?>