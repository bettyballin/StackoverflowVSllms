class Application_Model_Mapper_UserMapper implements Zend_Db_Table_Rowset_Interface {\n    protected $_dbTable;\n\n    public function setDbTable($dbTable) {\n        if (is_string($dbTable)) {\n            $dbTable = new $dbTable();\n        }\n\n        if (!$dbTable instanceof Zend_Db_Table_Abstract) {\n            throw new Exception('Invalid table data gateway provided');\n        }\n        $this->_dbTable = $dbTable;\n        return $this;\n    }\n\n    public function getDbTable() {\n        if (null === $this->_dbTable) {\n            $this->setDbTable('Application_Model_DbTable_Users');\n        }\n        return $this->_dbTable;\n    }\n\n    public function fetchAll() {\n        $resultSet = $this->getDbTable()->fetchAll();\n        $entries   = array();\n\n        foreach ($resultSet as $row) {\n            $entry = new Application_Model_User();\n            $entry->setId($row->id)\n                  ->setUsername($row->username)\n                  ->setEmail($row->email);\n            $entries[] = $entry;\n        }\n        return $entries;\n    }\n\n    public function save(Application_Model_User $user) {\n        $data = array(\n            'id'       => $user->getId(),\n            'username' => $user->getUsername(),\n            'email'  => $user->getEmail(),\n        );\n\n        if (null === ($user->getId())) {\n            unset($data['id']); // Unset id as we don't want an auto-increment column being set to null\n            $this->getDbTable()->insert($data);\n        } else {\n            $this->getDbTable()->update($data, array('id = ?' => $user->getId()));\n        }\n    }\n\n    public function find($id) {\n        $result = $this->getDbTable()->find($id);\n        if (0 == count($result)) {\n            return;\n        }\n        $row = $result->current();\n        $entry = new Application_Model_User();\n        $entry->setId($row->id)\n              ->setUsername($row->username)\n              ->setEmail($row->email);\n\n        return $entry;\n    }\n\n    // Additional methods for delete, find by conditions, etc.\n}