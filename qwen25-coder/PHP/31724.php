<?php\n\nfunction getModules($baseDir) {\n    $modules = [];\n    if (file_exists($baseDir)) {\n        $modules = array_values(array_diff(scandir($baseDir), ['..', '.']));\n    }\n    return $modules;\n}\n\nfunction getControllers($moduleDir) {\n    $controllers = [];\n    $controllerPath = $moduleDir . '/controllers';\n    if (is_dir($controllerPath)) {\n        $files = array_diff(scandir($controllerPath), ['..', '.']);\n        foreach ($files as $file) {\n            if (strpos($file, 'Controller.php') !== false) {\n                $controllers[] = substr(str_replace('Controller.php', '', $file), 0, -10); // Remove 'Index' for IndexController\n            }\n        }\n    }\n    return $controllers;\n}\n\nfunction getActions($controllerPath, $controllerName) {\n    $actions = [];\n    if (file_exists("$controllerPath/$controllerName" . 'Controller.php')) {\n        $code = file_get_contents("$controllerPath/$controllerName" . 'Controller.php');\n        preg_match_all("/public function ([a-zA-Z0-9]+Action)\(/", $code, $matches);\n        if (!empty($matches[1])) {\n            $actions = $matches[1];\n        }\n    }\n    return $actions;\n}\n\n$baseDir = APPLICATION_PATH . '/modules';\n\n$moduleControllersActions = [];\n\n$modules = getModules($baseDir);\n\nforeach ($modules as $module) {\n    $controllers = getControllers("$baseDir/$module");\n    foreach ($controllers as $controller) {\n        $actions = getActions("$baseDir/$module/controllers", $controller);\n        if (!empty($actions)) {\n            $moduleControllersActions[$module][$controller] = $actions;\n        }\n    }\n}\n\nprint_r($moduleControllersActions);\n\n?>