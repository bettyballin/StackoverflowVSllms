/// Turn the string into an array\n$rows = explode("\n", $this->raw_data);\n\n/// First row includes headers\n$headers = $rows[0];\n$headers = explode($this->delimiter, $headers);\n\n/// Trim spaces from $headers and remove any non-printable characters\n$headers = array_map(function($header) {\n    return trim(preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $header));\n}, $headers);\n\n// Debugging line: var_dump to see the headers clearly\nvar_dump($headers);\n\n/// Check that there are no empty headers. This can happen if there are delimiters at the end of the file\n$headers2 = array_filter($headers, function($header) {\n    return !empty(trim($header));\n});\n\n$headers = $headers2;\n\nif(! in_array('password', $headers)){\n    /// Add password column for generated passwords\n    $headers[] = 'password';\n}\n\n/// Add status column to the headers\n$headers[] = 'status';\n\n$this->headers = $headers;\n\n/// Check that at least username, name and email are provided in the headers\nif(!in_array('username', $headers) || !in_array('name', $headers) || !in_array('email', $headers)){\n    echo "error\n";   \n    return false;\n}