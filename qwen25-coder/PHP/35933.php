$countriesWithStates = ['US', 'CA']; // Countries that have states\n\nforeach ($_POST['country'] as $index => $country) {\n    if (in_array($country, $countriesWithStates)) {\n        // Ensure state is selected for US and Canada\n        if (!isset($_POST['state'][$index]) || empty($_POST['state'][$index])) {\n            echo "Please select a valid state/province for each address.";\n            exit;\n        }\n    }\n}\n// Proceed with the rest of your processing