$sourcePath = 'images/'; // Path of original image\n$sourceName = 'photo1.jpg'; // Name of original image\n$thumbPath = 'thumbs/'; // Writeable thumb path\n$thumbName = "test_thumb.jpg"; // Tip: Name dynamically\n$maxThumbWidth = 100; // Intended max dimension of thumb\n\n// Beyond this point is simply code.\n$sourceImage = imagecreatefromjpeg("$sourcePath/$sourceName");\n$sourceWidth = imagesx($sourceImage);\n$sourceHeight = imagesy($sourceImage);\n\n$ratio = $sourceWidth / $sourceHeight;\nif ($ratio > 1) {\n    $thumbHeight = intval($maxThumbWidth / $ratio);\n} else {\n    $thumbHeight = $maxThumbWidth;\n}\n\n$targetImage = imagecreatetruecolor($maxThumbWidth, $thumbHeight); // Create true color image\nimagecopyresampled($targetImage, $sourceImage, 0, 0, 0, 0, $maxThumbWidth, $thumbHeight, $sourceWidth, $sourceHeight);\nimagejpeg($targetImage, "$thumbPath/$thumbName", 90); // Add quality parameter\n\n// Clean up\nimagedestroy($sourceImage);\nimagedestroy($targetImage);\n\n// By now, the thumbnail is copied into the $thumbpath as the file name specified in $thumbName, so display\necho "<img src='$thumbPath$thumbName' alt=''>";