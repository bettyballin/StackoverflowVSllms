function makeClickableLinks($text) {\n    // Regular expression pattern for URLs\n    $pattern = '#\b(http[s]?:\/\/[^\s"]+?)#';\n    \n    // Replacement function that will create the HTML link\n    $replacement = function ($matches) {\n        // Extract the URL from matches\n        $url = htmlspecialchars($matches[1], ENT_QUOTES, 'UTF-8');\n        \n        // Create and return the anchor tag\n        return "<a href='" . $url . "'>" . parse_url($url, PHP_URL_SCHEME) . "://" . parse_url($url, PHP_URL_HOST) . "</a>";\n    };\n    \n    // Use preg_replace_callback to apply the replacement function\n    return preg_replace_callback($pattern, $replacement, $text);\n}\n\n// Example usage\n$text = "Here is a design though: For example if I put a link such as http://example.com/test.php?val1=bla&val2blablabla%20bla%20bla.bl in textarea.";\necho makeClickableLinks($text);