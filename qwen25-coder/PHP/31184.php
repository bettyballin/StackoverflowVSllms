function removeQueryParamsFromUrls($html) {\n    // Create a new DOMDocument instance\n    $dom = new DOMDocument();\n    \n    // Suppress errors due to malformed HTML if necessary\n    @$dom->loadHTML($html);\n    \n    // Find all anchor tags\n    $links = $dom->getElementsByTagName('a');\n    \n    foreach ($links as $link) {\n        if ($link->hasAttribute('href')) {\n            $url = $link->getAttribute('href');\n            \n            // Parse the URL into components\n            $parsedUrl = parse_url($url);\n            \n            if (isset($parsedUrl['query'])) {\n                // Split the query string into individual parts\n                parse_str($parsedUrl['query'], $queryParams);\n                \n                // Remove the specific query parameters\n                unset($queryParams['utm_source']);\n                unset($queryParams['utm_medium']);\n                unset($queryParams['utm_campaign']);\n                \n                // Rebuild the query string without the removed params\n                $newQuery = http_build_query($queryParams);\n                \n                // Build back the URL\n                $parsedUrl['query'] = $newQuery;\n                $url = http_build_url($parsedUrl, array('encodeStandards' => PHP_URL_QUERY));\n            }\n            \n            // Update the href attribute with the new URL\n            $link->setAttribute('href', $url);\n        }\n    }\n    \n    // Save and return the modified HTML\n    return $dom->saveHTML();\n}\n\n// Assuming $html contains your large XHTML content\n$html = removeQueryParamsFromUrls($html);