<?php\n\nfunction getFinalUrl($url) {\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, $url);\n    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); // Follow redirects\n    curl_setopt($ch, CURLOPT_NOBODY, true);       // Exclude body from output\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  // Return transfer as string of the return value of curl_exec()\n    curl_setopt($ch, CURLOPT_HEADER, false);       // Don't include header in output\n\n    curl_exec($ch);\n    $finalUrl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); // Get the final URL after redirects\n    curl_close($ch);\n\n    return $finalUrl;\n}\n\n$url = 'http://foo.com';\necho getFinalUrl($url);\n\n?>