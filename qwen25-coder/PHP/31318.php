public function getResponse($timeout = 10)\n{\n    // Set stream timeout\n    stream_set_timeout($this->_socket, $timeout);\n\n    $response = '';\n    while (!feof($this->_socket)) {\n        // Read up to 2048 bytes from the socket\n        $char = fread($this->_socket, 2048);\n        if ($char === false) {\n            break;\n        }\n        $response .= $char;\n\n        // Check for specific Telnet commands or terminators\n        if (strpos($response, "\n") !== false || strpos($response, IAC . EL) !== false) {\n            break;\n        }\n    }\n\n    return $response;\n}\n\n// Constants for Telnet protocol\nconst IAC = 255; // Interpret As Command\nconst EL = 10;   // End of Line (Telnet's line terminator)