$term = 'cool';\n$content = '<div>My hair cut so cool!</div><span>This is another cool example.</span>';\n\n// This pattern matches any HTML tag, captures its contents, and allows for the search term within.\n$pattern = '/(<[^>]+>)(.*?' . preg_quote($term, '/') . '.*?)(<\/[^>]+>)/is';\n\n$replace = '$1<span style="background: #f00">$2</span>$3';\n\n// Replace occurrences respecting the HTML tags.\n$result = preg_replace($pattern, $replace, $content);\n\necho htmlspecialchars($result);