<?php\n// Assuming $conn is your database connection\n\n// Prepare SQL query to fetch all items and related subitems\n$sql = "SELECT t1.item_id, t1.item_name, t2.subitem_name \n        FROM table_items t1 \n        LEFT JOIN table_subitems t2 ON t1.item_id = t2.item_id \n        ORDER BY t1.item_id";\n\n$result = $conn->query($sql);\n\n// Array to hold items and subitems\n$groupedItems = [];\n\nif ($result->num_rows > 0) {\n    // Fetch each row as an associative array\n    while ($row = $result->fetch_assoc()) {\n        $itemId = $row['item_id'];\n        $itemName = $row['item_name'];\n        $subItemName = $row['subitem_name'];\n\n        if (!isset($groupedItems[$itemId])) {\n            // Initialize the item with an empty subitems array\n            $groupedItems[$itemId] = ['name' => strtoupper($itemName), 'subitems' => []];\n        }\n        if ($subItemName != null) {\n            // Add subitem to the corresponding item\n            $groupedItems[$itemId]['subitems'][] = $subItemName;\n        }\n    }\n\n    // Print all items with their grouped subitems\n    foreach ($groupedItems as $itemInfo) {\n        echo $itemInfo['name'] . "\n";\n        echo str_repeat('-', strlen($itemInfo['name'])) . "\n";\n\n        if (!empty($itemInfo['subitems'])) {\n            foreach ($itemInfo['subitems'] as $subItem) {\n                echo $subItem . "\n";\n            }\n        } else {\n            echo "No subitems\n";\n        }\n\n        echo "\n"; // Print a newline to separate items\n    }\n} else {\n    echo "No results found.";\n}\n$conn->close();\n?>