<?php\n    session_start();\n    if (!isset($_SESSION['user_id'])) {\n        die('User not logged in');\n    }\n\n    $userId = $_SESSION['user_id'];\n    $widgetId = $_POST['widget_id'];\n    $position = $_POST['position'];\n\n    // Database connection setup\n    $conn = new mysqli("localhost", "username", "password", "database_name");\n\n    // Check connection\n    if ($conn->connect_error) {\n        die("Connection failed: " . $conn->connect_error);\n    }\n\n    // Update or insert the position into the database\n    $query = "INSERT INTO user_widget_positions (user_id, widget_id, position) \n              VALUES (?, ?, ?) \n              ON DUPLICATE KEY UPDATE position=VALUES(position)";\n    \n    $stmt = $conn->prepare($query);\n    $stmt->bind_param("iss", $userId, $widgetId, $position);\n    if (!$stmt->execute()) {\n        echo "Error: " . $stmt->error;\n    }\n\n    $stmt->close();\n    $conn->close();\n    ?>