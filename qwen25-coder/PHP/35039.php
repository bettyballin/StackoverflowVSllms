$filter = isset($this->levels[$level]) ? $this->levels[$level] : (isset($this->levels['max']) ? $this->levels['max'] : []);\nforeach ($this->tags as $name => $tag) {\n    // Ensure that 'type' exists in the tag object/array\n    if (!is_object($tag) || !property_exists($tag, 'type')) {\n        continue;\n    }\n    \n    // Use strict comparison to check if type is in filter\n    if (in_array($tag->type, $filter, true)) {\n        // Proceed with your logic here\n    }\n}