<?php\n$xmlString = <<<XML\n<?xml version="1.0" encoding="UTF-8"?>\n<obj \n  href="http://xml.foo.com/" \n  display="com.foo.bar" \n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \n  xmlns="http://obix.org/ns/schema/1.0" \n>\n <list name="data" of="HistoryRecord">\n  <obj>\n   <abstime name="timestamp" val="1876-11-10T00:00:00-08:00"></abstime>\n   <int name="energy_in_kwh" val="1234"></int>\n   <int name="energy_out_kwh" val="123456"></int>\n  </obj>\n  <obj>\n   <abstime name="timestamp" val="1876-11-10T00:15:00-08:00"></abstime>\n   <int name="energy_in_kwh" val="1335"></int>\n   <int name="energy_out_kwh" val="443321"></int>\n  </obj>\n </list>\n <int name="count" val="2"></int>\n</obj>\nXML;\n\n// Register the namespace to handle the default namespace\n$namespaces = [\n    'default' => 'http://obix.org/ns/schema/1.0'\n];\n\n$sxml = simplexml_load_string($xmlString);\n$sxml->registerXPathNamespace('def', $namespaces['default']);\n\n// Fetch all <obj> elements within the <list>\n$objs = $sxml->xpath('//def:list[@name="data"]/def:obj');\n\n// Get the last <obj>\n$lastObj = $objs[count($objs) - 1];\n\necho "Last obj timestamp: " . (string)$lastObj->abstime['val'] . "\n";\n?>