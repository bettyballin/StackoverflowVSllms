<?php\n\n$hostname = '{imap.example.com:993/imap/ssl}INBOX'; // Change according to your mail service provider.\n$username = 'gallery@example.com';\n$password = 'yourPassword';\n\n// Connect to the server\n$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to mailbox: ' . imap_last_error());\n\n// Search for emails with attachments (looking for "multipart" type emails)\n$search_criteria = 'ALL';\n$emails = imap_search($inbox, $search_criteria);\n\nif ($emails) {\n    foreach($emails as $email_number) {\n        // Fetch the email structure\n        $structure = imap_fetchstructure($inbox, $email_number);\n        \n        if (isset($structure->parts) && count($structure->parts)) { // Check if this mail has multiple parts\n            for ($i = 0; $i < count($structure->parts); $i++) {\n                $part=$structure->parts[$i];\n                \n                if ($part->disposition == 'ATTACHMENT' || strtolower($part->type) === 'application/pdf') { // Check for attachments\n                    // Get the name and encoded content of the attachment\n                    $filename = imap_utf8(imap_bodystruct($inbox, $email_number, ($i+1).'')->dparameters[0]->value);\n                    $content_type = $part->subtype;\n                    if ($part->encoding == 3) {\n                        $attachment_data = imap_base64(imap_body($inbox, $email_number, FT_UID));\n                    }\n                    elseif ($part->encoding == 4) {\n                        $attachment_data = imap_qprint(imap_body($inbox, $email_number, FT_UID));\n                    }\n                    else {\n                        $attachment_data = imap_body($inbox, $email_number, FT_UID);\n                    }\n\n                    // Save the attachment\n                    file_put_contents('/path/to/photo/gallery/' . $filename, $attachment_data);\n                }\n            }\n        }\n    }\n}\n\n// Close the connection\nimap_close($inbox);\n?>