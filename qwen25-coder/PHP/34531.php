$sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);\nif ($sock === false) {\n    echo "socket_create() failed: reason: ". socket_strerror(socket_last_error()) . "\n";\n} else {\n    if (socket_bind($sock, "x.x.x.x", $port) === false) {\n        echo "socket_bind() failed: reason: ". socket_strerror(socket_last_error($sock)) . "\n";\n    } else {\n        while (true) {\n            $buf = '';\n            $from = '';\n            $port = 0;\n            if (($len = socket_recvfrom($sock, $buf, 2048, 0, $from, $port)) === false) {\n                echo "socket_recvfrom() failed: reason:" . socket_strerror(socket_last_error($sock));\n            } else {\n                echo "Received from [$from] port [$port]: $buf\n";\n            }\n        }\n    }\n}