if (!empty($_FILES)) {\n    $tempFile = $_FILES['Filedata']['tmp_name'];\n    $targetPath = __DIR__ . "/../../webroot/posts/temp/"; // Use relative path based on current directory\n    $targetFile =  str_replace('//','/',$targetPath) . basename($_FILES['Filedata']['name']);\n\n    // Log paths for debugging\n    error_log("Temporary file: " . $tempFile);\n    error_log("Target path: " . $targetPath);\n    error_log("Target file: " . $targetFile);\n\n    // Rename file to avoid conflicts\n    $fileParts = pathinfo($targetFile);\n    $newFileName = $fileParts['filename'] . "_" . mt_rand(10000000,99999999) . "." . $fileParts['extension'];\n    $finalTargetFile = $fileParts['dirname'] . '/' . $newFileName;\n\n    if (move_uploaded_file($tempFile, $finalTargetFile)) {\n        echo "1";\n    } else {\n        error_log("Failed to move file from tmp: " . $tmpFile . " to: " . $finalTargetFile);\n        echo "0"; // Indicate failure\n    }\n} else {\n    error_log("No files uploaded.");\n    echo "0"; // Indicate no files were sent\n}