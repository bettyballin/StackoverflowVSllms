function saveUploadedFile($tmpName, $targetDirectory, $originalFileName) {\n    $extension = pathinfo($originalFileName, PATHINFO_EXTENSION);\n    $baseName = pathinfo($originalFileName, PATHINFO_FILENAME);\n    $newFileName = $originalFileName;\n    $counter = 1;\n\n    // Check if file exists and append a number until a unique name is found\n    while (file_exists($targetDirectory . '/' . $newFileName)) {\n        $newFileName = $baseName . '_' . $counter . '.' . $extension;\n        $counter++;\n    }\n\n    // Move the uploaded file to the target directory with the new filename\n    if (!move_uploaded_file($tmpName, $targetDirectory . '/' . $newFileName)) {\n        return false; // Handle error appropriately\n    }\n    return $newFileName;\n}\n\n// Example usage:\n$uploadDirectory = '/path/to/upload/directory';\nif (isset($_FILES['uploadedFile']) && $_FILES['uploadedFile']['error'] === UPLOAD_ERR_OK) {\n    $uniqueFileName = saveUploadedFile(\n        $_FILES['uploadedFile']['tmp_name'],\n        $uploadDirectory,\n        $_FILES['uploadedFile']['name']\n    );\n    if ($uniqueFileName !== false) {\n        echo "File uploaded successfully as: " . htmlspecialchars($uniqueFileName);\n    } else {\n        echo "Failed to upload file.";\n    }\n}