function removeDuplicateIds($html) {\n    $doc = new DOMDocument();\n    @$doc->loadHTML('<?xml encoding="utf-8" ?>' . $html);\n\n    // Find all elements with an id attribute\n    $xpath = new DOMXPath($doc);\n    $elements = $xpath->query("//*[@id]");\n\n    // Track seen ids\n    $seenIds = [];\n\n    foreach ($elements as $element) {\n        $id = $element->getAttribute('id');\n        if (in_array($id, $seenIds)) {\n            // Remove the id attribute if it's a duplicate\n            $element->removeAttribute('id');\n        } else {\n            // Mark the id as seen\n            $seenIds[] = $id;\n        }\n    }\n\n    // Save the modified HTML\n    return substr($doc->saveHTML(), strlen('<?xml encoding="utf-8" ?>'));\n}\n\n$html = "<html><body>\n<div id='unique'>Content</div>\n<div id='duplicate'>More Content</div>\n<div id='duplicate'>Even More Content</div>\n</body></html>";\n\n$cleanHtml = removeDuplicateIds($html);\necho $cleanHtml;