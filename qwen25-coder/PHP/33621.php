$mysqli = new mysqli("host", "user", "password", "database");\nif ($mysqli->connect_error) {\n    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);\n}\n\n$query = "SELECT t.id, t.title, MAX(c.date) as last_comment_date\n          FROM threads t \n          LEFT JOIN comments c ON t.id = c.parentID\n          GROUP BY t.id, t.title\n          ORDER BY last_comment_date DESC";\n\n$result = $mysqli->query($query);\n\nwhile ($thread = $result->fetch_assoc()) {\n    echo "<li><a href=\"?threadID=" . htmlspecialchars($thread['id']) . "\">" . htmlspecialchars($thread['title']) . "</a></li>\n";\n}\n\n$result->free();\n$mysqli->close();