<?php\nsession_start();\n\n$user_id = $_SESSION['user_id']; // Assume user is logged in and session has a user ID\n$actionDatetime = isset($_POST['datetime']) ? new DateTime($_POST['datetime']) : null;\n\nif ($actionDatetime) {\n    $db = new PDO('mysql:host=your_host;dbname=your_db', 'username', 'password');\n    \n    // Check if the last action exists for this user\n    $query = "SELECT * FROM actions WHERE user_id = :user_id ORDER BY datetime DESC LIMIT 1";\n    $stmt = $db->prepare($query);\n    $stmt->execute(['user_id' => $user_id]);\n    $lastAction = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    if ($lastAction) {\n        $lastActionTime = new DateTime($lastAction['datetime']);\n        \n        // Check if one day has passed\n        if ($actionDatetime > $lastActionTime->modify('+1 day')) {\n            saveNewAction($user_id, $actionDatetime, $db); // You need to define this function\n            echo json_encode(['message' => 'Action allowed.']);\n        } else {\n            echo json_encode(['message' => 'You have already performed an action today.']);\n        }\n    } else {\n        // If no previous action is found for this user in the database, allow the new action.\n        saveNewAction($user_id, $actionDatetime, $db);\n        echo json_encode(['message' => 'Action allowed.']);\n    }\n}\n\nfunction saveNewAction($user_id, $datetime, $db) {\n    // Insert the new action into the actions table\n    $query = "INSERT INTO actions (user_id, datetime) VALUES (:user_id, :datetime)";\n    $stmt = $db->prepare($query);\n    $stmt->execute(['user_id' => $user_id, 'datetime' => $datetime->format('Y-m-d H:i:s')]);\n}\n?>