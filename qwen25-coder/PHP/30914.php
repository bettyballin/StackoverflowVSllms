<?php\n// Assuming $db is your MySQL database connection\n$query = "SELECT \n              item_id,\n              SUM(rating * count) AS weighted_sum,\n              SUM(count) AS total_weight\n          FROM (\n              SELECT \n                  item_id, \n                  rating, \n                  COUNT(*) AS count\n              FROM ratings\n              GROUP BY item_id, rating\n          ) AS subquery\n          GROUP BY item_id";\n\n$result = mysqli_query($db, $query);\nwhile ($row = mysqli_fetch_assoc($result)) {\n    $item_id = $row['item_id'];\n    $weighted_sum = $row['weighted_sum'];\n    $total_weight = $row['total_weight'];\n    \n    // Calculate weighted mean\n    if ($total_weight > 0) {\n        $weighted_mean = $weighted_sum / $total_weight;\n        echo "Item ID: $item_id, Weighted Mean: " . round($weighted_mean, 2) . "\n";\n    } else {\n        echo "Item ID: $item_id has no ratings.\n";\n    }\n}\n?>