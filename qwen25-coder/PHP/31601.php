<?php\n\n   namespace Affiliate\System\Observer;\n\n   use Magento\Framework\Event\ObserverInterface;\n   use Magento\Framework\Event\Observer;\n\n   class PredispatchObserver implements ObserverInterface\n   {\n       protected $session;\n\n       public function __construct(\n           \Magento\Framework\Session\SessionManagerInterface $session\n       ) {\n           $this->session = $session;\n       }\n\n       public function execute(Observer $observer)\n       {\n           $request = $observer->getEvent()->getRequest();\n           if ($afid = $request->getParam('afid')) {\n               // Optionally validate afid or perform other checks here.\n               $this->session->setAffiliateId($afid);\n           }\n       }\n   }