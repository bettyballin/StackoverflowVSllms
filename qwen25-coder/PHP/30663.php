<?php\n\nrequire 'vendor/autoload.php';\n\nuse PhpParser\ParserFactory;\nuse PhpParser\PrettyPrinter\Standard;\n\n$code = <<<'PHP'\n<?PHP\n// something\nif ($whatsit) {\n    do_something(); # we do something here\n    echo '<html>Some embedded HTML</html>';\n}\n/* another long\ncomment\n*/\nsome_more_code();\n?>\nPHP;\n\n$parser = (new ParserFactory)->create(ParserFactory::PREFER_PHP7);\n$stmts = $parser->parse($code);\n\nforeach ($stmts as $index => $stmt) {\n    if ($stmt instanceof PhpParser\Node\Comment) {\n        unset($stmts[$index]);\n    }\n}\n\n// Remove null elements from the array\n$stmts = array_values($stmts);\n\n$prettyPrinter = new Standard();\necho $prettyPrinter->prettyPrintFile($stmts);