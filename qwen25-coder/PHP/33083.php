<?php\nrequire_once 'XMPPHP/XMPP.php';\n\n// Replace with your Jabber server details\n$host = 'your.jabberserver.com';\n$port = 5222;\n$user = 'yourusername@yourdomain.com';\n$pass = 'yourpassword';\n$resource = 'xmpphp'; // Resource identifier for the connection\n$printlog = false;    // Print the log data (useful for debugging)\n$loglevel = XMPPHP_Log::LEVEL_INFO;\n\ntry {\n    $conn = new XMPPHP_XMPP($host, $port, $user, $pass, $resource, 'yourdomain.com', $printlog, $loglevel);\n    \n    // Connect to the server\n    $conn->connect();\n    \n    // Login to the Jabber server\n    $conn->auth($user, $pass, $resource);\n\n    echo "Logged in...\n";\n\n    while (!$conn->disconnected) {\n        // Process for incoming messages or other stanzas\n        $payloads = $conn->processUntil(array('message', 'presence', 'end_stream', 'session_start'));\n\n        foreach ($payloads as $payload) {\n            switch ($payload[0]) {\n                case 'message':\n                    echo "Receieved a message\n";\n                    echo "From: {$payload['from']}\n";\n                    echo "Message: {$payload['body']}\n";\n\n                    // Example of sending a reply\n                    if (isset($payload['attrs']['type']) && $payload['attrs']['type'] != 'error') {\n                        $conn->message($payload['from'], "Hi! I received your message.", $payload['attrs']['type']);\n                    }\n\n                    break;\n                case 'presence':\n                    echo "Receieved a presence\n";\n                    echo "From: {$payload['from']}\n";\n                    echo "Type: {$payload['show']}\n";\n\n                    // Handle presence changes as needed\n                    break;\n                default:\n                    echo "Unhandled Payload - {$payload[0]}\n";\n            }\n        }\n    }\n\n} catch (XMPPHP_Exception $e) {\n    die($e->getMessage());\n}\n\n?>