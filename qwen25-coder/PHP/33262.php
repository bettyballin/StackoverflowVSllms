function createThumbnail($src, $dest, $maxWidth, $maxHeight) {\n    list($width, $height) = getimagesize($src);\n    \n    if ($width > $maxWidth || $height > $maxHeight) {\n        $ratio = min($maxWidth/$width, $maxHeight/$height);\n        \n        $newWidth  = ceil($width * $ratio);\n        $newHeight = ceil($height * $ratio);\n\n        $srcImage = imagecreatefromjpeg($src);\n        $dstImage = imagecreatetruecolor($newWidth, $newHeight);\n\n        imagecopyresampled($dstImage, $srcImage, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);\n\n        if (imagejpeg($dstImage, $dest)) {\n            return true;\n        }\n    } else {\n        // If the image is smaller than desired dimensions, copy it as is\n        copy($src, $dest);\n        return true;\n    }\n\n    imagedestroy($srcImage);\n    imagedestroy($dstImage);\n    return false;\n}\n\n// Example usage:\n$originalImagePath = 'upload/original.jpg';\n$thumbnailPath = 'upload/thumbnail.jpg';\n\ncreateThumbnail($originalImagePath, $thumbnailPath, 150, 150);