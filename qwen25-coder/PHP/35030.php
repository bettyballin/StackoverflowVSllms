$results = $pdo->prepare($sql);\n$results->execute([$event_id]);\n$registrations = [];\nforeach ($results as $row) {\n    $registrationId = $row['registration_id'];\n    if (!isset($registrations[$registrationId])) {\n        $registrations[$registrationId] = [\n            'registration_id' => $registrationId,\n            'status' => $row['status'],\n            'people' => [],\n            'entries' => []\n        ];\n    }\n    if ($row['person_name']) {\n        $registrations[$registrationId]['people'][] = ['name' => $row['person_name']];\n    }\n    if ($row['entry_name']) {\n        $registrations[$registrationId]['entries'][] = ['name' => $row['entry_name']];\n    }\n}\n\n// Convert associative array to indexed array of registrations\n$registrations = array_values($registrations);\nreturn $registrations;