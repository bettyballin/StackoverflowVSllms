function register()\n{\n    $userId = $this->User->registerUser($this->data);\n    $this->Session->write('User.UserId', $userId); // Write user ID to session\n\n    if (!$this->User->validates()) {\n        $this->Flash->error('Please enter valid inputs');\n        return;\n    }\n\n    // Use session data in the redirect URL\n    $this->redirect(['controller' => 'forms', 'action' => 'homepage', $this->Session->read('User.UserId')]);\n}