function getCurrentUrl() {\n    $protocol = isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' ? "https" : "http";\n    $port = $_SERVER['SERVER_PORT'];\n    $domainName = $_SERVER['HTTP_HOST'];\n    $requestUri = $_SERVER['REQUEST_URI'];\n\n    // Check if port is the default for protocol, and remove it from the domain name\n    if (($protocol === 'http' && $port == 80) || ($protocol === 'https' && $port == 443)) {\n        $domainName = preg_replace('(:' . $port . ')', '', $domainName);\n    }\n\n    return "$protocol://$domainName$requestUri";\n}\n\n$currentUrl = getCurrentUrl();\necho $currentUrl;