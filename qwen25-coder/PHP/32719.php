<?php\n// Use prepared statements to prevent SQL injection\n$pdo = new PDO('mysql:host=localhost;dbname=your_database', 'username', 'password');\n$stmt = $pdo->prepare("SELECT friends FROM users WHERE id=?");\n$stmt->execute([$myid]);\n$result = $stmt->fetch(PDO::FETCH_ASSOC);\n\n// Unserialize the fetched data\n$friends2 = unserialize($result['friends']) ?: [];\n\nif (!is_array($friends2)) {\n    // Handle unexpected unserialization outcome\n    throw new Exception("Unserialization failed or produced non-array.");\n}\n\nif (count($friends2) == 0) {\n    $friends2[] = $id;\n} else {\n    array_push($friends2, $id);\n}\n\n// Serialize the updated array and update the database\n$friendsUpdated = serialize($friends2);\n$stmtUpdate = $pdo->prepare("UPDATE users SET friends=? WHERE id=?");\n$stmtUpdate->execute([$friendsUpdated, $myid]);\n?>