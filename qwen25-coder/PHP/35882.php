$dom = new DOMDocument();\n@$dom->loadHTML($result); // Suppress warnings with @ due to malformed HTML\n\nforeach ($dom->getElementsByTagName('a') as $link) {\n    if (strpos($link->getAttribute('href'), 'http://') !== 0 && strpos($link->getAttribute('href'), 'https://') !== 0) {\n        $link->setAttribute('href', 'bla?id=' . $link->getAttribute('href'));\n    }\n}\n\n$result = $dom->saveHTML();