<?php\nsession_start();\n\n// Check if the user is logged in\nif (!isset($_SESSION['user_logged_in']) || $_SESSION['user_logged_in'] !== true) {\n    die('Access denied. Please login.');\n}\n\n// File location should be outside your web root for security\n$file_path = '/path/to/private/files/' . basename($_GET['file']);\n\n// Check if the file exists for security reasons\nif (!is_file($file_path)) {\n    die("File does not exist.");\n}\n\n// Set headers to force download the file rather than display it in the browser\nheader('Content-Description: File Transfer');\nheader('Content-Type: application/octet-stream');\nheader('Content-Disposition: attachment; filename="' . basename($_GET['file']) . '"');\nheader('Expires: 0');\nheader('Cache-Control: must-revalidate');\nheader('Pragma: public');\nheader('Content-Length: ' . filesize($file_path));\nreadfile($file_path);\nexit;\n?>