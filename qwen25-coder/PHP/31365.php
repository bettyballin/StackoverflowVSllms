<?php\n    $str = '';\n\n    if ($_SERVER['REQUEST_METHOD'] === 'POST') {\n        // Use preg_match for regex validation and add case-insensitive flag with 'i'\n        if(!preg_match("/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i", $_POST['email'])) {\n            $str = "<span style='color: red'>Not a valid email address</span>";\n        } else {\n            $file = 'emails.txt';\n            $text = trim($_POST['email']) . "\n";\n\n            // Check if the file is writable\n            if (is_writable($file)) {\n                // Open the file for appending\n                if (!$fh = fopen($file, 'a')) {\n                    exit;\n                }\n\n                // Write the email address to the file\n                if (fwrite($fh, $text) === FALSE) {\n                    exit;\n                }\n\n                fclose($fh);\n            }\n            \n            header('Location: thankyou.html');\n        }\n    }\n?>\n\n<form action="index.php" method="post">\n    <input type="text" name="email" style="width: 250px;" />\n    <!-- Use a standard submit button for better compatibility -->\n    <input type="submit" name="submit" value="Submit" style="position: relative; top: 5px; left: 10px" />\n</form>\n\n<?php echo $str ?>