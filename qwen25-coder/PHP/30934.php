// src/Model/Table/PersonsTable.php\nnamespace App\Model\Table;\n\nuse Cake\ORM\Table;\nuse Cake\Validation\Validator;\n\nclass PersonsTable extends Table\n{\n    public function initialize(array $config)\n    {\n        $this->belongsToMany('RelatedPersons', [\n            'className' => 'Persons',\n            'through' => 'PersonsPersons',\n            'foreignKey' => 'person_id',\n            'targetForeignKey' => 'related_person_id'\n        ]);\n    }\n}\n\n// src/Model/Table/PersonsPersonsTable.php\nnamespace App\Model\Table;\n\nuse Cake\ORM\Table;\n\nclass PersonsPersonsTable extends Table\n{\n    public function initialize(array $config)\n    {\n        $this->belongsToMany('Persons', [\n            'foreignKey' => 'person_id',\n            'bindingKey' => 'id'\n        ]);\n        $this->belongsToMany('RelatedPersons', [\n            'className' => 'Persons',\n            'foreignKey' => 'related_person_id',\n            'bindingKey' => 'id'\n        ]);\n        $this->belongsTo('Relationtypes', [\n            'foreignKey' => 'relationtype_id'\n        ]);\n    }\n}\n\n// src/Model/Table/RelationtypesTable.php\nnamespace App\Model\Table;\n\nuse Cake\ORM\Table;\n\nclass RelationtypesTable extends Table\n{\n}