<?php\n\ninclude_once 'php-ofc-library/open-flash-chart.php';\n\n// Connect to MySQL Database\n$con = mysql_connect("localhost", "root", "password");\nif (!$con) die('Could not connect : ' . mysql_error());\n$db_selected = mysql_select_db("cart", $con);\nif (!$db_selected) die("Could not find the database: " . mysql_error());\n\n$sql = "SELECT DATE_FORMAT(order_placed_date, '%Y-%m-%d') AS order_date, order_total \n        FROM orders \n        ORDER BY order_placed_date";\n$result = mysql_query($sql);\n\n$dateData = array();\n$TotalAmountData = array();\n\nwhile ($row = mysql_fetch_array($result)) {\n    $TotalAmountData[] = intval($row['order_total']);\n    $dateData[] = $row['order_date'];\n}\n\n// Create a line chart\n$title = new title('Order Totals Over Time');\n$chart = new open_flash_chart();\n$chart->set_title($title);\n\n// Add data to the chart\n$line_graph = new line();\n$line_graph->set_values(array_values($TotalAmountData));\n$line_graph->set_key("Orders", 10, "#FF6633");\n$chart->add_element($line_graph);\n\n// Set x-axis with date labels\n$x_axis_labels = new x_axis_labels(25);\n$x_axis_labels->rotate(45);\n$x_axis_labels->labels(array_values($dateData));\n$x_axis = new x_axis();\n$x_axis->set_labels($x_axis_labels);\n$chart->set_x_axis($x_axis);\n\n// Output the chart as JSON\necho $chart->toPrettyString();\n\n?>