<?php\n$text = "* list item 1\n* list item 2\n";\n\n$result = preg_replace_callback(\n    '/(\* (.*?)\n)+/s',\n    function($matches) {\n        $items = explode("\n", trim($matches[0]));\n        $listItems = array_map(function($item) {\n            return "<li>" . trim(ltrim($item, '* ')) . "</li>";\n        }, $items);\n        return "<ul>\n  " . implode("\n  ", $listItems) . "\n</ul>";\n    },\n    $text\n);\n\necho htmlspecialchars($result); // For demonstration purposes to prevent XSS in output\n?>