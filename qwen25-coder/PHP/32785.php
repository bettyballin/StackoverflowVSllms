<?php\n// Set error reporting for debugging purposes\nerror_reporting(E_ALL);\nini_set('display_errors', 1);\n\nsession_start();\n\n// Target URL (the site you want to proxy)\n$targetUrl = 'https://example.com';\n\n// Forward request to $targetUrl with all parameters and cookies from the client\nfunction forwardRequest($url) {\n    // Get method of the request\n    $isPost = $_SERVER['REQUEST_METHOD'] === 'POST';\n\n    // Initialize cURL session\n    $ch = curl_init();\n\n    // Set URL\n    curl_setopt($ch, CURLOPT_URL, $url);\n\n    // Return transfer as a string\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n\n    // Follow redirects\n    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);\n\n    // Pass cookies from client to server if any are present\n    if (isset($_COOKIE)) {\n        $cookie = http_build_query($_COOKIE);\n        curl_setopt($ch, CURLOPT_COOKIE, str_replace('&', '; ', $cookie));\n    }\n\n    // Set headers to pass through user-agent, etc.\n    $headers = [];\n    foreach ($_SERVER as $key => $value) {\n        if (substr($key, 0, 5) === 'HTTP_') {\n            $name = str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($key, 5)))));\n            $headers[] = "$name: $value";\n        }\n    }\n\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n    // If it's a POST request, send post fields\n    if ($isPost) {\n        curl_setopt($ch, CURLOPT_POST, true);\n        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($_POST));\n    } else {\n        curl_setopt($ch, CURLOPT_HTTPGET, true);\n    }\n\n    // Execute cURL session and store the response\n    $response = curl_exec($ch);\n\n    // If there are any cookies set by server side, store them in session\n    preg_match_all('/Set-Cookie: (.*?);/i', curl_getinfo($ch,CURLINFO_HEADER_OUT), $cookies);\n    if (!empty($cookies[1])) {\n        foreach ($cookies[1] as $cookie) {\n            list($name, $value) = explode('=', trim($cookie));\n            setcookie($name, $value, time()+86400, '/');\n        }\n    }\n\n    // Close cURL session\n    curl_close($ch);\n\n    return $response;\n}\n\n// Construct the URL with query parameters if any\n$queryString = http_build_query($_GET);\n$urlToForward = strpos($targetUrl, '?') === false ? $targetUrl . '?' : $targetUrl . '&';\n$urlToForward .= $queryString;\n\n$responseData = forwardRequest($urlToForward);\n\necho $responseData;\n?>