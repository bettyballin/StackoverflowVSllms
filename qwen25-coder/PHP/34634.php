require 'vendor/autoload.php';\n\nuse League\OAuth2\Client\Provider\Google;\n\n$provider = new Google([\n    'clientId' => 'your-google-client-id',\n    'clientSecret' => 'your-google-client-secret',\n    'redirectUri' => 'http://your-website.com/callback/google'\n]);\n\nif (!isset($_GET['code'])) {\n    // If we don't have an authorization code then get one\n    $authUrl = $provider->getAuthorizationUrl();\n    $_SESSION['oauth2state'] = $provider->getState();\n\n    header('Location: ' . $authUrl);\n    exit;\n} elseif (empty($_GET['state']) || ($_GET['state'] !== $_SESSION['oauth2state'])) {\n    unset($_SESSION['oauth2state']);\n    exit('Invalid state');\n} else {\n    // Try to get an access token\n    $token = $provider->getAccessToken('authorization_code', [\n        'code' => $_GET['code']\n    ]);\n\n    // Get the details of the user profile\n    try {\n        $user = $provider->getResourceOwner($token);\n\n        printf('<h3>Login Successful</h3>');\n        echo '<pre>';\n        print_r($user);\n        echo '</pre>';\n\n    } catch (Exception $e) {\n        exit('Error getting resource owner: ' . $e->getMessage());\n    }\n}