<?php\n\nfunction show($conn)\n{\n    $a = mysql_fetch_array(mysql_query('select database()', $conn));\n    echo $a[0] . "<br>";\n}\n\n// New connection\n$conn1 = mysql_connect('localhost', 'root', '', TRUE);\nmysql_select_db('dredd', $conn1);\n\n// Use new connection resource explicitly\nshow($conn1);\n\n// Legacy connection - no resource, affects the last opened connection\nmysql_connect('localhost', 'root', '', TRUE);\nmysql_select_db('afup');\nshow(); // This uses the legacy connection without a specified resource\n\n// Close legacy connection if needed\nmysql_close();\n\n// Continue using new connection resource explicitly\n$a = mysql_fetch_array(mysql_query('select database()', $conn1));\necho $a[0] . "<br>";\n\n// Call the legacy code again\nshow(); // Again, uses the last opened connection\n\n// Close the first connection when done\nmysql_close($conn1);\n\n?>