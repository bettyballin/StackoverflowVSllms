function xml2array($node) {\n    $result = [];\n\n    // Check if the node has any attributes, if so, add them to array\n    if ($node->hasAttributes()) {\n        foreach ($node->attributes as $attr) {\n            $result['@attributes'][$attr->name] = $attr->value;\n        }\n    }\n\n    // Check if the node has child nodes\n    if ($node->hasChildNodes()) {\n        $children = [];\n        foreach ($node->childNodes as $childNode) {\n            if ($childNode->nodeType === XML_ELEMENT_NODE) {\n                $childArray = xml2array($childNode);\n                $name = $childNode->nodeName;\n\n                // Handle multiple nodes with the same name\n                if (isset($children[$name])) {\n                    if (!is_array($children[$name]) || !isset($children[$name][0])) {\n                        $children[$name] = [$children[$name]];\n                    }\n                    $children[$name][] = $childArray;\n                } else {\n                    $children[$name] = $childArray;\n                }\n            }\n        }\n\n        if (empty(array_filter($children, function($v) { return !is_array($v); }'))) {\n            // If the children element array is empty, ignore it\n            $result += $children;\n        } else {\n            // Add cdata and text to data\n            foreach ($node->childNodes as $childNode) {\n                if ($childNode->nodeType == XML_CDATA_SECTION_NODE || $childNode->nodeType == XML_TEXT_NODE && trim($childNode->nodeValue) !== '') {\n                    $result['_value'] = trim($childNode->nodeValue);\n                }\n            }\n            $result += $children;\n        }\n    }\n\n    return $result;\n}\n\n$xmlDoc = new DOMDocument();\n$xmlFile = 'path/to/xmldoc.xml';\n$xmlDoc->load($xmlFile);\n$xmlRoot = $xmlDoc->firstChild;\n\n$xmlarray = xml2array($xmlRoot);\n\nprint_r($xmlarray);