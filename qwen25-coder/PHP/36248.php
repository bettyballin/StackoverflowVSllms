<?php\ninclude('secure.php');\ninclude('config.php');\n\ntry {\n    // Create a new PDO instance\n    $pdo = new PDO("mysql:host=$dbhost;dbname=$dbname;charset=utf8", $dbuser, $dbpass);\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n    if (isset($_GET['posID'])) {\n        $posID = filter_input(INPUT_GET, 'posID', FILTER_SANITIZE_NUMBER_INT);\n\n        if (isset($_POST['submitted'])) {\n            // Sanitize the input\n            $approved = filter_input(INPUT_POST, 'approved', FILTER_VALIDATE_INT) ? : 0;\n\n            // Prepare and execute the SQL statement\n            $stmt = $pdo->prepare("UPDATE `positions` SET `approved` = :approved WHERE `posID` = :posID");\n            $stmt->bindParam(':approved', $approved, PDO::PARAM_INT);\n            $stmt->bindParam(':posID', $posID, PDO::PARAM_INT);\n\n            if ($stmt->execute()) {\n                echo (intval($stmt->rowCount()) > 0) ? "Edited row.<br />" : "Nothing changed. <br />";\n            } else {\n                echo "Failed to update row.";\n            }\n\n            echo "<a href='list.php'>Back To Listing</a>";\n        }\n\n        // Fetch the current data\n        $stmt = $pdo->prepare("SELECT * FROM `positions` WHERE `posID` = :posID");\n        $stmt->bindParam(':posID', $posID, PDO::PARAM_INT);\n        $stmt->execute();\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($row) {\n            ?>\n            <form action='' method='POST'>\n                <p><b>Approved:</b><br /><input type='text' name='approved' value='<?= htmlspecialchars($row['approved']) ?>' /></p>\n                <p><input type='submit' value='Edit Row' /><input type='hidden' name='submitted' value='1' /></p>\n            </form>\n            <?php\n        } else {\n            echo "Position not found.";\n        }\n    }\n\n} catch (PDOException $e) {\n    die("Could not connect to the database: " . $e->getMessage());\n}\n?>