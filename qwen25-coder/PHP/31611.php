$mysqli = new mysqli("host", "user", "password", "database");\n\nif ($mysqli->connect_error) {\n    die('Connect Error (' . $mysqli->connect_errno . ') '\n            . $mysqli->connect_error);\n}\n\n$stmt_update = $mysqli->prepare("UPDATE `it_raw` SET \n                                    `eventtime`=?, `eventname`=?, `venuename`=?,\n                                    `venueregion`=?, `venuepostcode`=?, `country`=?,\n                                    `minprice`=?, `available`=?, `link`=?,\n                                    `eventtype`=?, `seaOnSaleDate`=?, \n                                    `perOnSaleDate`=?, `soldOut`= ?,\n                                    `eventImageURL`=?, `perfID`=?\n                                 WHERE `perfID` = ?");\n$stmt_update->bind_param("isisississssssii", $eventUnixTime, $feed_array['3'][$counter],\n        $feed_array['4'][$counter], $feed_array['5'][$counter],\n        $feed_array['6'][$counter], $feed_array['7'][$counter],\n        $feed_array['8'][$counter], $feed_array['9'][$counter],\n        $feed_array['10'][$counter], $feed_array['11'][$counter],\n        $feed_array['12'][$counter], $feed_array['13'][$counter],\n        $feed_array['14'][$counter], $feed_array['15'][$counter],\n        $feed_array['16'][$counter], $feed_array['16'][$counter]);\n\n$stmt_insert = $mysqli->prepare("INSERT INTO  `it_raw` (\n                                    `eventtime`, `eventname`, `venuename`,\n                                    `venueregion`, `venuepostcode`, `country`,\n                                    `minprice`, `available`, `link`,\n                                    `eventtype`, `seaOnSaleDate`, \n                                    `perOnSaleDate`, `soldOut`, `eventImageURL`,\n                                    `perfID`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");\n$stmt_insert->bind_param("isisississssssii", $eventUnixTime, $feed_array['3'][$counter],\n        $feed_array['4'][$counter], $feed_array['5'][$counter],\n        $feed_array['6'][$counter], $feed_array['7'][$counter],\n        $feed_array['8'][$counter], $feed_array['9'][$counter],\n        $feed_array['10'][$counter], $feed_array['11'][$counter],\n        $feed_array['12'][$counter], $feed_array['13'][$counter],\n        $feed_array['14'][$counter], $feed_array['15'][$counter],\n        $feed_array['16'][$counter]);\n\nwhile($counter <= $events) {\n    $eventDate = explode("/", $feed_array['1'][$counter]);\n    $eventTime = explode(":", $feed_array['2'][$counter]);\n    $eventUnixTime = mktime($eventTime[0], $eventTime[1], "00", \n            $eventDate[1], $eventDate[0], $eventDate[2]);\n\n    if ($stmt_update->execute() && $stmt_update->affected_rows === 0) {\n        // If no rows were affected, do an INSERT\n        $stmt_insert->execute();\n    }\n\n    unset($sql);\n    $counter++;\n}\n\n$stmt_update->close();\n$stmt_insert->close();\n$mysqli->close();