<?php\n    require_once('LightOpenID/openid.php');\n    \n    try {\n        $openid = new LightOpenID;\n        \n        if(!$openid->mode) {\n            // Check if the identity is provided and redirect to provider\n            if(isset($_GET['openid_identity'])) {\n                $identity = $_GET['openid_identity'];\n            } else {\n                $identity = 'https://stackauth.com/1.0/openid';\n            }\n            \n            header('Location: '.$openid->authUrl($identity));\n            exit;\n        }\n\n        // Handle the response from the OpenID provider\n        if($openid->mode == 'cancel') {\n            echo 'User has canceled authentication!';\n        } elseif ($openid->validate()) {\n            $data = $openid->getAttributes();\n            echo "Identity: {$openid->identity}<br>";\n            print '<pre>';\n            print_r($data);\n            print '</pre>';\n        }\n    } catch(ErrorException $e) {\n        echo $e->getMessage();\n    }\n    ?>