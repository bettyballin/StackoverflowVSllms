function register() {\n    if ($this->data) {\n        // Check if passwords match without hashing\n        if ($this->data['User']['password'] != $this->data['User']['confirm_password']) {\n            $this->Session->setFlash(__('Password and Confirm Password must match.', true));\n            $this->data['User']['password'] = '';\n            $this->data['User']['confirm_password'] = '';\n        } else {\n            // Hash the password\n            $this->request->data['User']['password'] = $this->Auth->password($this->request->data['User']['password']);\n\n            // Save the data\n            if ($this->User->save($this->request->data)) {\n                $this->redirect(array('action' => 'index'), null, true);\n            } else {\n                $this->request->data['User']['password'] = '';\n                $this->request->data['User']['confirm_password'] = '';\n                $this->Session->setFlash(__('Some problem saving your information.', true));\n            }\n        }\n    }\n}