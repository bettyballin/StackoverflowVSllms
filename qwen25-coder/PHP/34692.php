<?php\n\nfunction getRandomServer() {\n    // Fetch all servers with free space from the database\n    $servers = fetchServersFromDB(); \n    \n    // Sort servers by available space in descending order\n    usort($servers, function($a, $b) {\n        return $b['available_space'] - $a['available_space'];\n    });\n\n    // Get the server with the most space or distribute based on other criteria\n    $server = array_shift($servers);\n\n    return $server;\n}\n\nfunction fetchServersFromDB() {\n    // Query your database to get all servers\n    $db = connectToDatabase();\n    $stmt = $db->query("SELECT * FROM media_servers");\n    \n    return $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n\nfunction uploadFile($file, $server) {\n    // Implement file uploading logic here using FTP/scp/http etc.\n    echo "Uploading {$file} to {$server['name']}\n";\n}\n\n$fileToUpload = 'path/to/file';\n$bestServer = getRandomServer();\n\nuploadFile($fileToUpload, $bestServer);\n\n?>