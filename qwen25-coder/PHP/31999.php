function session_writer($id, $vars) {\n    global $g1;\n    echo "g1 not defined here: ".is_object($g1); // Ensure this is accessible\n}\n\n// Assuming SomeObject() returns an instance of some class\n$g1 = new SomeObject(); // which is the DB connection for the session writer\n\n// Use a closure if PHP version >= 5.3 to capture $g1 in scope\nsession_set_save_handler(\n    function($savePath, $sessionName) { return true; },\n    function() use ($g1) {\n        // Open handler\n        global $g1;\n        echo "Using g1: ".is_object($g1);\n        return true;\n    },\n    function($id) use (&$g1) {\n        // Read handler\n        global $g1;\n        return (string)$g1->readFromSession($id); // Example method call\n    },\n    'session_writer',\n    function($id, $sessionData) use ($g1) {\n        // Write handler\n        global $g1;\n        return $g1->writeToSession($id, $sessionData); // Example method call\n    },\n    function($id) use ($g1) {\n        // Destroy handler\n        global $g1;\n        return $g1->destroySession($id); // Example method call\n    }\n);\n\nsession_start();