<?php\n// Load original image\n$source = 'path/to/your/image.jpg';\n$image = imagecreatefromjpeg($source);\n$width = imagesx($image);\n$height = imagesy($image);\n\n// Create a reflection by flipping it vertically\n$reflection = imagerotate($image, 180, 0);\n\n// Create a new image with the original and reflected parts\n$output = imagecreatetruecolor($width, $height * 2);\nimagesavealpha($output, true); // Enable alpha channel\n\n// Fill background transparently\n$transparentBackground = imagecolorallocatealpha($output, 255, 255, 255, 127);\nimagefill($output, 0, 0, $transparentBackground);\n\n// Copy original image into output image\nimagecopy($output, $image, 0, 0, 0, 0, $width, $height);\n\n// Start pasting reflection with transparency\n$startY = $height;\n$gradientHeight = $height; // Full height of the reflection\n\nfor ($i = 0; $i < $gradientHeight; ++$i) {\n    $alpha = (int)(($i / $gradientHeight) * 127); // Calculate alpha, 0-127\n    imagealphablending($reflection, false);\n    imagesavealpha($reflection, true);\n\n    // Allocate a solid color with the calculated alpha transparency\n    $colorTransparent = imagecolorallocatealpha($reflection, 0, 0, 0, $alpha); // Use black to decrease opacity\n\n    // Fill the reflection line with this transparent color\n    imageline($reflection, 0, 0, $width, 0, $colorTransparent);\n\n    // Merge the transparent line with the output image\n    imagecopy($output, $reflection, 0, $startY + $i, 0, $i, $width, 1);\n}\n\n// Output and save\nheader('Content-type: image/png');\nimagepng($output);\nimagedestroy($image);\nimagedestroy($reflection);\nimagedestroy($output);\n?>