$template = file_get_contents('yourfile.tpl');\n$pattern = '/<!--if\(([^)]*)\)-->.*?<!--endif-->/s';\n\npreg_match_all($pattern, $template, $matches);\n\nforeach ($matches[0] as $key => $fullMatch) {\n    $condition = $matches[1][$key];\n    // Assuming variables like {VERSION} are replaced elsewhere in your code\n    // For now, use eval carefully or a safer alternative if possible\n    $result = false;\n    try {\n        // Safely evaluate condition\n        $result = eval('return (' . str_replace('{', '$', $condition) . ');');\n    } catch (Exception $e) {\n        error_log("Error evaluating condition: " . $e->getMessage());\n    }\n    \n    if ($result) {\n        $template = str_replace($fullMatch, preg_match('/<!--if\(([^)]*)\)-->([^-]*)<!--endif-->/s', $fullMatch, $match) ? trim($match[2]) : '', $template);\n    } else {\n        $template = str_replace($fullMatch, '', $template);\n    }\n}\n\necho $template;