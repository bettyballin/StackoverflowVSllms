function clean($str) {\n    $array = [];\n    $handle = fopen("badwords.txt", "r");\n    if ($handle) {\n        while (($line = fgets($handle)) !== false) {\n            // Trim the line to remove whitespace and newline characters\n            $array[] = trim($line);\n        }\n        fclose($handle);\n    }\n\n    $filter = "[explicit]";\n    // Add /i modifier for case insensitive match\n    $pattern = '/\b(' . implode('|', array_map('preg_quote', $array, ['|' => '\\|'])) . ')\b/i';\n    \n    return preg_replace($pattern, $filter, $str);\n}