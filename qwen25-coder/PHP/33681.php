$mysqli = new mysqli("localhost", "user", "password", "database");\n$mysqli->set_charset('utf8mb4'); // Set character encoding\n\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n// Example of still needing to manually escape if not using prepared statements\n$query = sprintf("SELECT * FROM users WHERE username='%s'",\n               $mysqli->real_escape_string($username)); // Only safe if charset is correct\n\n$result = $mysqli->query($query);