function limitLineBreaks($text) {\n    // Regular expression to match 3 or more newlines (considers \r\n, \r, and \n)\n    $pattern = '/(\r\n|\r|\n){3,}/m';\n    \n    // Replacement pattern with exactly two br tags followed by a single newline\n    $replacement = "<br /><br />\n";\n    \n    // Use preg_replace to replace the pattern with the replacement string\n    return preg_replace($pattern, $replacement, $text);\n}\n\n// Example usage:\n$message = "Porcupines\nare\n\n\n\nporcupiney.\n";\n$formattedMessage = limitLineBreaks($message);\n\necho nl2br($formattedMessage);