<?php\nfunction emailHtml($from, $subject, $message, $to) {\n    require_once "Mail.php";\n    require_once 'Mail/mime.php';\n\n    // Set headers with UTF-8 encoding\n    $headers = array(\n        'MIME-Version' => "1.0",\n        'Content-type' => "text/html; charset=utf-8;",\n        'From' => $from,\n        'To' => $to,\n        'Subject' => $subject\n    );\n\n    // Create a new Mail_mime object and set the body and headers\n    $mime = new Mail_mime();\n    $mime->setHTMLBody($message, "utf-8");\n\n    // Encode the message\n    $body = $mime->get(array('text_encoding' => '7bit', 'html_charset' => 'utf-8'));\n    $headers = $mime->headers($headers);\n\n    // Send the email\n    $m = Mail::factory('mail');\n    $mail = $m->send($to, $headers, $body);\n    \n    if (PEAR::isError($mail)) {\n        return 0;\n    } else {\n        return 1;\n    }\n}\n?>