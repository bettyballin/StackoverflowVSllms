<?php\nrequire_once('xmpphp/XMPP.php');\n\nfunction send_chat_message($to, $message) {\n    // Connect to XMPP server and login\n    $conn = new XMPPHP_XMPP(\n        'your.xmpp.server.com', 5222, // server details\n        'username', 'password', // credentials\n        'xmpphp', // resource\n        'yourdomain.com' // domain\n    );\n\n    try {\n        $conn->connect();\n        $conn->processUntil('session_start');\n        $conn->presence();\n\n        // Send the message\n        $conn->message($to, $message);\n\n        // Disconnect\n        $conn->disconnect();\n    } catch(XMPPHP_Exception $e) {\n        die($e->getMessage());\n    }\n}\n\n// Assume this is called from an AJAX post\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    $to = 'recipient@example.com';\n    $message = $_POST['message'];\n    send_chat_message($to, $message);\n    echo "Message sent!";\n}\n?>