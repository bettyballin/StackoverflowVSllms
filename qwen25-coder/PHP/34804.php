<?php\n\n$criteria = [\n    'favourite_colour' => 'Red',\n    'country' => 'United States',\n    'age_group' => '18-25'\n];\n\n$queryParts = [];\n$params = [];\n\nforeach ($criteria as $field => $value) {\n    $queryParts[] = "WHEN {$field} = ? THEN 1 ELSE 0 END";\n    $params[] = $value;\n}\n\n$similarityCalculation = implode(' + ', $queryParts);\n$totalCriteria = count($criteria);\n\n$sql = "\nSELECT \n    id,\n    favourite_colour,\n    country,\n    age_group,\n    ({$similarityCalculation}) / {$totalCriteria} * 100 AS similarity_percentage\nFROM \n    people\nORDER BY\n    similarity_percentage DESC;\n";\n\n// Use a prepared statement to prevent SQL injection\n$stmt = $pdo->prepare($sql);\n$stmt->execute($params);\n\n$results = $stmt->fetchAll(PDO::FETCH_ASSOC);\nprint_r($results);\n?>