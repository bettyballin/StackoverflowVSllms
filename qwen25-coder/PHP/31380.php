<?php\n// Sample data similar to what you might get from your MySQL query\n$data = [\n    ["fname" => "joe", "sname" => "blogs", "uname" => "joe.blogs", "assignment" => 1, "task" => 1, "grade" => 52],\n    ["fname" => "joe", "sname" => "blogs", "uname" => "joe.blogs", "assignment" => 1, "task" => 2, "grade" => 58],\n    ["fname" => "jim", "sname" => "blogs", "uname" => "jim.blogs", "assignment" => 1, "task" => 1, "grade" => 95],\n    ["fname" => "jim", "sname" => "blogs", "uname" => "jim.blogs", "assignment" => 1, "task" => 2, "grade" => 86],\n    ["fname" => "amy", "sname" => "blogs", "uname" => "amy.blogs", "assignment" => 1, "task" => 1, "grade" => null],\n    ["fname" => "amy", "sname" => "blogs", "uname" => "amy.blogs", "assignment" => 1, "task" => 2, "grade" => 76]\n];\n\n// Initialize a placeholder to organize our data\n$organizedData = [];\n\nforeach ($data as $row) {\n    if (!isset($organizedData[$row['uname']])) {\n        $organizedData[$row['uname']] = [\n            'fname' => $row['fname'],\n            'sname' => $row['sname']\n        ];\n    }\n    \n    // Store grades in a nested array structure\n    $organizedData[$row['uname']]['assignments'][$row['assignment']][$row['task']] = \n        is_null($row['grade']) ? 'U' : $row['grade'];\n}\n\n// HTML table construction\necho "<table border='1'>";\necho "<thead><tr>\n          <th>Name</th>\n          <th colspan='2'>Assignment 1</th>\n          <th colspan='2'>Assignment 2</th>\n       </tr>\n       <tr>\n          <td></td>\n          <td>Task 1</td>\n          <td>Task 2</td>\n          <td>Task 1</td>\n          <td>Task 2</td>\n       </tr>\n    </thead>";\necho "<tbody>";\n\nforeach ($organizedData as $uname => $details) {\n    echo "<tr><td>{$details['fname']} {$details['sname']}</td>";\n    echo "<td>" . (isset($details['assignments'][1][1]) ? htmlspecialchars($details['assignments'][1][1], ENT_QUOTES, 'UTF-8') : '&nbsp;') . "</td>";\n    echo "<td>" . (isset($details['assignments'][1][2]) ? htmlspecialchars($details['assignments'][1][2], ENT_QUOTES, 'UTF-8') : '&nbsp;') . "</td>";\n    echo "<td>" . (isset($details['assignments'][2][1]) ? htmlspecialchars($details['assignments'][2][1], ENT_QUOTES, 'UTF-8') : '&nbsp;') . "</td>";\n    echo "<td>" . (isset($details['assignments'][2][2]) ? htmlspecialchars($details['assignments'][2][2], ENT_QUOTES, 'UTF-8') : '&nbsp;') . "</td>";\n    echo "</tr>";\n}\n\necho "</tbody></table>";\n\n?>