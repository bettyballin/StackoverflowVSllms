// Item.php (Model/Entity or Table depending on CakePHP version)\npublic function getDefaultOrderedImages() {\n    $query = $this->Images->find('all')\n        ->where(['Items.id' => $this->id])\n        ->order([\n            'Images.default_image DESC', // Ensures default image comes first\n            'Images.id ASC'\n        ]);\n    \n    return $query;\n}\n\n// Or in ItemsTable.php if moving logic is there\npublic function getDefaultOrderedImages($itemId) {\n    return $this->Images->find('all')\n        ->where(['Images.item_id' => $itemId])\n        ->order([\n            'Images.default_image DESC',\n            'Images.id ASC'\n        ])\n        ->toArray();\n}\n\n// Refactored Controller Logic\n// ItemsController.php\npublic function view($id) {\n    $item = $this->Items->get($id, ['contain' => ['Images']]);\n    \n    // Use updated method to get ordered images\n    $images = $item->getDefaultOrderedImages(); // Assuming Entity method\n    \n    $this->set(compact('item', 'images'));\n}