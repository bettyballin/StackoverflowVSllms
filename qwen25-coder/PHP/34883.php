<?php\nsession_start(); // Start the session\n\nif(isset($_POST["song"]) && $_POST['song'] != "") {\n    $song = $_POST["song"];\n} else {\n    $song = array();\n}\n\n// Create a new DOMDocument for XML\n$dom = new DOMDocument("1.0", "UTF-8");\n$root = $dom->createElement("playlist");\n$dom->appendChild($root);\n$root->setAttribute('version', "1");\n$root->setAttribute('xmlns', "http://xspf.org/ns/0/");\n$trackList = $dom->createElement("trackList");\n$root->appendChild($trackList);\n\nforeach ($song as $counter) {\n    list($title, $location) = explode(',', trim($counter));\n    \n    // Create track element\n    $track = $dom->createElement("track");\n    $trackList->appendChild($track);\n    \n    // Creator element\n    $creator = $dom->createElement("creator", "www.musicking.in");\n    $track->appendChild($creator);\n    \n    // Title element\n    $titleElement = $dom->createElement("title", trim($title));\n    $track->appendChild($titleElement);\n    \n    // Location element\n    $locationElement = $dom->createElement("location", trim($location));\n    $track->appendChild($locationElement);\n}\n\n// Serialize the DOMDocument object as string and store in session\n$_SESSION['playlist_xml'] = $dom->saveXML();\n\n// Output player with dynamic playlist XML\necho '<object data="musicplayer.swf?autostart=true&playlist=playlist.php" type="application/x-shockwave-flash" width="400" height="300">';\necho '<param name="movie" value="musicplayer.swf?autostart=true&playlist=playlist.php"/>';\necho '</object>';\n?>\n\n<!-- File: playlist.php -->\n<?php\nsession_start();\nheader('Content-Type: text/xml');\necho isset($_SESSION['playlist_xml']) ? $_SESSION['playlist_xml'] : '<?xml version="1.0"?><playlist xmlns="http://xspf.org/ns/0/" version="1"/>';\n?>