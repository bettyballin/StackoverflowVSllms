<?php\n\n$htmlContent = '\n<script>\nfunction my_function(hey) {\n    // do stuff\n}\n</script>';\n\n$newFunction = 'function new_function(hi) {\n    // do different stuff\n}';\n\n// Escape the old function name and parameters to safely include them in regex.\n$oldFunctionRegex = preg_quote('function my_function(hey)', '/');\n$newFunctionEscaped = preg_quote($newFunction, '/');\n\n$htmlContent = preg_replace(\n    '/' . preg_quote("function my_function(hey) {", '/') . '.*?' . preg_quote('}', '/') . '/',\n    $newFunctionEscaped,\n    $htmlContent\n);\n\necho htmlspecialchars($htmlContent); // Output the modified content\n\n?>