<?php\n$to = "me@example.com";\n\n// Sanitize inputs\n$name    = htmlspecialchars(strip_tags(trim($_POST['name'])), ENT_QUOTES);\n$message = htmlspecialchars(strip_tags(trim($_POST['message'])), ENT_QUOTES);\n$email   = filter_var(trim($_POST['email']), FILTER_SANITIZE_EMAIL);\n\n$body    = "Person $name submitted a message: \n\n$message";\n$subject = "A message has been submitted from your website";\n\n// Validate email\nif (filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    // Set headers with sanitized email\n    $headers = 'From: ' . $email;\n\n    // Send mail\n    mail($to, $subject, $body, $headers);\n\n    header("Location: http://example.com/thanks");\n} else {\n    header("Location: http://example.com/error?msg=InvalidEmail");\n}\n?>