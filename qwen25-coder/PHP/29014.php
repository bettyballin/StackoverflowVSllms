$lsQuery = "UPDATE `";\n$lsQuery .= $psTableName;\n$lsQuery .= "` SET ";\n\n// Initialize a flag to track if this is the first value being set\n$isFirstValue = true;\n\nforeach ($psValues as $lsKey => $lsValue) {\n    if (!$isFirstValue) {\n        $lsQuery .= ", ";\n    } else {\n        $isFirstValue = false;\n    }\n    $lsQuery .= "`" . $lsKey . "` = '" . $lsValue . "'";\n}\n\n$lsQuery .= " WHERE ";\n\n// Initialize a flag to track if this is the first condition in the WHERE clause\n$isFirstWhere = true;\n\nif (isset($psWhere)) {\n    foreach ($psWhere as $lsKey => $lsValue) {\n        if (!$isFirstWhere) {\n            $lsQuery .= " AND ";\n        } else {\n            $isFirstWhere = false;\n        }\n        $lsQuery .= "`" . $lsKey . "` = '" . $lsValue . "'";\n    }\n}\n\necho $lsQuery;