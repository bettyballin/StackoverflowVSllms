function processEmailQueue() {\n    // Database connection setup\n    $db = Zend_Db_Table_Abstract::getDefaultAdapter();\n    \n    // Fetch unsent emails from the queue\n    $select = $db->select()->from('email_queue')->where('status = ?', 'queued');\n    $emails = $db->fetchAll($select);\n    \n    foreach ($emails as $email) {\n        try {\n            $mail = new Zend_Mail();\n            $mail->addTo($email['to_email'])\n                 ->setSubject($email['subject'])\n                 ->setBodyText($email['body']);\n            \n            // Transport setup\n            $transport = new Zend_Mail_Transport_Smtp('localhost');\n            $mail->send($transport);\n            \n            // Mark email as sent if successful\n            $where = array('id = ?' => $email['id']);\n            $db->update('email_queue', array('status' => 'sent'), $where);\n        } catch (Exception $e) {\n            // Handle exceptions and possibly mark the status to 'failed'\n            error_log($e->getMessage());\n        }\n    }\n}