<?php\n\nclass foo {\n    public $bar;\n\n    function __construct() {\n        echo "Foo Exists!\n";\n    }\n\n    function magic_bullet($id) {\n        switch ($id) {\n            case 1:\n                echo "There is no spoon! ";\n                break;\n            case 2:\n                echo "Or is there... ";\n                break;\n            default:\n                echo "ID not found.\n";\n                break;\n        }\n    }\n\n    function addBar(bar $barInstance) {\n        $barInstance->setContainer($this);\n        $this->bar[] = $barInstance;\n    }\n}\n\nclass bar {\n    private $container;\n\n    function __construct() {\n        echo "Bar exists\n";\n    }\n\n    function setContainer(foo $container) {\n        $this->container = $container;\n    }\n\n    function target($id) {\n        echo "I want a magic bullet for this ID! ";\n        // Use the container reference to call magic_bullet\n        if ($this->container !== null) {\n            $this->container->magic_bullet($id);\n        } else {\n            echo "Container not set.\n";\n        }\n    }\n}\n\n$test = new foo();\n$barInstance = new bar();\n$test->addBar($barInstance); // Adding bar instance with setting the container\n$test->bar[0]->target(2); // This will call magic_bullet in the foo class\n\n?>