$idir = "images/";   // Path To Images Directory\n$tdir = "images/";   // Path To Thumbnails Directory\n$twidth = "125";   // Maximum Width For Thumbnail Images\n$theight = "100";   // Maximum Height For Thumbnail Images \n\n$url = $_FILES['imagefile']['name'];   // Set $url To Equal The Filename For Later Use\n\nif (in_array($_FILES['imagefile']['type'], ["image/jpg", "image/jpeg", "image/pjpeg", "image/png", "image/gif"])) {\n    $file_ext = strrchr($_FILES['imagefile']['name'], '.');   // Get The File Extention In The Format Of , For Instance, .jpg, .gif or .php\n    $fdate = date('ssU');\n    $copy = copy($_FILES['imagefile']['tmp_name'], "$idir" . $fdate . "$file_ext");   // Move Image From Temporary Location To Permanent Location\n\n    if ($copy) {   // If The Script Was Able To Copy The Image To Its Permanent Location\n        print 'Image uploaded successfully.<br />';   // Was Able To Successfully Upload Image\n\n        switch ($_FILES['imagefile']['type']) {\n            case "image/jpg":\n            case "image/jpeg":\n            case "image/pjpeg":\n                $simg = imagecreatefromjpeg("$idir" . "$fdate" . "$file_ext");   // Make A New Temporary Image To Create The Thumbnail From\n                $savefunc = 'imagejpeg';\n                break;\n            case "image/png":\n                $simg = imagecreatefrompng("$idir" . "$fdate" . "$file_ext");\n                imagesavealpha($simg, true);\n                $savefunc = 'imagepng';\n                break;\n            case "image/gif":\n                $simg = imagecreatefromgif("$idir" . "$fdate" . "$file_ext");\n                $savefunc = 'imagegif';\n                break;\n            default:\n                print '<font color="#FF0000">ERROR: Unsupported image type.</font>';\n                exit;\n        }\n\n        if (!$simg) {\n            print '<font color="#FF0000">ERROR: Unable to create image from file.</font>';\n            exit;\n        }\n\n        $currwidth = imagesx($simg);   // Current Image Width\n        $currheight = imagesy($simg);   // Current Image Height\n\n        if ($currheight > $currwidth) {   // If Height Is Greater Than Width\n            $zoom = $twidth / $currheight;   // Length Ratio For Width\n            $newheight = $theight;   // Height Is Equal To Max Height\n            $newwidth = $currwidth * $zoom;   // Creates The New Width\n        } else {    // Otherwise, Assume Width Is Greater Than Height (Will Produce Same Result If Width Is Equal To Height)\n            $zoom = $twidth / $currwidth;   // Length Ratio For Height\n            $newwidth = $twidth;   // Width Is Equal To Max Width\n            $newheight = $currheight * $zoom;   // Creates The New Height\n        }\n\n        $dimg = imagecreatetruecolor($newwidth, $newheight);   // Make New Image For Thumbnail\n\n        if ($_FILES['imagefile']['type'] == "image/png") {\n            imagesavealpha($dimg, true);\n            $transparentColorIndex = imagecolortransparent($simg);\n\n            if ($transparentColorIndex >= 0) {\n                $transparentRGBA = imagecolorsforindex($simg, $transparentColorIndex);\n                $transparentColorAlpha = $transparentRGBA['alpha'];\n                $transparentColorIndex = imagecolorallocatealpha($dimg, 0, 0, 0, $transparentColorAlpha);\n            } else {\n                $transparentColorIndex = imagecolorallocatealpha($dimg, 255, 255, 255, 127);\n            }\n\n            imagefill($dimg, 0, 0, $transparentColorIndex);\n        }\n\n        imagecopyresampled($dimg, $simg, 0, 0, 0, 0, $newwidth, $newheight, $currwidth, $currheight);\n\n        if (function_exists($savefunc)) {\n            call_user_func_array($savefunc, [$dimg, "$tdir" . $fdate . "$file_ext"]);\n            print 'Image thumbnail created successfully.';   // Resize successful\n        } else {\n            print '<font color="#FF0000">ERROR: Cannot save image.</font>';\n        }\n\n        imagedestroy($simg);   // Destroying The Temporary Image\n        imagedestroy($dimg);   // Destroying The Other Temporary Image\n    } else {\n        print '<font color="#FF0000">ERROR: Unable to upload image.</font>';   // Error Message If Upload Failed\n    }\n} else {\n    print '<font color="#FF0000">ERROR: Wrong filetype (has to be a .jpg, .jpeg, .png, or .gif. Yours is ';   // Error Message If Filetype Is Wrong\n    print $file_ext;   // Show The Invalid File's Extention\n    print '.</font>';\n}