// src/Controller/UsersController.php\nnamespace App\Controller;\n\nuse App\Controller\AppController;\nuse Cake\Event\EventInterface;\n\nclass UsersController extends AppController\n{\n    public function beforeFilter(EventInterface $event)\n    {\n        parent::beforeFilter($event);\n        // Allow users to register and login.\n        $this->Authentication->addUnauthenticatedActions(['register']);\n    }\n\n    public function register()\n    {\n        if ($this->request->is('post')) {\n            $user = $this->Users->newEmptyEntity();\n            $user = $this->Users->patchEntity($user, $this->request->getData());\n            if ($this->Users->save($user)) {\n                $this->Flash->success(__('The user has been saved.'));\n                return $this->redirect(['action' => 'login']);\n            }\n            $this->Flash->error(__('Unable to add the user.'));\n        }\n    }\n}