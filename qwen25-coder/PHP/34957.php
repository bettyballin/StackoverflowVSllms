<?php\nfunction getFileUrl($filename) {\n    $tempDir = '/path/to/temp_content/';\n    $storageDirs = ['/path/to/server1/thumbs/', '/path/to/server2/thumbs/']; // Add more servers as needed\n\n    $tempFilePath = $tempDir . $filename;\n    \n    // Check if the file exists in the temporary directory\n    if (file_exists($tempFilePath)) {\n        return "http://www.domain.com/temp_content/" . urlencode($filename);\n    } else {\n        // If not, search for it in the storage directories\n        foreach ($storageDirs as $dir) {\n            $filePath = $dir . $filename;\n            if (file_exists($filePath)) {\n                // Replace with your actual server URL logic\n                $serverUrl = str_replace('/path/to/', 'http://', $dir);\n                return $serverUrl . urlencode($filename);\n            }\n        }\n    }\n\n    // File not found in any location\n    throw new Exception("File not found");\n}\n\ntry {\n    echo getFileUrl('filename.jpg');\n} catch (Exception $e) {\n    echo "Error: " . $e->getMessage();\n}\n?>