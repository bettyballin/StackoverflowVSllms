$redis = new Redis();\n$redis->connect('127.0.0.1');\n\nfunction getFriendIds($userId) {\n    global $redis;\n    \n    // Try to fetch from cache\n    $friendsListKey = "user:{$userId}:friends";\n    if ($friendIds = $redis->get($friendsListKey)) {\n        return unserialize($friendIds);\n    }\n    \n    // If not in cache, query database\n    $db = new PDO('mysql:host=localhost;dbname=yourDB', 'username', 'password');\n    $stmt = $db->prepare("SELECT friendid FROM friend_friend WHERE userid=? AND status=1");\n    $stmt->execute([$userId]);\n    $friendIds = $stmt->fetchAll(PDO::FETCH_COLUMN);\n    \n    // Store in cache for 5 minutes\n    $redis->set($friendsListKey, serialize($friendIds), 300);\n    \n    return $friendIds;\n}