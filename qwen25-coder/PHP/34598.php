<?php\nfunction highlight_matches($text, $search_term) {\n    // Delimiters and pattern for preg_replace to match whole words only\n    $pattern = '/\b' . preg_quote($search_term, '/') . '\b/i';\n\n    // Highlight the matches without altering case using <mark>\n    $highlighted_text = preg_replace_callback($pattern, function ($matches) use ($search_term) {\n        return ($matches[0] === $search_term) ? "<mark>{$matches[0]}</mark>" : $matches[0];\n    }, $text);\n\n    // Find all positions of matches\n    preg_match_all('/\b' . preg_quote($search_term, '/') . '\b/i', $text, $match_positions, PREG_OFFSET_CAPTURE);\n\n    // Assume average character width in pixels (this is a rough estimation)\n    $char_width = 8; // This can be adjusted based on font size and type\n    $max_length = 200; // This should ideally be calculated dynamically from font-size\n\n    if (!empty($match_positions[0])) {\n        // Find the first match\n        $first_match_offset = $match_positions[0][0][1];\n        // Calculate start of substring to extract text around match\n        $start = max(0, $first_match_offset - ($max_length / 2));\n\n        // Extract a portion of the text\n        $shortened_text = substr($text, $start, $max_length);\n    } else {\n        $shortened_text = $text;\n    }\n\n    return ['full_text' => $highlighted_text, 'shortened_text' => $shortened_text];\n}\n\n// Example usage\n$text = "This is a Sample string where we are searching for the word AM in various cases like am and lAMb.";\n$search_term = "AM";\n$result = highlight_matches($text, $search_term);\n\necho "Full Text: " . $result['full_text'] . "\n";\necho "Shortened Text: " . $result['shortened_text'] . "\n";\n?>