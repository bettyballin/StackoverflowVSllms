function xmlErrorHandler($errno, $errstr) {\n    throw new Exception($errstr);\n}\n\nlibxml_set_external_entity_loader(function() { return false; });\n\ntry {\n    libxml_use_internal_errors(true);\n    set_error_handler('xmlErrorHandler');\n\n    $reader = new XMLReader();\n    if (!$reader->open('example.xml')) {\n        throw new Exception("Failed to open XML file.");\n    }\n\n    while ($reader->read()) {\n        // Process node\n    }\n} catch (Exception $e) {\n    echo 'Error: ',  $e->getMessage(), "\n";\n} finally {\n    restore_error_handler();\n    libxml_use_internal_errors(false);\n}