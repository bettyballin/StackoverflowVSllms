<?php\n$server = "localhost";\n$username = "root";\n$password = "root";\n$dbname = "icrisis";\n\n// Create connection\n$conn = new mysqli($server, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die("Connection failed: " . $conn->connect_error);\n}\n\n$orderByType = isset($_GET['orderby']) ? strtoupper(trim($_GET['orderby'])) : 'ASC';\n\n// Sanitize input\n$orderBy = in_array($orderByType, ['ASC', 'DESC']) ? $orderByType : 'ASC';\n\n$sql = "SELECT messages.Time_Date, user.player_name, messages.msg_desc \n        FROM messages JOIN user ON messages.from_user = user.user_id \n        ORDER BY user.user_name " . $orderBy;\n\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n    while($row = $result->fetch_assoc()) {\n        echo "<tr><td>&#8226;</td>";\n        echo "<td>" . htmlspecialchars($row['Time_Date']) . "</td>";\n        echo "<td>" . htmlspecialchars($row['player_name']) . "</td>";\n        echo "<td colspan='4'>" . htmlspecialchars($row['msg_desc']) . "</td></tr>";\n    }\n} else {\n    echo "<tr><td colspan='5'>No results</td></tr>";\n}\n\n$conn->close();\n?>