<?php\n$mysqli = new mysqli("host", "user", "password", "database");\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n$sql = "\nSELECT \n    DAYOFWEEK(eventDate) AS DAY,\n    YEAR(eventDate) AS YEAR, \n    MONTH(eventDate) AS MONTH,\n    GROUP_CONCAT(username ORDER BY username ASC SEPARATOR ', ') AS usernames,\n    MAX(`primary`) AS `primary`,  \n    MAX(secondary) AS secondary,  \n    MAX(weekend) AS weekend       \nFROM \n    eventcal\nWHERE \n    region = 4\n    AND MONTH(eventDate) = 7\nGROUP BY \n    DAYOFWEEK(eventDate), YEAR(eventDate), MONTH(eventDate)\nORDER BY \n    DAY;\n";\n\n$result = $mysqli->query($sql);\n\nif ($result->num_rows > 0) {\n    echo "<table border='1'><tr><th>Day</th><th>Date</th><th>Year</th><th>Usernames</th></tr>";\n    while($row = $result->fetch_assoc()) {\n        $dayOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n        echo "<tr>\n                <td>" . $dayOfWeek[$row['DAY'] - 1] . "</td>\n                <td>" . date('d', strtotime($row['YEAR'] . '-' . $row['MONTH'] . '-01' . ' +' . ($row['DAY'] - 1) . ' days')) . "</td>\n                <td>" . $row["YEAR"] . "</td>\n                <td>" . htmlspecialchars($row["usernames"]) . "</td>\n              </tr>";\n    }\n    echo "</table>";\n} else {\n    echo "0 results";\n}\n$mysqli->close();\n?>