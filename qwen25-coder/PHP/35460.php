function verifyRegistrationKey($receivedKey) {\n    $db = JFactory::getDbo();\n    $query = $db->getQuery(true);\n\n    $query->select('*')\n          ->from($db->quoteName('#__registration_keys'))\n          ->where($db->quoteName('registration_key') . ' = ' . $db->quote($receivedKey));\n\n    try {\n        $db->setQuery($query);\n        $result = $db->loadObject();\n    } catch (Exception $e) {\n        return false;\n    }\n\n    if ($result && !empty($result->user_id)) {\n        // Key is valid\n        return true;\n    }\n\n    return false;\n}