$mysqli->autocommit(FALSE);\n\n// Prepare and execute the first query\nif ($result = $mysqli->query("INSERT INTO .....")) {\n    // Optional: Process the result or continue\n} else {\n    handle_error($mysqli); // Handle error function should roll back transaction among other things\n}\n\n// Repeat for other queries\nif ($result = $mysqli->query("INSERT INTO .....")) {} else { handle_error($mysqli); }\nif ($result = $mysqli->query("INSERT INTO .....")) {} else { handle_error($mysqli); }\nif ($result = $mysqli->query("INSERT INTO .....")) {} else { handle_error($mysqli); }\nif ($result = $mysqli->query("INSERT INTO .....")) {} else { handle_error($mysqli); }\n\n// If all queries are successful, commit the transaction\n$mysqli->commit();\n\nfunction handle_error(&$mysqli) {\n    $error = $mysqli->error;\n    // Log error or display it appropriately\n    $mysqli->rollback();\n    throw new Exception("Transaction failed: " . $error);\n}