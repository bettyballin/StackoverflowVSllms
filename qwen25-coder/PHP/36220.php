<?php\nclass My_Controller_Action_Helper_FlvThumbnail extends Zend_Controller_Action_Helper_Abstract\n{\n    public function direct($flv, $thumbnail) {\n        // Sanitize input paths (basic check)\n        if (!file_exists($flv) || pathinfo($flv, PATHINFO_EXTENSION) !== 'flv') {\n            throw new Exception('Invalid or non-existent FLV file.');\n        }\n        \n        if (pathinfo($thumbnail, PATHINFO_DIRNAME) && !is_writable(pathinfo($thumbnail, PATHINFO_DIRNAME))) {\n            return false; // Or handle error\n        }\n\n        $command = sprintf(\n            "ffmpeg -v 0 -y -i %s -vframes 1 -ss 10 -vcodec mjpeg -f rawvideo -s 210x140 -aspect 16:9 %s",\n            escapeshellarg($flv),\n            escapeshellarg($thumbnail)\n        );\n        \n        // Execute command and get the output\n        $output = shell_exec($command);\n        if ($output === null) {\n            throw new Exception('Failed to generate thumbnail.');\n        }\n\n        return true;\n    }\n}