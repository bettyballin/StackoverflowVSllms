<?php\n\nrequire 'vendor/autoload.php';\n\nuse Aws\S3\S3Client;\nuse Aws\Exception\AwsException;\n\n// Create an S3 Client\n$s3 = new S3Client([\n    'version' => 'latest',\n    'region'  => 'us-east-1', // Change to your region\n    'credentials' => [\n        'key'    => 'YOUR_ACCESS_KEY_ID',\n        'secret' => 'YOUR_SECRET_ACCESS_KEY'\n    ],\n]);\n\n$bucket = 'your-bucket-name';\n\n// Handle file upload\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $uploaddir = '/path/to/local/temp/'; // Temporary directory for uploads\n    $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);\n\n    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {\n        try {\n            $result = $s3->putObject([\n                'Bucket' => $bucket,\n                'Key'    => basename($uploadfile),\n                'SourceFile' => $uploadfile\n            ]);\n\n            echo "Upload successful. File URL: " . $result['ObjectURL'];\n        } catch (AwsException $e) {\n            echo "Error uploading file: " . $e->getMessage();\n        }\n\n        unlink($uploadfile); // Remove the local file after upload\n    } else {\n        echo "Possible file upload attack detected!";\n    }\n}\n\n// List files in S3 bucket\ntry {\n    $objects = $s3->listObjects([\n        'Bucket' => $bucket,\n        'Prefix' => '' // Optional: specify a prefix if you want to list specific folder contents\n    ]);\n\n    foreach ($objects['Contents'] as $object) {\n        echo "<a href='https://{$bucket}.s3.amazonaws.com/{$object['Key']}'>{$object['Key']}</a><br>";\n    }\n} catch (AwsException $e) {\n    // The error message and exception are included in the result.\n    echo "Error retrieving file list: " . $e->getMessage();\n}\n?>