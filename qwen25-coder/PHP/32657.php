if(!(substr($res, 0, 6)=='Failed')){\n    // Suppress errors temporarily\n    libxml_use_internal_errors(true);\n    \n    $xml = new SimpleXMLElement($res);\n\n    // Check for parsing errors\n    if (count(libxml_get_errors())) {\n        error_log('XML Parsing Error: ' . print_r(libxml_get_errors(), true));\n        libxml_clear_errors();\n    } else {\n        $imagelink = (string) $xml->image_link; // This is the image link\n        $_SESSION['shack_link'] = $imagelink;\n        echo 'done';\n    }\n}