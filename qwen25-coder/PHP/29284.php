$new_array = array_intersect_key($arr2, $arr1);\n\nforeach ($new_array as $key => &$val) {\n    if (is_array($val) && is_array($arr1[$key])) {\n        // Merge arrays with values from $val taking precedence over $arr1[$key]\n        $new_array[$key] = array_merge($arr1[$key], $val);\n    }\n}\nunset($val); // Unset the reference to prevent side effects\n\n// Start with all elements from $arr1\n$final = $arr1;\n\n// Replace intersecting keys with merged values from $new_array\nforeach ($new_array as $key => $value) {\n    $final[$key] = $value;\n}\n\nprint_r($final);