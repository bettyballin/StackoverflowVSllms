// Check if a user is logged in\n$modx = $this->modx; // This line assumes this code is running within a MODX context\n$user = $modx->getUser();\n\nif ($user && $user->isAuthenticated()) {\n    $userId = $user->get('id');\n    $username = $user->get('username');\n\n    // Pass to your application or use directly in PHP code\n    echo "Welcome, {$username} (ID: {$userId})";\n\n    // You can also set these as global variables if needed\n    $modx->setPlaceholder('userId', $userId);\n    $modx->setPlaceholder('username', $username);\n}