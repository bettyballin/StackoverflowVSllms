function json_encode_extended($value) {\n    // Convert special characters to their escaped equivalents manually\n    $string = str_replace(\n        array("\r", "\n"),\n        array('\r', '\n'),\n        json_encode($value)\n    );\n    return $string;\n}\n\n$s = <<<END\nFirst row.\nSecond row w/ "double quotes" and backslash: \.\nEND;\n\n$encodedString = json_encode_extended($s);\necho $encodedString; // Outputs: "First row.\r\nSecond row w\/ \"double quotes\" and backslash: \\."