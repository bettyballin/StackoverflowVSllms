function rangesFromArray($numbers) {\n    $ranges = [];\n    $count = count($numbers);\n    \n    if ($count == 0) return ''; // Return empty string if no numbers\n\n    sort($numbers); // Ensure the array is sorted\n    \n    $start = $numbers[0];\n    $end = $numbers[0];\n\n    for ($i = 1; $i < $count; $i++) {\n        if ($numbers[$i] == $end + 1) {\n            $end = $numbers[$i];\n        } else {\n            // Add the range to the list\n            $ranges[] = $start . (($start != $end) ? '-' . $end : '');\n            // Reset start and end for the new range\n            $start = $numbers[$i];\n            $end = $numbers[$i];\n        }\n    }\n\n    // Don't forget to add the last range\n    $ranges[] = $start . (($start != $end) ? '-' . $end : '');\n\n    return implode(',', $ranges);\n}\n\n$numbers = array(1, 3, 4, 5, 6, 8, 11, 12, 14, 15, 16);\necho rangesFromArray($numbers); // Output: 1,3-6,8,11-12,14-16