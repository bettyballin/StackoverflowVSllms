<?php\n// Assuming $result is your MySQL result set from a query\n\n// Fetch all data into an array\n$data = [];\nwhile ($row = mysqli_fetch_assoc($result)) {\n    $data[] = implode(',', $row) . "\n"; // Adjust the format as necessary\n}\n\n// Generate timestamped filename\n$filename = 'output_' . date('YmdHis') . '.csv';\n\n// Open file in write mode\n$file = fopen('/path/to/your/directory/' . $filename, 'w');\n\nif ($file === FALSE) {\n    die('Cannot open file for writing.');\n}\n\n// Write data to the file\nforeach ($data as $line) {\n    fwrite($file, $line);\n}\n\n// Close the file\nfclose($file);\n\necho "Data has been written to {$filename}.";\n?>