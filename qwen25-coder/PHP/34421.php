// ItemsController.php\npublic function view($id) {\n    $item = $this->Items->get($id);\n    $images = $this->Images->find('all', ['conditions' => ['item_id' => $id]]);\n    \n    // Sort images by default_image flag and then id\n    usort($images, function($a, $b) {\n        if ($a['default_image'] == $b['default_image']) {\n            return $a['id'] <=> $b['id'];\n        }\n        return $b['default_image'] <=> $a['default_image'];\n    });\n    \n    $this->set(compact('item', 'images'));\n}