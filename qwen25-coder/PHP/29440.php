function register_contact ($person = array()) {\n    $nogood = false;\n    foreach ($person as $val) {\n        if (strlen($val)==0) {\n            $nogood = true;\n            $status = "There was an error sending the registration please fill in all fields";\n            break; // Exit loop early when invalid data is found\n        }\n    }\n    if (!$nogood) {\n        require 'PHPMailer/PHPMailerAutoload.php'; // Adjust based on your installation\n\n        $message = "New request for Fox In Touch Recipient:.\r\n\r\n";\n        foreach ($person as $key => $value) {\n            if (in_array($key, ['fname', 'sname', 'email', 'job', 'company'])) {\n                $message .= ucfirst($key) . ": " . htmlspecialchars($value) . "\r\n"; // Sanitize output\n            }\n        }\n\n        $mail = new PHPMailer;\n        $mail->isSMTP(); \n        $mail->Host = getenv('SMTP_HOST'); // Use environment variables for sensitive data\n        $mail->SMTPAuth = true;     \n        $mail->Username = getenv('SMTP_USERNAME');\n        $mail->Password = getenv('SMTP_PASSWORD');\n        $mail->SMTPSecure = 'tls';  // Ensure secure connection\n        $mail->Port = 587;\n\n        $mail->From = "foxintouch@bionic-comms.co.uk";\n        $mail->FromName = "Fox In Touch";\n        $mail->addAddress(getenv('RECIPIENT_EMAIL'), getenv('RECIPIENT_NAME')); // Use environment variables\n        $mail->addReplyTo($person['email'], htmlspecialchars($person['fname'] . ' ' . $person['sname'])); // Sanitize output\n\n        $mail->isHTML(false);\n        $mail->Subject = "Contact request for Fox In Touch!";\n        $mail->Body    = $message;\n\n        if(!$mail->send()) {\n            $nogood = true;\n            $status = "Message was not sent <p>";\n            $status .= "Mailer Error: " . htmlspecialchars($mail->ErrorInfo); // Sanitize output\n        } else {\n            $status = "Thank you! Your message has been sent to 20th Century Fox. Submit another?"; \n        }\n    }\n    return array('email_failed' => $nogood, 'status' => $status);\n}