use PHPMailer\PHPMailer\PHPMailer;\nuse PHPMailer\PHPMailer\Exception;\n\n$mail = new PHPMailer(true);\n\ntry {\n    // Read the HTML content\n    $body = file_get_contents('template/index.htm');\n\n    // Initialize a DOMDocument to parse the HTML\n    libxml_use_internal_errors(true); // Prevent errors from invalid HTML\n    $doc = new DOMDocument();\n    $doc->loadHTML($body);\n    libxml_clear_errors();\n\n    // Loop through each <img> tag\n    foreach ($doc->getElementsByTagName('img') as $element) {\n        $src = $element->getAttribute('src');\n        if (file_exists("template/{$src}")) {\n            // Create a CID for the image\n            $cid = md5($src);\n            // Add the embedded image\n            $mail->addEmbeddedImage(\n                'template/' . $src,\n                $cid, // ID to use in the email body\n                $src,\n                'base64', // Encoding type, 'base64' is the default\n                'image/png' // MIME type should match your file extension\n            );\n            // Set the img src tag to use CID\n            $element->setAttribute('src', 'cid:' . $cid);\n        }\n    }\n\n    // Update the email body with new HTML content\n    $body = $doc->saveHTML();\n    \n    // Setup other mail options\n    $mail->Subject = "PHPMailer Test Subject via mail(), basic";\n    $mail->AltBody = "To view this message, please use an HTML compatible email viewer!";\n    $mail->setFrom('xxxxxxx', 'xxxxxxxxxx');\n    $mail->addAddress('.......@gmail.com', "xxxxxxx");\n    $mail->msgHTML($body);\n\n    // Send the mail\n    if ($mail->send()) {\n        echo "Message sent!";\n    } else {\n        throw new Exception("Mailer Error: " . $mail->ErrorInfo);\n    }\n\n} catch (Exception $e) {\n    echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";\n}