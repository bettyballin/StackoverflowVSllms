<?php\n    session_start();\n    if (!isset($_SESSION['user_id'])) {\n        die('User not logged in');\n    }\n\n    $userId = $_SESSION['user_id'];\n\n    // Database connection setup\n    $conn = new mysqli("localhost", "username", "password", "database_name");\n\n    // Fetch positions from the database\n    $query = "SELECT widget_id, position FROM user_widget_positions WHERE user_id=?";\n    $stmt = $conn->prepare($query);\n    $stmt->bind_param("i", $userId);\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    $positions = [];\n    while ($row = $result->fetch_assoc()) {\n        $positions[$row['widget_id']] = json_decode($row['position'], true);\n    }\n\n    echo '<script type="text/javascript">var userPositions = ' . json_encode($positions) . ';</script>';\n\n    $stmt->close();\n    $conn->close();\n    ?>