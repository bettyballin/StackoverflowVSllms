<?php\nglobal $post;\n$ancestors = get_ancestors($post->ID, 'page');  // Get all ancestor pages\n\n$header_image_url = '';\n\nif (!empty($ancestors)) {\n    // The last item in the array is the highest level parent.\n    $highest_parent_id = end($ancestors);\n} else {\n    // If there are no ancestors, this is a top-level page.\n    $highest_parent_id = $post->ID;\n}\n\n// Check the custom field for the highest parent or current post (if it's top-level).\n$header_image_url = get_post_meta($highest_parent_id, 'header_image', true);\n\n// Check if header image set via top-level ancestor.\nif (!$header_image_url) {\n    // Set default image here if needed\n    $header_image_url = content_url() . '/uploads/default-header.png';  // Example default image path.\n}\n?>\n\n<!-- Output the header image -->\n<img src="<?php echo esc_url($header_image_url); ?>" alt="Header Image">