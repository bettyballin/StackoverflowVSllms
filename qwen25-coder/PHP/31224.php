<?php\n$title = $_GET['title']; // Use $_GET instead of $GET\n$url = $_GET['url'];\n\n// Clean the filename to prevent directory traversal attacks\n$safeTitle = preg_replace('/[^a-zA-Z0-9_-]/', '', basename($title));\n\n$ourFileName = "$safeTitle.jpg"; // Correctly concatenate strings and variables\n\n// Check if the title is not empty\nif (empty($safeTitle)) {\n    die("Invalid filename");\n}\n\n$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");\nfclose($ourFileHandle);\n\n$ch = curl_init ("http://www.address.com?url=$url");\ncurl_setopt($ch, CURLOPT_HEADER, 0);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_BINARYTRANSFER,1);\n$rawdata = curl_exec ($ch);\ncurl_close ($ch);\n\n// Ensure the 'images' directory exists and is writable\nif (!is_dir('images')) {\n    mkdir('images', 0755, true);\n}\n\n$fp = fopen("images/$ourFileName", 'w');\nfwrite($fp, $rawdata);\nfclose($fp); \n\necho "<img src='images/$ourFileName'>";\n?>