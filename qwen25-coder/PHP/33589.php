<?php\n$img = imagecreatefromgif("./unit.gif");\n\n$size_x = imagesx($img);\n$size_y = imagesy($img);\n\n$temp = imagecreatetruecolor($size_x, $size_y);\n\n// Make sure the new image has a transparent background\nimagealphablending($temp, false);\nimagesavealpha($temp, true);\n$transparent = imagecolorallocatealpha($temp, 0, 0, 0, 127);\nimagefill($temp, 0, 0, $transparent);\n\n// Copy and flip the GIF image horizontally\nfor ($x = 0; $x < $size_x; $x++) {\n    imagecopyresampled($temp, $img, $x, 0, $size_x - $x - 1, 0, 1, $size_y, 1, $size_y);\n}\n\nheader("Content-type: image/gif");\nimagegif($temp);\nimagedestroy($img);\nimagedestroy($temp);\n?>