$pgConnection = pg_connect('host=127.0.0.1 dbname=test user=myuser password=xxxxx') or die('cant connect');\n\n// Begin transaction to ensure atomicity\npg_query($pgConnection, "BEGIN");\n\ntry {\n    // Perform the insert operation\n    $insertQuery = pg_prepare($pgConnection, 'insert_customer', 'INSERT INTO customer (name) VALUES ($1) RETURNING id');\n    $result = pg_execute($pgConnection, 'insert_customer', array('blabla'));\n\n    if (!$result) {\n        throw new Exception("Insert failed: " . pg_last_error($pgConnection));\n    }\n\n    // Fetch the last inserted ID directly from the insert operation\n    $last_id_results = pg_fetch_assoc($result);\n    print_r($last_id_results);\n\n    // Commit the transaction\n    pg_query($pgConnection, "COMMIT");\n} catch (Exception $e) {\n    // Rollback in case of error\n    pg_query($pgConnection, "ROLLBACK");\n    echo 'Error: ', $e->getMessage();\n}\n\n// Close connection\npg_close($pgConnection);