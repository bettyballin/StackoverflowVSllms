function hasPermission($userId, $permissionAction) {\n    global $db; // Assume this is your database connection\n\n    $stmt = $db->prepare("\n        SELECT COUNT(*)\n        FROM users u\n        JOIN user_roles ur ON u.user_id = ur.user_id\n        JOIN role_permissions rp ON ur.role_id = rp.role_id\n        JOIN permissions p ON rp.permission_id = p.permission_id\n        WHERE u.user_id = ? AND p.action = ?\n    ");\n    $stmt->execute([$userId, $permissionAction]);\n    return $stmt->fetchColumn() > 0;\n}\n\n// Usage:\nif (hasPermission($user->id, 'CREATE_POST')) {\n    // Allow the user to create a post\n}