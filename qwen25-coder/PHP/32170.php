$xml = <<<'XML'\n<html>\n<head><title>Test</title></head>\n<body>\n<p class="old-class">This is a test.</p>\n<p>This is another paragraph.</p>\n</body>\n</html>\nXML;\n\n$dom = new DOMDocument();\nlibxml_use_internal_errors(true); // suppress warnings about poorly formed XML (since it's XHTML, should be fine)\n$dom->loadHTML($xml);\nlibxml_clear_errors();\n\n// Find all <p> tags\n$paragraphs = $dom->getElementsByTagName('p');\n\nforeach ($paragraphs as $paragraph) {\n    // Change the class attribute\n    if ($paragraph->hasAttribute('class')) {\n        $paragraph->setAttribute('class', 'new-class');\n    } else {\n        $paragraph->setAttribute('class', 'fallback-class');\n    }\n}\n\n// Output the modified XML\necho $dom->saveHTML();