<?php\nsession_start();\n\n// Assume $username and $password are obtained through your authentication mechanism (Apache module)\nif (!isset($_SESSION['ws_credentials'])) {\n    // Store user credentials in a session variable after initial login\n    $_SESSION['ws_credentials'] = [\n        'username' => htmlspecialchars($username),\n        'password' => htmlspecialchars($password) // Consider hashing if needed, but not necessary for SOAP headers\n    ];\n}\n\n// Function to create and send SOAP requests\nfunction callSoapService($method, $params) {\n    startSession(); // Ensure session is started\n    $wsdl = "http://example.com/service?wsdl"; // Change this to your WSDL URL\n\n    $client = new SoapClient($wsdl);\n    \n    // Get credentials from session\n    $credentials = $_SESSION['ws_credentials'];\n\n    // Set up SOAP headers with credentials\n    $headerBody = array('username' => $credentials['username'], 'password' => $credentials['password']);\n    $header = new SoapHeader("http://www.example.org/wsse", "UserCredentials", $headerBody);\n    \n    // Apply the header to client\n    $client->__setSoapHeaders($header);\n\n    try {\n        // Call SOAP method\n        return $client->__soapCall($method, array('parameters' => $params));\n    } catch (Exception $e) {\n        echo "An error occurred: " . $e->getMessage();\n        return null;\n    }\n}