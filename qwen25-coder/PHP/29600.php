<?php\nsession_start();\n\nfunction sendEmailWithAttachment($filePath) {\n    $to = 'recipient@example.com';\n    $subject = 'Here is your file';\n    $message = 'Please find the attached document.';\n    $headers = "From: sender@example.com\r\n";\n    $headers .= "Reply-To: replyTo@example.com\r\n";\n\n    // Check if file exists\n    if (!file_exists($filePath)) {\n        die("File not found");\n    }\n\n    $file = $filePath;\n    $content = file_get_contents($file);\n    $content = chunk_split(base64_encode($content));\n    $boundary = md5("random");\n\n    $headers .= "MIME-Version: 1.0\r\n";\n    $headers .= "Content-Type: multipart/mixed; boundary = $boundary\r\n";\n\n    // Plain text part\n    $body = "--$boundary\r\n";\n    $body .= "Content-Type: text/plain; charset=ISO-8859-1\r\n";\n    $body .= "Content-Transfer-Encoding: base64\r\n\r\n";\n    $body .= chunk_split(base64_encode($message));\n\n    // Attachment part\n    $body .= "--$boundary\r\n";\n    $body .= "Content-Type: application/octet-stream; name=\"" . basename($file) . "\"\r\n";\n    $body .= "Content-Disposition: attachment; filename=\"" . basename($file) . "\"\r\n";\n    $body .= "Content-Transfer-Encoding: base64\r\n\r\n";\n    $body .= $content;\n    $body .= "--$boundary--";\n\n    // Send the email\n    if (mail($to, $subject, $body, $headers)) {\n        echo "Email sent successfully.";\n    } else {\n        echo "Failed to send email.";\n    }\n}\n\nif (isset($_SESSION['uploaded_file'])) {\n    sendEmailWithAttachment($_SESSION['uploaded_file']);\n} else {\n    echo "No file uploaded or session not started.";\n}