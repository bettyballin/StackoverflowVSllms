<?php\n    include "../../inc/config.inc.php";\n\n    // Retrieve and sanitize input data\n    $temp = explode("_", $_REQUEST['element_id']);\n    $field = $temp[0];\n    $id = (int)$temp[1]; // Assuming 'id' should be an integer, cast it to int for safety.\n    $textboxval = trim(strip_tags($_REQUEST["update_value"])); // Use strip_tags for better security\n\n    // Start transaction\n    mysqli_begin_transaction($conn);\n\n    try {\n        // Set status of all existing rows to 0\n        $queryUpdateStatus = "UPDATE notes SET status='0' WHERE c_id=?";\n        $stmt = mysqli_prepare($conn, $queryUpdateStatus);\n        if (!$stmt) throw new Exception("Could not prepare statement: " . mysqli_error($conn));\n        \n        // Bind 'id' parameter to the prepared statement\n        mysqli_stmt_bind_param($stmt, "i", $id);\n        mysqli_stmt_execute($stmt);\n\n        // Insert new row with status 1\n        $queryInsert = "INSERT INTO notes ($field, status, date, c_id) VALUES (?, '1', NOW(), ?)";\n        $stmt = mysqli_prepare($conn, $queryInsert);\n        if (!$stmt) throw new Exception("Could not prepare statement: " . mysqli_error($conn));\n        \n        // Bind parameters to the prepared statement\n        mysqli_stmt_bind_param($stmt, "si", $textboxval, $id);\n        mysqli_stmt_execute($stmt);\n\n        // Commit transaction\n        mysqli_commit($conn);\n\n    } catch (Exception $e) {\n        // Rollback transaction in case of error\n        mysqli_rollback($conn);\n        echo "Error: " . $e->getMessage();\n    }\n\n    // Echo the updated value for confirmation or use\n    echo $_REQUEST['update_value'];\n    \n    // Close connection if necessary\n    mysqli_close($conn);\n?>