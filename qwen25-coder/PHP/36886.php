// On profile.php or any other protected page\nif (!isLoggedIn()) { // Assume this function checks if the user is logged in\n    // Get current URI\n    $currentUri = urlencode($_SERVER['REQUEST_URI']);\n    header("Location: login.php?redirect_to=$currentUri");\n    exit();\n}\n\n// On login.php, after successful login\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    if (authenticateUser($_POST['username'], $_POST['password'])) { // Assume this function authenticates the user\n        // Start session to maintain logged-in state\n        session_start();\n        $_SESSION['user'] = $_POST['username'];\n\n        // Redirect back to the original page or default if not set\n        header("Location: " . (isset($_GET['redirect_to']) ? urldecode($_GET['redirect_to']) : 'dashboard.php'));\n        exit();\n    } else {\n        echo "Invalid username or password.";\n    }\n}\n\n// Function to check user authentication status, pseudo-code for example\nfunction isLoggedIn() {\n    // Check if session is started and user data is set\n    return isset($_SESSION['user']);\n}