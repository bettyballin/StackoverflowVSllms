<?php\n// Assuming $conn is your MySQLi connection\n$query = "\n    SELECT t1.id \n    FROM your_table t1\n    LEFT JOIN your_table t2 ON t1.parent_id = t2.id\n    WHERE t2.id IS NULL;\n";\n$result = mysqli_query($conn, $query);\n\n$orphanedIds = [];\nwhile ($row = mysqli_fetch_assoc($result)) {\n    $orphanedIds[] = $row['id'];\n}\n\n// Ensure the array is not empty before proceeding to delete\nif (!empty($orphanedIds)) {\n    // Delete orphaned items in a single query for efficiency\n    $idsString = implode(',', $orphanedIds);\n    $deleteQuery = "DELETE FROM your_table WHERE id IN ($idsString)";\n    mysqli_query($conn, $deleteQuery);\n}\n\n// Close the connection\nmysqli_close($conn);\n?>