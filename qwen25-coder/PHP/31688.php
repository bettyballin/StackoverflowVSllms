$text = preg_replace('/A(?:(?!A)[^])*?C/', 'foo${1}bar', $text);