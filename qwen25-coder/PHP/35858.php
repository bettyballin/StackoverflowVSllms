<?php\n// Start output buffering\nob_start();\n\n$url = filter_input(INPUT_GET, 'url', FILTER_VALIDATE_URL);\n\nif ($url) {\n    // Connect to the database\n    $connection = new mysqli('hostname', 'username', 'password', 'database');\n    \n    if ($connection->connect_error) {\n        die("Connection failed: " . $connection->connect_error);\n    }\n\n    // Prepare and bind\n    $stmt = $connection->prepare("INSERT INTO clicks (url) VALUES (?) ON DUPLICATE KEY UPDATE count = count + 1");\n    $stmt->bind_param("s", $url);\n\n    // Send the location header\n    header("Location: " . $url);\n    ob_end_flush();\n    \n    // Log the visit by executing the statement\n    if (!$stmt->execute()) {\n        echo "Error logging click: " . $stmt->error;\n    }\n\n    $stmt->close();\n    $connection->close();\n} else {\n    echo "Invalid URL";\n}\n?>