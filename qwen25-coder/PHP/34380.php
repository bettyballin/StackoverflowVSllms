public function beforeFilter(EventInterface $event)\n{\n    parent::beforeFilter($event);\n\n    // Ensure Auth component is loaded and configured properly\n    $this->loadComponent('Auth', [\n        'loginRedirect' => ['controller' => 'Dashboard', 'action' => 'index'], // Set your default login redirect here\n        'logoutRedirect' => ['controller' => 'Pages', 'action' => 'display', 'home'],\n        'authenticate' => [\n            'Form' => [\n                'fields' => [\n                    'username' => 'email',\n                    'password' => 'password'\n                ]\n            ]\n        ],\n        'authorize' => ['Controller'] // Added this line if you are using authorize checks\n    ]);\n}\n\npublic function login()\n{\n    if ($this->request->is('post')) {\n        $user = $this->Auth->identify();\n        if ($user) {\n            $this->Auth->setUser($user);\n            // Redirect to a specific URL after login\n            return $this->redirect($this->Auth->getDestination());\n        }\n        $this->Flash->error(__('Invalid username or password, try again'));\n    }\n}