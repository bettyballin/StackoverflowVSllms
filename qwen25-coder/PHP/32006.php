function isFriend($pdo, $user_id, $profile_id) {\n    $stmt = $pdo->prepare("SELECT * FROM friends WHERE (user1_id = ? AND user2_id = ?) OR (user1_id = ? AND user2_id = ?)");\n    $stmt->execute([$user_id, $profile_id, $profile_id, $user_id]);\n    return $stmt->rowCount() > 0;\n}\n\n$user_id = $_SESSION['user_id'];\n$profile_user_id = // get profile ID from URL\n\nif (!isFriend($pdo, $user_id, $profile_user_id)) {\n    echo "You are not authorized to view this profile.";\n    exit();\n}