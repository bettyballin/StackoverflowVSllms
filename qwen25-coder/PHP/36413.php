<?php\n$batchSize = 1000; // Number of users to process per batch\n$totalUsers = count($users); // Assume $users is a list of all user IDs\n\nfor ($offset = 0; $offset < $totalUsers; $offset += $batchSize) {\n    $batchUsers = array_slice($users, $offset, $batchSize);\n    \n    foreach ($batchUsers as $userId) {\n        sendSearchNotificationsForUser($userId);\n    }\n    \n    // Clear memory after each batch if necessary\n    gc_collect_cycles();\n}\n?>