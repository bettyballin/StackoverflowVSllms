function email_check($str)\n{\n    $this->db->select('email');\n    $this->db->from('mytable');\n    $this->db->where('email', $str);\n    $num = $this->db->count_all_results();\n\n    if ($num > 0)\n    {\n        // Use the correct method name you defined in set_message\n        $this->form_validation->set_message('email_check', 'Email already in use');\n        return FALSE;\n    }\n    else\n    {\n        return TRUE;\n    }\n}