<?php\n\n// dbinterface.php\n\nclass db {\n    private $con;\n    private $host;\n    private $user;\n    private $pass;\n    private $database;\n    private $error;\n\n    function __construct($host, $user, $pass, $database) {\n        $this->con = mysql_connect($host, $user, $pass);\n        if (!$this->con) {\n            $this->error = "Connection failed: " . mysql_error();\n            return;\n        }\n        if (!mysql_select_db($database, $this->con)) {\n            $this->error = "Database selection failed: " . mysql_error($this->con);\n            return;\n        }\n    }\n\n    function escape($text) {\n        if (!$this->con) {\n            return false;\n        }\n        return mysql_real_escape_string($text, $this->con);\n    }\n\n    function run($query) {\n        if (!$this->con) {\n            return false;\n        }\n        $q = mysql_query($query, $this->con);\n        if ($q === false) {\n            $this->error = "Error " . mysql_errno($this->con) . ": " . mysql_error($this->con);\n            return false;\n        } elseif ($q === true) {\n            return true;\n        } else {\n            $result = array();\n            while ($row = mysql_fetch_assoc($q)) {\n                $result[] = $row;\n            }\n            return $result;\n        }\n    }\n\n    function get_error() {\n        return $this->error;\n    }\n\n    function close() {\n        if ($this->con) {\n            mysql_close($this->con);\n        }\n    }\n}\n\n?>