<?php\n// Get the categories of the current post\n$categories = get_the_category();\n\nif ($categories) {\n    // Assuming we want posts from the first category only\n    $category_id = $categories[0]->term_id;\n\n    // Set up the query arguments\n    $args = array(\n        'cat' => $category_id,\n        'posts_per_page' => 5, // Number of related posts to display\n        'post__not_in' => array(get_the_ID()), // Exclude the current post\n        'ignore_sticky_posts' => 1 // Ignore sticky posts\n    );\n\n    // Get the posts\n    $related_posts = new WP_Query($args);\n\n    if ($related_posts->have_posts()) : ?>\n        <h3>Related Posts</h3>\n        <ul>\n            <?php while ($related_posts->have_posts()) : $related_posts->the_post(); ?>\n                <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>\n            <?php endwhile; ?>\n        </ul>\n    <?php endif;\n\n    // Reset post data to the original query\n    wp_reset_postdata();\n}\n?>