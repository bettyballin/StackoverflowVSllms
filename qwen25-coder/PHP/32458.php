function convertSmartQuotes($text) {\n    // Replace Windows-1252 specific bytes to UTF-8\n    $search = array(chr(0x91), chr(0x92), chr(0x93), chr(0x94), chr(0x96), chr(0x97));\n    $replace = array('‘', '’', '“', '”', '–', '—');\n\n    // Convert Windows-1252 to UTF-8 first if needed\n    $text = mb_convert_encoding($text, 'UTF-8', 'Windows-1252');\n\n    // Replace smart quotes and em dashes\n    $text = str_replace($search, array("'", "'", '"', '"', '-', '--'), $text);\n\n    return $text;\n}\n\n// Example usage\n$userInput = "Here’s a sample â€˜stringâ€™ with â€œsmart quotesâ€ and an â€“em dash—.";\n$cleanText = convertSmartQuotes($userInput);\necho htmlspecialchars($cleanText);