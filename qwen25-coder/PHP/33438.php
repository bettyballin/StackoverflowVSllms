<?php\n$target_dir = "uploads/";\n$target_file = $target_dir . basename($_FILES["archive"]["name"]);\n$uploadOk = 1;\n$imageFileType = strtolower(pathinfo($target_file, PATHINFO_EXTENSION));\n\n// Check if file already exists\nif (file_exists($target_file)) {\n    echo "Sorry, file already exists.";\n    $uploadOk = 0;\n}\n\n// Allow only zip files\nif ($imageFileType != "zip") {\n    echo "Sorry, only ZIP files are allowed.";\n    $uploadOk = 0;\n}\n\n// Check if $uploadOk is set to 0 by an error\nif ($uploadOk == 0) {\n    echo "Sorry, your file was not uploaded.";\n} else {\n    if (move_uploaded_file($_FILES["archive"]["tmp_name"], $target_file)) {\n        // Unzip the file\n        $zip = new ZipArchive();\n        if ($zip->open($target_file) === TRUE) {\n            $extractPath = $target_dir . basename($target_file, '.zip') . '/';\n            $zip->extractTo($extractPath);\n            $zip->close();\n            echo "The file ". htmlspecialchars( basename( $_FILES["archive"]["name"])). " has been uploaded and extracted.";\n        } else {\n            echo "Failed to extract the archive.";\n        }\n    } else {\n        echo "Sorry, there was an error uploading your file.";\n    }\n}\n?>