<?php\n\nclass FlatFileDB {\n    private $filePath;\n    \n    public function __construct($filePath) {\n        $this->filePath = $filePath;\n    }\n\n    // Write data to the file\n    public function writeData(array $data) {\n        $handle = fopen($this->filePath, 'a');\n        flock($handle, LOCK_EX); // Lock on write\n        fputcsv($handle, $data);\n        flock($handle, LOCK_UN);\n        fclose($handle);\n    }\n\n    // Read data from the file as an array\n    public function readData(): array {\n        $result = [];\n        if (($handle = fopen($this->filePath, 'r')) !== false) {\n            while (($data = fgetcsv($handle)) !== false) {\n                $result[] = $data;\n            }\n            fclose($handle);\n        }\n        return $result;\n    }\n\n    // Search data based on a condition (simple example)\n    public function findDataByField(int $columnIndex, string $value): array {\n        $result = [];\n        $allData = $this->readData();\n        foreach ($allData as $row) {\n            if (isset($row[$columnIndex]) && $row[$columnIndex] === $value) {\n                $result[] = $row;\n            }\n        }\n        return $result;\n    }\n}\n?>