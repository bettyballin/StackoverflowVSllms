<?php\n// Start output buffering\nob_start();\n\n$ lots_of = "php";\n\n?>\n<xml>\n    <morexml>\n\n<?php\nwhile($condition) {\n?>\n    <somegeneratedxml>\n<?php } ?>\n\n</morexml>\n<lastofthexml>\n</xml>\n\n<?php\n// Capture the buffered content into a variable and clean (erase) the buffer\n$xmlOutput = ob_get_clean();\n?>\n\n<html>\n<head>\n    <title>XML Preview</title>\n</head>\n<body>\n    <pre>\n        <?php echo htmlspecialchars($xmlOutput, ENT_QUOTES, 'UTF-8'); ?>\n    </pre>\n\n    <form method="post" action="your-api-endpoint.php">\n        <input type="hidden" id="xml" name="xml" value="<?php echo htmlspecialchars($xmlOutput, ENT_QUOTES, 'UTF-8'); ?>" />\n        <button type="submit">Send XML</button>\n    </form>\n</body>\n</html>