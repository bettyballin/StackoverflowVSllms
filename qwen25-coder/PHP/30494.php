$db = new mysqli("localhost", "root", "", "database");\n\nif ($db->connect_error) {\n    die("Connection failed: " . $db->connect_error);\n}\n\n// Prepare and execute the update query\n$stmt = $db->prepare("UPDATE posts SET vote_".$_POST['vote']." = vote_".$_POST['vote']." + 1 WHERE id=?");\nif (!$stmt) {\n    die("Update prepare failed: " . htmlspecialchars($db->error));\n}\n$stmt->bind_param('s', $_POST['id_post']);\n$stmt->execute();\n$stmt->close();\n\n// Prepare and execute the insert query\n$stmt = $db->prepare("INSERT INTO votes (kind, users_id, posts_id) VALUES (?, ?, ?)");\nif (!$stmt) {\n    die("Insert prepare failed: " . htmlspecialchars($db->error));\n}\n$stmt->bind_param('sss', $_POST['vote'], $_POST['id_user'], $_POST['id_post']);\n$stmt->execute();\n$stmt->close();\n\n$db->close();