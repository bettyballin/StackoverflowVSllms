function objSlash( &$obj, $add=true ) {\n    foreach ( $obj as $key => $field ) {\n        if ( is_object( $field ) ) {\n            objSlash( $field, $add );\n        } else if ( is_array( $field ) ) {\n            arrSlash( $field, $add ); // Ensure arrSlash handles arrays correctly\n        } else if ( $add ) {\n            $obj->$key = addslashes( $field );\n        } else {\n            $obj->$key = stripslashes( $field );\n        }\n    }\n}\n\nfunction arrSlash( &$arr, $add=true ) {\n    foreach ( $arr as $key => $field ) {\n        if ( is_object( $field ) ) {\n            objSlash( $field, $add ); // This correctly handles objects within arrays\n        } else if ( is_array( $field ) ) {\n            arrSlash( $field, $add ); // Recursively call for nested arrays\n        } else if ( $add ) {\n            $arr[$key] = addslashes( $field );\n        } else {\n            $arr[$key] = stripslashes( $field );\n        }\n    }\n}