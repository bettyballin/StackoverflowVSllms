echo "I'm in _getMemberDemographicAttrs\n";\nif (!empty($member_id)) {\n    $query .= ' AND member_id = ' . intval($member_id); // Use intval() for security and correctness\n}\n\n$limit = 100; // Define a batch limit\n$offset = 0;\n\n$all_rules = [];\ndo {\n    $batch_query = $query . " LIMIT $limit OFFSET $offset";\n    $result = mysql_query($batch_query, $this->_db);\n    \n    if ($result) {\n        while ($rule = mysql_fetch_assoc($result)) {\n            $all_rules[] = $rule;\n        }\n        mysql_free_result($result);\n    }\n    $offset += $limit;\n} while (count($all_rules) % $limit === 0 && $result !== false);\n\necho "I'm leaving _getMemberDemographicAttrs\n";\nreturn $all_rules;