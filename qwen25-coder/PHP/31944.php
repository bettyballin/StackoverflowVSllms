// Load the original PNG image with transparency\n$this->image = imagecreatefrompng($filename);\n\n// Create a true color image with alpha blending turned off for processing\n$newImage = imagecreatetruecolor($width, $height);\nimagealphablending($newImage, false); // Turn off blending\n\n// Allocate a transparent color and fill the background\n$transparentColor = imagecolorallocatealpha($newImage, 0, 0, 0, 127);\nimagefill($newImage, 0, 0, $transparentColor);\n\n// Copy and resample the original image to the new image with quality settings\nimagecopyresampled($newImage, $this->image, 0, 0, 0, 0, $width, $height, imagesx($this->image), imagesy($this->image));\n\n// Enable alpha blending again for the final output\nimagealphablending($newImage, true);\n\n// Save the resized image with transparency\nimagepng($newImage, $filename);\n\n// Free up memory\nimagedestroy($this->image);\nimagedestroy($newImage);