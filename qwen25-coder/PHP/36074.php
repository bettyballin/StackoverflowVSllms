class News_model extends CI_Model {\n\n    public function update_news($id, $data, $user_id) {\n        // Log the current state before updating\n        $this->log_news_change($id, 'UPDATE', $user_id);\n\n        // Update the main news table\n        $this->db->update('news', $data, array('id' => $id));\n    }\n\n    public function delete_news($id, $user_id) {\n        // Log the current state before deleting\n        $this->log_news_change($id, 'DELETE', $user_id);\n\n        // Delete from the main news table\n        $this->db->delete('news', array('id' => $id));\n    }\n\n    private function log_news_change($id, $action, $user_id) {\n        $query = $this->db->get_where('news', array('id' => $id))->row();\n\n        if ($query) {\n            $data = [\n                'news_id' => $query->id,\n                'title'   => $query->title,\n                'slug'    => $query->slug,\n                'text'    => $query->text,\n                'action'  => $action,\n                'changed_by' => $user_id\n            ];\n\n            // Insert into the audit table\n            $this->db->insert('news_audit', $data);\n        }\n    }\n}