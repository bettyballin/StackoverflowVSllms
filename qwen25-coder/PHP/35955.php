class Application_Service_TagService {\n    protected $_tagTable;\n    protected $_objectTable;\n    protected $_tagObjectTable;\n\n    public function __construct() {\n        $this->_tagTable = new Application_Model_Tag();\n        $this->_objectTable = new Application_Model_Object();\n        $this->_tagObjectTable = new Application_Model_TagObject();\n    }\n\n    public function getTagsWithOccurrences() {\n        $select = $this->_tagTable->select()->setIntegrityCheck(false)\n                     ->from(array('t' => $this->_tagTable->info('name')), array('id', 'name'))\n                     ->join(array('to' => $this->_tagObjectTable->info('tableName')), 't.id = to.tag_id')\n                     ->group('t.id')\n                     ->order('COUNT(to.object_id) DESC');\n        $result = $this->_tagTable->fetchAll($select);\n\n        return $result;\n    }\n}