// Assuming $conn is your database connection\n$conn->set_charset("utf8");\n\n$item_template = "\n      <item>\n         <title><![CDATA[[[title]]]]></title>\n         <link>[[link]]</link>\n         <description><![CDATA[[[description]]]]></description>\n         <pubDate>[[date]]</pubDate>\n      </item>\n      ";\n\n$s = '';\nwhile ($row = $result->fetch_assoc()) {\n    // Convert title and description to UTF-8\n    $title_utf8 = mb_convert_encoding($row["title"], "UTF-8", "ISO-8859-1");\n    $description_utf8 = mb_convert_encoding($description, "UTF-8", "ISO-8859-1");\n\n    // Use htmlspecialchars to escape special characters\n    $s .= str_replace(\n        array("[[title]]", "[[link]]", "[[description]]", "[[date]]"),\n        array(htmlspecialchars($title_utf8, ENT_QUOTES, 'UTF-8'), $url, htmlspecialchars($description_utf8, ENT_QUOTES, 'UTF-8'), $date),\n        $item_template\n    );\n}