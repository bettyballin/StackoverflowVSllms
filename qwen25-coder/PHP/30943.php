function getExternalData($type='GET')\n{\n    $type = strtoupper($type);\n    return $_SERVER[$type] ?? [];\n}\n\nfunction safeQuery($pdo, $sql, $params)\n{\n    $stmt = $pdo->prepare($sql);\n    if (!$stmt) {\n        throw new Exception('Failed to prepare statement');\n    }\n    $stmt->execute(array_values($params));\n    return $stmt->fetchAll();\n}\n\n// Usage example:\n$data = getExternalData('GET');\n$pdo = new PDO('mysql:host=your_host;dbname=your_db', 'username', 'password');\n\ntry {\n    // Always use prepared statements\n    $query = "SELECT * FROM users WHERE username = :username";\n    $result = safeQuery($pdo, $query, ['username' => $data['username']]);\n} catch (PDOException $e) {\n    echo 'Connection failed: ' . $e->getMessage();\n}