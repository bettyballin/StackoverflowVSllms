class Foo {\n    private static $instances = [];\n\n    public function __construct() {\n        self::$instances[] = $this;\n    }\n\n    public function __destruct() {\n        // Remove the instance from the array upon destruction.\n        // Since PHP destroys objects in an arbitrary order, relying on this for correct behavior is not recommended.\n        // Implementing a robust mechanism to remove the exact instance is left as an exercise for the reader.\n        self::$instances = array_diff(self::$instances, [$this]);\n    }\n\n    public static function getInstances() {\n        return self::$instances;\n    }\n}\n\n$a = new Foo();\n$b = new Foo();\n\n$instances = Foo::getInstances();\n// $instances will now hold references to both $a and $b