class UsernameToken {\n    public $Username;\n    public $Password;\n\n    function __construct($user, $pass) {\n        $this->Username = new SoapVar($user, XSD_STRING, null, null, 'Username', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd');\n        $this->Password = new SoapVar($pass, XSD_STRING, null, null, 'Password', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd');\n    }\n}\n\nclass Security {\n    public $UsernameToken;\n\n    function __construct($user, $pass) {\n        $this->UsernameToken = new SoapVar(new UsernameToken($user, $pass), SOAP_ENC_OBJECT, null, null, 'UsernameToken', 'urn:dkWSValueObjects');\n    }\n}\n\n$client = new SoapClient("http://www.example.com/service", array(\n    "namespace" => "http://example.com/service",\n    "trace"     => 1,\n    "exceptions" => 0\n));\n\n$security = new Security("username", "password");\n$securityHeader = new SoapVar($security, SOAP_ENC_OBJECT, null, null, 'Security', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd');\n\n$headers[] = new SoapHeader('http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd', 'Security', $securityHeader, true, "NS1");\n\n$client->__setSoapHeaders($headers);\n\ntry {\n    $response = $client->GetSubscriptionGroupTypes();\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n\necho "<pre>";\nprint_r($client->__getLastRequest());\necho "</pre>";