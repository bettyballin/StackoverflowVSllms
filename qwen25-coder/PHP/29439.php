function searchByKeyValue($array, $key, $value) {\n    $results = [];\n\n    foreach ($array as $element) {\n        if (is_array($element)) {\n            // Recursively search in sub-array\n            $subResults = searchByKeyValue($element, $key, $value);\n            $results = array_merge($results, $subResults);\n        } elseif (isset($element[$key]) && $element[$key] === $value) {\n            // Add the current element to results if it matches key-value\n            $results[] = $element;\n        }\n    }\n\n    return $results;\n}\n\n$arr = [\n    0 => ['id' => 1, 'name' => "cat 1"],\n    1 => ['id' => 2, 'name' => "cat 2"],\n    2 => ['id' => 3, 'name' => "cat 1"]\n];\n\n$searchResults = searchByKeyValue($arr, 'name', 'cat 1');\nprint_r($searchResults);