<?php\n// Assuming you're using SQLSRV driver for SQL Server\n\n$serverName = "your_server_name";\n$connectionOptions = array(\n    "Database" => "your_database_name",\n    "Uid" => "your_username",\n    "PWD" => "your_password",\n    "CharacterSet" => "UTF-8" // Set character set to UTF-8\n);\n\n$conn = sqlsrv_connect($serverName, $connectionOptions);\nif ($conn === false) {\n    die(print_r(sqlsrv_errors(), true));\n}\n\n// Example query with special characters in the column name or data\n$query = "SELECT [ColümnNäme], [Dätä] FROM your_table";\n$stmt = sqlsrv_query($conn, $query);\n\nif ($stmt === false) {\n    die(print_r(sqlsrv_errors(), true));\n}\n\nwhile ($row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\n    // Convert each field to UTF-8 encoded string if necessary\n    foreach ($row as &$value) {\n        $value = mb_convert_encoding($value, "UTF-8", "ISO-8859-1"); // Adjust source encoding accordingly\n    }\n    \n    // Now you can use the row data in your email or other tasks\n    print_r($row);\n}\n\nsqlsrv_free_stmt($stmt);\nsqlsrv_close($conn);\n\n// Example of sending an email with UTF-8 content\n$headers = "Content-Type: text/html; charset=UTF-8";\nmail("recipient@example.com", "Subject with special characters – äöüß", "<p>Data from database:</p><pre>" . print_r($row, true) . "</pre>", $headers);\n?>