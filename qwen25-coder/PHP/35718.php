$testPics = takeFiles($picsDir, "/\.(jpg|jpeg|png|gif)$/i");\n\nfunction takerFiles($dir, $rex="") {\n    $dir .= "/";\n    $files = array();\n    if ($dh = opendir($dir)) {\n        while (($file = readdir($dh)) !== false) {\n            if (in_array($file, ['.', '..'])) continue;\n            $filePath = $dir . $file;\n            if(is_dir($filePath)) continue;\n            if (!empty($rex) && !preg_match($rex, $file)) continue;\n            $files[] = $file;\n        }\n        closedir($dh);\n    }\n    return $files;\n}