using Microsoft.Extensions.DependencyInjection;\nusing MassTransit;\n\npublic class Worker : BackgroundService\n{\n    protected override async Task ExecuteAsync(CancellationToken stoppingToken)\n    {\n        var bus = Bus.Factory.CreateUsingRabbitMq(cfg =>\n            cfg.Host(new Uri("amqp://localhost")));\n\n        await bus.StartAsync(stoppingToken);\n\n        while (!stoppingToken.IsCancellationRequested)\n        {\n            await bus.Publish<YourMessageType>(new { /* Message data */ }, stoppingToken);\n            // Simulate work being done\n            await Task.Delay(1000, stoppingToken);\n        }\n\n        await bus.StopAsync();\n    }\n}