using (var connection = factory.CreateConnection())\n{\n    if (connection != null)\n    {\n        connection.ConnectionString = connectionString;\n        connection.Open();\n        \n        using (var command = connection.CreateCommand())\n        {\n            command.CommandText = "SELECT * FROM MyTable";\n            \n            using (var reader = command.ExecuteReader())\n            {\n                while (reader.Read())\n                {\n                    // Process data\n                }\n            }\n        }\n    }\n}