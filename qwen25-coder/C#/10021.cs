using System;\nusing System.Diagnostics;\n\npublic static class BenchmarkHelper\n{\n    public static void Profile(string description, int iterations, Action func)\n    {\n        // Warm-up the JIT compiler with more iterations.\n        for (int i = 0; i < Math.Min(iterations, 10_000); i++)\n        {\n            func();\n        }\n\n        GC.Collect();\n        GC.WaitForPendingFinalizers();\n        GC.Collect();\n\n        var stopwatch = Stopwatch.StartNew();\n\n        // Disable garbage collection before measuring the performance.\n        GC.TryStartNoGCRegion((long)iterations * 128);\n\n        try\n        {\n            for (int i = 0; i < iterations; i++)\n            {\n                func();\n            }\n        }\n        finally\n        {\n            // Ensure to end the no-GC region even if an exception occurs.\n            GC.EndNoGCRegion();\n        }\n\n        stopwatch.Stop();\n\n        Console.WriteLine($"{description}: Time Elapsed {stopwatch.ElapsedMilliseconds} ms");\n    }\n}