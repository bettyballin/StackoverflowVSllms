private int GetPasswordComplexity(string password)\n{\n    if (password.Length < 4)\n        return 1;\n\n    bool hasDigit = false;\n    bool hasLower = false;\n    bool hasUpper = false;\n    bool hasOther = false;\n\n    foreach (var ch in password)\n    {\n        if (char.IsDigit(ch))\n            hasDigit = true;\n        else if (char.IsLower(ch))\n            hasLower = true;\n        else if (char.IsUpper(ch))\n            hasUpper = true;\n        else\n            hasOther = true;\n        \n        // Break early if all conditions are met\n        if (hasDigit && hasLower && hasUpper && hasOther)\n            break;\n    }\n\n    int complexity = 0;\n\n    if (password.Length >= 8) complexity++;\n    if (hasDigit) complexity++;\n    if (hasLower) complexity++;\n    if (hasUpper) complexity++;\n    if (hasOther) complexity++;\n\n    // Limit the maximum complexity to 5 for simplicity\n    return Math.Min(5, complexity);\n}