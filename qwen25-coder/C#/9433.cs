protected override void OnPreInit(EventArgs e)\n{\n    base.OnPreInit(e);\n\n    // Check if there is already a ScriptManager on the page\n    if (ScriptManager.GetCurrent(this.Page) == null)\n    {\n        // Create a new ScriptManager and add it to the Form controls collection\n        ScriptManager scriptManager = new ScriptManager();\n        this.Page.Form.Controls.AddAt(0, scriptManager);\n    }\n}