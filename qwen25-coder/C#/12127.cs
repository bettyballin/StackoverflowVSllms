using System.Security.Principal;\n\npublic void DoFileOperations(string userId)\n{\n    WindowsIdentity identity = new WindowsIdentity(userId);\n    using (WindowsImpersonationContext wic = identity.Impersonate())\n    {\n        // Perform file operations here with the impersonated user's permissions\n        var files = System.IO.Directory.GetFiles(@"\\networkpath\files");\n    }\n}