using System;\nusing System.Data;\nusing System.Data.SqlClient;\nusing System.Text;\nusing System.Linq;\n\nstring[] categoryIds = CategoryIDs.Split(',');\nStringBuilder inClause = new StringBuilder();\nfor (int i = 0; i < categoryIds.Length; i++)\n{\n    if (i > 0)\n        inClause.Append(", ");\n    inClause.Append("@categoryid" + i);\n}\n\nstring queryString = $@"\n   SELECT * \n   FROM   Products \n   WHERE  Category_ID IN ({inClause})\n      OR  name LIKE '%' + @name + '%'\n";\n\nSqlCommand comm = new SqlCommand(queryString, conn);\n\nfor (int i = 0; i < categoryIds.Length; i++)\n{\n    comm.Parameters.AddWithValue("@categoryid" + i, int.Parse(categoryIds[i]));\n}\n\ncomm.Parameters.AddWithValue("@name", Name.Replace("'", "''")); // Escape single quotes\n\nconn.Open();\nusing (SqlDataReader reader = comm.ExecuteReader())\n{\n    while (reader.Read())\n    {\n        // Process result\n    }\n}