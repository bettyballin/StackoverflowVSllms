using System;\nusing System.Web.Mvc;\n\npublic class RequireHttpsAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        var request = filterContext.HttpContext.Request;\n        if (!request.IsSecureConnection && !request.IsLocal)\n        {\n            var urlHelper = new UrlHelper(filterContext.RequestContext);\n            var secureUrl = "https://" + request.Host + request.RawUrl;\n\n            filterContext.Result = new RedirectResult(secureUrl, false /* permanent */ );\n        }\n    }\n}