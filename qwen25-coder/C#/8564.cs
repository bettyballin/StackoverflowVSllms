using System;\nusing System.IO.Pipes;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        string pipeName = "test";\n\n        // NamedPipeServerStream for the server process\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(pipeName))\n        {\n            Console.WriteLine("Waiting for client connection...");\n            pipeServer.WaitForConnection();\n            Console.WriteLine("Client connected.");\n\n            // Create a byte array to store incoming data.\n            byte[] buffer = new byte[1024];\n\n            using (StreamReader reader = new StreamReader(pipeServer))\n            using (StreamWriter writer = new StreamWriter(pipeServer) { AutoFlush = true })\n            {\n                string message;\n                while ((message = reader.ReadLine()) != null)\n                {\n                    Console.WriteLine("Received: " + message);\n                    // Echo the received message back to the client\n                    writer.WriteLine("ECHO: " + message);\n                }\n            }\n        }\n\n        Console.WriteLine("Server exited.");\n    }\n}