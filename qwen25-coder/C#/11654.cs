public interface IConfigurationStore\n{\n    string Get(string key);\n    void Set(string key, string value);\n}\n\npublic class WindowsRegistryConfig : IConfigurationStore\n{\n    // Implementation for Windows using Registry\n}\n\npublic class EnvironmentVariableConfig : IConfigurationStore\n{\n    // Implementation for cross-platform using environment variables\n}\n\npublic class Startup\n{\n    public void ConfigureServices(IServiceCollection services)\n    {\n        if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows))\n        {\n            services.AddSingleton<IConfigurationStore, WindowsRegistryConfig>();\n        }\n        else\n        {\n            services.AddSingleton<IConfigurationStore, EnvironmentVariableConfig>();\n        }\n\n        // Register other services\n    }\n}