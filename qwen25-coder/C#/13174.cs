public class Test : CompositeControl\n{\n    protected override void CreateChildControls()\n    {\n        Controls.Clear();\n        CreateControlHierarchy();\n        ClearChildViewState();\n    }\n\n    void CreateControlHierarchy()\n    {\n        var textBox = new TextBox\n        {\n            ID = "InputTextBox"\n        };\n        \n        Controls.Add(textBox);\n\n        var validator = new CustomValidator\n        {\n            ErrorMessage = "Can't do that!",\n            ControlToValidate = "InputTextBox", // Explicitly associate with the TextBox\n            Display = ValidatorDisplay.Dynamic\n        };\n\n        validator.ServerValidate += (sender, e) =>\n        {\n            e.IsValid = false;\n        };\n\n        Controls.Add(validator);\n    }\n}