public TCP(BackgroundWorker b)\n{\n    bw = b;\n    while (true) // Loop to continuously try connecting to the server\n    {\n        try\n        {\n            client = new TcpClient();\n            IPEndPoint server = new IPEndPoint(IPAddress.Parse(srv), 1337);\n            client.Connect(server); // Connect to the server\n\n            bw.ReportProgress(0);   // Update the GUI with the connection status\n\n            Thread t = new Thread(new ParameterizedThreadStart(HandleComms));\n            t.IsBackground = true;\n            t.Start(client);\n\n            break; // Break if connection is successful\n        }\n        catch (Exception ex)\n        {\n            lastException = ex;\n            System.Threading.Thread.Sleep(1000); // Sleep for 1 second before retrying\n        }\n    }\n}