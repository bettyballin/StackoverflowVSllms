public void ConfigureAppServices(IServiceCollection services)\n   {\n       services.AddDbContext<ApplicationDbContext>(options =>\n           options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));\n       \n       services.AddIdentity<IdentityUser, IdentityRole>()\n               .AddEntityFrameworkStores<ApplicationDbContext>()\n               .AddDefaultTokenProviders();\n       \n       services.AddAuthorization(options => \n       {\n           options.AddPolicy("RequireAdmin", builder => builder.RequireRole("Administrator"));\n           options.AddPolicy("CanManageOrder", policy =>\n               policy.RequireAssertion(context => context.User.HasClaim("Permissions", "ManageOrder")));\n       });\n   }