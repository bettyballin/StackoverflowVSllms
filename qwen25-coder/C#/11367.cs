using Microsoft.AspNetCore.Builder;\nusing Microsoft.Extensions.DependencyInjection;\nusing System.Text;\nusing System.Threading.Tasks;\n\npublic class Startup\n{\n    public void ConfigureServices(IServiceCollection services)\n    {\n        // Other configurations...\n    }\n\n    public void Configure(IApplicationBuilder app)\n    {\n        app.Use(async (context, next) =>\n        {\n            var authHeader = context.Request.Headers["Authorization"];\n            if (authHeader != null && authHeader.ToString().StartsWith("Basic "))\n            {\n                var encodedUsernamePassword = authHeader.ToString().Substring(6).Trim();\n                var decodedUsernamePassword = Encoding.UTF8.GetString(Convert.FromBase64String(encodedUsernamePassword));\n\n                var parts = decodedUsernamePassword.Split(':');\n                if (parts.Length == 2 && "username" == parts[0] && "password" == parts[1])\n                {\n                    await next.Invoke();\n                }\n                else\n                {\n                    context.Response.StatusCode = 401; // Unauthorized\n                }\n            }\n            else\n            {\n                context.Response.StatusCode = 401;\n                await context.Response.WriteAsync("Basic realm=\"User Visible Realm\"");\n            }\n        });\n\n        app.UseRouting();\n\n        app.UseEndpoints(endpoints =>\n        {\n            endpoints.MapGet("/", async context =>\n            {\n                await context.Response.WriteAsync("Welcome to your authorized section!");\n            });\n        });\n    }\n}\n\npublic class Program\n{\n    public static void Main(string[] args)\n    {\n        var host = new Microsoft.AspNetCore.Hosting.HostBuilder()\n            .ConfigureWebHostDefaults(webBuilder =>\n            {\n                webBuilder.UseStartup<Startup>();\n                webBuilder.UseKestrel(); // Using Kestrel as the server\n            })\n            .Build();\n\n        host.Run();\n    }\n}