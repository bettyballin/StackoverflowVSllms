private readonly object _lock = new object(); // Better to lock on a dedicated private field\n\nlock (_lock)\n{\n    string key = (string)MessageComparer.GenerateKey(transaction.EndPointRequest.Request);\n    \n    if (!_pendingTransactions.ContainsKey(key))\n    {\n        transaction.EndPointRequest.Request.Key = key;\n        _pendingTransactions.Add(key, transaction);\n\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}