public override void Uninstall(IDictionary savedState)\n   {\n       base.Uninstall(savedState);\n       \n       // Add explicit checks and removal of the service\n       if (ServiceExists("YourSecondServiceName"))\n       {\n           using (ServiceController controller = new ServiceController("YourSecondServiceName"))\n           {\n               try\n               {\n                   if (controller.Status == ServiceControllerStatus.Running)\n                       controller.Stop();\n                   controller.WaitForStatus(ServiceControllerStatus.Stopped, TimeSpan.FromSeconds(10));\n\n                   // Remove the service with InstallUtil\n                   string executablePath = Context.Parameters["TargetDir"] + "YourServiceExecutable.exe";\n                   Process process = new Process();\n                   ProcessStartInfo startInfo = new ProcessStartInfo("InstallUtil.exe", "/u \"" + executablePath + "\"");\n                   process.StartInfo = startInfo;\n                   process.Start();\n                   process.WaitForExit();\n               }\n               catch (Exception ex)\n               {\n                   throw new Exception("Failed to uninstall service: " + ex.Message, ex);\n               }\n           }\n       }\n   }\n\n   private bool ServiceExists(string serviceName)\n   {\n       return System.ServiceProcess.ServiceController.GetServices().Any(s => s.ServiceName == serviceName);\n   }