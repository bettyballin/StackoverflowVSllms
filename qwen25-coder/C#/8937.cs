using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\n\npublic class WebServiceClient\n{\n    private string SessionID { get; set; }\n    private string WebsiteUrl { get; set; }\n\n    public WebServiceClient(string sessionId, string url)\n    {\n        SessionID = sessionId;\n        WebsiteUrl = url;\n    }\n\n    public void CallWebService()\n    {\n        CookieContainer myContainer = new CookieContainer();\n        myContainer.Add(new Cookie("ASP.NET_SessionId", SessionID, "/", WebsiteUrl));\n\n        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(CreateWebserviceUrl("doneScreenScore"));\n        request.ContentType = "text/xml; charset=utf-8";\n        request.Method = "POST";\n        request.Accept = "text/xml";\n        request.Headers.Add("SOAPAction", "http://detectent.net/doneScreenScore");\n        // Add any necessary custom headers here\n        // For example, if you need to pass an anti-forgery token\n        // request.Headers.Add("X-CSRF-Token", csrfToken);\n\n        request.CookieContainer = myContainer;\n\n        Stream s = request.GetRequestStream();\n        string soaprequest = "<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" " +\n                             "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" " +\n                             "xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">" +\n                             "<soap12:Body>" +\n                             "<doneScreenScore xmlns=\"http://detectent.net/\">" +\n                             "<input1>string</input1>" +\n                             "<input2>string</input2>" +\n                             "<input3>string</input3>" +\n                             "<input4>string</input4>" +\n                             "</doneScreenScore>" +\n                             "</soap12:Body>" +\n                             "</soap12:Envelope>";\n        s.Write(Encoding.ASCII.GetBytes(soaprequest), 0, soaprequest.Length);\n        s.Close();\n\n        try\n        {\n            HttpWebResponse response = (HttpWebResponse) request.GetResponse();\n            Stream resStream = response.GetResponseStream();\n            string responseFromWebServiceCall = ReadResponseStream(resStream);\n\n            Console.WriteLine("Response: " + responseFromWebServiceCall);\n            \n            if (resStream != null) resStream.Close();\n            response?.Close();\n        }\n        catch WebException ex)\n        {\n            Console.WriteLine("Error calling web service: " + ex.Message);\n            HttpWebResponse errorResponse = (HttpWebResponse)ex.Response;\n            if (errorResponse != null && errorResponse.GetResponseStream() != null)\n            {\n                string errorFromWebServiceCall = ReadResponseStream(errorResponse.GetResponseStream());\n                Console.WriteLine("Web Service Error Response: " + errorFromWebServiceCall);\n            }\n        }\n    }\n\n    private string CreateWebserviceUrl(string action)\n    {\n        return WebsiteUrl + "/YourWebServicePath.asmx/" + action;\n    }\n\n    private string ReadResponseStream(Stream stream)\n    {\n        byte[] readBuffer = new byte[8192];\n        StringBuilder builder = new StringBuilder();\n\n        int count;\n        while ((count = stream.Read(readBuffer, 0, readBuffer.Length)) > 0)\n            builder.Append(Encoding.ASCII.GetString(readBuffer, 0, count));\n\n        return builder.ToString();\n    }\n}