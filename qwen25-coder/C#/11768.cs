public class ProductController : Controller\n{\n    public ActionResult GetPagedProducts(int page = 1, string sortBy = "Name", int pageSize = 5, string searchQuery = "")\n    {\n        // Assume Products is your DbContext or data source\n        var products = from p in db.Products\n                       where (searchQuery == null || p.Name.Contains(searchQuery))\n                       orderby sortBy equals "Price" ? p.Price : p.Name\n                       select p;\n\n        var paginatedProducts = products.Skip((page - 1) * pageSize).Take(pageSize).ToList();\n        int totalPages = (int)Math.Ceiling(products.Count() / (double)pageSize);\n        \n        return Json(new \n        { \n            data = paginatedProducts.Select(p => new { \n                p.Name, \n                p.Price\n            }),\n            totalPages,\n            currentPage = page\n        }, JsonRequestBehavior.AllowGet);\n    }\n}