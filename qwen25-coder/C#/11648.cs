using System;\nusing System.Linq;\nusing System.Web.Script.Services;\nusing System.Web.Services;\nusing SubSonic;\n\n[ScriptService]\npublic class DataService : WebService {\n    [WebMethod]\n    [ScriptMethod(ResponseFormat = ResponseFormat.Xml)]\n    public object GetHeaderWithDetails(int headerId) {\n        var header = new HeaderTable { Id = headerId }.Get();\n        \n        // Assuming there's a DataRecord foreign key linking to HeaderTable.Id\n        var details = new Select().From<DataRecordTable>()\n                                 .Where(DataRecordTable.Columns.HeaderId).IsEqualTo(headerId)\n                                 .ExecuteTypedList<DataRecordTable>();\n\n        return new {\n            Header = header,\n            Details = details\n        };\n    }\n}