public class TaxCalculator {\n    private readonly WindsorContainer _container;\n\n    public TaxCalculator(WindsorContainer container) {\n        _container = container;\n    }\n\n    public decimal GetTaxForCustomer(decimal amount, string customerRegion) {\n        var serviceName = customerRegion == "USA" ? "usatax" : "euctax";\n        using (var service = _container.Resolve<ITaxService>(serviceName)) {\n            return service.CalculateTax(amount);\n        }\n    }\n}