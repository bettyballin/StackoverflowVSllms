protected void rpt_Menu_DataBound(object obj, RepeaterItemEventArgs e)\n{\n    int parent_id = Int32.Parse(((HiddenField)e.Item.FindControl("hdn_Id")).Value.ToString());\n    using (SamaraDataContext mycity = new SamaraDataContext())\n    {\n        var subMenu = from sm in mycity.tbl_menus\n                      where (sm.menu_parent == parent_id)\n                      select new\n                      {\n                          menu_id = sm.menu_id,\n                          menu_name = sm.menu_name,\n                          url = sm.url // assuming you have URL field for the link destinations\n                      };\n\n        int count = subMenu.Count();\n        bool hasSubMenu = count > 0;\n\n        ((Repeater)e.Item.FindControl("rpt_SubMenu")).DataSource = subMenu.ToList();\n        ((Repeater)e.Item.FindControl("rpt_SubMenu")).DataBind();\n\n        // Assign subCount to a control's ViewState or any other mechanism to use in ItemTemplate\n        e.Item.Controls.Add(new Literal { Text = $"<script type=\"text/javascript\">var subCount = {count};</script>" });\n        \n        this.index++;\n    }\n}