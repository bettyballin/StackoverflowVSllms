using System;\nusing System.IO;\nusing System.Net;\n\nvoid SaveUrl(string sourceURL, string savepath)\n{\n    // Create a CookieContainer to hold all the cookies.\n    CookieContainer cookieContainer = new CookieContainer();\n\n    // Set up and create the WebRequest for the main page.\n    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(sourceURL);\n    webRequest.CookieContainer = cookieContainer; // Assign the CookieContainer to the request.\n    \n    using (HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse())\n    using (StreamReader responseReader = new StreamReader(response.GetResponseStream()))\n    {\n        string sResponseHTML = responseReader.ReadToEnd();\n\n        // Write the HTML content to a file.\n        File.WriteAllText(savepath, sResponseHTML);\n\n        // Extract image links from the HTML.\n        string[] ImageUrl = GetImgLinks(sResponseHTML);\n        foreach (string imagelink in ImageUrl)\n        {\n            // Create and configure the request for each image.\n            HttpWebRequest imgRequest = (HttpWebRequest)WebRequest.Create(imagelink);\n            imgRequest.CookieContainer = cookieContainer; // Reuse the same CookieContainer.\n\n            using (HttpWebResponse imgResponse = (HttpWebResponse)imgRequest.GetResponse())\n            using (Stream stream = imgResponse.GetResponseStream())\n            using (FileStream fileStream = File.OpenWrite(Path.Combine(savepath, Path.GetFileName(imagelink))))\n            {\n                // Copy the response stream to a local file.\n                stream.CopyTo(fileStream);\n            }\n        }\n    }\n}