using System;\nusing System.Data.SqlClient;\n\nclass Program\n{\n    static void Main()\n    {\n        string connectionString = "your_connection_string_here";\n        \n        using (SqlConnection connection = new SqlConnection(connectionString))\n        {\n            connection.Open();\n\n            try\n            {\n                // Create the table in one batch\n                string createTableCommand = @"\n                    CREATE TABLE TableName (\n                        Id INT IDENTITY(1,1) PRIMARY KEY,\n                        -- Define other columns here\n                    );";\n                \n                using (SqlCommand command = new SqlCommand(createTableCommand, connection))\n                {\n                    command.ExecuteNonQuery();\n                }\n\n                // Enable identity insert in another batch\n                string enableIdentityInsertCommand = "SET IDENTITY_INSERT TableName ON;";\n                \n                using (SqlCommand command = new SqlCommand(enableIdentityInsertCommand, connection))\n                {\n                    command.ExecuteNonQuery();\n                }\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine("An error occurred: " + ex.Message);\n            }\n        }\n    }\n}