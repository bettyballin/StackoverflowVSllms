<#@ template debug="true" hostspecific="true"#>\n<#@ output extension=".cs"#>\n<#@ MyLanguage processor="MyDirectiveProcessor" requires="fileName='..\MyModel.mydsl'" #>\n\nnamespace GeneratedCode\n{\n    public partial class ModelGenerator\n    {\n        public void Generate()\n        {\n            // Assuming 'this.ModelRoot' is available through the directive processor setup.\n            foreach (var diagram in this.Store.Parts.OfType<MyDslPackage.MyDiagram>())\n            {\n                // Do something with each diagram, e.g., write its contents to a file or process it further.\n                ProcessDiagram(diagram);\n            }\n        }\n\n        private void ProcessDiagram(MyDslPackage.MyDiagram diagram)\n        {\n            // Example processing logic: iterating over elements in the diagram\n            foreach (var element in diagram.ModelElementLinks.Cast<ModelElement>())\n            {\n                // Perform operations on each model element\n                Console.WriteLine(element.ToString());\n            }\n        }\n    }\n}