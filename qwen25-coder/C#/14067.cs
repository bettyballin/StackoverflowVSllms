using Microsoft.Win32;\nusing System;\n\npublic static void SetShortDateFormat(string username, string dateFormat)\n{\n    // Path to the user's registry hive\n    string userSid = GetUserSID(username);\n    if (string.IsNullOrEmpty(userSid))\n    {\n        throw new ArgumentException("Username not found.");\n    }\n\n    string registryPath = $@"Software\Microsoft\Windows NT\CurrentVersion\ProfileList\{userSid}\Software\Microsoft\CTF\LangBarAddOns";\n    \n    // Actual keys for date format are located under the .Default\n    using (RegistryKey key = Registry.LocalMachine.OpenSubKey(registryPath, true))\n    {\n        if (key != null)\n        {\n            RegistryKey controlPanelKey = key.CreateSubKey(@".Default\Control Panel");\n            if (controlPanelKey != null)\n            {\n                RegistryKey intlKey = controlPanelKey.CreateSubKey("International");\n                if (intlKey != null)\n                {\n                    // Set the short date format\n                    intlKey.SetValue("sShortDate", dateFormat);\n                    Console.WriteLine($"Date format set to: {dateFormat}");\n                }\n                else\n                {\n                    Console.WriteLine("Failed to open International key.");\n                }\n            }\n            else\n            {\n                Console.WriteLine("Failed to open Control Panel key.");\n            }\n        }\n        else\n        {\n            Console.WriteLine("Failed to open user's registry hive.");\n        }\n    }\n}\n\nprivate static string GetUserSID(string username)\n{\n    using (System.DirectoryServices.AccountManagement.UserPrincipal principal = System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(new System.DirectoryServices.AccountManagement.PrincipalContext(System.DirectoryServices.AccountManagement.ContextType.Machine), username))\n    {\n        if (principal != null && principal.Sid != null)\n            return principal.Sid.Value;\n    }\n\n    Console.WriteLine("User not found or could not retrieve SID.");\n    return string.Empty;\n}