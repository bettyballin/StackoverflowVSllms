using (var s = _sessionFactory.OpenSession())\nusing (var t = s.BeginTransaction(IsolationLevel.RepeatableRead))\n{\n    try\n    {\n        var taskToSave = new Task\n        {\n            Class = "test class",\n            IsActive = true,\n            Namespace = "test namespace"\n        };\n\n        s.FlushMode = FlushMode.Commit;\n        s.Save(taskToSave);\n        t.Commit();\n    }\n    catch (Exception ex)\n    {\n        // Log the exception here or handle it appropriately\n        t.Rollback(); // Ensure transaction is rolled back on error\n        Console.WriteLine($"Error: {ex.Message}");\n    }\n}