public byte[][] SplitImageIntoChunks(byte[] imageData, int chunkSize)\n{\n    List<byte[]> chunks = new List<byte[]>();\n    for (int i = 0; i < imageData.Length; i += chunkSize)\n    {\n        var end = Math.Min(i + chunkSize, imageData.Length);\n        var chunk = new byte[end - i];\n        Array.Copy(imageData, i, chunk, 0, chunk.Length);\n        chunks.Add(chunk);\n    }\n    return chunks.ToArray();\n}