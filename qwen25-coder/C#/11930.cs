protected override string ResolveUrl(string relativeUrl)\n{\n    if (relativeUrl.Contains("WebResource.axd"))\n    {\n        // Construct the URL according to your rules\n        var root = Request.IsSecureConnection ? "https" : "http";\n        root += "://" + Request.Url.Authority;\n        if (!string.IsNullOrEmpty(Request.ApplicationPath) && Request.ApplicationPath != "/")\n            root += VirtualPathUtility.ToAbsolute("~");\n        return root + relativeUrl.Replace("~/", "/");\n    }\n    return base.ResolveUrl(relativeUrl);\n}