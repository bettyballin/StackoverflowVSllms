using System;\nusing System.IO;\n\npublic class FilenameHandler\n{\n    public static string GetUniqueFilename(string directory, string fileName)\n    {\n        // Extract the name and extension of the file\n        string baseName = Path.GetFileNameWithoutExtension(fileName);\n        string extension = Path.GetExtension(fileName);\n\n        int number = 0;\n        string newFileName = fileName;\n\n        // Check for existing files with the same name\n        while (File.Exists(Path.Combine(directory, newFileName)))\n        {\n            number++;\n            newFileName = $"{baseName}({number}){extension}";\n        }\n\n        return Path.Combine(directory, newFileName);\n    }\n}\n\n// Example usage:\nclass Program\n{\n    static void Main()\n    {\n        string directory = @"C:\Your\Directory";\n        string fileName = "FooBar.xml";\n\n        string uniqueFilename = FilenameHandler.GetUniqueFilename(directory, fileName);\n        Console.WriteLine("Unique filename: " + uniqueFilename);\n\n        // Here you would write to the file using uniqueFilename\n    }\n}