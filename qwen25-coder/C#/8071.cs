protected void Application_Error(object sender, EventArgs e)\n{\n    Exception exc = Server.GetLastError();\n    if (exc != null && typeof(HttpRequestValidationException).IsAssignableFrom(exc.GetType()))\n    {\n        if (Context.Request.Headers["X-Requested-With"] == "XMLHttpRequest")\n        {\n            // Clear the error from the server\n            Server.ClearError();\n\n            // Set the response status code\n            Context.Response.StatusCode = 400;\n\n            // Write a custom JSON error message to the response\n            var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();\n            string responseText = serializer.Serialize(new { success = false, message = "Invalid request. Please ensure no HTML is included." });\n\n            Context.Response.Write(responseText);\n            Context.Response.ContentType = "application/json";\n        }\n    }\n}