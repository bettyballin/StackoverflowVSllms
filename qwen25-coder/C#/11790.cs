if (!Request.IsLocal && (string.Equals(Request.Headers["X-Forwarded-Proto"], "http", StringComparison.OrdinalIgnoreCase) || \n                         Request.ServerVariables["HTTPS"] == null || \n                         string.Equals(Request.ServerVariables["HTTPS"], "off", StringComparison.OrdinalIgnoreCase)))\n{\n    Response.Redirect(Helper.GetInstance().SSLBaseURL() + ScriptName());\n}