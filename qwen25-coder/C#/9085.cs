[WebMethod(EnableSession = true)]\npublic Dictionary<string, object> GetArchivedFiles(int pageSize, int page)\n{\n    Dictionary<string, object> result = new Dictionary<string, object>();\n\n    if (HttpContext.Current.User.Identity.IsAuthenticated && Session["UserId"] != null)\n    {\n        // Do your computing here and add results to the dictionary\n        result["Success"] = true;\n        result["Data"] = /* your data */;\n        return result;\n    }\n\n    // User is not authenticated\n    result["Success"] = false;\n    result["ErrorMessage"] = "Unauthorized. Please log in.";\n    HttpContext.Current.Response.StatusCode = (int)HttpStatusCode.Unauthorized; // Maintain the status code for any default error handling\n    return result;\n}