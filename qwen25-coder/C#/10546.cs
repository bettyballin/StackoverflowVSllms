using System;\nusing System.IO;\nusing System.Net;\nusing HtmlAgilityPack;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        HttpListener listener = new HttpListener();\n        // Add prefixes your proxy should listen to\n        listener.Prefixes.Add("http://localhost:8080/");\n        listener.Start();\n\n        Console.WriteLine("Listening...");\n\n        while (true)\n        {\n            HttpListenerContext context = listener.GetContext();\n            HttpListenerRequest request = context.Request;\n            HttpListenerResponse response = context.Response;\n\n            // Forward the request to the target server\n            string targetUrl = "http://example.com" + request.Url.PathAndQuery; // Change this to your target site\n            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(targetUrl);\n\n            // Copy headers, method and content if any from original request\n            foreach (string headerName in request.Headers)\n            {\n                webRequest.Headers[headerName] = request.Headers.Get(headerName);\n            }\n            webRequest.Method = request.HttpMethod;\n            \n            if (request.HasEntityBody)\n            {\n                using (Stream sIn = request.InputStream)\n                using (Stream sOut = webRequest.GetRequestStream())\n                {\n                    byte[] buffer = new byte[1024];\n                    int read;\n                    while ((read = sIn.Read(buffer, 0, buffer.Length)) != 0) \n                        sOut.Write(buffer, 0, read);\n                }\n            }\n\n            // Get the target server response\n            HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();\n\n            // Copy headers and status code from target server response to output response\n            foreach (string headerName in webResponse.Headers)\n            {\n                response.Headers[headerName] = webResponse.Headers.Get(headerName);\n            }\n            response.StatusCode = (int)webResponse.StatusCode;\n\n            using (Stream sIn = webResponse.GetResponseStream())\n            using (StreamReader reader = new StreamReader(sIn))\n            {\n                string htmlString = reader.ReadToEnd();\n                \n                // Modify the HTML here\n                HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();\n                doc.LoadHtml(htmlString);\n                \n                // Example modification: Change the title of the page\n                var node = doc.DocumentNode.SelectSingleNode("//title");\n                if (node != null)\n                    node.InnerText += " - Modified";\n                \n                string modifiedHtml = doc.DocumentNode.OuterHtml;\n\n                using (StreamWriter writer = new StreamWriter(response.OutputStream))\n                {\n                    writer.Write(modifiedHtml);\n                }\n            }\n\n            response.Close();\n        }\n    }\n}