using System.Web.Mvc;\n\nnamespace CompanyName.UI.UIApp.Infrastructure.Filters\n{\n    /// <summary>\n    /// Apply on action method to store URL of request in session\n    /// </summary>\n    public class RememberUrlAttribute : ActionFilterAttribute\n    {\n        private const string CurrentUrlKey = "CurrentUrl";\n        private const string PreviousUrlKey = "PreviousUrl";\n\n        public override void OnActionExecuting(ActionExecutingContext filterContext)\n        {\n            if (filterContext.HttpContext.Request.RequestType == "GET"\n                && !filterContext.HttpContext.Request.IsAjaxRequest())\n            {\n                var currentUrl = filterContext.HttpContext.Request.Url;\n\n                // Save previous URL to session\n                filterContext.HttpContext.Session[PreviousUrlKey] =\n                    filterContext.HttpContext.Session[CurrentUrlKey] ?? currentUrl;\n\n                // Update current URL in session\n                filterContext.HttpContext.Session[CurrentUrlKey] = currentUrl;\n            }\n        }\n    }\n}