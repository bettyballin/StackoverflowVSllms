using System;\nusing Microsoft.SqlServer.Server;\nusing System.ServiceModel;\n\npublic class MyWcfClientWrapper {\n    [SqlFunction()]\n    public static SqlString CallWcfService() {\n        IMyService channel = null;\n        ChannelFactory<IMyService> myChannelFactory = null;\n        \n        try {\n            myChannelFactory = new ChannelFactory<IMyService>(new NetTcpBinding(), "net.tcp://yourendpointservice.com:port/service");\n            channel = myChannelFactory.CreateChannel();\n            \n            // Check if the channel is in a Faulted state\n            if (((IClientChannel)channel).State == CommunicationState.Faulted) {\n                ((IClientChannel)channel).Abort();\n                return "Service was faulted.";\n            }\n\n            string result = channel.GetData();\n            return new SqlString(result);\n        }\n        catch (CommunicationException ce) {\n            return new SqlString("Error occurred: " + ce.Message);\n        }\n        finally {\n            if (channel != null) {\n                var icc = channel as IClientChannel;\n                try { \n                    icc.Close(); \n                } \n                catch { \n                    icc.Abort();\n                }\n            }\n\n            if (myChannelFactory != null && myChannelFactory.State == CommunicationState.Faulted)\n                myChannelFactory.Abort();\n\n        }\n    }\n}