using System;\nusing System.Data.Linq;\nusing System.Data.Linq.SqlClient;\nusing System.Reflection;\n\npublic static string GetFullSql(Expression queryExpression, DataContext context)\n{\n    var translator = (System.Data.Linq.SqlClient.ISqlFragment)typeof(DataContext).Assembly\n        .GetType("System.Data.Linq.SqlClient.SqlProvider")\n        .InvokeMember(\n            "GetQueryTranslator",\n            BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance | BindingFlags.InvokeMethod,\n            null, context.Provider, new object[] { queryExpression });\n\n    var sql = ((System.Data.Linq.SqlClient.SqlNode)translator).ToString();\n\n    foreach (var param in context.GetCommand(queryExpression).Parameters)\n    {\n        sql = SqlClient.QueryFormatter.ReplaceParameterInQuery(sql, param);\n    }\n\n    return sql;\n}