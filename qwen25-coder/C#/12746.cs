using System;\nusing System.IO;\nusing System.Text;\nusing System.Web.Mvc;\n\npublic class WhiteSpaceFilter : ActionFilterAttribute\n{\n    public override void OnResultExecuted(ResultExecutedContext filterContext)\n    {\n        if (filterContext == null) throw new ArgumentNullException(nameof(filterContext));\n\n        var response = filterContext.HttpContext.Response;\n        response.Filter = new MinifyStream(response.Filter);\n    }\n\n    private class MinifyStream : DelegatingStream\n    {\n        public MinifyStream(Stream baseStream)\n            : base(baseStream)\n        {\n        }\n\n        public override void Write(byte[] buffer, int offset, int count)\n        {\n            string html = Encoding.UTF8.GetString(buffer, offset, count);\n            html = MinifyHtml(html);\n            byte[] outBytes = Encoding.UTF8.GetBytes(html);\n            BaseStream.Write(outBytes, 0, outBytes.Length);\n        }\n\n        private static string MinifyHtml(string html)\n        {\n            // Simple whitespace removal (not a full minifier)\n            // Consider using a more robust HTML minification library for production\n            return System.Text.RegularExpressions.Regex.Replace(html, @"\s+", " ").Trim();\n        }\n    }\n}