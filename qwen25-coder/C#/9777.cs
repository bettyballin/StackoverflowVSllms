public class ModuleMap : ClassMap<Module>\n{\n    public ModuleMap()\n    {\n        Id(x => x.Id);\n        Version(x => x.LastUpdated);\n        Map(x => x.ModuleId)\n            .Unique()\n            .Not.Nullable();\n        HasMany<ModuleVariable>(x => x.Variables)\n            .Cascade.SaveUpdate(); // Removed Inverse\n        References<Variable>(x => x.StratumVariable)\n            .Not.Nullable()\n            .Cascade.SaveUpdate();\n        References<Stratum>(x => x.DefaultStratum)\n            .Not.Nullable()\n            .Cascade.SaveUpdate();\n        HasMany<Stratum>(x => x.OptionalStrata) // Assuming this is the correct name for your collection\n            .Cascade.SaveUpdate(); // Removed Inverse\n    }\n}