protected void btnSave_Click(object sender, EventArgs e)\n{\n    var filesToSave = GetFilesToSave();\n    int totalFiles = filesToSave.Count;\n    Session["Progress"] = new { Count = 0, Total = totalFiles };\n\n    foreach (var fileToSave in filesToSave)\n    {\n        SaveProcessedFile(fileToSave);\n        // Update progress\n        var progress = (dynamic)Session["Progress"];\n        progress.Count += 1;\n        Session["Progress"] = progress;\n    }\n}