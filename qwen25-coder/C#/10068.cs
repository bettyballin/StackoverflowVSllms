using System;\nusing System.IO;\n\nclass Program\n{\n    static void Main()\n    {\n        AppDomainSetup setup = new AppDomainSetup();\n        setup.ApplicationBase = Environment.CurrentDirectory;\n        setup.ShadowCopyFiles = "true";\n        \n        AppDomain domain = AppDomain.CreateDomain("ShadowCopyDomain", null, setup);\n        \n        // Load and execute assembly in shadow copy\n        string asmPath = Path.Combine(setup.ApplicationBase, @"MyAssembly.dll");\n        using (FileStream fs = File.Open(asmPath, FileMode.Open))\n        {\n            byte[] asmBytes = new byte[fs.Length];\n            fs.Read(asmBytes, 0, (int)fs.Length);\n            \n            Assembly assembly = domain.Load(asmBytes);\n            // Execute methods in the loaded assembly\n        }\n        \n        AppDomain.Unload(domain); // Unload domain to release resources\n    }\n}