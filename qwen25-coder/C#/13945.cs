using System;\nusing System.Web;\n\npublic class FormatModule : IHttpModule\n{\n    public void Dispose()\n    {\n        // No resources to release.\n    }\n\n    public void Init(HttpApplication application)\n    {\n        application.BeginRequest += new EventHandler(application_BeginRequest);\n    }\n\n    void application_BeginRequest(object sender, EventArgs e)\n    {\n        HttpContext context = HttpContext.Current;\n        string rawUrl = context.Request.RawUrl;\n\n        if (rawUrl.EndsWith(".pox", StringComparison.OrdinalIgnoreCase))\n        {\n            context.RewritePath("~/Lab1Service.svc?format=pox");\n            context.RemapHandler();\n        }\n        else if (rawUrl.EndsWith(".json", StringComparison.OrdinalIgnoreCase))\n        {\n            context.RewritePath("~/Lab1Service.svc?format=json");\n            context.RemapHandler();\n        }\n    }\n}