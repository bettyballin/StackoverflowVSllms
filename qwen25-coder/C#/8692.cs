using (SPSite site = new SPSite("http://your-site-url"))\n{\n    using (SPWeb web = site.OpenWeb())\n    {\n        SPList list = web.Lists["Your List Title"];\n        SPFolder folder = list.RootFolder.SubFolders["Your Folder Name"];\n\n        // Allow unsafe updates\n        web.AllowUnsafeUpdates = true;\n\n        try\n        {\n            // Break role inheritance without copying parent permissions\n            folder.Item.BreakRoleInheritance(false);\n\n            // Manually remove all existing role assignments (if any)\n            while (folder.Item.RoleAssignments.Count > 0)\n            {\n                folder.Item.RoleAssignments.Remove(0);\n            }\n\n            // Add new Role Assignments as required\n            SPRoleAssignment roleAssignment = new SPRoleAssignment("domain\\username");\n            SPRoleDefinitionBindingCollection roleDefinitions = new SPRoleDefinitionBindingCollection(web);\n            roleDefinitions.Add(web.RoleDefinitions.GetByType(SPRoleType.Contributor));\n            roleAssignment.RoleDefinitionBindings.AddRange(roleDefinitions);\n            folder.Item.RoleAssignments.Add(roleAssignment);\n\n            // Update the item to save changes\n            folder.Item.Update();\n        }\n        finally\n        {\n            web.AllowUnsafeUpdates = false;\n        }\n    }\n}