using (var conn = new SqlClient.SqlConnection("your_connection_string_here"))\n{\n    conn.Open(); // Ensure the connection is open\n\n    // Creation involves many table joins in reality\n    String creationScript = "SELECT * INTO #MyTemp FROM FooTable";\n    SqlCommand createTempTbl = new SqlCommand(creationScript, conn);\n    createTempTbl.ExecuteNonQuery();\n\n    // First query using the temp table\n    String query1 = "SELECT * FROM #MyTemp WHERE id=@id";\n    SqlCommand query1Comm = new SqlCommand(query1, conn);\n    query1Comm.Parameters.AddWithValue("@id", someIdValue); // Replace with actual value or parameter\n    SqlDataReader reader1 = query1Comm.ExecuteReader();\n    // Process the results...\n    reader1.Close();\n\n    // Second query using the temp table\n    String query2 = "SELECT * FROM #MyTemp WHERE name=@name";\n    SqlCommand query2Comm = new SqlCommand(query2, conn);\n    query2Comm.Parameters.AddWithValue("@name", someNameValue); // Replace with actual value or parameter\n    SqlDataReader reader2 = query2Comm.ExecuteReader();\n    // Process the results...\n    reader2.Close();\n\n    // Additional queries can follow similarly\n\n} // #MyTemp is automatically dropped here when the connection closes