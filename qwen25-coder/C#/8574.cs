FileInfo file = new FileInfo(Path.Combine(_module.FileDir, _file.FilePath));\nif (file.Exists)\n{\n    Response.ClearContent();\n    Response.ClearHeaders();\n    Response.ContentType = _file.ContentType;\n    Response.AppendHeader("Content-Disposition", "attachment; filename=" + Regex.Replace(_file.FilePath, "\\s", "-"));\n    Response.AppendHeader("Content-Length", file.Length.ToString());\n    Response.Flush(); // Send headers\n\n    try\n    {\n        Response.WriteFile(file.FullName);\n        Response.End(); // A safer way to stop processing and send the response.\n    }\n    catch (Exception ex)\n    {\n        // Log the exception and handle it as appropriate\n        Response.ClearContent();\n        // Optionally, you could log the error here or display a message to the user\n    }\n}\nelse\n{\n    // Handle the file not found case appropriately\n    Response.StatusCode = 404; // Not Found\n    Response.End(); // Stop processing and send the response.\n}