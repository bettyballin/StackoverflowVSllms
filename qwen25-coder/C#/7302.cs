using (var context = new YourDbContext())\n{\n    // Fetching all contexts with their components to remove associations.\n    var contexts = context.Contexts.Include(c => c.Components).ToList();\n\n    foreach (var ctx in contexts)\n    {\n        // Remove each component from the current context's collection\n        foreach (var comp in ctx.Components.ToList())  // ToList() is used avoid modification during iteration\n        {\n            ctx.Components.Remove(comp);\n        }\n\n        // Mark the context for deletion\n        context.Contexts.Remove(ctx);\n    }\n\n    // Now we also need to delete components that are not associated with any contexts\n    var allComponents = context.Components.ToList();\n    foreach (var comp in allComponents)\n    {\n        context.Components.Remove(comp);\n    }\n\n    // Save changes to apply deletions\n    context.SaveChanges();\n}