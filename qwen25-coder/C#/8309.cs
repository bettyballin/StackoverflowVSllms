using System;\nusing System.Data;\nusing System.Data.Common;\n\npublic class DbManager\n{\n    private string connectionString;\n    private DbProviderFactory factory;\n\n    public DbManager(string providerName, string connectionString)\n    {\n        this.connectionString = connectionString;\n        factory = DbProviderFactories.GetFactory(providerName);\n    }\n\n    public DataTable GetData(string query)\n    {\n        using (DbConnection connection = factory.CreateConnection())\n        {\n            if (connection != null)\n            {\n                connection.ConnectionString = connectionString;\n\n                using (DbCommand command = connection.CreateCommand())\n                {\n                    command.CommandText = query;\n                    command.Connection = connection;\n\n                    using (DbDataAdapter adapter = factory.CreateDataAdapter())\n                    {\n                        if (adapter != null)\n                        {\n                            adapter.SelectCommand = command;\n                            DataTable dataTable = new DataTable();\n                            adapter.Fill(dataTable);\n                            return dataTable;\n                        }\n                    }\n                }\n            }\n        }\n\n        return null; // Return empty or handle error\n    }\n}