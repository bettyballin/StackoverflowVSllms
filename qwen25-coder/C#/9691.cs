public string updateQuery(string table, string[] fields, object[] values, string conditionField, object conditionValue)\n{\n    try\n    {\n        if (connection.State != ConnectionState.Open)\n        {\n            connection.Open();\n        }\n\n        StringBuilder cmd = new StringBuilder("UPDATE " + table + " SET ");\n\n        int i = 1;\n        foreach (string s in fields)\n        {\n            if (i == fields.Length)\n            {\n                cmd.Append(s + " = @" + s);\n            }\n            else\n            {\n                cmd.Append(s + " = @" + s + ", ");\n            }\n\n            i++;\n        }\n\n        cmd.Append(" WHERE (" + conditionField + " = @" + conditionField + ");");\n        command.CommandText = cmd.ToString();\n\n        int j = 0;\n        foreach (object o in values)\n        {\n            command.Parameters.AddWithValue(fields[j], o); // Remove '@' from parameter name\n            j++;\n        }\n\n        command.Parameters.AddWithValue(conditionField, conditionValue);\n\n        command.ExecuteNonQuery();\n        connection.Close();\n\n        return command.CommandText;\n    }\n    catch (Exception ex)\n    {\n        throw new Exception("An error occurred: " + ex.Message, ex);\n    }\n}