private void TransferFile()\n{\n    try\n    {\n        string filePath = Server.MapPath("SomeJarFIle.jar");\n\n        FileInfo file = new FileInfo(filePath);\n\n        if (file.Exists)\n        {\n            // Clear the content of the response\n            Response.ClearContent();\n            Response.Clear();\n\n            // Add the file name and attachment, which will force the open/cance/save dialog to show, to the header\n            Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);\n\n            // Add the file size into the response header\n            Response.AddHeader("Content-Length", file.Length.ToString());\n\n            // Set the ContentType\n            Response.ContentType = ReturnExtension(file.Extension.ToLower());\n\n            // Write the file into the response using TransmitFile for better performance and less memory usage\n            Response.TransmitFile(file.FullName);\n            \n            // Flush before ending the response\n            Response.Flush();\n            \n            // End the response\n            Response.End();\n        }\n        else\n        {\n            this.Response.Write("Error in finding file.  Please try again.");\n            this.Response.Flush();\n        }\n    }\n    catch (Exception ex)\n    {\n        this.Response.Write(string.Format("Error: {0}", ex.Message));\n    }\n}\n\nprivate string ReturnExtension(string fileExtension)\n{\n    // Your existing code to return the correct MIME type\n}