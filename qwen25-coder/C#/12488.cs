using Microsoft.EntityFrameworkCore;\nusing System.Security.Claims;\n\npublic class ApplicationDbContext : DbContext\n{\n    private readonly ClaimsPrincipal _user;\n\n    public DbSet<Order> Orders { get; set; }\n\n    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options,\n        IHttpContextAccessor httpContextAccessor)\n        : base(options)\n    {\n        // Capture the current user from HttpContext\n        _user = httpContextAccessor.HttpContext.User;\n    }\n\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        // Define a global query filter for Orders based on UserId.\n        modelBuilder.Entity<Order>()\n            .HasQueryFilter(o => o.UserId == _user.FindFirstValue(ClaimTypes.NameIdentifier));\n    }\n}\n\npublic class Order\n{\n    public int Id { get; set; }\n    public string UserId { get; set; } // Foreign key for the user who created the order\n    // Other properties...\n}