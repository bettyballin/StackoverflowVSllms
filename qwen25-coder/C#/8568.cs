void updateMediaForSubscribers(long userId, long mediaId, Media_Base.Catagory cat, DateTime currentDate)\n{\n    command.CommandText =\n        "INSERT INTO user_media_subscription (recipientId, mediaId, category) " +\n        "SELECT watcher, @mediaId, @category " +\n        "FROM user_watch WHERE watched=@watched;";\n    command.Parameters.Add("@mediaId", DbType.Int64).Value = mediaId;\n    command.Parameters.Add("@category", DbType.Int64).Value = cat;\n    command.Parameters.Add("@watched", DbType.Int64).Value = userId;\n    command.ExecuteNonQuery();\n\n    // Corrected UPDATE statement\n    command.CommandText =\n        "UPDATE user_data SET mediaMsgCount=mediaMsgCount+1 " +\n        "FROM user_data ud " +\n        "INNER JOIN user_watch w ON w.watcher=ud.userId " +\n        "WHERE w.watched=@watched;";\n    command.Parameters.Add("@watched", DbType.Int64).Value = userId;\n    command.ExecuteNonQuery();\n}