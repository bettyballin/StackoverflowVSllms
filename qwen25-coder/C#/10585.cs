using System;\nusing System.Diagnostics;\nusing System.Security;\n\npublic class IntermediateProcessRunner\n{\n    static void Main(string[] args)\n    {\n        if (args.Length < 4)\n        {\n            Console.WriteLine("Usage: IntermediateProcessRunner.exe filename username domain password");\n            return;\n        }\n\n        string filename = args[0];\n        string username = args[1];\n        string domain = args[2];\n        SecureString securePassword = new NetworkCredential("", args[3]).SecurePassword;\n\n        ProcessStartInfo startInfo = new ProcessStartInfo\n        {\n            FileName = filename,\n            UserName = username,\n            Domain = domain,\n            Password = securePassword,\n            LoadUserProfile = true, // Optionally load the user profile of the specified user\n            UseShellExecute = false // This is necessary to provide credentials and not use a shell window\n        };\n\n        try\n        {\n            using (Process process = Process.Start(startInfo))\n            {\n                process.WaitForExit();\n            }\n        }\n        catch (Exception ex)\n        {\n            Console.WriteLine($"Failed to start process: {ex.Message}");\n        }\n    }\n}