using (SqlConnection connection = new SqlConnection(connectionString))\n{\n    string query = @"\n        INSERT INTO FriendRequests (UserId, FriendUserId)\n        SELECT @YourUserId, @FriendUserId\n        WHERE NOT EXISTS (\n            SELECT 1 \n            FROM FriendRequests \n            WHERE UserId = @YourUserId AND FriendUserId = @FriendUserId\n        );";\n\n    SqlCommand command = new SqlCommand(query, connection);\n    command.Parameters.AddWithValue("@YourUserId", yourUserId);\n    command.Parameters.AddWithValue("@FriendUserId", friendUserId);\n\n    connection.Open();\n    command.ExecuteNonQuery();\n}