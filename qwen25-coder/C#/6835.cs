using System;\nusing System.Data.SqlClient;\nusing System.Transactions;\n\nclass Program\n{\n    static void Main()\n    {\n        string connectionString1 = "YourConnectionStringForDB1";\n        string connectionString2 = "YourConnectionStringForDB2";\n\n        using (TransactionScope scope = new TransactionScope())\n        {\n            try\n            {\n                using (SqlConnection connection1 = new SqlConnection(connectionString1))\n                {\n                    connection1.Open();\n                    SqlCommand command1 = new SqlCommand("INSERT INTO Table1 VALUES (@Value)", connection1);\n                    command1.Parameters.AddWithValue("@Value", "SomeValue1");\n                    command1.ExecuteNonQuery();\n                }\n\n                using (SqlConnection connection2 = new SqlConnection(connectionString2))\n                {\n                    connection2.Open();\n                    SqlCommand command2 = new SqlCommand("INSERT INTO Table2 VALUES (@Value)", connection2);\n                    command2.Parameters.AddWithValue("@Value", "SomeValue2");\n                    command2.ExecuteNonQuery();\n                }\n\n                // Commit transaction if everything is successful\n                scope.Complete();\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine("An error occurred: " + ex.Message);\n                // Transaction will automatically be rolled back on exception\n            }\n        }\n    }\n}