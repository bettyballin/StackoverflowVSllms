public class InMemoryRepository : IRepository<Foo>\n{\n    private List<Foo> items = new List<Foo>();\n\n    public Foo GetById(int id)\n    {\n        return items.FirstOrDefault(i => i.Id == id);\n    }\n\n    public void Save(Foo entity)\n    {\n        if (items.Any(e => e.Id == entity.Id))\n        {\n            var itemToUpdate = items.First(i => i.Id == entity.Id);\n            itemToUpdate.Name = entity.Name;\n        }\n        else\n        {\n            items.Add(entity);\n        }\n    }\n}\n\n// Use the hard-coded repository in your tests\nvar repo = new InMemoryRepository();\nrepo Save(new Foo { Id = 1, Name = "Test" });\nFoo result = repo.GetById(1);