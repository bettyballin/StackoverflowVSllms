using System;\nusing System.Text.RegularExpressions;\n\nclass Program\n{\n    static void Main()\n    {\n        string html = "<html><body>Check out <a href='http://example.com'>Example</a>. Also visit https://another-example.co.uk/path?query=123#section.</body></html>";\n        string pattern = @"(?i)\b((?:https?|ftp):\/\/[^\s"'""><\)]+(?:\([\w\d]+\)|[\w\d.,@?^=%&:/~+#-]*[\w\d@?^=%&/~+#-])?)";\n\n        foreach (Match match in Regex.Matches(html, pattern))\n        {\n            Console.WriteLine(match.Value);\n        }\n    }\n}