using System;\nusing System.IO;\n\npublic class TextProcessor\n{\n    private readonly TextReader _textReader;\n    private readonly string _content; // This will be used to reset for StringReader\n\n    public TextProcessor(TextReader textReader)\n    {\n        if (textReader == null) throw new ArgumentNullException(nameof(textReader));\n        \n        _textReader = textReader;\n\n        // Check if the reader is a StreamReader and can be seeked\n        if (_textReader is StreamReader streamReader)\n        {\n            using (var memStream = new MemoryStream())\n            {\n                streamReader.BaseStream.CopyTo(memStream);\n                memStream.Position = 0;\n                _textReader.Dispose();\n                _textReader = new StreamReader(memStream);\n            }\n        }\n        // Otherwise, read the entire content into a string for StringReader\n        else if (_textReader is StringReader)\n        {\n            _content = _textReader.ReadToEnd();\n            _textReader.Dispose();\n            Reset(); // Initialize with stored content\n        }\n    }\n\n    public void PreReadAndReset()\n    {\n        // Example pre-read logic (you can replace this with your own)\n        _textReader.Read();\n\n        Reset();\n    }\n\n    private void Reset()\n    {\n        if (_textReader is StreamReader streamReader)\n        {\n            streamReader.BaseStream.Position = 0;\n            _textReader.DiscardBufferedData(); // Important to clear the buffer\n        }\n        else if (_content != null) // For StringReader case\n        {\n            _textReader.Dispose();\n            _textReader = new StringReader(_content);\n        }\n    }\n\n    public void PrintContent()\n    {\n        Console.WriteLine(_textReader.ReadToEnd());\n        Reset(); // Reset after reading for demonstration purposes\n    }\n}\n\n// Usage example\npublic class Program\n{\n    static void Main(string[] args)\n    {\n        var stringReader = new StringReader("Hello, world!");\n        using (var textProcessor = new TextProcessor(stringReader))\n        {\n            textProcessor.PreReadAndReset();\n            textProcessor.PrintContent(); // Should print "Hello, world!"\n        }\n        \n        using (var fileStream = File.OpenRead("example.txt"))\n        using (var streamReader = new StreamReader(fileStream))\n        using (var textProcessor = new TextProcessor(streamReader))\n        {\n            textProcessor.PreReadAndReset();\n            textProcessor.PrintContent(); // Should print the content of example.txt\n        }\n    }\n}