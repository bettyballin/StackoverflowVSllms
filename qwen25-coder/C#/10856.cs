using (SqlConnection conn = new SqlConnection(GetConnectionString()))\n{\n    conn.Open();\n    using (SqlCommand cmd = new SqlCommand(GetQuery(), conn))\n    {\n        cmd.CommandType = CommandType.Text;\n        // Use parameterized queries\n        cmd.Parameters.AddWithValue("@id", id); // Example parameter\n        cmd.CommandTimeout = 30; // Set command timeout to 30 seconds\n\n        using (SqlDataReader rd = cmd.ExecuteReader())\n        {\n            while (rd.Read())\n            {\n                // Process the data\n            }\n        }\n    }\n}\n\nprivate string GetConnectionString()\n{\n    return ConfigurationManager.ConnectionStrings["MyDb"].ConnectionString;\n}\n\nprivate string GetQuery()\n{\n    return @"\nSET NOCOUNT ON;\n\nSELECT col1, col2 \nFROM tableX \nWHERE id = @id\n\n-- More SQL here";\n}