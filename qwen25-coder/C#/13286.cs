public static T FindOrCreate<T>(this Table<T> table, Func<T, bool> find, Func<T> replacement) \n    where T : new()\n{\n    T val = table.FirstOrDefault(find);\n    if (val == null)\n    {\n        val = replacement(); // This line creates a new instance only if val is null\n        table.InsertOnSubmit(val);\n    }\n    return val;\n}\n\nvar invoiceDb = ctx.Invoices.FindOrCreate(a => a.InvoicerId == InvoicerId\n                                                && a.Number == invoiceNumber,\n                                              () => new Invoice());\ninvoiceDb.Number = invoiceNumber;