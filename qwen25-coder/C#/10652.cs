using OpenQA.Selenium;\nusing OpenQA.Selenium.Support.UI;\nusing System;\n\npublic class DropdownTest\n{\n    public void TestSelectUSAAndState(IWebDriver driver)\n    {\n        // Navigate to your page\n        driver.Navigate().GoToUrl("YOUR_PAGE_URL_HERE");\n\n        // Wait for the country dropdown to be available and choose USA\n        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));\n        SelectElement countryDropdown = new SelectElement(wait.Until(ExpectedConditions.ElementIsVisible(By.Id("CountryId"))));\n        countryDropdown.SelectByText("USA");\n\n        // Wait for the state dropdown to be populated with options\n        wait.Until(d => OptionsPopulatedWithStates(d));\n\n        // Now select a state\n        SelectElement stateDropdown = new SelectElement(driver.FindElement(By.Id("StateId")));\n        stateDropdown.SelectByText("California");\n    }\n\n    private bool OptionsPopulatedWithStates(IWebDriver driver)\n    {\n        var options = new SelectElement(driver.FindElement(By.Id("StateId"))).Options;\n        return options.Count > 1; // Assuming there's at least one initial placeholder option\n    }\n}