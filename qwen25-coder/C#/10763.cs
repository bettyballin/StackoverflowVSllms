public partial class messages : System.Web.UI.Page\n{\n    protected void Page_Load(object sender, EventArgs e)\n    {     \n        SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=F:\\Chatter\\App_Data\\messages.mdf;Integrated Security=True;User Instance=True");\n        conn.Open();\n\n        string sql;\n        SqlCommand comm;\n\n        if (Request["usr"] != null && Request["msg"] != null)\n        {\n            string user = Request["usr"].ToString();\n            string message = Request["msg"].ToString();\n            sql = "insert into messages (usr, msg, [date]) values (@user, @message, GETDATE())";\n            comm = new SqlCommand(sql, conn);\n            \n            // Use parameters to prevent SQL injection\n            comm.Parameters.AddWithValue("@user", user);\n            comm.Parameters.AddWithValue("@message", message);\n            \n            comm.ExecuteNonQuery();\n        }\n\n        sql = "select top 5 usr, msg from messages order by [date] desc";\n        comm = new SqlCommand(sql, conn);\n        SqlDataReader dr = comm.ExecuteReader();\n\n        while (dr.Read())\n        {\n            Response.Write(dr["usr"].ToString() + ": <br/>" + dr["msg"] + "<br/><br/>");\n        }\n        dr.Close();\n\n        conn.Close();\n    }\n}