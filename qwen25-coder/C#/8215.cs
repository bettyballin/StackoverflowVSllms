using System;\nusing System.IO;\nusing System.Windows.Forms;\n\nnamespace FileListApp\n{\n    public partial class Form1 : Form\n    {\n        private string directoryPath = @"C:\YourDirectory";\n\n        public Form1()\n        {\n            InitializeComponent();\n            PopulateFileList();\n        }\n\n        private void PopulateFileList()\n        {\n            try\n            {\n                // Clear existing items\n                checkedListBox1.Items.Clear();\n\n                // Get all files in the specified directory\n                string[] files = Directory.GetFiles(directoryPath);\n\n                // Add each file to the CheckedListBox\n                foreach (string file in files)\n                {\n                    string fileName = Path.GetFileName(file);\n                    checkedListBox1.Items.Add(fileName);\n                }\n            }\n            catch (Exception ex)\n            {\n                MessageBox.Show("An error occurred: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);\n            }\n        }\n\n        private void btnProcessSelected_Click(object sender, EventArgs e)\n        {\n            foreach (var item in checkedListBox1.CheckedItems)\n            {\n                string filePath = Path.Combine(directoryPath, item.ToString());\n                // Perform your operations with the selected files here\n                ProcessFile(filePath);\n            }\n        }\n\n        private void ProcessFile(string filePath)\n        {\n            // Example operation: Rename file to add "_processed"\n            try\n            {\n                string newFilePath = filePath.Replace(Path.GetFileName(filePath), Path.GetFileNameWithoutExtension(filePath) + "_processed" + Path.GetExtension(filePath));\n                File.Move(filePath, newFilePath);\n                MessageBox.Show($"Processed: {newFilePath}");\n            }\n            catch (Exception ex)\n            {\n                MessageBox.Show("Failed to process file: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);\n            }\n        }\n    }\n}