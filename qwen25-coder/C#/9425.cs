using System;\nusing System.Data;\nusing System.Data.SqlClient;\n\n// Assuming you have a DataSet named dataSet1 and a SqlDataAdapter dataAdapter1\n\nvoid UpdateData()\n{\n    DataTable originalTable = dataTable1.Clone();\n    \n    // Copy rows to the clone of dataTable1\n    foreach (DataRow row in dataTable1.Rows)\n    {\n        originalTable.ImportRow(row);\n    }\n\n    using (SqlConnection connection = new SqlConnection(connectionString))\n    {\n        connection.Open();\n        SqlTransaction transaction = connection.BeginTransaction();\n\n        try\n        {\n            dataAdapter1.SelectCommand.Transaction = transaction;\n            dataAdapter1.UpdateCommand.Transaction = transaction;\n\n            dataAdapter1.Update(dataSet1, dataTable1.TableName);\n\n            // If everything is successful, commit the transaction\n            transaction.Commit();\n        }\n        catch (SqlException ex)\n        {\n            // Rollback the database transaction\n            if (transaction != null) transaction.Rollback();\n\n            // Restore the original state of the DataTable\n            dataTable1.Clear();\n            foreach (DataRow row in originalTable.Rows)\n            {\n                dataTable1.ImportRow(row);\n            }\n\n            // Display error or handle it as needed\n            MessageBox.Show("An error occurred: " + ex.Message);\n        }\n    }\n}