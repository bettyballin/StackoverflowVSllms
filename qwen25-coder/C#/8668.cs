// Replace <br> tags\nvalue = value.Replace("<br>", "\n").Replace("<br/>", "\n");\n\n// Trim whitespace from each line\nvar lines = value.Split(new[] { '\n' }, StringSplitOptions.RemoveEmptyEntries);\nfor (int i = 0; i < lines.Length; i++)\n{\n    lines[i] = lines[i].Trim();\n}\n\n// Reconstruct the text with single newlines between paragraphs\nvalue = string.Join("\n", lines).Trim();