using System;\n\nclass Program\n{\n    private static bool _isExitRequested = false;\n\n    static void Main()\n    {\n        // Register the CancelKeyPress event handler\n        Console.CancelKeyPress += new ConsoleCancelEventHandler(Console_CancelKeyPress);\n\n        Console.WriteLine("Press Ctrl+C to exit. Running indefinitely...");\n\n        while (!_isExitRequested)\n        {\n            System.Threading.Thread.Sleep(500); // Simulate some work with a delay\n        }\n\n        Console.WriteLine("Cleanup and exiting...");\n    }\n\n    static void Console_CancelKeyPress(object sender, ConsoleCancelEventArgs e)\n    {\n        // Set the flag to indicate that exit is requested\n        _isExitRequested = true;\n\n        // You can also set e.Cancel to true if you want to prevent the process from terminating immediately\n        // e.Cancel = true;\n        \n        Console.WriteLine("Ctrl+C pressed. Preparing to exit...");\n    }\n}