public class MyEntityController : ApiController\n{\n    private readonly ISession _session;\n\n    public MyEntityController(ISession session)\n    {\n        _session = session;\n    }\n\n    // GET api/myentity\n    [HttpGet]\n    public IEnumerable<MyEntity> GetEntities()\n    {\n        return _session.Query<MyEntity>().ToList();\n    }\n\n    // GET api/myentity/5\n    [HttpGet("{id}")]\n    public IHttpActionResult GetEntity(int id)\n    {\n        var entity = _session.Get<MyEntity>(id);\n        if (entity == null)\n        {\n            return NotFound();\n        }\n        return Ok(entity);\n    }\n\n    // POST api/myentity\n    [HttpPost]\n    public IHttpActionResult PostEntity([FromBody]MyEntity entity)\n    {\n        _session.Save(entity);\n        return CreatedAtRoute("DefaultApi", new { id = entity.Id }, entity);\n    }\n\n    // PUT api/myentity/5\n    [HttpPut("{id}")]\n    public IHttpActionResult PutEntity(int id, [FromBody]MyEntity entity)\n    {\n        if (id != entity.Id)\n        {\n            return BadRequest();\n        }\n        \n        _session.Update(entity);\n        return Ok();\n    }\n\n    // DELETE api/myentity/5\n    [HttpDelete("{id}")]\n    public IHttpActionResult DeleteEntity(int id)\n    {\n        var entity = _session.Get<MyEntity>(id);\n        if (entity == null)\n        {\n            return NotFound();\n        }\n        \n        _session.Delete(entity);\n        return Ok();\n    }\n}