using System;\nusing System.Data.SqlClient;\n\npublic void PerformOperations()\n{\n    string connectionString = "your_connection_string";\n    \n    using (var connection = new SqlConnection(connectionString))\n    {\n        connection.Open();\n        \n        // Start a local transaction.\n        using (SqlTransaction transaction = connection.BeginTransaction())\n        {\n            try\n            {\n                SqlCommand command = connection.CreateCommand();\n                command.Transaction = transaction;\n\n                // Example of executing multiple statements\n                command.CommandText = "INSERT INTO Table1 (...)";\n                command.ExecuteNonQuery();\n\n                command.CommandText = "UPDATE Table2 SET ...";\n                command.ExecuteNonQuery();\n\n                // Commit the transaction.\n                transaction.Commit();\n                Console.WriteLine("Both records are written to database.");\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine("Commit Exception Type: {0}", ex.GetType());\n                Console.WriteLine("  Message: {0}", ex.Message);\n\n                // Attempt to roll back the transaction.\n                try\n                {\n                    transaction.Rollback();\n                }\n                catch (Exception ex2)\n                {\n                    // This catches any errors that may have occurred\n                    // on the server that would cause the rollback to fail,\n                    // such as a closed connection.\n                    Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());\n                    Console.WriteLine("  Message: {0}", ex2.Message);\n                }\n            }\n        } // End the using block, which closes the transaction and the connection.\n    }\n}