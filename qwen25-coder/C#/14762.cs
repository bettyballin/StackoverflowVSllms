using System;\nusing System.ServiceModel;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        WSHttpBinding binding = new WSHttpBinding(SecurityMode.Message);\n        binding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;\n\n        // Assume we have a service hosted at this address\n        string address = "http://localhost:8080/MyService";\n\n        ServiceHost host = new ServiceHost(typeof(MyService), new Uri(address));\n        \n        // Configure the server certificate\n        binding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;\n        host.Credentials.ServiceCertificate.SetCertificate(\n            StoreLocation.LocalMachine, \n            StoreName.My, \n            X509FindType.FindBySubjectName, \n            "myServerCert");\n\n        host.AddServiceEndpoint(typeof(IMyService), binding, address);\n\n        host.Open();\n        Console.WriteLine("Host is up and running...");\n        Console.ReadLine();\n\n        host.Close();\n    }\n}