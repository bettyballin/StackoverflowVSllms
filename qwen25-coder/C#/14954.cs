public class OrderRepository : Repository<BaseOrder>\n{\n    public BaseOrder GetByReference(string reference)\n    {\n        var sql = @"\n            SELECT 'Complete' as Discriminator, * FROM CompleteOrders WHERE Reference = :reference\n            UNION ALL\n            SELECT 'InComplete' as Discriminator, NULL as DeliveredOn, NULL as PaidOn, * FROM InCompleOrders WHERE Reference = :reference";\n\n        return Session.CreateSQLQuery(sql)\n                      .AddEntity("Complete", typeof(Order))\n                      .AddEntity("InComplete", typeof(InCompleteOrder))\n                      .SetParameter("reference", reference)\n                      .UniqueResult<BaseOrder>();\n    }\n}