private void TextBox_PreviewTextInput(object sender, System.Windows.Input.TextCompositionEventArgs e)\n{\n    char result;\n    // Check if text is a digit or uppercase letter\n    bool isValid = (char.TryParse(e.Text, out result) && char.IsDigit(result)) || char.IsUpper(result);\n    e.Handled = !isValid; // Stop input if it's not valid\n}\n\nprivate void TextBox_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)\n{\n    // Allow backspace, delete and navigation keys to function normally\n    if (e.Key == System.Windows.Input.Key.Back ||\n        e.Key == System.Windows.Input.Key.Delete ||\n        e.Key == System.Windows.Input.Key.Left ||\n        e.Key == System.Windows.Input.Key.Right ||\n        e.Key == System.Windows.Input.Key.Up ||\n        e.Key == System.Windows.Input.Key.Down)\n    {\n        e.Handled = false;\n    }\n}