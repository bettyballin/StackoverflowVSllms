if (!ModelState.IsValid)\n{\n    var modelErrors = ModelState.Keys.Select(key => new \n    {\n        Key = key,\n        Errors = ModelState[key].Errors.Select(e => e.ErrorMessage).ToArray()\n    }).ToDictionary(m => m.Key, m => m.Errors);\n\n    if (Request.IsAjaxRequest())\n    {\n        return Json(new { Success = false, ModelErrors = modelErrors });\n    }\n    else\n    {\n        return View(PostedItem);\n    }\n}\nelse\n{\n    // Handle successful submission\n    // For example, save the data to the database and redirect.\n}