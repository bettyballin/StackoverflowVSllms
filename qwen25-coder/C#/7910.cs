using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\n\npublic void ProxyRequest(Socket soket, string url)\n{\n    try\n    {\n        // Create request\n        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);\n        request.CookieContainer = new CookieContainer();\n\n        // Get response and set up buffer for receiving data\n        using (var webResponse = (HttpWebResponse)request.GetResponse())\n        using (Stream responsestream = webResponse.GetResponseStream())\n        {\n            // Prepare to send modified headers including cookies\n            var headers = new StringBuilder();\n            foreach (string headerName in webResponse.Headers.AllKeys)\n            {\n                if (headerName == "Set-Cookie")\n                {\n                    // Manually append Set-Cookie headers\n                    string cookieHeader = webResponse.Headers.GetValues("Set-Cookie");\n                    headers.AppendLine($"{headerName}: {cookieHeader}");\n                }\n                else\n                {\n                    headers.AppendLine($"{headerName}: {webResponse.Headers[headerName]}");\n                }\n            }\n\n            // Convert header to byte array and send via socket\n            byte[] headerBytes = Encoding.ASCII.GetBytes(headers.ToString() + "\r\n\r\n");\n            soket.Send(headerBytes, headerBytes.Length, SocketFlags.None);\n\n            // Read response stream and send data to the client through the socket\n            byte[] buffer = new byte[4096];\n            int bytesRead;\n            while ((bytesRead = responsestream.Read(buffer, 0, buffer.Length)) > 0)\n            {\n                soket.Send(buffer, bytesRead, SocketFlags.None);\n            }\n        }\n    }\n    catch (Exception ex)\n    {\n        // Handle exceptions as needed\n        Console.WriteLine("Error: " + ex.Message);\n    }\n}