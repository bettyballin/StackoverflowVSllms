using System;\nusing System.IO;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        // Path to log file\n        string logFilePath = "log.txt";\n\n        // Create a StreamWriter object to write to the log file\n        using (StreamWriter fileStream = new StreamWriter(logFilePath, true))\n        {\n            // Create a TextWriter that writes to both console and file\n            using (var multiStream = new ConsoleAndFileWriter(Console.Out, fileStream))\n            {\n                // Redirect console output\n                Console.SetOut(multiStream);\n\n                // Example usage: Write to console which will also write to the file\n                Console.WriteLine("This is a test log message.");\n            }\n        }\n\n        Console.WriteLine("Check the log.txt file for the output.");\n    }\n}\n\n// Custom TextWriter that writes to multiple targets\npublic class ConsoleAndFileWriter : TextWriter\n{\n    private TextWriter _console;\n    private TextWriter _file;\n\n    public ConsoleAndFileWriter(TextWriter console, TextWriter file)\n    {\n        _console = console;\n        _file = file;\n    }\n\n    public override void Write(char value)\n    {\n        _console.Write(value);\n        _file.Write(value);\n    }\n\n    public override Encoding Encoding\n    {\n        get { return _console.Encoding; }\n    }\n}