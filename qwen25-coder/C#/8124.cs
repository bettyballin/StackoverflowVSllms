using System;\nusing System.IO;\nusing System.Transactions;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        string[] networkPaths = { @"\\network1\share\file.xml", \n                                 @"\\network2\share\file.xml",\n                                 @"\\network3\share\file.xml",\n                                 @"\\network4\share\file.xml",\n                                 @"\\network5\share\file.xml" };\n\n        using (var transactionScope = new TransactionScope())\n        {\n            foreach (var path in networkPaths)\n            {\n                FileInfo fileInfo = new FileInfo(path);\n                if (!fileInfo.Exists)\n                    throw new FileNotFoundException($"File not found: {path}");\n\n                // Perform modification atomically within the scope of a transaction\n                ModifyFileAtomically(fileInfo.FullName);\n            }\n\n            // Commit transaction to commit all file modifications\n            transactionScope.Complete();\n        }\n    }\n\n    static void ModifyFileAtomically(string filePath)\n    {\n        XmlDocument doc = new XmlDocument();\n\n        using (FileStream fs = new FileStream(filePath, FileMode.OpenOrCreate, FileAccess.ReadWrite))\n        {\n            doc.Load(fs);\n            \n            // Example modification: adding an element\n            XmlElement newNode = doc.CreateElement("NewNode");\n            newNode.InnerText = "SomeValue";\n            doc.DocumentElement.AppendChild(newNode);\n\n            fs.SetLength(0); // Clear the file before saving new content to avoid data corruption\n            doc.Save(fs);\n        }\n    }\n}