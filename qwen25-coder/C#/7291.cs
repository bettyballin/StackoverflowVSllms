using System;\nusing System.Collections.Generic;\n\nclass Program\n{\n    static void Main()\n    {\n        int[] array = { 1, 2, 3 };\n        foreach (var perm in Permute(array))\n        {\n            Console.WriteLine(string.Join(", ", perm));\n        }\n    }\n\n    static IEnumerable<int[]> Permute(int[] xs, List<int> pre = null)\n    {\n        pre ??= new List<int>();\n\n        if (xs.Length == 0)\n        {\n            yield return pre.ToArray();\n        }\n\n        for (int i = 0; i < xs.Length; i++)\n        {\n            var nextPre = new List<int>(pre) { xs[i] };\n            var remaining = xs.Take(i).Concat(xs.Skip(i + 1)).ToArray();\n            foreach (var y in Permute(remaining, nextPre))\n            {\n                yield return y;\n            }\n        }\n    }\n}