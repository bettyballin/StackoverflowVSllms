using System;\nusing System.Data.SqlClient;\nusing System.Web.UI;\n\npublic class BasePage : Page\n{\n    protected SqlConnection dbConnection;\n\n    protected override void OnInit(EventArgs e)\n    {\n        base.OnInit(e);\n\n        // Establish the connection before any HTML is rendered.\n        string connectionString = "your_connection_string_here";\n        dbConnection = new SqlConnection(connectionString);\n        dbConnection.Open();\n    }\n\n    protected override void OnPreRenderComplete(EventArgs e)\n    {\n        base.OnPreRenderComplete(e);\n\n        // Close the connection after all HTML is rendered.\n        if (dbConnection != null && dbConnection.State == System.Data.ConnectionState.Open)\n        {\n            dbConnection.Close();\n        }\n    }\n}