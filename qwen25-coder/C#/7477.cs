public class Global : HttpApplication\n{\n    protected void Application_BeginRequest(object sender, EventArgs e)\n    {\n        if (IsInMaintenanceMode() && !IsExistingSession())\n        {\n            HttpContext.Current.Response.Redirect("~/Maintenance.aspx");\n        }\n    }\n\n    private bool IsInMaintenanceMode()\n    {\n        // Replace with actual implementation to check maintenance mode flag\n        return Convert.ToBoolean(ConfigurationManager.AppSettings["IsMaintenanceMode"]);\n    }\n\n    private bool IsExistingSession()\n    {\n        // Example logic to determine if the request is from an existing session\n        // This could be based on whether a specific session variable exists or not\n        return HttpContext.Current.Session != null && HttpContext.Current.Session.IsNewSession == false;\n    }\n}