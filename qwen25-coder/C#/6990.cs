public class TerminalMap : ClassMap<Terminal>\n{\n    public TerminalMap()\n    {\n        Table("TERMINALS");\n        Id(x => x.Id);\n        Map(x => x.Name, "NAME"); // Adjust column name as necessary\n    }\n}\n\npublic class OrderMap : ClassMap<Order>\n{\n    public OrderMap()\n    {\n        Table("ORDERS");\n        Id(x => x.Id);\n\n        References<Terminal>(x => x.Terminal)\n            .Formula(@"(\n                SELECT t.TERMINAL_ID \n                FROM ORDERS o \n                INNER JOIN cust_prod cp ON (o.CUST_PROD_ID = cp.CUST_PROD_ID)\n                INNER JOIN customer_terminal ct ON (cp.CUSTOMER_TERMINAL_ID = ct.CUSTOMER_TERMINAL_ID)\n                INNER JOIN terminals t ON (ct.TERMINAL_ID = t.TERMINAL_ID)\n                WHERE o.ORDER_ID = ORDER_ID\n            )");\n    }\n}