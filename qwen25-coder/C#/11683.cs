public static void AcceptCallback(IAsyncResult ar)\n{\n    // Accept incoming connection\n    Socket listener = (Socket)ar.AsyncState;\n    Console.WriteLine("Accepting new connection...");\n    handler = listener.EndAccept(ar);\n\n    // Start listening for data asynchronously\n    byte[] buffer = new byte[1024];\n    handler.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, ReceiveCallback, handler);\n}\n\npublic static void ReceiveCallback(IAsyncResult ar)\n{\n    try\n    {\n        Socket clientSocket = (Socket)ar.AsyncState;\n        int receivedBytes = clientSocket.EndReceive(ar);\n\n        if (receivedBytes == 0)\n        {\n            // Client has disconnected\n            Console.WriteLine("Client disconnected.");\n            clientSocket.Close();\n        }\n        else\n        {\n            // Process the data here\n            byte[] buffer = new byte[1024];\n            clientSocket.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, ReceiveCallback, clientSocket);\n        }\n    }\n    catch (Exception e)\n    {\n        Console.WriteLine("Error occurred: " + e.Message);\n    }\n}