string buildingIDs = "1,2,3"; // Example input, normally comes from user or another source\nvar buildingIDList = buildingIDs.Split(',').Select(int.Parse).ToList();\n\nusing (SqlConnection conn = new SqlConnection(connectionString))\n{\n    var parameterNames = buildingIDList.Select((u, i) => $"@buildingId{i}").ToList();\n    string inClause = String.Join(",", parameterNames);\n    \n    string query = @"SELECT id, startDateTime, endDateTime \n                     FROM tb_bookings \n                     WHERE buildingID IN (" + inClause + @") \n                     AND startDateTime <= @fromDate";\n\n    using (SqlCommand command = new SqlCommand(query, conn))\n    {\n        for (int i = 0; i < buildingIDList.Count; i++)\n        {\n            command.Parameters.AddWithValue(parameterNames[i], buildingIDList[i]);\n        }\n        \n        // Add startDate parameter\n        command.Parameters.AddWithValue("@fromDate", yourFromDateValue);\n\n        conn.Open();\n        using (var reader = command.ExecuteReader())\n        {\n            // Process your data here\n        }\n    }\n}