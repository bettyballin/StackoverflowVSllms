protected void btnDownload_Click(object sender, EventArgs e)\n   {\n       string fileId = Request.QueryString["fileId"];\n       if (!string.IsNullOrEmpty(fileId))\n       {\n           string connString = ConfigurationManager.ConnectionStrings["YourDBConnection"].ConnectionString;\n           using (SqlConnection con = new SqlConnection(connString))\n           {\n               SqlCommand cmd = new SqlCommand("SELECT FilePath FROM Files WHERE FileId = @Id", con);\n               cmd.Parameters.AddWithValue("@Id", fileId);\n               \n               try\n               {\n                   con.Open();\n                   string filePath = (string)cmd.ExecuteScalar();\n\n                   if (!string.IsNullOrEmpty(filePath))\n                   {\n                       string fullPath = Server.MapPath("~/../SharedFiles/") + filePath;\n                       Response.ClearContent();\n                       Response.AddHeader("Content-Disposition", "attachment; filename=" + Path.GetFileName(fullPath));\n                       Response.ContentType = "application/octet-stream";\n                       Response.TransmitFile(fullPath);\n                       Response.End();\n                   }\n               }\n               catch (Exception ex)\n               {\n                   // Handle error\n               }\n           }\n       }\n   }