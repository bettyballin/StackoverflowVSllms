using System;\nusing System.Data;\nusing System.Data.SqlClient;\n\npublic class DataSetExample\n{\n    private const string ConnectionString = "your_connection_string_here";\n    \n    public void SaveChanges(DataSet dataSet)\n    {\n        using (SqlConnection conn = new SqlConnection(ConnectionString))\n        {\n            conn.Open();\n            SqlTransaction transaction = conn.BeginTransaction();\n\n            try\n            {\n                SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM YourTable", conn, transaction);\n                \n                SqlCommandBuilder builder = new SqlCommandBuilder(adapter);\n                \n                // Update the database with changes from the DataSet.\n                adapter.Update(dataSet);\n                \n                // Commit the transaction if no exceptions are thrown.\n                transaction.Commit();\n            }\n            catch (Exception)\n            {\n                // Rollback the transaction in case of exceptions\n                transaction.Rollback();\n                throw;\n            }\n        }\n    }\n\n    public void PersistChangesToFile(DataSet dataSet)\n    {\n        // Save DataSet to a file (e.g., XML) for recovery.\n        dataSet.WriteXml("data.xml");\n    }\n\n    public void LoadChangesFromFile(DataSet dataSet)\n    {\n        // Load DataSet from a file if the application needs to recover from a crash.\n        dataSet.ReadXml("data.xml");\n    }\n}