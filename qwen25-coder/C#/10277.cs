using System;\nusing System.IO;\n\nclass Program\n{\n    private static int totalDirectories = 0;\n    private static int directoryCount = 0;\n\n    // Estimate based on past runs or another heuristic method.\n    // This is just a placeholder estimation.\n    private const int ESTIMATED_DIRECTORIES = 50000; \n\n    static void recurse(string pos)\n    {\n        DirectoryInfo f = new DirectoryInfo(pos);\n        try\n        {\n            foreach (DirectoryInfo x in f.GetDirectories("*"))\n            {\n                directoryCount++;\n                UpdateProgressBar(directoryCount, ESTIMATED_DIRECTORIES);\n                recurse(x.FullName);\n            }\n        } \n        catch (Exception) { /* Handle or log exceptions as needed */ }\n    }\n\n    static void Main(string[] args)\n    {\n        // Optionally count the directories in a separate quick run if you can afford it\n        recurse("c:\\");\n    }\n\n    private static void UpdateProgressBar(int current, int total)\n    {\n        const int width = 50;   // Progress bar width on console.\n        var completed = (int)((double)current / total * width);\n\n        Console.Write(new string('\b', width + 2)); // Jump back to start of line\n        Console.Write("[");\n        Console.Write(new string('=', completed));\n        Console.Write(new string('-', width - completed));\n        Console.Write("] {0,6}%\r", (double)current / total * 100);\n    }\n}