[OperationContract()]\n[WebGet(\n    UriTemplate = "/appointments/{year}/{month}/{day}",\n    RequestFormat = WebMessageFormat.Xml,\n    ResponseFormat = WebMessageFormat.Xml,\n    BodyStyle = WebMessageBodyStyle.Bare\n)]\npublic XElement ListAppointments(string year, string month, string day)\n{\n    try\n    {\n        int iYear, iMonth, iDay;\n        if (!int.TryParse(year, out iYear) || !int.TryParse(month, out iMonth) || !int.TryParse(day, out iDay))\n            throw new ArgumentException("Invalid date parameters.");\n\n        if (iYear == 0) iYear = DateTime.Now.Year;\n        if (iMonth == 0) iMonth = DateTime.Now.Month;\n        if (iDay == 0) iDay = DateTime.Now.Day;\n\n        var now = new DateTime(iYear, iMonth, iDay).Date; // DateTime.Now;\n        return GetAppointments(now).ToXml();\n    }\n    catch (ArgumentException ex)\n    {\n        return new XElement("error", "Invalid input: " + ex.Message);\n    }\n    catch (Exception ex)\n    {\n        // Log exception details securely\n        return new XElement("error", "An error occurred. Please try again later.");\n    }\n}