public TestQueryResponseMessage TestQuery(TestQueryRequestMessage message)\n{\n    string xml = BuildXmlFromParameters(message.Body.TestParameter);\n\n    var result = Repository.ExecuteQuery("TestQuery", xml);\n\n    return new TestQueryResponseMessage\n    {\n        Body = new TestQueryResponse\n        {\n            TopicItems = result\n        }\n    };\n}\n\nprivate string BuildXmlFromParameters(string testParameter)\n{\n    // Validate parameters here if necessary\n    StringBuilder sb = new StringBuilder();\n    sb.Append("<params>");\n    sb.AppendFormat("<TestParameter>{0}</TestParameter>", System.Security.SecurityElement.Escape(testParameter));\n    sb.Append("</params>");\n\n    return sb.ToString();\n}