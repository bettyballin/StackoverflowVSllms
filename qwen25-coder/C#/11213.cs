public void ProcessMessage(Message msg)\n{\n    using (ISession session = sessionFactory.OpenSession())\n    {\n        using (ITransaction transaction = session.BeginTransaction())\n        {\n            try\n            {\n                // Perform database operations here.\n                // Example: session.Save(yourEntity);\n\n                transaction.Commit();\n            }\n            catch (Exception ex)\n            {\n                transaction.Rollback();\n                throw;\n            }\n        }\n    }\n}