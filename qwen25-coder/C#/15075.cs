using System;\nusing System.Web.Security;\n\npublic class CustomMembership : MembershipProvider {\n    // Implement other necessary methods and properties...\n\n    public override bool ValidateUser(string username, string password) {\n        // First try to authenticate with SqlMembershipProvider\n        if (SqlValidateUser(username, password)) {\n            return true;\n        }\n\n        // If not successful, try to authenticate with ActiveDirectoryMembershipProvider\n        if (ADValidateUser(username, password)) {\n            return true;\n        }\n\n        return false; // Failed authentication\n    }\n\n    private bool SqlValidateUser(string username, string password) {\n        var sqlProvider = Membership.Providers["SqlMembershipProvider"];\n        return sqlProvider.ValidateUser(username, password);\n    }\n\n    private bool ADValidateUser(string username, string password) {\n        var adProvider = Membership.Providers["ADMembershipProvider"];\n        return adProvider.ValidateUser(username, password);\n    }\n}