using System;\nusing System.IO.Pipes;\nusing System.Text;\n\npublic class NamedPipeServer\n{\n    private const string pipeName = "TestPipe";\n\n    public static void Main()\n    {\n        using (var server = new NamedPipeServerStream(pipeName, PipeDirection.In))\n        {\n            Console.WriteLine("NamedPipeServer is waiting for client connection...");\n            server.WaitForConnection();\n            \n            Console.WriteLine("Client connected.");\n            \n            StreamReader reader = new StreamReader(server);\n            StreamWriter writer = new StreamWriter(server) { AutoFlush = true };\n            \n            string message;\n            while ((message = reader.ReadLine()) != null)\n            {\n                Console.WriteLine($"Received: {message}");\n                // Process the message and send a response\n                writer.WriteLine("Message received");\n            }\n        }\n    }\n}