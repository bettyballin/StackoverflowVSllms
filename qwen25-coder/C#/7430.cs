using System;\nusing System.Data;\nusing System.Web.UI.WebControls;\nusing System.Drawing.Imaging;\nusing System.IO;\nusing System.Drawing;\n\npublic partial class YourPage : System.Web.UI.Page\n{\n    protected void DisplayThumbnail(object sender, EventArgs e)\n    {\n        byte[] imageBytes = (byte[])dsImages.Tables[0].Rows[0]["ImageBinary"];\n        using (MemoryStream stream = new MemoryStream(imageBytes))\n        using (Bitmap original = new Bitmap(stream))\n        using (Bitmap thumbnail = GetThumbnail(original))\n        using (MemoryStream thumbStream = new MemoryStream())\n        {\n            thumbnail.Save(thumbStream, ImageFormat.Jpeg);\n            imageBytes = thumbStream.ToArray();\n        }\n        // Base64 encoding to be used as an inline image\n        string thumbnailUri = "data:image/jpeg;base64," + Convert.ToBase64String(imageBytes);\n        thumbnailImage.ImageUrl = thumbnailUri;\n    }\n\n    private Bitmap GetThumbnail(Bitmap original)\n    {\n        int maxWidth = 150, maxHeight = 150;\n        float ratioX = (float)maxWidth / original.Width;\n        float ratioY = (float)maxHeight / original.Height;\n        float ratio = Math.Min(ratioX, ratioY);\n        return new Bitmap(original, (int)(original.Width * ratio), (int)(original.Height * ratio));\n    }\n}