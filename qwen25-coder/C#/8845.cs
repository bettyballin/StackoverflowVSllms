using System.Collections.Generic;\nusing System.Data.SqlClient;\n\npublic DataTable SearchRecords(Dictionary<string, string> parameters)\n{\n    var connectionString = "your_connection_string_here";\n    using (var connection = new SqlConnection(connectionString))\n    {\n        var commandText = "SELECT * FROM table WHERE 1=1";\n        List<SqlParameter> sqlParams = new List<SqlParameter>();\n\n        foreach (var param in parameters)\n        {\n            if (!string.IsNullOrEmpty(param.Value))\n            {\n                string cleanParamName = $"@{param.Key}";\n                commandText += $" AND {param.Key} LIKE '%' + {cleanParamName} + '%'";\n                sqlParams.Add(new SqlParameter(cleanParamName, "%" + param.Value + "%"));\n            }\n        }\n\n        using (var command = new SqlCommand(commandText, connection))\n        {\n            command.Parameters.AddRange(sqlParams.ToArray());\n            connection.Open();\n            \n            var adapter = new SqlDataAdapter(command);\n            var dataTable = new System.Data.DataTable();\n            adapter.Fill(dataTable);\n            return dataTable;\n        }\n    }\n}