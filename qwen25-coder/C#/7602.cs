using System;\nusing System.Web;\n\npublic class UrlRewriter : IHttpModule\n{\n    public void Dispose() { }\n\n    public void Init(HttpApplication context)\n    {\n        context.EndRequest += new EventHandler(OnEndRequest);\n    }\n\n    private void OnEndRequest(object sender, EventArgs e)\n    {\n        HttpContext ctx = HttpContext.Current;\n        if (ctx.Response.ContentType == "text/xml" && ctx.Request.Path.EndsWith(".asmx"))\n        {\n            string originalContent = ctx.Response.Filter.ReadToEnd();\n            string rewrittenContent = originalContent.Replace("internal.domain.com", "www.domain.com");\n            ctx.Response.Clear();\n            ctx.Response.Write(rewrittenContent);\n            ctx.Response.End();\n        }\n    }\n}