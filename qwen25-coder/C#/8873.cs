using System;\nusing System.Data;\nusing System.Xml;\n\npublic class DatasetToXmlConverter\n{\n    public static string ConvertDataSetToXml(DataSet dataSet)\n    {\n        foreach (DataTable table in dataSet.Tables)\n        {\n            foreach (DataColumn column in table.Columns)\n            {\n                // Ensure the IsNullable property is set to true for all columns\n                column.AllowDBNull = true;\n            }\n        }\n\n        using (StringWriter stringWriter = new StringWriter())\n        using (XmlTextWriter xmlTextWriter = new XmlTextWriter(stringWriter))\n        {\n            dataSet.WriteXml(xmlTextWriter, XmlWriteMode.WriteSchema);\n            return stringWriter.ToString();\n        }\n    }\n\n    public static void Main()\n    {\n        // Create a sample dataset with null values\n        DataSet ds = new DataSet("SampleDataSet");\n        DataTable dt = new DataTable("table");\n\n        dt.Columns.Add(new DataColumn("id", typeof(int)));\n        dt.Columns.Add(new DataColumn("name", typeof(string)));\n        dt.Columns.Add(new DataColumn("text", typeof(string)));\n\n        dt.Rows.Add(1, DBNull.Value, "test1");\n        dt.Rows.Add(2, "toto", "test2");\n        dt.Rows.Add(3, "tata", "test3");\n\n        ds.Tables.Add(dt);\n\n        // Convert the dataset to XML\n        string xmlResult = ConvertDataSetToXml(ds);\n        Console.WriteLine(xmlResult);\n    }\n}