using System;\nusing System.Net;\nusing System.Net.Mail;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        var mailClient = new SmtpClient("smtp.example.com", 587);\n        \n        // Configure the WebProxy\n        var proxy = new WebProxy("your.proxy.address", portNumber);\n        // If the proxy requires authentication, uncomment and set:\n        //proxy.Credentials = new NetworkCredential("proxyUser", "proxyPass");\n        \n        // Set the default web request to use the configured proxy.\n        WebRequest.DefaultWebProxy = proxy;\n        WebRequest.IsBypassProxyOnLocal = false; // Optionally use proxy for local addresses as well.\n\n        mailClient.EnableSsl = true;\n        mailClient.Credentials = new NetworkCredential("user@example.com", "password");\n\n        try\n        {\n            var message = new MailMessage("from@example.com", "to@example.com", "Subject", "Body");\n            mailClient.Send(message);\n            Console.WriteLine("Mail sent successfully.");\n        }\n        catch (Exception ex)\n        {\n            Console.WriteLine($"Error sending email: {ex.Message}");\n        }\n\n        // Optionally, clean up the client.\n        mailClient.Dispose();\n    }\n}