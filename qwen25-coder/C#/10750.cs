using System;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Media;\n\nnamespace WpfApp\n{\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n\n            var drawingGroup = new DrawingGroup();\n            \n            // Create a geometry and draw it\n            var lineGeometry = new LineGeometry(new Point(50, 100), new Point(200, 100));\n            drawingGroup.Children.Add(new GeometryDrawing(null, \n                new Pen(Brushes.Black, 2), lineGeometry));\n\n            // Create formatted text and draw it\n            FormattedText ft = new FormattedText(\n                "Hello, World!",\n                System.Globalization.CultureInfo.CurrentCulture,\n                FlowDirection.LeftToRight,\n                new Typeface("Verdana"),\n                14,\n                Brushes.Red);\n\n            var geometryText = Geometry.Parse($"M {lineGeometry.Point1.X}, {lineGeometry.Point1.Y - ft.Height} l{ft.Width},0");\n            \n            // Apply a rotation transform\n            var rotateTransform = new RotateTransform(45, lineGeometry.GetPointAtFractionLength(0.5).X, lineGeometry.GetPointAtFractionLength(0.5).Y);\n            geometryText.Transform = rotateTransform;\n\n            drawingGroup.Children.Add(new GeometryDrawing(ft.BuildGeometry(new Point()), Brushes.Transparent));\n\n            // Display the result\n            Image image = new Image { Source = new DrawingImage(drawingGroup) };\n            Content = image;\n        }\n    }\n}