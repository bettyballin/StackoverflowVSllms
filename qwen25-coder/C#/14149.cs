using System;\nusing System.IO;\n\npublic class FileChecker\n{\n    public static bool IsFileInUse(string filePath)\n    {\n        FileStream stream = null;\n\n        try\n        {\n            // Attempt to open the file exclusively.\n            var fileInfo = new FileInfo(filePath);\n            stream = fileInfo.Open(FileMode.Open, FileAccess.Read, FileShare.None);\n        }\n        catch (IOException e)\n        {\n            // If an IOException is caught, the file is in use.\n            return true;\n        }\n        finally\n        {\n            // Close and release the file handle if it was successfully opened.\n            stream?.Close();\n        }\n\n        // File was not in use when we tried to open it.\n        return false;\n    }\n\n    public static void Main()\n    {\n        string path = @"C:\path\to\your\image.jpg";\n        \n        while (IsFileInUse(path))\n        {\n            Console.WriteLine("File is in use. Attempting to retry...");\n            // Optionally, add a delay before the next attempt.\n            System.Threading.Thread.Sleep(100); // Delay for 100 milliseconds\n        }\n\n        // Proceed with file access once it's not in use.\n        Console.WriteLine("File is available for use.");\n    }\n}