public class HeaderBehavior : IServiceBehavior\n{\n    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase,\n        Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)\n    {}\n\n    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n    {\n        foreach (var channelDispatcher in serviceHostBase.ChannelDispatchers)\n        {\n            var cd = channelDispatcher as ChannelDispatcher;\n            if (cd != null)\n            {\n                cd.EndpointDispatcher.DispatchRuntime.MessageInspectors.Add(new HeaderInspector());\n            }\n        }\n    }\n\n    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }\n}