using System;\nusing System.IO;\nusing System.Security.Cryptography;\nusing System.Text;\n\nclass Program\n{\n    static void Main()\n    {\n        byte[] rawPlaintext = Encoding.Unicode.GetBytes("This is annoying!");\n\n        using (Aes aes = new AesManaged())\n        {\n            aes.Padding = PaddingMode.PKCS7;\n            aes.KeySize = 128; // Set the key size\n            aes.BlockSize = 128; // Set the block size\n            aes.GenerateKey(); // Automatically generate a key and IV\n            aes.GenerateIV();\n\n            using (MemoryStream ms = new MemoryStream())\n            {\n                using (CryptoStream cs = new CryptoStream(ms, aes.CreateEncryptor(), CryptoStreamMode.Write))\n                {\n                    cs.Write(rawPlaintext, 0, rawPlaintext.Length);\n                    cs.FlushFinalBlock();\n                }\n\n                byte[] encryptedData = ms.ToArray(); // Get the complete array with exact data length\n\n                using (MemoryStream decryptMs = new MemoryStream(encryptedData))\n                {\n                    using (CryptoStream csDecrypt = new CryptoStream(decryptMs, aes.CreateDecryptor(), CryptoStreamMode.Read))\n                    {\n                        byte[] rawData = new byte[rawPlaintext.Length];\n                        int len = csDecrypt.Read(rawData, 0, rawData.Length);\n                        string s = Encoding.Unicode.GetString(rawData).TrimEnd('\0'); // Trim null characters\n                        Console.WriteLine(s);\n                    }\n                }\n            }\n        }\n    }\n}