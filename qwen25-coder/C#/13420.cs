using System;\nusing System.Net;\n\nclass Program\n{\n    static void Main()\n    {\n        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.google.com");\n        \n        // Create a WebProxy instance and set it to automatically detect settings\n        WebProxy proxy = new WebProxy();\n        proxy.UseDefaultCredentials = true;\n        proxy.Credentials = CredentialCache.DefaultNetworkCredentials;\n\n        // Set the AutoDetect property to true to use IE proxy settings\n        proxy.AutoDetect = true;\n\n        request.Proxy = proxy;\n\n        try\n        {\n            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())\n            {\n                Console.WriteLine("Response status: " + response.StatusCode);\n            }\n        }\n        catch (WebException ex)\n        {\n            Console.WriteLine("Error: " + ex.Message);\n        }\n    }\n}