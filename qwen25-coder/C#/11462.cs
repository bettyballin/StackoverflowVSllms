using System;\nusing System.Windows.Forms;\n\nstatic class Program\n{\n    [STAThread]\n    static void Main()\n    {\n        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;\n        \n        try\n        {\n            Application.EnableVisualStyles();\n            Application.SetCompatibleTextRenderingDefault(false);\n            Application.Run(new MainForm()); // Example main form\n        }\n        catch (Exception exc)\n        {\n            HandleException(exc);\n        }\n    }\n\n    private static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)\n    {\n        Exception ex = (Exception)e.ExceptionObject;\n        HandleException(ex);\n        Environment.Exit(1); // Exit the application\n    }\n\n    private static void HandleException(Exception exc)\n    {\n        MessageBox.Show($"An error occurred: {exc.Message}\n{exc.StackTrace}", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);\n    }\n}