#!/bin/bash\n\n# Define variables\nMOUNT_POINT="/mnt/remote1"\nBACKUP_DIR="${MOUNT_POINT}/data"\nREMOTE_HOST="remote1.domain"\n\n# Check if primary mount point is mounted\nif ! grep -q "^/dev/.* ${MOUNT_POINT} " /proc/mounts; then\n    echo "Error: Mount point ${MOUNT_POINT} is not mounted."\n    exit 1\nfi\n\n# Check if backup directory is mounted\nif ! grep -q "^/dev/.* ${BACKUP_DIR} " /proc/mounts; then\n    # Attempt to mount the backup directory\n    if mount "/dev/vg/remote1_data" "${BACKUP_DIR}"; then\n        echo "Mounted ${BACKUP_DIR}."\n    else\n        echo "Error: Could not mount ${BACKUP_DIR}. Aborting rsync."\n        exit 2\n    fi\nfi\n\n# Perform rsync backup\nrsync -aqz --delete --numeric-ids --exclude=proc --exclude=sys root@${REMOTE_HOST}:/ "${MOUNT_POINT}/"\nRETVAL=$?\n\nif [ $RETVAL -eq 0 ]; then\n    echo "Backup of ${REMOTE_HOST} completed successfully."\nelse\n    echo "Error: Rsync failed with exit code $RETVAL."\n    exit 3\nfi\n\nexit 0