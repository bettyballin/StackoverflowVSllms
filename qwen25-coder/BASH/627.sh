#!/bin/bash\n\n# Function to truncate filenames\ntruncate_filenames() {\n    local dir="$1"\n    find "$dir" -type f | while read -r file; do\n        dirpart=$(dirname "$file")\n        basepart=$(basename "$file")\n        if [ ${#basepart} -gt 255 ]; then\n            # Truncate filename to 255 characters\n            newname="${basepart:0:251}.truncated"\n            mv -- "$file" "$dirpart/$newname"\n        fi\n    done\n\n    find "$dir" -type d | while read -r dir; do\n        basepart=$(basename "$dir")\n        if [ ${#basepart} -gt 255 ]; then\n            # Truncate directory name to 255 characters\n            newname="${basepart:0:251}.truncated"\n            mv -- "$dir" "$(dirname "$dir")/$newname"\n        fi\n    done\n}\n\n# Call the function with your target directory\ntruncate_filenames "/path/to/your/directory"