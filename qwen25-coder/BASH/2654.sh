# Step 1: Generate a dry-run list of files from rsync, excluding directories and changes\nrsync -avu --dry-run /source/dir/ /destination/dir/ | \n    grep '^>' | \n    sed 's/^>f//' | \n    awk '{print $2}' > all_files.txt\n\n# Step 2: Sort into prioritized files (e.g., .ext) and then rest\ngrep '\.ext$' all_files.txt > priority_files.txt\ngrep -v '\.ext$' all_files.txt > other_files.txt\n\n# Combine the files with priority files first\ncat priority_files.txt other_files.txt > ordered_files_list.txt\n\n# Step 3: Use rsync with --files-from to transfer based on the sorted list\nrsync -avu --files-from=ordered_files_list.txt /source/dir/ /destination/dir/