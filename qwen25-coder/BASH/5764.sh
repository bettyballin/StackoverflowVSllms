#!/bin/bash\n\n# Variables\nBACKUP_DIR="/path/to/backups"\nDB_NAME="your_database_name"\n\n# Create a backup directory if it doesn't exist\nmkdir -p $BACKUP_DIR\n\n# Take a base backup\necho "Taking base backup..."\npg_basebackup -h localhost -U postgres -D $BACKUP_DIR/base_backup_$DB_NAME -Ft -z -P --wal-method=stream\n\n# Function to restore from the last base backup\nrestore_from_backup() {\n    echo "Stopping PostgreSQL service..."\n    sudo systemctl stop postgresql\n\n    # Remove current data directory contents\n    rm -rf /var/lib/postgresql/data/*\n\n    # Restore database files\n    tar -xzvf $BACKUP_DIR/base_backup_$DB_NAME.tar.gz -C /\n\n    echo "Starting PostgreSQL service..."\n    sudo systemctl start postgresql\n}\n\n# Call restore function\nrestore_from_backup\n\necho "Restored to last backup state."