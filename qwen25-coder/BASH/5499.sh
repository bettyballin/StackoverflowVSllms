#!/bin/bash\n\n# Read input file and process it line by line\nawk '\n{\n    # Replace <embed src="..."> with <a href="...">\n    gsub(/<embed src="(.*?)"><\/embed>/, "<a href=\"\\1\">Click here for external description</a>")\n\n    # Remove all tags except <p>\n    while($0 ~ /<\/?[^p][^>]*>/) {\n        $0 = gensub(/<\/?[^p][^>]*>/, "", "g")\n    }\n\n    print\n}\n' input.html > output.html