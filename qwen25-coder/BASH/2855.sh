#!/bin/bash\n\n# Variables\nSTATS_URL="http://admin:password@localhost:1936;"\nSERVICE=`echo "$1" | sed 's/[;&/\|`$><"]//g'`\nWARNING=$2\nCRITICAL=$3\n\n# Get stats\nQUEUE_LENGTH=$(curl -s $STATS_URL/stats; echo "show stat" | nc localhost 1936 | grep $SERVICE | awk '{print $8}')\n\nif [[ -z "$QUEUE_LENGTH" ]]; then\n    echo "UNKNOWN: Could not retrieve queue length for service $SERVICE"\n    exit 3\nfi\n\n# Compare with thresholds and return appropriate status code\nif [ "${QUEUE_LENGTH}" -ge "$CRITICAL" ]; then\n   echo "CRITICAL: Queue length is $QUEUE_LENGTH. Threshold was set to $CRITICAL"\n   exit 2\nelif [ "${QUEUE_LENGTH}" -ge "$WARNING" ]; then\n   echo "WARNING: Queue length is $QUEUE_LENGTH. Threshold was set to $WARNING"\n   exit 1\nelse\n   echo "OK: Queue length is $QUEUE_LENGTH, which is within the acceptable range."\n   exit 0\nfi