class Category < ApplicationRecord\n  acts_as_nested_set\n\n  # Override move_to method with custom validations\n  def move_to(target, position)\n    raise ActiveRecord::ActiveRecordError, "Node cannot be a child of itself" if self == target\n    raise ActiveRecord::ActiveRecordError, "Node cannot be moved beneath one of its descendants" if descendants.include?(target)\n\n    # If validations pass, call the original move_to method\n    super\n  end\nend