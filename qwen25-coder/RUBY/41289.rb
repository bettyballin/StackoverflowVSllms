require 'securerandom'\n\nACCEPTABLE_TYPES = ['image/jpeg', 'image/png']\n\nif params[:upload].present?\n  params[:upload].each do |uploaded_image|\n    next if uploaded_image.blank?\n\n    unless ACCEPTABLE_TYPES.include?(uploaded_image.content_type)\n      # Handle unacceptable file type, possibly raise an error or flash a message\n      next\n    end\n\n    filename = "#{SecureRandom.hex}.#{File.extname(uploaded_image.original_filename)}"\n    filepath = Rails.root.join('public', 'uploads', filename)\n\n    File.open(filepath, 'wb') do |file|\n      file.write(uploaded_image.read)\n    end\n  end\nend