require 'gpgme'\n\ndef decrypt_pgp_to_memory(encrypted_data, passphrase)\n  ctx = GPGME::Ctx.new\n\n  # Set up passphrase callback for decryption\n  ctx.passphrase_cb = proc do |_, attempts|\n    raise "Decryption failed after several attempts" if attempts > 2\n    passphrase\n  end\n\n  # Decrypt the data\n  decrypted_data = ctx.decrypt(encrypted_data)\n\n  return decrypted_data.read\nend\n\n# Usage example\nbegin\n  encrypted_file_path = 'path/to/your/file.pgp'\n  file_content = File.binread(encrypted_file_path)\n  passphrase = 'your_passphrase_here'\n\n  decrypted_content = decrypt_pgp_to_memory(file_content, passphrase)\n  puts "Decrypted content: #{decrypted_content}"\nrescue => e\n  puts "Error: #{e.message}"\nend