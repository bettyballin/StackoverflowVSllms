require 'nokogiri'\n\ndef get_pair(xml_doc, key_xpath, value_xpath)\n  xml_doc.xpath(key_xpath).each do |key_node|\n    # Get the parent node since attributes are not nodes themselves\n    parent_node = key_node.parent\n    value_node = parent_node.xpath(value_xpath).first\n    \n    # Output the attribute values if both key and value are found\n    puts "#{key_node.value} #{value_node&.value}"\n  end\nend\n\n# XML document as a string\nxml_string = <<-XML\n<root>\n  <add key="A" value="B" />\n  <add key="C" value="D" />\n  <add foo="E" bar="F" />\n</root>\nXML\n\n# Parse the XML\ndoc = Nokogiri::XML(xml_string)\n\n# Retrieve pairs\nget_pair(doc, '//*/@key', '../@value')\nget_pair(doc, '//*/@foo', '../@bar')