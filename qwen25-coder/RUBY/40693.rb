require 'capybara'\nrequire 'capybara/dsl'\nrequire 'selenium-webdriver'\n\nCapybara.register_driver :chrome do |app|\n  options = Selenium::WebDriver::Chrome::Options.new\n  options.add_argument('--headless')\n  options.add_argument('--disable-gpu') if Gem.win_platform? # Only needed for Windows\n  Capybara::Selenium::Driver.new(app, browser: :chrome, options: options)\nend\n\nCapybara.default_driver = :chrome\n\nmodule AwesomeScreenshotMaker\n  def self.capture(url, output_file)\n    session = Capybara.current_session\n    session.visit(url)\n    sleep(5) # Wait for page to load fully (adjust based on your needs)\n    session.save_screenshot(output_file, full: true)\n    session.quit\n  end\nend\n\nitems.each do |id|\n  url = "http://foo.com/bar/#{id}"\n  AwesomeScreenshotMaker.capture(url, "/images/thumbnail-#{id}.png")\nend