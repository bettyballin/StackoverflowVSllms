class User < ApplicationRecord\n  attr_accessor :dynamic_length\n\n  validate :name_within_dynamic_length\n\n  before_validation :set_dynamic_length_range, if: -> { dynamic_length.present? }\n\n  private\n\n  def set_dynamic_length_range\n    # Assuming dynamic_length is a string in the format "min-max"\n    min, max = dynamic_length.split('-').map(&:to_i)\n    self.class.validates_length_of :name, within: min..max\n  end\n\n  def name_within_dynamic_length\n    return if errors[:name].any? || !dynamic_length.present?\n\n    min, max = dynamic_length.split('-').map(&:to_i)\n    unless name.length.between?(min, max)\n      errors.add(:name, "length must be between #{min} and #{max}")\n    end\n  end\nend