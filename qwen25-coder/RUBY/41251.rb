require 'ruby-prof'\n  \n  Before("@profiling") do\n    RubyProf.start\n  end\n  \n  After("@profiling") do |scenario|\n    result = RubyProf.stop\n    \n    # Print a flat profile to text\n    if scenario.source_tag_names.include? "@profiling"\n      printer = RubyProf::FlatPrinter.new(result)\n      printer.print(STDOUT, 0)\n      \n      # Optionally, you can also write the report to a file:\n      # File.open("profile.txt", "w") do |file|\n      #   printer = RubyProf::CallTreePrinter.new(result)\n      #   printer.print(file, 0)\n      # end\n    end\n  end