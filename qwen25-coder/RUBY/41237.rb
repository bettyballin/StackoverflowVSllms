require 'socket'\n\nserver = TCPServer.new(1234) # listen on port 1234\n\nloop do\n  Thread.start(server.accept) do |connection|\n    filename = connection.readline.chomp # read the filename from the client\n    File.open(filename, "wb") do |file| # open a file to save received data in binary mode\n      while buf = connection.read(1024)\n        break if buf.size == 0\n        file.write(buf) # write received data to file\n      end\n    end\n    connection.puts("File received successfully.") # send confirmation message back to the client\n    connection.close # close the connection\n  end\nend