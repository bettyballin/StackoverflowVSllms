require 'soap/rpc/standaloneServer'\nrequire 'openssl'\n\ndef cert(filename)\n  OpenSSL::X509::Certificate.new(File.read(filename))\nend\n\ndef key(filename)\n  OpenSSL::PKey::RSA.new(File.read(filename))\nend\n\nclass MathServer < SOAP::RPC::HTTPServer\n  def initialize(*args)\n    super\n    self.add_rpc_method(self, 'add', 'a', 'b')\n  end\n\n  def add(a, b)\n    a + b\n  end\nend\n\ncert_path = "path_to_cert/cert.cert"\nkey_path = "path_to_key/rsaprivate.key"\n\nserver_options = {\n  BindAddress: '0.0.0.0',\n  Port: 1234,\n  SSLCertName: [\n    ['CN', HelperFunctions.local_ip]\n  ],\n  SSLEnable: true,\n  SSLVerifyMode: OpenSSL::SSL::VERIFY_NONE, # For testing purposes only, use VERIFY_PEER in production\n  SSLPrivateKey: key(key_path),\n  SSLCertificate: cert(cert_path)\n}\n\nserver = MathServer.new(server_options)\nserver.start