class Word < ActiveRecord::Base\n  has_many :link1s, class_name: 'Link', foreign_key: 'word1_id'\n  has_many :link2s, class_name: 'Link', foreign_key: 'word2_id'\n\n  # This defines synonyms in both directions (word1 -> word2 and word2 -> word1)\n  has_many :synonyms, through: :link1s, source: :word2\n  has_many :inverse_synonyms, through: :link2s, source: :word1\n\n  # To get all unique related words (both ways), you can use this method\n  def all_related_words\n    (self.synonyms + self.inverse_synonyms).uniq\n  end\nend\n\nclass Link < ActiveRecord::Base\n  belongs_to :word1, class_name: 'Word'\n  belongs_to :word2, class_name: 'Word'\nend