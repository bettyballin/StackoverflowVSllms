require 'nokogiri'\n\nhtml_content = <<~HTML\n  <html>\n    <body>\n      <h1>Foo</h1>\n      <p>The quick brown fox.</p>\n      <h1>Bar</h1>\n      <p>Jumps over the lazy dog.</p>\n    </body>\n  </html>\nHTML\n\ndoc = Nokogiri::HTML(html_content)\n\n# Find all h1 tags and replace them with p tags having class "title"\ndoc.css('h1').each do |h1|\n  # Create a new <p> element\n  p = Nokogiri::XML::Node.new 'p', doc\n  # Add the class attribute\n  p['class'] = 'title'\n  # Copy the content from h1 to p\n  p.content = h1.text\n  # Replace the h1 node with the new p node\n  h1.replace(p)\nend\n\n# Output the modified HTML\nputs doc.to_html