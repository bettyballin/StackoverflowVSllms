# Migration to create Users table\nclass CreateUsers < ActiveRecord::Migration[6.0]\n  def change\n    create_table :users do |t|\n      t.string :email, null: false, unique: true\n      t.string :password_digest\n      t.timestamps\n    end\n  end\nend\n\n# Migration to create Roles table\nclass CreateRoles < ActiveRecord::Migration[6.0]\n  def change\n    create_table :roles do |t|\n      t.string :name, null: false, unique: true\n      t.text :description\n      t.timestamps\n    end\n  end\nend\n\n# Migration to create Permissions table\nclass CreatePermissions < ActiveRecord::Migration[6.0]\n  def change\n    create_table :permissions do |t|\n      t.string :action, null: false\n      t.string :subject_class, null: false\n      t.string :subject_id\n      t.timestamps\n    end\n  end\nend\n\n# Migration to create UsersRoles table for many-to-many relationship between users and roles\nclass CreateUserRoles < ActiveRecord::Migration[6.0]\n  def change\n    create_table :users_roles do |t|\n      t.references :user, index: true, foreign_key: { on_delete: :cascade }\n      t.references :role, index: true, foreign_key: { on_delete: :cascade }\n      t.timestamps\n    end\n\n    add_index :users_roles, [:user_id, :role_id], unique: true\n  end\nend\n\n# Migration to create RolesPermissions table for many-to-many relationship between roles and permissions\nclass CreateRolesPermissions < ActiveRecord::Migration[6.0]\n  def change\n    create_table :roles_permissions do |t|\n      t.references :role, index: true, foreign_key: { on_delete: :cascade }\n      t.references :permission, index: true, foreign_key: { on_delete: :cascade }\n      t.timestamps\n    end\n\n    add_index :roles_permissions, [:role_id, :permission_id], unique: true\n  end\nend