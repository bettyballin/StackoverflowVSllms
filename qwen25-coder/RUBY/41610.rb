class Content\n  attr_reader :a, :b\n\n  def initialize\n    @a = 1\n    @b = "plop"\n  end\n\n  def set(&block)\n    self.extend(Setter)\n    instance_eval(&block)\n    self.class.undef_method(:a) if self.respond_to?(:a=)\n    self.class.undef_method(:b) if self.respond_to?(:b=)\n  end\n\n  module Setter\n    def a=(value)\n      @a = value\n    end\n\n    def b=(value)\n      @b = value\n    end\n  end\nend\n\ncontent = Content.new\ncontent.set do\n  self.a = 2\n  self.b = "yeah!"\nend\n\nputs content.a # should return 2