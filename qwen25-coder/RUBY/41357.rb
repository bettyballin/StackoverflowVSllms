# Assuming do_activate is a method meant to setup initial objects\ndef activate_user(user)\n  user.active = true\n  user.do_activate # or ensure this happens in an after_save callback\n  user.save!\nend\n\ntest "user activation creates necessary initial objects" do\n  user = FactoryBot.create(:user) # Using FactoryBot instead of Factory is recommended\n  activate_user(user)\n\n  assert_not_nil user.pen # Check that the pen object was created\n  assert_not_nil user.notebook # Check that the notebook object was created\nend