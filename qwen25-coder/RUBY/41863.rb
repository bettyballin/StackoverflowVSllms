# app/controllers/your_controller.rb\ndef results\n  @query_form = QueryForm.new(query_form_params)\n  unless @query_form.valid?\n    flash[:error] = @query_form.errors.full_messages.to_sentence\n    return redirect_to :action => 'index'\n  end\n\n  # Access validated attributes via @query_form.name, @query_form.age, etc.\nend\n\nprivate\n\ndef query_form_params\n  params.require(:query).permit(:name, :image_font_size, :analysis_type,\n                                 results_to_generate: [], graph_type: nil,\n                                 graph_width: nil, theme: nil, age: nil)\nend