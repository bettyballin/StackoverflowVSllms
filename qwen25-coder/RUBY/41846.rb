# config/initializers/template_override.rb\n\nmodule TemplateOverride\n  def self.prepended(base)\n    base.class_eval do\n      alias_method :original_render, :render\n\n      def render(*args, &block)\n        # Store the template path in a thread-local variable before rendering\n        Thread.current[:current_template_path] = virtual_path\n        original_render(*args, &block)\n      end\n    end\n  end\nend\n\nActionView::Template.prepend(TemplateOverride)\n\n# app/helpers/application_helper.rb\n\nmodule ApplicationHelper\n  def current_view_file\n    # Access the stored template path\n    Thread.current[:current_template_path]\n  end\nend