def new\n  @meal = Meal.new\n  @meal.foods.build\nend\n\ndef create\n  @meal = Meal.create(meal_params)\n  respond_to do |format|\n    if @meal.save\n      format.html { redirect_to meals_path, notice: 'Meal was successfully created.' }\n      format.js\n    else\n      format.html { render :new }\n      format.js   # Notice we're using `js` here for AJAX response\n    end\n  end\nend\n\nprivate\n\ndef meal_params\n  params.require(:meal).permit(:name, foods_attributes: [:id, :name, :_destroy])\nend