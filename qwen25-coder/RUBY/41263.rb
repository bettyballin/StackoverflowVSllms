class PublicProfilesController < ApplicationController\n  before_action :set_user\n  before_action :set_public_profile, only: [:update]\n\n  def update\n    if @publicprofile.update(publicprofile_params)\n      redirect_to user_path(@user), notice: 'Public profile was successfully updated.'\n    else\n      render :edit\n    end\n  end\n\n  private\n\n  def set_user\n    @user = User.find(params[:user_id])\n  end\n\n  def set_public_profile\n    @publicprofile = @user.publicprofile\n  end\n\n  def publicprofile_params\n    params.require(:publicprofile).permit(\n      :some_field,\n      emails_attributes: [:id, :email, :_destroy],\n      phonenumbers_attributes: [:id, :number, :_destroy]\n    )\n  end\nend\n\nclass PrivateProfilesController < ApplicationController\n  before_action :set_user\n  before_action :set_private_profile, only: [:update]\n\n  def update\n    if @privateprofile.update(privateprofile_params)\n      redirect_to user_path(@user), notice: 'Private profile was successfully updated.'\n    else\n      render :edit\n    end\n  end\n\n  private\n\n  def set_user\n    @user = User.find(params[:user_id])\n  end\n\n  def set_private_profile\n    @privateprofile = @user.privateprofile\n  end\n\n  def privateprofile_params\n    params.require(:privateprofile).permit(\n      :some_field,\n      addresses_attributes: [:id, :street, :city, :_destroy],\n      creditcards_attributes: [:id, :number, :expiry_date, :_destroy]\n    )\n  end\nend