# In features/step_definitions/twitter_oauth_steps.rb\n    Given(/^the Twitter API is available$/) do\n      stub_request(:get, "https://api.twitter.com/oauth/request_token").\n        to_return(status: 200, body: "oauth_token=token&oauth_token_secret=secret")\n      \n      stub_request(:post, "https://api.twitter.com/oauth/access_token").\n        with(body: {"oauth_verifier" => "verifier"}).\n        to_return(status: 200, body: "oauth_token=new_token&oauth_token_secret=new_secret&user_id=12345")\n    end\n\n    When(/^I attempt to log in with Twitter$/) do\n      visit '/auth/twitter'\n    end\n\n    Then(/^I should be redirected to Twitter's authorization page$/) do\n      expect(current_url).to match(%r{https://api.twitter.com/oauth/authorize})\n    end\n\n    And(/^after authenticating, I should be logged into my application$/) do\n      # Simulate the callback from Twitter with verifier as query parameter\n      visit '/auth/twitter/callback?oauth_token=token&oauth_verifier=verifier'\n\n      # Add assertions to verify that user is logged in (e.g., by checking for a session variable)\n      expect(page).to have_content("Welcome!")\n    end