amespace :deploy do\n  desc "Rolls back to the previous version of the code"\n  task :rollback, roles: [:web] do\n    top_release = capture("ls -xd #{releases_path}/* | sort -r | head -n 2").split("\n")\n    raise ReleaseError, "no second last release available" if top_release.length < 2\n\n    previous_version = File.basename(top_release[1])\n    set :previous_release, File.join(releases_path, previous_version)\n    run "rm #{current_path}"\n    run "ln -s #{File.join(releases_path, previous_version)} #{current_path}"\n    run "touch #{File.join(current_path, 'tmp', 'restart.txt')}" # Assuming your application requires a restart\n  end\nend