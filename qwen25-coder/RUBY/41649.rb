class User < ApplicationRecord\n  # Method to find users with upcoming birthdays within the next 365 days\n  def self.upcoming_birthdays(limit = 5)\n    today = Date.today\n    start_of_year = Date.new(today.year, 1, 1)\n\n    User.where.not(date_of_birth: nil).\n      order(Arel.sql("EXTRACT(month FROM date_of_birth)"),\n            Arel.sql("EXTRACT(day FROM date_of_birth)")).\n      select { |user| user.birthday_in_current_or_next_year >= today }.\n      sort_by(&:birthday_in_current_or_next_year)[0...limit]\n  end\n\n  # Helper method to calculate the birthday in the current or next year\n  def birthday_in_current_or_next_year\n    date_of_birth + (date_of_birth.year < Date.today.year ? 365.years : 0.years)\n  end\nend