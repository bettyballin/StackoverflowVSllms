def aggregate(feeds, time_limit)\n  return [] if feeds.blank?\n\n  result = []\n  bin = []\n\n  # Sort feeds by created_at in descending order\n  feeds = feeds.sort_by { |f| -f.created_at.to_i }\n\n  # Initialize the first bin_time with the latest timestamp\n  bin_time = feeds.first.created_at\n\n  feeds.each do |feed|\n    # Check if the current feed is within the time_limit of the bin_time\n    if (bin_time - feed.created_at) < time_limit\n      bin << feed\n    else\n      # If not, push the current bin to result and start a new bin with the current feed\n      result << [bin_time, bin]\n      bin_time = feed.created_at\n      bin = [feed]\n    end\n  end\n\n  # Push the last bin to the result\n  result << [bin_time, bin]\n\n  result\nend