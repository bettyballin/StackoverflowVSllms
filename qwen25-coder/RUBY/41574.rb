# app/presenters/employee_presenter.rb\nclass EmployeePresenter\n  include ActionView::Helpers::UrlHelper\n\n  delegate :id, :name, :to => :@employee\n\n  def initialize(employee)\n    @employee = employee\n  end\n\n  def to_xml(builder)\n    builder.employee do |emp|\n      emp.id id\n      emp.name name\n      emp.uri employer_employee_path(@employee.employer, @employee)\n    end\n  end\nend\n\n# app/presenters/employer_presenter.rb\nclass EmployerPresenter\n  include ActionView::Helpers::UrlHelper\n\n  delegate :id, :name, :to => :@employer\n\n  def initialize(employer)\n    @employer = employer\n  end\n\n  def to_xml(builder, options = {})\n    builder.employer do |emp|\n      emp.id id\n      emp.name name\n      emp.uri employer_path(@employer)\n      if options[:include] && options[:include].include?(:employees)\n        emp.employees do\n          @employer.employees.each do |employee|\n            EmployeePresenter.new(employee).to_xml(emp)\n          end\n        end\n      end\n    end\n  end\nend\n\n# In your controller or wherever you need to render XML\ndef show\n  @employer = Employer.find(params[:id])\n  builder = Nokogiri::XML::Builder.new do |xml|\n    EmployerPresenter.new(@employer).to_xml(xml, include: [:employees])\n  end\n  render xml: builder.to_xml(save_with: Nokogiri::XML::Node::SaveOptions::FORMAT)\nend