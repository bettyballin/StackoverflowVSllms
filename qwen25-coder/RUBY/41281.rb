keywords = input.split(/\s+/)\nqueries = []\n\nkeywords.each do |keyword|\n  search_term = "%#{keyword}%"\n  queries << Classifications.where(\n    "classifications.species LIKE :search OR \n     classifications.family LIKE :search OR \n     classifications.trivial_names LIKE :search OR \n     place LIKE :search", { search: search_term }\n  )\nend\n\n# Combine all the subqueries with AND\nfinal_query = queries.reduce(&:merge)\noptions[:conditions] = final_query.where_values