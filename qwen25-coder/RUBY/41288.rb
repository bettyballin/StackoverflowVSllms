# Step 1: Initiate the authentication process (Get request token)\nrequest_token = OAuth::Consumer.new('CONSUMER_KEY', 'CONSUMER_SECRET',\n    { site: "https://api.twitter.com",\n      request_token_path:"/oauth/request_token",\n      access_token_path: "/oauth/access_token",\n      authorize_path: "/oauth/authenticate"\n}).get_request_token(oauth_callback: CALLBACK_URL)\n\n# You might want to store the request token in the session\nsession[:request_token] = request_token.token\nsession[:request_secret] = request_token.secret\n\n# Step 2: Redirect user to Twitter for authorization\nredirect_to request_token.authorize_url(oauth_callback: CALLBACK_URL)\n\n# Step 3: After user authorizes, they are redirected back with an oauth_verifier\nif params.include?(:oauth_verifier) && session[:request_token]\n  token = session[:request_token]\n  secret = session[:request_secret]\n\n  # Get access token using request token and verifier\n  access_token = OAuth::Consumer.new('CONSUMER_KEY', 'CONSUMER_SECRET',\n    { site: "https://api.twitter.com" }\n  ).get_access_token(OAuth::RequestToken.new(consumer, token, secret), {\n      oauth_verifier: params[:oauth_verifier]\n  })\n\n  # Store the access token for future use\n  session[:access_token] = access_token.token\n  session[:access_secret] = access_token.secret\nend