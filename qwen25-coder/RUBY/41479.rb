class Link < ActiveRecord::Base\n  # Validate format only if the link is not blank\n  [:link1, :link2, :link3, :link4, :link5].each do |field|\n    validates_format_of field, with: /^(https?|ftp):\/\/.+/, allow_blank: true\n  end\n\n  before_save :ensure_http_prefix\n\n  private\n\n  def ensure_http_prefix\n    [:link1, :link2, :link3, :link4, :link5].each do |field|\n      value = self[field]\n      next if value.blank? || /^(https?|ftp):\/\//.match?(value)\n      self[field] = "http://#{value}"\n    end\n  end\nend