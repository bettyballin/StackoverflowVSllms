# Example functional test using RSpec in a controller spec\nrequire 'rails_helper'\n\nRSpec.describe MailingListsController, type: :controller do\n  describe "POST #send_email" do\n    it "sends emails to all subscribers" do\n      mailing_list = create(:mailing_list_with_subscribers)\n      expect {\n        post :send_email, params: { id: mailing_list.id }\n      }.to_not raise_error\n\n      expect(ActionMailer::Base.deliveries.count).to eq(mailing_list.subscribers.size)\n    end\n  end\nend