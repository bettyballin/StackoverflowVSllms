# app/models/publication.rb\nclass Publication < ApplicationRecord\n  belongs_to :writing, polymorphic: true\n\n  # References made by this publication (outbound references)\n  has_many :reference_citations_as_referencing,\n           class_name: "ReferenceCitation",\n           foreign_key: :referencing_publication_id,\n           dependent: :destroy\n\n  # Citations to this publication (inbound citations)\n  has_many :reference_citations_as_cited,\n           class_name: "ReferenceCitation",\n           foreign_key: :cited_publication_id,\n           dependent: :destroy\n\n  # Publications that are referenced by this one\n  has_many :references, through: :reference_citations_as_referencing, source: :cited_publication\n\n  # Publications that cite this publication\n  has_many :citations, through: :reference_citations_as_cited, source: :referencing_publication\nend\n\n# app/models/book.rb\nclass Book < ApplicationRecord\n  has_many :publications, as: :writing\nend\n\n# app/models/article.rb\nclass Article < ApplicationRecord\n  has_many :publications, as: :writing\nend\n\n# app/models/chapter.rb\nclass Chapter < ApplicationRecord\n  has_many :publications, as: :writing\nend\n\n# app/models/reference_citation.rb\nclass ReferenceCitation < ApplicationRecord\n  belongs_to :referencing_publication, class_name: "Publication"\n  belongs_to :cited_publication, class_name: "Publication"\nend