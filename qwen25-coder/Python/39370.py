function flattenTree(node):\n    if node == null:\n        return null\n\n    # The last node of the linked list created by the left sub-tree\n    last = flattenTree(node.left)\n    \n    # The last node of the linked list created by the right sub-tree\n    rightLast = flattenTree(node.right)\n\n    # If there is a left subtree, re-attach it to the right\n    if last != null:\n        last.right = node.right\n        node.right = node.left\n        node.left = null\n\n    # If there was no right sub-tree, then return the last node of the left tree\n    if rightLast == null:\n        return last\n\n    return rightLast