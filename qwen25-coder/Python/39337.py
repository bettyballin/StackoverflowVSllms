from django.contrib.auth import authenticate, login\n\ndef my_login_view(request):\n    username = request.POST.get('username')\n    password = request.POST.get('password')\n    user = authenticate(username=username, password=password)\n    if user is not None:\n        login(request, user)\n        migrate_favorites_to_user(user, request.session.session_key)\n        # Redirect to a success page.\n    else:\n        # Return an 'invalid login' error message.