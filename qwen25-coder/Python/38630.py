def nested_dict(flat_dict):\n    result = {}\n    for key, value in flat_dict.items():\n        parts = key.split('/')\n        sub_dict = result\n        for part in parts[:-1]:\n            if part not in sub_dict:\n                sub_dict[part] = {}\n            sub_dict = sub_dict[part]\n        sub_dict[parts[-1]] = value\n    return result\n\n# Example usage:\nflat_dict = {\n    'foo': {'opt1': 1, 'opt2': 2},\n    'foo/bar': {'opt3': 3, 'opt4': 4},\n    'foo/bar/baz': {'opt5': 5, 'opt6': 6}\n}\n\nnested = nested_dict(flat_dict)\nprint(nested)