import imaplib\nimport email\nimport requests\n\ndef fetch_new_emails():\n    # Connect to an IMAP server\n    mail = imaplib.IMAP4_SSL('imap.example.com')\n    mail.login('your_email@example.com', 'your_password')\n    mail.select('inbox')\n\n    # Search for all unread emails\n    result, data = mail.search(None, 'UNSEEN')\n    email_ids = data[0].split()\n\n    for e_id in email_ids:\n        _, msg_data = mail.fetch(e_id, '(RFC822)')\n        msg = email.message_from_bytes(msg_data[0][1])\n\n        # Extract the message body\n        if msg.is_multipart():\n            payload = msg.get_payload()\n            msg_body = payload[0].get_payload(decode=True).decode(payload[0].get_content_charset())\n        else:\n            msg_body = msg.get_payload(decode=True).decode(msg.get_content_charset())\n\n        # Post the email contents to a URL\n        response = requests.post('http://your-endpoint-url.com', data={'email_body': msg_body})\n\n        print(f"Email posted with status code: {response.status_code}")\n\n    mail.logout()\n\n# Example usage\nfetch_new_emails()