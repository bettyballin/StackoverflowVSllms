import gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk, Gdk\n\nclass MyApplication(Gtk.Application):\n    def __init__(self):\n        super().__init__()\n        \n    def do_activate(self):\n        status_icon = Gtk.StatusIcon()\n        status_icon.set_from_stock(Gtk.STOCK_HOME)\n        status_icon.connect("popup-menu", self.on_popup_menu)\n\n        menu = Gtk.Menu()\n        item1 = Gtk.MenuItem(label="Item 1")\n        item2 = Gtk.MenuItem(label="Item 2")\n        menu.append(item1)\n        menu.append(item2)\n        item1.show()\n        item2.show()\n\n        status_icon.set_visible(True)\n        self.menu = menu\n\n    def on_popup_menu(self, status_icon, button, activate_time):\n        # Get the screen coordinates of the mouse pointer\n        display = Gdk.Display.get_default()\n        seat = display.get_default_seat()\n        pointer = seat.get_pointer()\n        screen, x, y = pointer.get_position()\n\n        # Adjust position so that menu does not go off-screen\n        monitor_num = screen.get_monitor_at_point(x, y)\n        geometry = screen.get_monitor_geometry(monitor_num)\n\n        if y + self.menu.size_request().height > geometry.y + geometry.height:\n            y -= (y + self.menu.size_request().height) - (geometry.y + geometry.height)\n\n        self.menu.popup(None, None, lambda m, a: (x, y+20, True), status_icon, button, activate_time)\n\napp = MyApplication()\napp.run()