from django.contrib.contenttypes.models import ContentType\nfrom django.db.models import Count\n\ndef get_object_votes(self, obj):\n    """\n    Get a dictionary mapping vote to votecount\n    """\n    ctype = ContentType.objects.get_for_model(obj)\n\n    votes = (\n        Vote.objects\n        .filter(content_type=ctype, object_id=obj.id)\n        .values('vote')\n        .annotate(count=Count('vote'))\n        .order_by('vote')\n    )\n\n    return {vote['vote']: vote['count'] for vote in votes}