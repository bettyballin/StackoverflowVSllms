import chardet\n\ndef decode_data(data):\n    # Try UTF-8 first\n    try:\n        return data.decode("UTF-8")\n    except UnicodeDecodeError:\n        pass\n    \n    # Fallback to CP1252 (common with mIRC)\n    try:\n        return data.decode("CP1252")\n    except UnicodeDecodeError:\n        pass\n\n    # Attempt to detect encoding\n    detected_encoding = chardet.detect(data).get('encoding')\n    if detected_encoding:\n        try:\n            return data.decode(detected_encoding)\n        except UnicodeDecodeError:\n            pass\n    \n    # If all fails, replace errors\n    return data.decode("UTF-8", "replace")\n\n# Example usage in your bot loop\ndata = irc.recv(4096)\ndecoded_data = decode_data(data)