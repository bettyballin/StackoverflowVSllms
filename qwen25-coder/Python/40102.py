from sqlalchemy import select, Table, Column, Integer, String, MetaData, and_\n\nmetadata = MetaData()\ncustomer_table = Table('Customer', metadata,\n                       Column('ID', Integer),\n                       Column('Firstname', String),\n                       Column('Lastname', String))\naddress_table = Table('Address', metadata,\n                      Column('CustomerID', Integer),\n                      Column('Street', String),\n                      Column('City', String))\n\nquery = select(\n    customer_table.c.Firstname, customer_table.c.Lastname,\n    address_table.c.Street, address_table.c.City\n).select_from(\n    customer_table.join(address_table, customer_table.c.ID == address_table.c.CustomerID)\n)\n\nif some_condition:\n    query = query.where(address_table.c.City == some_city)\n\nprint(query.compile(compile_kwargs={"literal_binds": True}))