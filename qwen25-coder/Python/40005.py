from unittest.mock import Mock\n\nclass IMAP4Mock:\n    def __init__(self):\n        self.inbox = []\n\n    def login(self, username, password):\n        return 'OK', [b'Logged in']\n\n    def select(self, mailbox='inbox'):\n        return 'OK', []\n\n    def search(self, criteria='ALL'):\n        return 'OK', ['1 2 3']  # dummy ids\n\n    def fetch(self, id, what="(BODY[TEXT])"):\n        return id, [(id, b'DUMMY EMAIL TEXT')]\n\n# Usage in your test\nmock_imap = IMAP4Mock()