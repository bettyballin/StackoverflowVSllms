from django.db import models\n\nclass Person(models.Model):\n    name = models.CharField(max_length=100)\n\nclass Home(models.Model):\n    owner = models.ForeignKey(Person, on_delete=models.CASCADE)\n    address = models.CharField(max_length=250)\n\n# To get all persons with more than one home and each home with more than one person living there\npersons_with_multiple_homes = Person.objects.annotate(\n    num_homes=models.Count('home')\n).filter(num_homes__gt=1).prefetch_related(\n    models.Prefetch('home_set', queryset=Home.objects.all())\n)\n\nfor person in persons_with_multiple_homes:\n    homes = list(person.home_set.all())\n    for home in homes:\n        # Process each home\n        print(f"Person: {person.name}, Home: {home.address}")