import os\nimport zipfile\n\ndef zip_folder(basedir):\n    # Construct the full path for the zip file inside the basedir\n    zip_file = os.path.join(basedir, os.path.basename(basedir) + '.zip')\n    \n    with zipfile.ZipFile(zip_file, 'w', zipfile.ZIP_DEFLATED) as z:\n        for dirpath, _, filenames in os.walk(basedir):\n            print("zipping files:")\n            for fn in filenames:\n                print(fn)\n                absfn = os.path.join(dirpath, fn)\n                arcname = os.path.relpath(absfn, start=basedir)  # Ensure the structure is maintained\n                z.write(absfn, arcname)\n\n# Example usage\nzip_folder(r'C:\test')