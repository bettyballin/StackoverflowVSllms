import os\nimport pwd\nimport grp\nimport subprocess\n\ndef run_as_user(username, command):\n    # Fetch the user info\n    pw_record = pwd.getpwnam(username)\n    \n    # Switch uid/gid\n    user_name = pw_record.pw_name\n    user_home_dir = pw_record.pw_dir\n    user_uid = pw_record.pw_uid\n    user_gid = pw_record.pw_gid\n\n    os.setgid(user_gid)\n    os.setuid(user_uid)\n\n    # Run the command\n    try:\n        subprocess.run(command, shell=True, check=True)\n    finally:\n        # Reset back to original uid/gid if necessary\n        os.setuid(0)  # or any other process required uid\n        os.setgid(0)  # or any other process required gid\n\n# Example usage\nrun_as_user('user1', 'ls ~; mv file1')\nrun_as_user('user2', 'ls ~; mv file1')