# Assuming you have category and currency, these could be None or specific values\ncategory = "some_category"  # This could be None or a specific category\ncurrency = "USD"  # This could be None or a specific currency\n\n# Conditionally filter within the list comprehension using short-circuiting\nfiltered_entries = [\n    e for e in entries\n    if (not category or e.category == category) and (not currency or e.item_currency == currency)\n]\n\n# Now you can calculate totals without additional filters\ntotals['quantity'] = sum(e.quantity for e in filtered_entries)\n\n# If you need to apply this to different metrics, you can reuse the filtered list\ntotals['value'] = sum(e.value for e in filtered_entries)