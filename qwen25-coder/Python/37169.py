from django.db.models import OuterRef, Subquery, F\nfrom your_app.models import Invitation\n\n# Subquery to get the latest date_invited for each email\nlatest_date_subquery = (\n    Invitation.objects.filter(to_email=OuterRef('to_email'))\n    .order_by('-date_invited')\n    .values('date_invited')[:1]\n)\n\n# Main query to filter invitations by the latest date_invited per email\ndistinct_invitations = Invitation.objects.filter(\n    date_invited=Subquery(latest_date_subquery)\n).distinct('to_email')\n\n# To get all columns, you might need to annotate these fields or use values\n# Here is an example using values():\nlatest_invitations = distinct_invitations.values(\n    'id', 'to_email', 'date_invited',  # Add other fields as needed\n)\n\n# If you want QuerySet of model instances instead of dict:\n# You can use the above query to get primary keys and then filter those\ninvitations_list = Invitation.objects.filter(\n    id__in=[item['id'] for item in latest_invitations]\n)