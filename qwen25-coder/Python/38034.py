from flask import Flask, request\nimport requests\n\napp = Flask(__name__)\n\nBACKEND_SERVERS = ['http://backend1.example.com', 'http://backend2.example.com']\n\n@app.route('/', defaults={'path': ''})\n@app.route('/<path:path>', methods=['GET', 'POST'])\ndef proxy(path):\n    target_server = BACKEND_SERVERS[hash(request.remote_addr) % len(BACKEND_SERVERS)]\n    response = requests.request(\n        method=request.method,\n        url=f"{target_server}/{path}",\n        data=request.get_data(),\n        headers={key: value for (key, value) in request.headers if key != 'Host'},\n        cookies=request.cookies,\n        allow_redirects=False)\n    \n    excluded_headers = ['content-encoding', 'content-length', 'transfer-encoding', 'connection']\n    headers = [(name, value) for (name, value) in response.raw.headers.items()\n               if name.lower() not in excluded_headers]\n    \n    return response.content, response.status_code, headers\n\nif __name__ == '__main__':\n    app.run()