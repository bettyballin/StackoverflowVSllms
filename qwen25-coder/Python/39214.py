import os\nimport re\n\ndef make_patch_paths_relative(patch_path, base_dir):\n    # Normalize the base directory path with trailing slash for pattern matching\n    base_dir_normalized = os.path.normpath(base_dir) + os.sep\n    \n    with open(patch_path, 'r') as file:\n        lines = file.readlines()\n\n    modified_lines = []\n    for line in lines:\n        if line.startswith('--- ') or line.startswith('+++ '):\n            # Substitute absolute path with relative path\n            modified_line = re.sub(rf'{re.escape(base_dir_normalized)}', '', line)\n            modified_lines.append(modified_line)\n        else:\n            modified_lines.append(line)\n\n    with open(patch_path, 'w') as file:\n        file.writelines(modified_lines)\n\n# Usage example\nmake_patch_paths_relative('path/to/your.patch', '/home/yourusername/projects/yourproject/')