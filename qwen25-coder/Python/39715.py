import os\nimport zipfile\nfrom glob import glob\nfrom time import strftime\n\ndef addFolderToZip(myZipFile, folder, base_path=None):\n    if base_path is None:\n        base_path = folder\n    \n    for file in glob(os.path.join(folder, '*')):\n        if os.path.isfile(file):\n            arcname = os.path.relpath(file, start=base_path)\n            myZipFile.write(file, arcname, zipfile.ZIP_DEFLATED)\n        elif os.path.isdir(file):\n            addFolderToZip(myZipFile, file, base_path)\n\ndef createZipFile(filename, files, folders):\n    curTime = strftime("__%Y_%m_%d", time.localtime())\n    filename += curTime\n    zipFilename = utils.getFileName("files", filename + ".zip")\n    \n    with zipfile.ZipFile(zipFilename, "w") as myZipFile:\n        for file in files:\n            (filepath, filename) = os.path.split(file)\n            myZipFile.write(file, filename, zipfile.ZIP_DEFLATED)\n\n        for folder in folders:\n            addFolderToZip(myZipFile, folder)\n\n    return 1, zipFilename\n\n(success, filename) = createZipFile(planName, files, folders)