from django.db import models\nfrom collections import defaultdict\n\n# models.py should already have these defined\nclass Car(models.Model):\n    mods = models.ManyToManyField('Mods')\n\nclass Mods(models.Model):\n    name = models.CharField(max_length=100)  # Assuming each mod has a name\n\ndef cars_by_common_mods():\n    car_groups = defaultdict(set)\n\n    for car in Car.objects.prefetch_related('mods').all():\n        mods_set = frozenset(car.mods.all())\n        car_groups[mods_set].add(car)\n\n    return [{'mods': {mod.name for mod in mods}, 'cars': {car.id for car in cars}} for mods, cars in car_groups.items()]