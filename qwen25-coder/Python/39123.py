from django.db import models\nfrom django.contrib.auth.models import User\n\nclass KnownEmail(models.Model):\n    STATUS_CHOICES = [\n        ('W', 'Whitelisted'),\n        ('B', 'Blacklisted'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='known_emails')\n    email = models.EmailField()\n    status = models.CharField(max_length=1, choices=STATUS_CHOICES)\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    default_handling = models.CharField(max_length=1, choices=[('W', 'Whitelist'), ('B', 'Blacklist')], default='W')\n\ndef checkPermission(user, emailAddress):\n    try:\n        known_email = KnownEmail.objects.get(user=user, email=emailAddress)\n        return known_email.status == 'W'\n    except KnownEmail.DoesNotExist:\n        # Check user's default handling preference\n        user_profile = UserProfile.objects.get(user=user)\n        return user_profile.default_handling == 'W'