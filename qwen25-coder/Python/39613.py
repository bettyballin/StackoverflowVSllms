import bluetooth\n\ndef send_sms(target_address, port, phone_number, message):\n    print("Trying to send SMS on %s" % target_address)\n\n    BTSocket = bluetooth.BluetoothSocket(bluetooth.RFCOMM)\n    try:\n        BTSocket.connect((target_address, port))\n        \n        # Send AT commands and check responses\n        for command in ['ATZ', 'AT+CMGF=1', f'AT+CMGS="{phone_number}"']:\n            BTSocket.send(command + '\r')\n            response = BTSocket.recv(256).decode()\n            print(f"Sent: {command}\nReceived: {response}")\n\n        # Send the message and end with CTRL+Z (ascii 26)\n        BTSocket.send(message + chr(26))\n        final_response = BTSocket.recv(256).decode()\n        \n        if "+CMGS:" in final_response:\n            print("SMS sent successfully")\n        else:\n            print(f"Failed to send SMS. Response: {final_response}")\n\n    except bluetooth.btcommon.BluetoothError as err:\n        print(f"An error occurred: {err}")\n    finally:\n        BTSocket.close()\n        print("Connection closed")\n\n# Example usage\ntarget = '00:32:AC:32:36:E8'  # Mobile address\nport = 2  # Bluetooth port\nphone_number = "+972547877763"\nmessage = "This is a test message - port 2."\nsend_sms(target, port, phone_number, message)