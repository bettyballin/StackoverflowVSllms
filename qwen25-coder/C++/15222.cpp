#include <windows.h>\n#include <stdio.h>\n\nDWORD CalculateCpuUsage(CONST FILETIME& startTime, CONST FILETIME& endTime) {\n    ULARGE_INTEGER ulStart, ulEnd;\n    ulStart.LowPart = startTime.dwLowDateTime;\n    ulStart.HighPart = startTime.dwHighDateTime;\n\n    ulEnd.LowPart = endTime.dwLowDateTime;\n    ulEnd.HighPart = endTime.dwHighDateTime;\n\n    return (DWORD)((ulEnd.QuadPart - ulStart.QuadPart) / 10000ULL); // Convert to milliseconds\n}\n\nvoid MonitorThreadUsage(HANDLE hThread) {\n    FILETIME createTime, exitTime, kernelTime, userTime;\n    \n    if (GetThreadTimes(hThread, &createTime, &exitTime, &kernelTime, &userTime)) {\n        DWORD cpuUsage = CalculateCpuUsage(kernelTime, userTime);\n        printf("Thread CPU usage: %u ms\n", cpuUsage);\n    } else {\n        printf("Failed to get thread times.\n");\n    }\n}\n\nint main() {\n    HANDLE hThread = GetCurrentThread();\n    \n    // Call this function periodically or at the end of your thread lifetime.\n    MonitorThreadUsage(hThread);\n\n    return 0;\n}