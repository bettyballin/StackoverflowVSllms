#include <windows.h>\n#include <iostream>\n\nvoid LogRegistryKey(HKEY hKey, LPCWSTR subKey) {\n    // Implement simple logging here. For demonstration, we'll just print to console.\n    std::wcout << L"Opened registry key: " << subKey << std::endl;\n}\n\nHKEY OpenKeyAndLog(LPCWSTR subKey) {\n    HKEY hKey = NULL;\n    LONG result = RegOpenKeyEx(HKEY_LOCAL_MACHINE, subKey, 0, KEY_READ, &hKey);\n    if (result == ERROR_SUCCESS) {\n        LogRegistryKey(hKey, subKey);\n    } else {\n        std::cerr << "Failed to open key: " << static_cast<int>(result) << std::endl;\n    }\n    return hKey;\n}\n\nint main() {\n    HKEY hKey = OpenKeyAndLog(L"SOFTWARE\\Microsoft");\n    if (hKey != NULL) {\n        // Do something with the opened registry key\n        RegCloseKey(hKey);\n    }\n    return 0;\n}