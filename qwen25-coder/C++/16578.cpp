m_pDC = new CDC();\nif (!m_pDC->CreateCompatibleDC(sampleDC)) {\n    // Error handling\n    delete m_pDC;\n    m_pDC = nullptr;\n    return false; // or whatever error handling mechanism you use\n}\n\nCBitmap bitmap;\nif (!bitmap.CreateCompatibleBitmap(sampleDC, rect.Width(), rect.Height())) {\n    // Error handling for bitmap creation failure\n    delete m_pDC;\n    m_pDC = nullptr;\n    return false;\n}\n\nm_pOldBitmap = m_pDC->SelectObject(&bitmap);\nif (m_pOldBitmap == nullptr) {\n    // Error handling for selecting object into DC\n    delete m_pDC;\n    m_pDC = nullptr;\n    return false;\n}