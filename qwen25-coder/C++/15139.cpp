#include <windows.h>\n#include <iostream>\n\nLSTATUS ReadRegistryKeyValue(const std::wstring& subkey, const std::wstring& valueName, std::wstring& result) {\n    HKEY hKey;\n    LSTATUS status = RegOpenKeyEx(HKEY_LOCAL_MACHINE, subkey.c_str(), 0, KEY_READ, &hKey);\n    \n    if (status != ERROR_SUCCESS) {\n        return status; // Key does not exist or cannot be accessed\n    }\n\n    wchar_t buffer[512];\n    DWORD bufferSize = sizeof(buffer);\n\n    status = RegQueryValueEx(hKey, valueName.c_str(), 0, NULL, reinterpret_cast<LPBYTE>(buffer), &bufferSize);\n    if (status == ERROR_SUCCESS) {\n        result.assign(buffer, bufferSize / sizeof(wchar_t));\n        // Remove potential trailing null characters\n        result.erase(result.find_last_not_of(L'\0') + 1);\n    }\n\n    RegCloseKey(hKey);\n    return status;\n}\n\nint main() {\n    std::wstring subkey = L"blah\\blah\\blah";\n    std::wstring valueName = L"foo";\n    std::wstring result;\n\n    LSTATUS status = ReadRegistryKeyValue(subkey, valueName, result);\n\n    if (status == ERROR_SUCCESS) {\n        std::wcout << L"Value: " << result << std::endl;\n    } else {\n        std::wcerr << L"Failed to read registry key. Error code: " << status << std::endl;\n    }\n\n    return 0;\n}