#include <boost/thread/condition.hpp>\n#include <boost/thread/thread.hpp>\n#include <boost/thread/mutex.hpp>\n\nclass CFilter\n{\n    // ...\n    boost::shared_ptr<boost::thread> m_thread;\n    boost::mutex m_mutex;\n    boost::condition m_change;\n    bool m_bStop; // Assuming this is your stop condition variable\n\npublic:\n    void process(CData **s);\n\n    // ...\n};\n\nvoid CFilter::process(CData **s)\n{\n    boost::unique_lock<boost::mutex> bufferLock(m_mutex);\n    while (!m_bStop)\n        m_change.wait(bufferLock);  // Now uses unique_lock\n\n    // ... further processing\n}