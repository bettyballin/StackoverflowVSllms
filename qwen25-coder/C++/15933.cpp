#include <windows.h>\n#include <iostream>\n\nvoid SetRegistryValue(HKEY hKeyRoot, const std::wstring& subKey, const std::wstring& name, const std::wstring& value) {\n    HKEY hKey;\n    if (ERROR_SUCCESS == RegCreateKeyEx(hKeyRoot, subKey.c_str(), 0, NULL, REG_OPTION_NON_VOLATILE,\n                                       KEY_WRITE | KEY_WOW64_32KEY, NULL, &hKey, NULL)) {\n        RegSetValueEx(hKey, name.c_str(), 0, REG_SZ, (LPBYTE)value.c_str(), ((value.size() + 1) * sizeof(wchar_t)));\n        RegCloseKey(hKey);\n    }\n}\n\nstd::wstring GetRegistryValue(HKEY hKeyRoot, const std::wstring& subKey, const std::wstring& name) {\n    HKEY hKey;\n    if (ERROR_SUCCESS == RegOpenKeyEx(hKeyRoot, subKey.c_str(), 0, KEY_READ | KEY_WOW64_32KEY, &hKey)) {\n        wchar_t buffer[512];\n        DWORD dwType = REG_SZ, bytes = sizeof(buffer);\n        if (ERROR_SUCCESS == RegQueryValueEx(hKey, name.c_str(), NULL, &dwType, (LPBYTE)buffer, &bytes)) {\n            RegCloseKey(hKey);\n            return std::wstring(buffer);\n        }\n        RegCloseKey(hKey);\n    }\n    return L"";\n}\n\nint main() {\n    std::wstring subKey = L"MyApp\\Settings";\n    std::wstring name = L"userPref1";\n\n    // Set a value in the registry\n    SetRegistryValue(HKEY_CURRENT_USER, subKey, name, L"someValue");\n\n    // Retrieve the value from the registry\n    std::wcout << GetRegistryValue(HKEY_CURRENT_USER, subKey, name) << std::endl;\n\n    return 0;\n}