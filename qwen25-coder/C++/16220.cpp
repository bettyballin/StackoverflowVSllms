#include <afxwin.h> // MFC core and standard components\n\nbool IsMainMessageLoopRunning()\n{\n    MSG msg;\n    // Use PeekMessage to check if there are any messages in the queue.\n    // PM_REMOVE removes the message from the queue without dispatching it.\n    // The presence of messages often indicates that the loop is running or will be started very soon.\n    return ::PeekMessage(&msg, NULL, 0, 0, PM_NOREMOVE) != FALSE;\n}