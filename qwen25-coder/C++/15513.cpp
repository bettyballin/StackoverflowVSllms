#include <windows.h>\n#include <stdio.h>\n\nvoid SetServiceRecoveryOptions(SC_HANDLE schSCManager, LPCTSTR serviceName) {\n    SC_HANDLE schService;\n    SERVICE_FAILURE_ACTIONS sfa;\n    SC_ACTION scaActions[3];\n    \n    // Open a handle to the specified service.\n    schService = OpenService(schSCManager,\n                             serviceName,\n                             SERVICE_CHANGE_CONFIG);\n                             \n    if (schService == NULL) {\n        printf("OpenService failed (%d)\n", GetLastError());\n        return;\n    }\n\n    // Configure recovery actions\n    sfa.dwResetPeriod = 86400; // 1 day in seconds\n    sfa.lpRebootMsg = NULL;\n    sfa.lpCommand = NULL;\n\n    scaActions[0].Type = SC_ACTION_RESTART;\n    scaActions[0].Delay = 5000; // Delay in milliseconds\n\n    scaActions[1].Type = SC_ACTION_NONE;\n    scaActions[1].Delay = 0;\n\n    scaActions[2].Type = SC_ACTION_NONE;\n    scaActions[2].Delay = 0;\n\n    sfa.cActions = 3;       // We have only one recovery action (restart)\n    sfa.lpsaActions = scaActions;\n\n    if (!ChangeServiceConfig2(schService, SERVICE_CONFIG_FAILURE_ACTIONS, &sfa)) {\n        printf("ChangeServiceConfig2 failed (%d)\n", GetLastError());\n    } else {\n        printf("Recovery options set successfully.\n");\n    }\n\n    CloseServiceHandle(schService);\n}\n\nint main() {\n    SC_HANDLE schSCManager;\n\n    // Get a handle to the SCM database. \n    schSCManager = OpenSCManager(\n                        NULL,                    // local computer\n                        NULL,                    // servicesActive database \n                        SC_MANAGER_ALL_ACCESS);  // full access rights \n\n    if (schSCManager == NULL) {\n        printf("OpenSCManager failed (%d)\n", GetLastError());\n        return 1;\n    }\n\n    SetServiceRecoveryOptions(schSCManager, TEXT("Sample_Srv"));\n\n    CloseServiceHandle(schSCManager);\n    return 0;\n}