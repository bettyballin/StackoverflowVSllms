SELECT \n    v.id, \n    v.stock, \n    v.year,\n    v.make, \n    v.model, \n    dimg.name AS default_image_name,\n    COUNT(i.id) AS total_images_count\nFROM \n    vehicle v\nLEFT JOIN \n    images i ON v.id = i.vehicle_id\nLEFT JOIN \n    images dimg ON v.id = dimg.vehicle_id AND dimg.default = 1\nGROUP BY \n    v.id, \n    v.stock, \n    v.year,\n    v.make, \n    v.model, \n    dimg.name;