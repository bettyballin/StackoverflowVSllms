CREATE FUNCTION dbo.GetFriendlyDateTimeValue\n(\n    @CompareDate DateTime\n)\nRETURNS nvarchar(48)\nAS\nBEGIN\n    DECLARE @Now DateTime = GETDATE()\n    DECLARE @Duration int\n    DECLARE @Suff nvarchar(32)\n\n    SET @Duration = DATEDIFF(MI, @CompareDate, @Now) -- Get difference in minutes\n\n    IF @Duration < 1 \n        SET @Suff = 'Just Now'\n    ELSE IF @Duration < 60\n        SET @Suff = CAST(@Duration AS nvarchar(10)) + ' Minutes Ago'\n    ELSE IF @Duration < 1440 -- Less than a day\n        BEGIN\n            SET @Duration = DATEDIFF(HH, @CompareDate, @Now)\n            SET @Suff = CAST(@Duration AS nvarchar(10)) + ' Hours Ago'\n        END\n    ELSE IF @Duration < 43200 -- Less than 30 days\n        BEGIN\n            SET @Duration = DATEDIFF(DAY, @CompareDate, @Now)\n            SET @Suff = CAST(@Duration AS nvarchar(10)) + ' Days Ago'\n        END\n    ELSE IF @Duration < 525600 -- Less than a year, assuming 30 days per month\n        BEGIN\n            SET @Duration = DATEDIFF(MONTH, @CompareDate, @Now)\n            SET @Suff = CAST(@Duration AS nvarchar(10)) + ' Months Ago'\n        END\n    ELSE\n        BEGIN\n            SET @Duration = DATEDIFF(YEAR, @CompareDate, @Now)\n            SET @Suff = CAST(@Duration AS nvarchar(10)) + ' Years Ago'\n        END\n\n    RETURN @Suff\nEND