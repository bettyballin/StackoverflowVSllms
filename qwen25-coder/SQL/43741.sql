CREATE PROCEDURE GetRecordsByIds\n    @Ids NVARCHAR(MAX)\nAS\nBEGIN\n    DECLARE @tmpTable TABLE (Id INT);\n    \n    -- Assuming a function StringToTable to split the comma-delimited string into rows\n    INSERT INTO @tmpTable \n    SELECT value FROM STRING_SPLIT(@Ids, ',');\n\n    DECLARE @Count INT;\n    SELECT @Count = COUNT(*) FROM @tmpTable;\n\n    IF @Count = 1\n    BEGIN\n        -- If there's only one ID, use =\n        DECLARE @SingleId INT;\n        SELECT @SingleId = Id FROM @tmpTable;\n\n        SELECT * \n        FROM YourTargetTable \n        WHERE id = @SingleId;\n    END\n    ELSE\n    BEGIN\n        -- Otherwise, use IN\n        SELECT * \n        FROM YourTargetTable \n        WHERE id IN (SELECT Id FROM @tmpTable);\n    END\nEND