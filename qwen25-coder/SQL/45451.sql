-- Assuming you have a function or procedure to calculate SHA256 hash, e.g., dbo.CalculateSHA256Hash(varbinary)\n\n-- 1. Insert images with their hashes\nINSERT INTO Photos (Photo, PhotoHash)\nSELECT @Image, dbo.CalculateSHA256Hash(@Image);\n\n-- 2. Compare images using hashes\nDECLARE @NewImage varbinary(max) = ...; -- Load your image binary data here\nDECLARE @NewImageHash nvarchar(64) = dbo.CalculateSHA256Hash(@NewImage); -- Calculate hash for the new image\n\nSELECT * FROM Photos\nWHERE PhotoHash = @NewImageHash;