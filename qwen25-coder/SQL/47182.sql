CREATE PROCEDURE YourProcedureName\n    @NewGroupId INT = NULL,\n    -- other parameters\nAS\nBEGIN\n    DECLARE @SQL NVARCHAR(MAX);\n\n    SET @SQL = N'\n        SELECT *\n        FROM [YourTable] AS yt\n        JOIN [UtilityWeb].[dbo].[GroupSites] AS gs ON yt.SiteId = gs.SiteId\n        WHERE 1=1';\n\n    IF @NewGroupId IS NOT NULL\n    BEGIN\n        SET @SQL += N'\n            AND gs.GroupId = @NewGroupId';\n    END\n\n    -- Add more conditions as necessary\n\n    EXEC sp_executesql @SQL, N'@NewGroupId INT', @NewGroupId;\nEND;