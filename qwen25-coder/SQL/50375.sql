SELECT Parts.*, Image.type, Image.width, Image.height,\n           State.name AS state, Region.name AS region, \n           Prom.start_date AS promotion_start_date, Prom.end_date AS promotion_end_date \n    FROM (SELECT parts_id FROM Parts_Category WHERE category_id = '40' \n          UNION SELECT parts_id FROM Parts_Category WHERE main_category_id = '40') cid\n    LEFT JOIN Image ON Parts.image_id = Image.id\n    JOIN Parts ON Parts.id = cid.parts_id AND Parts.status = 'A'\n    LEFT JOIN Location_State AS State ON Parts.state_id = State.id\n    LEFT JOIN Location_Region AS Region ON Parts.region_id = Region.id\n    LEFT JOIN Promotion Prom ON Parts.promotion_id = Prom.id\n    ORDER BY Parts.level DESC, Parts.warehouse DESC, Parts.updated DESC LIMIT 0, 15;