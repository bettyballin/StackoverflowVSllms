CREATE TABLE IF NOT EXISTS `partners` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255),\n  `last_name` varchar(255),\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\nCREATE TABLE IF NOT EXISTS `orders` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `partner_id` int(11) NOT NULL,\n  `status` enum('pending','accepted','cancelled','other') NOT NULL,\n  `created_on` datetime NOT NULL,\n  `concept` varchar(250) NOT NULL,\n  `type` enum('membership', 'other') NOT NULL DEFAULT 'membership',\n  `source` enum('dineromail', 'casati', 'deposit', 'other') NOT NULL DEFAULT 'dineromail',\n  `notes` text,\n  `last_check_on` datetime,\n  PRIMARY KEY (`id`),\n  FOREIGN KEY (`partner_id`) REFERENCES `partners`(`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\nCREATE TABLE IF NOT EXISTS `payments` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `order_id` int(11) NOT NULL,\n  `month` TINYINT(2),\n  `year` YEAR,\n  `amount` DECIMAL(10, 2) NOT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `idx-order_id-month-year` (`order_id`, `month`, `year`),\n  FOREIGN KEY (`order_id`) REFERENCES `orders`(`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;