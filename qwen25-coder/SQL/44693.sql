-- BEGIN ROLLBACK SCRIPT\n\nIF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[OldProcedure_X]') AND type IN (N'P', N'PC'))\nDROP PROCEDURE [dbo].[OldProcedure_X]\n\nGO\n\n-- Rename the existing procedure to OldProcedure_X before creating the new one\nEXEC sp_rename 'dbo.X', 'OldProcedure_X';\n\nGO\n\nCREATE PROCEDURE X \nAS\nBEGIN\n    -- Corrected procedure code here\nEND;\n\nGO\n\n-- In case of failure, you can easily rollback to the previous version with this script:\nIF @@ERROR <> 0\nBEGIN\n    PRINT 'Failed to create new procedure. Rolling back...';\n    \n    IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[X]') AND type IN (N'P', N'PC'))\n        DROP PROCEDURE [dbo].[X];\n\n    EXEC sp_rename 'dbo.OldProcedure_X', 'X';\nEND\n\n-- END ROLLBACK SCRIPT