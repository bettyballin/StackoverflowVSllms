CREATE OR REPLACE PROCEDURE InsertOrUpdateMyTable(\n    p_id   IN INTEGER,\n    p_col1 IN VARCHAR2,\n    p_col2 IN VARCHAR2\n) AS\nBEGIN\n    MERGE INTO MyTable mt\n    USING (SELECT 1 FROM dual) a\n    ON (mt.ID = p_id)\n    WHEN MATCHED THEN\n        UPDATE SET \n            mt.Col1 = COALESCE(p_col1, mt.Col1),\n            mt.Col2 = COALESCE(p_col2, mt.Col2)\n    WHEN NOT MATCHED THEN\n        INSERT (ID, Col1, Col2)\n        VALUES (p_id, p_col1, p_col2);\n\nEXCEPTION\n    WHEN DUP_VAL_ON_INDEX THEN\n        DBMS_OUTPUT.PUT_LINE('Duplicate ID error.');\n    WHEN OTHERS THEN\n        DBMS_OUTPUT.PUT_LINE('An error occurred: ' || SQLERRM);\nEND InsertOrUpdateMyTable;\n/