BEGIN TRANSACTION;\n\n-- Disable all constraints temporarily\nEXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT ALL";\n\n-- Drop foreign keys (you need to specify them because SQL Server doesn't have a simple way to rename or change types for involved columns directly)\nALTER TABLE ChildTable DROP CONSTRAINT FK_Child_Parent;\n\n-- Alter table primary key column type\nALTER TABLE ParentTable \nALTER COLUMN Id uniqueidentifier NOT NULL DEFAULT NEWSEQUENTIALID() WITH VALUES;\n\n-- Re-enable all constraints (you need to specify them again)\nEXEC sp_msforeachtable "ALTER TABLE ? CHECK CONSTRAINT ALL";\n\n-- Re-establish foreign keys with new column types (adjust as necessary)\nALTER TABLE ChildTable ADD FOREIGN KEY(FK_Child_Parent) REFERENCES ParentTable(Id);\n\nCOMMIT;