-- Add the column as nullable first\nALTER TABLE tbl ADD col INTEGER NULL;\n\n-- Set the initial value in batches\nDECLARE @BatchSize INT = 5000;\nDECLARE @Offset INT = 0;\nDECLARE @TotalRows INT = (SELECT COUNT(*) FROM tbl);\nDECLARE @RowsAffected INT;\n\nWHILE @Offset < @TotalRows\nBEGIN\n    UPDATE TOP (@BatchSize) tbl SET col = 1\n    WHERE col IS NULL\n\n    SET @RowsAffected = @@ROWCOUNT;\n    IF @RowsAffected = 0 BREAK; -- Exit loop if no rows were updated\n\n    SET @Offset = @Offset + @BatchSize;\nEND\n\n-- Make the column non-nullable\nALTER TABLE tbl ALTER COLUMN col INTEGER NOT NULL;