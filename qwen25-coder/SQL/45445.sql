CREATE FUNCTION dbo.SplitInts (\n    @List VARCHAR(MAX),\n    @Delimiter CHAR(1)\n) RETURNS @SplitTable TABLE (Id INT)\nAS\nBEGIN\n    DECLARE @Pos INT, @NextString NVARCHAR(4000)\n    SET @Pos = 1\n\n    WHILE CHARINDEX(@Delimiter, @List, @Pos) > 0\n    BEGIN\n        SET @NextString = SUBSTRING(@List, 1, CHARINDEX(@Delimiter, @List, @Pos) - 1)\n        INSERT INTO @SplitTable (Id) VALUES (@NextString)\n\n        -- Remove the parsed integer from the list string and get ready for the next one\n        SET @List = SUBSTRING(@List, LEN(@NextString + @Delimiter) + 1, LEN(@List))\n    END\n\n    -- Insert last item in the list\n    IF LEN(@List) > 0\n        INSERT INTO @SplitTable (Id) VALUES (@List)\n\n    RETURN\nEND