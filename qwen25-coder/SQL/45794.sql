-- Create a log table\nCREATE TABLE FooLog (\n    LogId INT IDENTITY(1,1) PRIMARY KEY,\n    Operation NVARCHAR(10),\n    FooId INT NULL,\n    Name NVARCHAR(100)\n);\n\nALTER TRIGGER trg_Foo_Change\nON Foo\nAFTER INSERT, UPDATE, DELETE\nAS\nBEGIN\n    -- Check if it's an insert operation\n    IF EXISTS(SELECT * FROM inserted) AND NOT EXISTS(SELECT * FROM deleted)\n        INSERT INTO FooLog (Operation, Name)\n        SELECT 'Insert', Name FROM inserted;\n\n    -- Check if it's an update operation\n    ELSE IF EXISTS(SELECT * FROM inserted) AND EXISTS(SELECT * FROM deleted)\n        INSERT INTO FooLog (Operation, FooId, Name)\n        SELECT 'Update', i.FooId, i.Name \n        FROM inserted i INNER JOIN deleted d ON i.FooId = d.FooId;\n\n    -- Check if it's a delete operation\n    ELSE IF NOT EXISTS(SELECT * FROM inserted) AND EXISTS(SELECT * FROM deleted)\n        INSERT INTO FooLog (Operation, FooId, Name)\n        SELECT 'Delete', FooId, Name FROM deleted;\nEND