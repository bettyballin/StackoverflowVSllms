SELECT \n    g.gallery_id,\n    COUNT(p.picture_id) AS pictures_count,\n    COALESCE(SUM(v.vote_value), 0) AS total_votes_score\nFROM \n    gallery g\nLEFT JOIN \n    (SELECT picture_gallery_ref, COUNT(*) as num_pictures FROM picture GROUP BY picture_gallery_ref) p\nON \n    g.gallery_id = p.picture_gallery_ref\nLEFT JOIN \n    (SELECT vote_gallery_ref, SUM(vote_value) as total_vote_sum FROM vote GROUP BY vote_gallery_ref) v\nON \n    g.gallery_id = v.vote_gallery_ref\nGROUP BY \n    g.gallery_id;