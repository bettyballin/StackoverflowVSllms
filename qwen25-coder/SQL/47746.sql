begin loop over some_data\n   // Begin and end transaction for Connection1 within the outer loop\n   begin transaction on Connection1\n   insert into key_id on TableA using Connection1\n   commit on Connection1\n   \n   begin loop over some_other_data\n      // Begin and end transaction for Connection2 within the inner loop\n      begin transaction on Connection2\n      insert into TableB using same key_id as in Table A with Connection2\n      commit on Connection2\n   end loop\nend loop