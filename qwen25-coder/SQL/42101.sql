-- Creating a trace definition\nDECLARE @RC INT\nDECLARE @TraceID INT\nDECLARE @on BIT\nSET @on = 1\n\nEXEC @rc = sp_trace_create @traceid=@traceid OUTPUT, @options=2, @tracefile=N'C:\path\to\your\trace.trc'\n\nIF (@rc != 0) GOTO error\n\n-- Add the events that capture LINQ to SQL queries\nDECLARE @maxfilesize BIGINT\nSET @maxfilesize = 5 \n\nEXEC sp_trace_setevent @TraceID, 12, 14, @on -- RPC:Completed - TextData\nEXEC sp_trace_setevent @TraceID, 12, 7, @on   -- RPC:Completed - CPU\nEXEC sp_trace_setevent @TraceID, 36, 1, @on   -- SQL:BatchCompleted - TextData\nEXEC sp_trace_setevent @TraceID, 45, 1, @on   -- SP:StmtCompleted - TextData\n\nEXEC sp_trace_setfilter @traceid, 10, 0, 7, N'SQL Server Profiler - your trace name' \n\n-- Set the maximum size of the trace file\nEXEC sp_trace_setstatus @TraceID, 2\n\n-- Start the trace\nEXEC sp_trace_setstatus @TraceID, 1\n\nGOTO finish\n\nerror: \nSELECT ERROR_NUMBER() AS ErrorNumber,\n       ERROR_MESSAGE() AS ErrorMessage;\nRETURN\n\nfinish:\nGO