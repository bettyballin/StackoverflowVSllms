CREATE FUNCTION dbo.fn_SplitString (@str nvarchar(max), @delimiter char(1))\nRETURNS @output TABLE(words nvarchar(max))\nAS\nBEGIN\n    DECLARE @start INT, @end INT\n    SET @str = RTRIM(LTRIM(@str))\n    SET @start = 1\n    SET @end = CHARINDEX(@delimiter , @str)\n\n    WHILE @start < LEN(@str) + 1\n    BEGIN\n        IF @end = 0 \n            SET @end = LEN(@str) + 1\n\n        INSERT INTO @output (words)\n        VALUES(SUBSTRING(@str, @start, @end - @start))\n\n        SET @start = @end + 1\n        SET @end = CHARINDEX(@delimiter , @str , @start)\n    END\n    RETURN\nEND