SELECT COUNT(table2.id)\nFROM table2\nINNER JOIN (\n    SELECT MAX(date) AS max_date\n    FROM table1\n    WHERE date > ? AND date < ?\n) AS latest_report ON table1.date = latest_report.max_date\nINNER JOIN table1 ON table2.relazioneid = table1.id;