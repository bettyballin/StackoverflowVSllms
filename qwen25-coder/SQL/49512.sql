WITH RankedRows AS (\n    SELECT \n        *,\n        ROW_NUMBER() OVER (\n            PARTITION BY longitude, latitude \n            ORDER BY \n                CASE WHEN url IS NOT NULL THEN 0 ELSE 1 END,\n                CASE WHEN caption IS NOT NULL THEN 0 ELSE 1 END\n        ) as rn\n    FROM your_table_name\n)\nDELETE FROM your_table_name\nWHERE rowID IN (\n    SELECT rowID FROM RankedRows WHERE rn > 1\n);