-- Assume we want to count tasks per project and there was an update statement for each project\nWITH TaskCounts AS (\n    SELECT ProjectID, COUNT(*) AS TaskCount\n    FROM Tasks\n    GROUP BY ProjectID\n),\nMilestoneCounts AS (\n    SELECT ProjectID, COUNT(*) AS MilestoneCount\n    FROM Milestones\n    GROUP BY ProjectID\n)\nSELECT \n    p.ProjectID,\n    p.ProjectName,\n    COALESCE(tc.TaskCount, 0) AS NumberOfTasks,\n    COALESCE(mn.MilestoneCount, 0) AS NumberOfMilestones\nFROM \n    Projects p\nLEFT JOIN \n    TaskCounts tc ON p.ProjectID = tc.ProjectID\nLEFT JOIN \n    MilestoneCounts mn ON p.ProjectID = mn.ProjectID;