USE YourDatabaseName;\nGO\n\nSELECT 'EXEC sp_addrolemember ''' + dp.role_principal_name + ''', ''' + dbp.name + ''';'\nFROM sys.database_role_members drm\nJOIN sys.database_principals dp ON drm.role_principal_id = dp.principal_id\nJOIN sys.database_principals dbp ON drm.member_principal_id = dbp.principal_id\n\nUNION ALL\n\nSELECT 'GRANT [' + p.permission_name + '] TO [' + pr.name + '];'\nFROM sys.database_permissions AS p\nJOIN sys.database_principals AS pr ON p.grantee_principal_id = pr.principal_id\nWHERE major_id = 0 AND class = 0 -- For database-level permissions\n    AND p.state IN ('G', 'W')    -- Grant or Granted With Grant