-- Create a table to hold the last counter value per code\nCREATE TABLE counters (\n    CODE VARCHAR(10) PRIMARY KEY,\n    last_value INT NOT NULL DEFAULT 0\n);\n\n-- Initialize the counters for each code you want\nINSERT INTO counters (CODE) VALUES ('xx');\n\n-- Use SELECT FOR UPDATE in your application code logic:\nBEGIN;\n-- Lock the row to prevent other transactions from reading or updating it\nSELECT last_value FROM counters WHERE CODE = 'xx' FOR UPDATE;\n\n-- Increment and use the counter value\nUPDATE counters SET last_value = last_value + 1 WHERE CODE = 'xx' RETURNING last_value INTO your_variable;\n\n-- Use the variable for your insert statement\nINSERT INTO TABLE (CODE, C) VALUES ('xx', your_variable);\n\nCOMMIT;