SELECT article_id, category_id, title, is_sticky, published_at\nFROM (\n    SELECT a.*,\n           @row_num := IF(@current_category = category_id, @row_num + 1, 1) AS row_number,\n           @current_category := category_id\n    FROM articles a\n    , (SELECT @row_num := 0, @current_category := NULL) r\n    ORDER BY category_id, is_sticky DESC, published_at\n) subquery\nWHERE row_number <= 3;