DECLARE @rc INT\nDECLARE @TraceID int\nDECLARE @maxfilesize BIGINT\nSET @maxfilesize = 5 -- Maximum file size in MB\n\n-- Create a new trace\nEXEC @rc = sp_trace_create @traceid=@TraceID OUTPUT, \n    @options=2, \n    @tracefile=N'C:\YourPath\QueryTrace',\n    @maxfilesize=@maxfilesize,\n    @stoptime=NULL -- NULL indicates that the trace should not stop at a specific time\n\n-- Add events to the trace\nDECLARE @intfilter INT\nDECLARE @vcfilter VARCHAR(1000)\n\nEXEC sp_trace_setevent @traceid=@TraceID, \n@eventid=12 -- SQL:BatchCompleted event\n,@columnid=14  -- Duration\n,@on=1\n\n-- Example of setting filters, if needed:\n-- EXEC sp_trace_setfilter @traceid=@TraceID,\n--     @columnid=31,\n--     @logical_operator=0,\n--     @comparison_operator=6,\n--     @value=N'YourApplicationName'\n\n-- Start the trace\nEXEC @rc = sp_trace_setstatus @traceID, 1\n\nGO