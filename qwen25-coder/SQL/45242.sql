CREATE OR REPLACE FUNCTION MY_FUNC (PXOBJCLASS varchar2)\nRETURN MY_OBJ_TABLE pipelined IS\n\n    TYPE ref1 IS REF CURSOR;\n    Cur1 ref1;\n    out_rec my_object := my_object(null,null,null);\n    myObjClass VARCHAR2(50);\n\nBEGIN\n    myObjClass := PXOBJCLASS;\n    OPEN Cur1 FOR 'SELECT PYID, PXINSNAME, PZINSKEY FROM PC_WORK WHERE PXOBJCLass = :1' USING myObjClass;\n\n    LOOP\n        FETCH cur1 INTO out_rec.COL1, out_rec.COL2, out_rec.COL3;\n        EXIT WHEN Cur1%NOTFOUND;\n        PIPE ROW (out_rec);\n    END LOOP;\n\n    CLOSE Cur1;\n\nEND MY_FUNC;\n/