USE YourDatabaseName; -- Ensure you're in the right database\n\n-- Check if "Domain\TestGroup" exists as a login in SQL Server\nIF NOT EXISTS (SELECT * FROM sys.server_principals WHERE name = 'Domain\TestGroup')\nBEGIN\n    CREATE LOGIN [Domain\TestGroup] FROM WINDOWS;\nEND;\n\n-- Assign the Windows group to a specific database role\nUSE YourDatabaseName;\nIF NOT EXISTS (SELECT * \n               FROM sys.database_principals AS dp \n               INNER JOIN sys.database_role_members AS drm ON dp.principal_id = drm.role_principal_id \n               INNER JOIN sys.database_principals AS drp ON drm.member_principal_id = drp.principal_id\n               WHERE dp.name ='db_datareader' -- or any relevant role\n                 AND drp.name = 'Domain\TestGroup')\nBEGIN\n    EXEC sp_addrolemember N'db_datareader', N'Domain\TestGroup';\nEND;\n\n-- Check if the current user is in the Windows group\nSELECT IS_MEMBER('Domain\TestGroup');