BEGIN\n    DBMS_RESOURCE_MANAGER.CREATE_CREDENTIAL(credential_name => 'long_query', username => 'your_user');\n    \n    DBMS_RESOURCE_MANAGER.CREATE_CONSUMER_GROUP(consumer_group =>\n                                                'LONG_RUNNING_QUERIES',\n                                                comment                => 'Group for long running queries');\n\n    DBMS_RESOURCE_MANAGER.SET_CONSUMER_GROUP_MAPPING(\n        attribute       => DBMS_RESOURCE_MANAGER.SESSION_ATTR_CPU_USAGE,\n        value           => 100, -- Adjust as needed\n        consumer_group  => 'LONG_RUNNING_QUERIES',\n        logical         => TRUE);\n\n    DBMS_RESOURCE_MANAGER.CREATE_PLAN(plan     => 'LONG_QUERY_PLAN', comment => 'Plan to limit query time');\n\n    DBMS_RESOURCE_MANAGER.ADD_PLAN_DIRECTIVE(\n        plan            => 'LONG_QUERY_PLAN',\n        group_or_subplan=> 'LONG_RUNNING_QUERIES',\n        interrupt_on_timeout  => TRUE,\n        max_idle_time         => 60, -- in seconds\n        switch_group          => 'OTHER_GROUPS'); -- Where to move when time limit is reached\n\n    DBMS_RESOURCE_MANAGER.VALIDATE_PLAN(plan_name => 'LONG_QUERY_PLAN');\n\n    DBMS_RESOURCE_MANAGER.SWITCH_CURRENT_CONSUMER_GROUP('LONG_RUNNING_QUERIES', credential_name => 'long_query');\n    \nEND;\n/