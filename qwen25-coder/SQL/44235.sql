WITH RecursiveCTE AS (\n    -- Anchor member: Select the root node(s) you want to start from.\n    SELECT NodeID, ParentNodeID, NodeName\n    FROM Hierarchy\n    WHERE NodeID = @StartNode  -- Pass the starting node ID here\n\n    UNION ALL\n\n    -- Recursive member: Select children of the current selection (recursively).\n    SELECT h.NodeID, h.ParentNodeID, h.NodeName\n    FROM Hierarchy h\n    INNER JOIN RecursiveCTE rc ON rc.NodeID = h.ParentNodeID\n)\nSELECT * FROM RecursiveCTE\nOPTION (MAXRECURSION 0); -- Allow unlimited recursion for very deep trees