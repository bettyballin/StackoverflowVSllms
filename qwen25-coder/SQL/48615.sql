-- Function to URL-encode a single character\nCREATE OR REPLACE FUNCTION url_encode_char(c CHAR)\nRETURNS TEXT AS $$\nDECLARE\n    encoded_char TEXT;\nBEGIN\n    IF c ~ '[A-Za-z0-9]' THEN\n        RETURN c;\n    ELSE\n        SELECT '%' || RIGHT(to_hex(ascii(c))::TEXT, 2) INTO encoded_char;\n        RETURN upper(encoded_char);\n    END IF;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Function to URL-encode a whole string\nCREATE OR REPLACE FUNCTION url_encode(s TEXT)\nRETURNS TEXT AS $$\nDECLARE\n    len INT;\n    result TEXT := '';\nBEGIN\n    FOR i IN 1..length(s) LOOP\n        result := result || url_encode_char(substring(s FROM i));\n    END LOOP;\n    RETURN result;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Using the function in a SELECT statement\nSELECT url_encode('h√©llo there');