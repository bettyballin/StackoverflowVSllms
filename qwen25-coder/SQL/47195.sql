-- Create a Credential\nUSE master;\nGO\nCREATE CREDENTIAL [MyCredential]\nWITH IDENTITY = N'DOMAIN\Username', \nSECRET = N'YourStrongPassword';\nGO\n\n-- Create a Proxy\nUSE msdb;\nGO\nEXEC sp_add_proxy \n@proxy_name=N'MyProxy', \n@credential_name=N'MyCredential',\n@enabled=1, \n@description=N'A proxy to run SQL Server Agent jobs with specific permissions';\n\n-- Grant the proxy access to the CmdExec subsystem for example\nEXEC sp_grant_proxy_to_subsystem @proxy_name=N'MyProxy', @subsystem_name=N'CmdExec';\nGO\n\n-- In your job step creation or modification, you can then select MyProxy.