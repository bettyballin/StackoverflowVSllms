-- Sample data insertion using CTE and OUTPUT clause\nWITH InsertedData AS (\n    SELECT \n        a.ColumnA, \n        a.ColumnB, \n        a.ColumnC   -- Assume all the necessary columns are selected here\n    FROM \n        (VALUES ('ValueA1', 'ValueB1', 'ValueC1'),\n                ('ValueA2', 'ValueB2', 'ValueC2')) AS a(ColumnA, ColumnB, ColumnC)\n)\n-- Insert into Table1 and capture the output\nOUTPUT inserted.ID, inserted.ColumnA, inserted.ColumnB INTO #TempTable\nINSERT INTO Table1 (ColumnA, ColumnB)\nSELECT \n    i.ColumnA, \n    i.ColumnB\nFROM \n    InsertedData i;\n\n-- Use the captured output to insert into Table2\nINSERT INTO Table2 (Table1ID, ColumnC)\nSELECT \n    t.ID, \n    i.ColumnC\nFROM \n    #TempTable t\nJOIN \n    InsertedData i ON i.ColumnA = t.ColumnA AND i.ColumnB = t.ColumnB; -- Ensure the join condition matches your data uniqueness\n\n-- Clean up temporary table\nDROP TABLE #TempTable;