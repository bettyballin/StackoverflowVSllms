-- Add Virtual Columns for the conditions\nALTER TABLE LIST_ITEM ADD (\n    VIRTUAL_LIST_KEY VARCHAR2(50) GENERATED ALWAYS AS \n        (CASE STATUS WHEN 'cancel' THEN NULL ELSE LIST_KEY END),\n    VIRTUAL_ENTRY_NO NUMBER GENERATED ALWAYS AS \n        (CASE STATUS WHEN 'cancel' THEN NULL ELSE ENTRY_NO END)\n);\n\n-- Create a unique index on the virtual columns\nCREATE UNIQUE INDEX LIST_ITEM_ENTRY_NO_UNIQ \nON LIST_ITEM(VIRTUAL_LIST_KEY, VIRTUAL_ENTRY_NO);