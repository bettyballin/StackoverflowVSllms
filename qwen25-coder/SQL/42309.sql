-- Sample source table\nCREATE TABLE SalesData (\n    ProductID INT,\n    SaleDate DATE,\n    Amount DECIMAL(10, 2)\n);\n\nINSERT INTO SalesData (ProductID, SaleDate, Amount) VALUES\n(1, '2023-01-01', 100.00),\n(1, '2023-02-01', 150.00),\n(1, '2023-03-01', 200.00);\n\n-- Update statement using a CTE\nWITH PivotData AS (\n    SELECT ProductID,\n           [2023-01-01] AS Jan2023,\n           [2023-02-01] AS Feb2023,\n           [2023-03-01] AS Mar2023\n    FROM SalesData\n    PIVOT (\n        SUM(Amount) FOR SaleDate IN ([2023-01-01], [2023-02-01], [2023-03-01])\n    ) AS PivotTable\n)\n\n-- Now, to perform an update and propagate it back to the source table:\nUPDATE SalesData\nSET Amount = CASE SaleDate\n               WHEN '2023-01-01' THEN (SELECT Jan2023 FROM PivotData WHERE ProductID = SalesData.ProductID)\n               WHEN '2023-02-01' THEN (SELECT Feb2023 FROM PivotData WHERE ProductID = SalesData.ProductID)\n               WHEN '2023-03-01' THEN (SELECT Mar2023 FROM PivotData WHERE ProductID = SalesData.ProductID)\n             END\nWHERE SaleDate IN ('2023-01-01', '2023-02-01', '2023-03-01');