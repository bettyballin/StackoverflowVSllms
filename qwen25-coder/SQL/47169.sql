CREATE TABLE t (\n    id SERIAL PRIMARY KEY,\n    a INTEGER NOT NULL,\n    b INTEGER NOT NULL,\n    UNIQUE LEAST(a, b), -- Ensures at least one of the values is unique when paired\n    CHECK (a <> b) -- Prevents both fields from having the same value\n);\n\n-- Trigger function to ensure uniqueness in any order\nCREATE OR REPLACE FUNCTION ensure_unique_pair()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF EXISTS (\n        SELECT 1 FROM t WHERE LEAST(a, NEW.a) = LEAST(NEW.b, b) AND GREATEST(a, NEW.a) = GREATEST(NEW.b, NEW.b)\n    ) THEN\n        RAISE EXCEPTION 'Duplicate pair detected';\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Trigger to call the function before insert or update\nCREATE TRIGGER unique_pair_trigger\nBEFORE INSERT OR UPDATE ON t\nFOR EACH ROW EXECUTE FUNCTION ensure_unique_pair();