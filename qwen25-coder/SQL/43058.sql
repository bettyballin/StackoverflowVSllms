-- Step 1: Create or Recreate the stored procedure dynamically if necessary\nEXEC (N'CREATE OR ALTER PROCEDURE MyDynamicallyGeneratedStoredProcedure AS ...');\n\n-- Step 2: Execute the stored procedure that creates and populates ##temptable\nEXEC (N'MyDynamicallyGeneratedStoredProcedure');\nSELECT @errCode = @@ERROR;\n\nIF (@errCode = 0)\nBEGIN\n    -- Ensure that the global temp table exists before calling the CLR Stored Procedure\n    IF OBJECT_ID('tempdb..##temptable') IS NOT NULL\n    BEGIN\n        EXEC 'YourCLRStoredProcBasedOn##temptable', @returnValue;\n    ELSE\n    BEGIN\n        RAISERROR ('Global temp table ##temptable not found.', 16, 1);\n    END\nEND\nELSE\nBEGIN\n    RAISERROR ('Failed to execute MyDynamicallyGeneratedStoredProcedure', 16, 1);\nEND