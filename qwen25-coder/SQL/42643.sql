DECLARE @lid NVARCHAR(MAX) = '33'; -- Example input, set this as needed\nDECLARE @sql NVARCHAR(MAX);\n\nIF @lid IS NULL OR @lid = ''\nBEGIN\n    SET @sql = N'SELECT TOP 20 application_id, [name], location_id FROM apps';\nEND\nELSE\nBEGIN\n    -- Use STRING_SPLIT to handle the comma-separated list\n    SET @sql = N'\n        SELECT TOP 20 application_id, [name], location_id \n        FROM apps \n        WHERE location_id IN (\n            SELECT value \n            FROM STRING_SPLIT(@lid, '','')\n        )\n    ';\nEND\n\nEXEC sp_executesql @sql, N'@lid NVARCHAR(MAX)', @lid;