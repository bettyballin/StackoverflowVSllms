-- Create a temporary table if possible, storing pre-processed data\nCREATE TEMPORARY TABLE IF NOT EXISTS temp_games AS\nSELECT game,\n       MID(game,{$len},1) AS move,\n       win,\n       loss\nFROM games\nWHERE game > {$something} AND game < {$something_else};\n\n-- Analyze the temporary table to help MySQL's optimizer\nANALYZE TABLE temp_games;\n\n-- Run your query on the smaller temporary dataset\nSELECT move,\n       COUNT(*) AS games,\n       SUM(win) AS wins,\n       SUM(loss) AS losses\nFROM temp_games\nGROUP BY move;