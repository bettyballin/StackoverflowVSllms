CREATE TABLE mytable (\n  table_identifier_a INTEGER,\n  table_identifier_b INTEGER,\n  table_value1 TEXT -- or whatever the appropriate type for your value1 is\n);\n\n-- This creates a unique constraint only on rows where table_identifier_a is not null\nCREATE UNIQUE INDEX idx_unique_table_identifier_a_value1 \nON mytable (table_identifier_a, table_value1)\nWHERE table_identifier_a IS NOT NULL;