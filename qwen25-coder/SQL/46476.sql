CREATE FUNCTION dbo.SplitToIntList (@inputString NVARCHAR(MAX))\nRETURNS @intList TABLE (ID INT)\nAS\nBEGIN\n    DECLARE @Pos INT\n    DECLARE @NextPos INT\n    DECLARE @Value NVARCHAR(100)\n\n    SET @Pos = 0\n\n    WHILE SUBSTRING(@InputString, @Pos+1, 1) <> ''\n    BEGIN\n        SET @NextPos = CHARINDEX(',', @inputString, @Pos + 1)\n        IF @NextPos = 0 \n            SET @NextPos = LEN(@inputString) + 1\n\n        SET @Value = SUBSTRING(@InputString, @Pos+1, @NextPos-@Pos-1)\n\n        INSERT INTO @intList\n        VALUES (CAST(@Value AS INT))\n\n        SET @Pos = @NextPos\n    END\n\n    RETURN\nEND