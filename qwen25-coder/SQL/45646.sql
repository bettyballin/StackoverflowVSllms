CREATE TRIGGER t1_insert_trg ON t1 FOR INSERT AS\nBEGIN\n    -- Declare a table variable to hold the data from inserted rows along with new IDs\n    DECLARE @NewRows TABLE (id INT, foo INT)\n\n    -- Insert into t2 and capture the IDs in the table variable\n    INSERT INTO t2 (foo)\n    OUTPUT inserted.id, inserted.foo INTO @NewRows (id, foo)\n    SELECT foo FROM inserted\n\n    -- Use the captured IDs to insert into t3\n    INSERT INTO t3 (t2_id)\n    SELECT id FROM @NewRows\nEND