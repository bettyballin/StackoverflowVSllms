SELECT \n  a.*, \n  mo.Model, \n  mo.MakeID, \n  ma.Make, \n  at.AutoType,\n  GROUP_CONCAT(\n    CONCAT('<Note>',\n            '<ID>', n.ID, '</ID>', \n            '<NoteTypeID>', n.NoteTypeID, '</NoteTypeID>', \n            '<Text001><![CDATA[', n.Text001, ']]></Text001>',\n            '<Value><![CDATA[', nl.Value, ']]></Value>',\n          '</Note>') SEPARATOR '') AS UserNotes,\n  GROUP_CONCAT(\n    CONCAT('<EngineeringNote>',\n            '<ID>', en.ID, '</ID>', \n            '<NoteTypeID>', en.NoteTypeID, '</NoteTypeID>', \n            '<Text001><![CDATA[', en.Text001, ']]></Text001>',\n            '<Value><![CDATA[', enl.Value, ']]></Value>',\n          '</EngineeringNote>') SEPARATOR '') AS EngineeringNotes\nFROM dbo.Autos a\nLEFT JOIN dbo.AutoModels mo ON (a.ModelID = mo.ID)\nLEFT JOIN dbo.AutoMakes ma ON (mo.MakeID = ma.ID)\nLEFT JOIN dbo.AutoTypes at ON (a.AutoTypeID = at.ID)\nLEFT JOIN dbo.Notes n \n  INNER JOIN dbo.NoteLinks nl ON (n.ID = nl.NoteID) \nON a.ID = nl.AutoID AND n.NoteTypeID = 1\nLEFT JOIN dbo.Notes en \n  INNER JOIN dbo.NoteLinks enl ON (en.ID = enl.NoteID) \nON a.ID = enl.AutoID AND en.NoteTypeID = 2\nGROUP BY a.ID, mo.Model, mo.MakeID, ma.Make, at.AutoType;