CREATE PROCEDURE InsertCarAndWheels\n    @CarName NVARCHAR(100),\n    @NumberOfWheels INT,\n    @WheelType NVARCHAR(50)\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    -- Declare a variable to hold the new CarID after inserting into Cars\n    DECLARE @NewCarID INT;\n\n    BEGIN TRANSACTION;\n    \n    BEGIN TRY\n        -- Insert car and get its ID\n        INSERT INTO Cars (Name) VALUES (@CarName);\n        SET @NewCarID = SCOPE_IDENTITY();\n\n        -- Insert wheels\n        DECLARE @i INT = 1;\n        WHILE @i <= @NumberOfWheels\n        BEGIN\n            INSERT INTO Wheels (CarId, Type) VALUES (@NewCarID, @WheelType);\n            SET @i = @i + 1;\n        END\n\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        ROLLBACK TRANSACTION;\n        THROW; -- rethrow the caught error\n    END CATCH\nEND