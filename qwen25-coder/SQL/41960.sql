DECLARE @MaxLength INT;\nSELECT @MaxLength = MAX(LEN(EmailAddress)) FROM Contact;\n\nIF @MaxLength + 2 > (SELECT CHARACTER_MAXIMUM_LENGTH \n                     FROM INFORMATION_SCHEMA.COLUMNS \n                     WHERE TABLE_NAME = 'Contact' AND COLUMN_NAME = 'EmailAddress')\nBEGIN\n    UPDATE Contact SET EmailAddress = LEFT(EmailAddress, CHARACTER_MAXIMUM_LENGTH - 3) + '.x';\nEND\nELSE\nBEGIN\n    UPDATE Contact SET EmailAddress = EmailAddress + '.x';\nEND