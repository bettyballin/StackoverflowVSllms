USE [TEST]\nGO\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\n\nALTER PROCEDURE [dbo].[sptInsertNewManager]\n    -- Add the parameters for the stored procedure here\n    @FName varchar(50),\n    @LName varchar(50),\n    @EMail varchar(100),   \n    @UserRoleID int,\n    @LANUserID varchar(25), \n    @GroupID int\nAS\nBEGIN\n    -- SET NOCOUNT ON added to prevent extra result sets from\n    -- interfering with SELECT statements.\n    SET NOCOUNT ON;\n\n    DECLARE @NewManagerId INT\n\n    -- Insert statements for procedure here\n    INSERT INTO [Manager]           \n           ([FName], \n            [LName],\n            [Email], \n            [UserRoleID],\n            [LANUserID],          \n            [ActiveFlag],\n            [GroupID]\n    )\n     VALUES\n            (@FName,\n             @LName,\n             @EMail,\n             @UserRoleID,\n             @LANUserID,\n             1, \n             @GroupID);\n\n    -- Retrieve the auto-generated ManagerId using SCOPE_IDENTITY()\n    SET @NewManagerId = SCOPE_IDENTITY()\n\n    -- Insert into Users table using the retrieved ManagerId\n    INSERT INTO [dbo].[aspnet_Users] (\n        [UserId],\n        [UserName],\n        [LoweredUserName],\n        [ManagerId]\n    )\n    VALUES (\n        NEWID(),\n        @LANUserID,\n        LOWER(@LANUserID),\n        @NewManagerId\n    )\n\nCOMMIT TRANSACTION\nEND