CREATE PROCEDURE GetNonSystemDatabases (@servername NVARCHAR(128))\nAS\nBEGIN\n    DECLARE @sql NVARCHAR(MAX);\n\n    SET @sql = N'\n        SELECT name \n        FROM ' + QUOTENAME(@servername) + '.master.sys.databases\n        WHERE name NOT LIKE ''master''\n          AND name NOT LIKE ''tempdb''\n          AND name NOT LIKE ''msdb''\n          AND name NOT LIKE ''model''\n          AND name NOT LIKE ''Admin''\n    ';\n\n    EXEC sp_executesql @sql;\nEND\nGO