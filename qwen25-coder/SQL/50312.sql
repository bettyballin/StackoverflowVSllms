DECLARE\n  l_error_count NUMBER := 0;\n  l_constraint_name VARCHAR2(100);\nBEGIN\n  SET CONSTRAINTS ALL DEFERRED;\n\n  -- Your delete/insert operations here\n\n  COMMIT;\nEXCEPTION\n  WHEN OTHERS THEN\n    DBMS_OUTPUT.PUT_LINE('Error occurred: ' || SQLERRM);\n\n    FOR rec IN (SELECT uc.constraint_name, ucc.column_name\n                FROM user_constraints uc\n                JOIN user_cons_columns ucc ON uc.constraint_name = ucc.constraint_name\n                WHERE uc.constraint_type = 'R'\n                  AND uc.constraint_name = SQLERRM\n                ORDER BY uc.constraint_name) LOOP\n      l_constraint_name := rec.constraint_name;\n      DBMS_OUTPUT.PUT_LINE('Foreign Key constraint violated: ' || rec.constraint_name);\n      l_error_count := l_error_count + 1;\n\n      -- Optionally, break after logging the first one to rerun the transaction\n      EXIT WHEN l_error_count = 1;\n    END LOOP;\n\n    ROLLBACK;\n\n    IF l_error_count > 0 THEN\n      RAISE_APPLICATION_ERROR(-20001, 'Foreign key constraint violation. Please resolve and retry.');\n    ELSE\n      RAISE;\n    END IF;\nEND;\n/