DELIMITER //\n\n   CREATE TRIGGER after_items_update AFTER UPDATE ON items\n   FOR EACH ROW \n   BEGIN\n       IF NEW.num != OLD.num THEN\n           INSERT IGNORE INTO update_queue (num) VALUES (OLD.num); -- Handle old parent if moved.\n       END IF;\n       INSERT IGNORE INTO update_queue (num) VALUES (NEW.num); -- Handle updated node.\n   END;//\n\n   CREATE TRIGGER after_tree_update AFTER UPDATE ON tree\n   FOR EACH ROW \n   BEGIN\n       INSERT IGNORE INTO update_queue (num) VALUES (OLD.orig); -- Handle old parent if moved.\n       INSERT IGNORE INTO update_queue (num) VALUES (NEW.orig); -- Handle new parent.\n   END;//\n\n   DELIMITER ;