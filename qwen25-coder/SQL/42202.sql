DELIMITER //\n\nCREATE PROCEDURE UpdateOrInsertValue(IN searchString VARCHAR(255), IN otherKeyValue INT, IN newValue DECIMAL(10,3))\nBEGIN\n    DECLARE strKeyId INT;\n\n    SELECT str_key INTO strKeyId FROM StrTable WHERE string = searchString LIMIT 1;\n    \n    IF strKeyId IS NOT NULL THEN\n        UPDATE ValTable SET val = newValue \n        WHERE str_key = strKeyId AND other_key = otherKeyValue;\n        \n        IF ROW_COUNT() = 0 THEN\n            INSERT INTO ValTable (str_key, other_key, val) VALUES (strKeyId, otherKeyValue, newValue);\n        END IF;\n    ELSE\n        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'String not found in StrTable';\n    END IF;\nEND //\n\nDELIMITER ;