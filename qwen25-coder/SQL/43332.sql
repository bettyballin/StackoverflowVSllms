DECLARE @locationIds NVARCHAR(MAX) = '2,3,4,5';  -- Example location IDs as a comma-separated string\nDECLARE @applicationId INT = 1;  -- Example application ID\n\nSELECT DISTINCT a.name, a.location_id, a.application_id \nFROM apps a\nJOIN dbo.iter$simple_intlist_to_tbl(@locationIds) AS loc ON a.location_id = loc.number\nWHERE (a.application_id IS NULL OR a.application_id = @applicationId);