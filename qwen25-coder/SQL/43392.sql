CREATE OR REPLACE FUNCTION split(in_list VARCHAR(500))\nRETURNS TABLE(ID BIGINT)\nLANGUAGE SQL\nBEGIN ATOMIC\n    DECLARE next_item VARCHAR(10);\n    DECLARE pos INT DEFAULT 1;\n    DECLARE len INT DEFAULT LENGTH(in_list);\n\n    WHILE pos < len DO\n        SET next_item = SUBSTR(SUBSTR(in_list, pos), \n                                1, \n                                NULLIF(LOCATE(',', in_list, pos) - pos, 0)\n                                OR LENGTH(in_list) + 1 - pos);\n        INSERT INTO session.context_table(ID) VALUES(next_item);\n        IF LOCATE(',', in_list, pos) > 0 THEN\n            SET pos = LOCATE(',', in_list, pos) + 1;\n        ELSE \n            SET pos = len + 1;\n        END IF;\n    END WHILE;\n\n    RETURN TABLE(\n        SELECT ID FROM session.context_table\n    );\nEND@\n\nCREATE OR REPLACE PROCEDURE get_prices(in_customer_ids VARCHAR(500))\nBEGIN\n    DECLARE stmt VARCHAR(4000);\n\n    SET stmt = '\n        SELECT * \n        FROM prices \n        WHERE customer IN (\n            SELECT ID \n            FROM TABLE(split(''' || in_customer_ids || '''))\n        )';\n\n    PREPARE s1 FROM stmt;\n    EXECUTE s1;\n\n    DEALLOCATE PREPARE s1;\nEND@