BEGIN TRANSACTION;\n\nBEGIN TRY\n    -- Update rows and capture the PKs of the updated rows\n    UPDATE Table1 \n    SET AlertDate = GETUTCDATE() \n    OUTPUT INSERTED.Id -- Capture the primary keys of the updated rows\n    WHERE AlertDate IS NULL;\n    \n    COMMIT TRANSACTION;\nEND TRY\nBEGIN CATCH\n    ROLLBACK TRANSACTION;\n    -- Optionally, handle the error here, for example logging or rethrowing it.\n    THROW;  \nEND CATCH;