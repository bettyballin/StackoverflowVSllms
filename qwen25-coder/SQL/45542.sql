USE YourDatabaseName;\nGO\n\n-- Drop all views associated with Diagrams\nDECLARE @view_name NVARCHAR(128);\nDECLARE view_cursor CURSOR FOR \nSELECT name FROM sys.views WHERE is_ms_shipped = 0 AND SCHEMA_NAME(schema_id) = 'dbo' AND OBJECTPROPERTY(object_id, N'IsDatabaseDiagram') = 1;\n\nOPEN view_cursor;\nFETCH NEXT FROM view_cursor INTO @view_name;\nWHILE @@FETCH_STATUS = 0\nBEGIN\n    EXEC('DROP VIEW [' + @view_name + ']');\n    FETCH NEXT FROM view_cursor INTO @view_name;\nEND;\nCLOSE view_cursor;\nDEALLOCATE view_cursor;\n\n-- Drop diagrams table if it exists\nIF OBJECT_ID(N'dbo.sysdiagrams', N'U') IS NOT NULL \n   DROP TABLE dbo.sysdiagrams;\n\n-- Remove orphaned extended properties related to the Database Diagrams\nEXEC sp_MSdropcolumnextendedproperty \n    @name=N'MS_Persist_Schemainfo',\n    @level0type=N'SCHEMA',@level0name=N'dbo',\n    @level1type=N'TABLE',@level1name=N'sysdiagrams';\n\n-- Remove diagram extended properties if any\nDECLARE @object_id INT;\nDECLARE object_cursor CURSOR FOR \nSELECT major_id FROM sys.extended_properties WHERE minor_id = 0 AND name LIKE N'MS_DiagramPane[0-9]';\n\nOPEN object_cursor;\nFETCH NEXT FROM object_cursor INTO @object_id;\nWHILE @@FETCH_STATUS = 0\nBEGIN\n    EXEC sp_dropextendedproperty \n        @name=N'MS_Description',\n        @level0type=N'SCHEMA',@level0name=N'dbo',\n        @level1type=N'TABLE',@level1name=N'sysdiagrams',\n        @level2type=N'COLUMN',@level2name=COLUMN_NAME\n    FROM sys.columns WHERE object_id = @object_id;\n\n    EXEC sp_dropextendedproperty \n        @name=N'MS_DiagramPaneCount',\n        @level0type=N'SCHEMA',@level0name=N'dbo',\n        @level1type=N'TABLE',@level1name=N'sysdiagrams';\n\n    FETCH NEXT FROM object_cursor INTO @object_id;\nEND;\nCLOSE object_cursor;\nDEALLOCATE object_cursor;