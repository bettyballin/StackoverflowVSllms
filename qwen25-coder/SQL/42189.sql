CREATE OR REPLACE FUNCTION check_unique_non_deleted_name()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Check if there is another row with the same name and not deleted.\n    IF EXISTS (\n        SELECT 1 FROM your_table \n        WHERE name = NEW.name AND id <> NEW.id AND deleted = 0\n    ) THEN\n        RAISE EXCEPTION 'A non-deleted item with this name already exists';\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trigger_check_unique_non_deleted_name\nBEFORE INSERT OR UPDATE ON your_table\nFOR EACH ROW EXECUTE FUNCTION check_unique_non_deleted_name();