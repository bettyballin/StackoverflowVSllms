SELECT \n    users.id,\n    SUM(CASE WHEN photos.id IS NOT NULL THEN 1 ELSE 0 END) AS n_photo,\n    SUM(CASE WHEN classifications.id IS NOT NULL THEN 1 ELSE 0 END) AS n_classifications,\n    (SUM(CASE WHEN photos.id IS NOT NULL THEN 1 ELSE 0 END) + \n     SUM(CASE WHEN classifications.id IS NOT NULL THEN 1 ELSE 0 END)) AS n_sum\nFROM \n    users\nLEFT JOIN \n    photos ON photos.user_id = users.id\nLEFT JOIN \n    classifications ON classifications.user_id = users.id\nGROUP BY \n    users.id\nORDER BY \n    n_sum DESC;