-- Step 1: Disable the foreign key constraint\nALTER TABLE TableA NOCHECK CONSTRAINT FK_TableA_TableB;\nALTER TABLE TableB NOCHECK CONSTRAINT FK_TableB_TableA;\n\nBEGIN TRANSACTION;\n\nBEGIN TRY\n    -- Insert records into both tables\n    INSERT INTO TableA (Column1, Column2) VALUES ('Value1', 'Value2');\n    DECLARE @ID INT = SCOPE_IDENTITY();\n\n    INSERT INTO TableB (ColumnX, ForeignKeyToTableA) VALUES ('ValueX', @ID);\n    \n    COMMIT TRANSACTION;\nEND TRY\nBEGIN CATCH\n    ROLLBACK TRANSACTION;\n    -- Handle the error\n    THROW;\nEND CATCH;\n\n-- Step 3: Re-enable the foreign key constraint\nALTER TABLE TableA CHECK CONSTRAINT FK_TableA_TableB;\nALTER TABLE TableB CHECK CONSTRAINT FK_TableB_TableA;