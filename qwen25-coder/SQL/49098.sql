-- Step 1: Identify and consolidate duplicates\n-- First, find all the duplicates based on the 'name' column\nSELECT name, MIN(id) AS min_id, SUM(count) AS total_count\nINTO TEMPORARY TABLE temp_unique_names\nFROM your_table_name\nGROUP BY name\nHAVING COUNT(name) > 1;\n\n-- Step 2: Update the main table with consolidated counts\n-- For each duplicate group, update the entry with the smallest id with the summed count\nUPDATE your_table_name utn\nJOIN temp_unique_names tun ON utn.id = tun.min_id\nSET utn.count = tun.total_count;\n\n-- Step 3: Update foreign key references in other tables\n-- Replace 'other_table_name' and 'name_column_referring_to_your_table'\n-- with the actual table name and column name that references your table's id.\nUPDATE other_table_name otn\nJOIN temp_unique_names tun ON otn.name_column_referring_to_your_table = tun.id\nSET otn.name_column_referring_to_your_table = tun.min_id;\n\n-- Step 4: Delete duplicate entries from the main table\nDELETE utn FROM your_table_name utn\nJOIN (\n    SELECT id\n    FROM your_table_name\n    WHERE name IN (SELECT name FROM temp_unique_names)\n    AND id NOT IN (SELECT min_id FROM temp_unique_names)\n) dup ON utn.id = dup.id;\n\n-- Step 5: Drop the temporary table\nDROP TEMPORARY TABLE IF EXISTS temp_unique_names;