<configuration>\n  <system.web>\n    <authentication mode="Forms">\n      <forms loginUrl="Default.aspx" timeout="30" />\n    </authentication>\n    <authorization>\n      <deny users="?" /> <!-- Deny unauthenticated users access to the entire site -->\n    </authorization>\n  </system.web>\n\n  <location path="Login.aspx">\n    <system.web>\n      <authorization>\n        <allow users="*" /> <!-- Allow all users (including anonymous) to access login page -->\n      </authorization>\n      <httpRuntime requireRootedDataRequests="true" />\n      <compilation debug="true" targetFramework="4.7" />\n      <httpModules>\n        <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" />\n        <add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" />\n        <add name="RoleManager" type="System.Web.Security.RoleManagerModule" />\n        <add name="WindowsAuthentication" type="System.Web.Security.WindowsAuthenticationModule" />\n      </httpModules>\n    </system.web>\n  </location>\n\n  <!-- Secure all other pages after login -->\n  <location path=".">\n    <system.webServer>\n      <security>\n        <access sslFlags="SslNegotiateCert,SslRequireCert" />\n      </security>\n    </system.webServer>\n    <system.web>\n      <httpRuntime requireRootedDataRequests="true" />\n      <authorization>\n        <deny users="?" /> <!-- Deny unauthenticated users access -->\n      </authorization>\n      <compilation debug="true" targetFramework="4.7" />\n      <httpModules>\n        <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" />\n        <add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" />\n        <add name="RoleManager" type="System.Web.Security.RoleManagerModule" />\n        <add name="WindowsAuthentication" type="System.Web.Security.WindowsAuthenticationModule" />\n      </httpModules>\n    </system.web>\n  </location>\n\n  <!-- Secure login postback action if necessary -->\n  <location path="Default.aspx">\n    <system.webServer>\n      <security>\n        <access sslFlags="Ssl,SslNegotiateCert,SslRequireCert" />\n      </security>\n    </system.webServer>\n    <system.web>\n      <httpRuntime requireRootedDataRequests="true" />\n      <authorization>\n        <allow users="*" /> <!-- Allow postback from login page -->\n      </authorization>\n      <compilation debug="true" targetFramework="4.7" />\n      <httpModules>\n        <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" />\n        <add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" />\n        <add name="RoleManager" type="System.Web.Security.RoleManagerModule" />\n        <add name="WindowsAuthentication" type="System.Web.Security.WindowsAuthenticationModule" />\n      </httpModules>\n    </system.web>\n  </location>\n\n</configuration>