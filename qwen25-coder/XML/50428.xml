<system.serviceModel>\n  <services>\n    <service name="YourNamespace.YourService">\n      <endpoint address="" \n                binding="ws2007FederationHttpBinding" \n                contract="YourNamespace.IYourService"\n                bindingConfiguration="secureFedMex">\n        <identity>\n          <certificateReference findValue="your_thumbprint_here" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint"/>\n        </identity>\n      </endpoint>\n    </service>\n  </services>\n  <bindings>\n    <ws2007FederationHttpBinding>\n      <binding name="secureFedMex">\n        <message>\n          <!-- Specify the address and binding configuration of your STS -->\n          <issuer address="https://your.sts.domain/adfs/services/trust/13/usernamemixed" \n                  binding="ws2007HttpBinding"\n                  bindingConfiguration="STSBinding"/>\n          <issuerMetadata address="https://your.sts.domain/FederationMetadata/2007-06/FederationMetadata.xml"\n          />\n        </message>\n      </binding>\n    </ws2007FederationHttpBinding>\n    <ws2007HttpBinding>\n      <binding name="STSBinding">\n        <security mode="TransportWithMessageCredential"/>\n      </binding>\n    </ws2007HttpBinding>\n  </bindings>\n</system.serviceModel>