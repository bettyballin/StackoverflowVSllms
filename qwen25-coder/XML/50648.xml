<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">\n  <!-- Define properties for paths and configurations -->\n  <PropertyGroup>\n    <Configuration>Release</Configuration>\n    <OutputPath>..\Publish\</OutputPath>\n    <LibraryProject>CSharpLibrary\CSharpLibrary.csproj</LibraryProject>\n    <WebSiteA>.</WebSiteA>\n    <WebSiteB>WebSiteB\</WebSiteB>\n  </PropertyGroup>\n\n  <!-- Define the main target -->\n  <Target Name="BuildAndPublishAll">\n    <CallTarget Targets="BuildLibrary" />\n    <CallTarget Targets="PublishWebSiteA" />\n    <CallTarget Targets="PublishWebSiteB" />\n  </Target>\n\n  <!-- Build the library project -->\n  <Target Name="BuildLibrary">\n    <MSBuild Projects="$(LibraryProject)" Properties="Configuration=$(Configuration);OutputPath=$(OutputPath)Library\" />\n  </Target>\n\n  <!-- Publish Web Site A -->\n  <Target Name="PublishWebSiteA">\n    <AspNetCompiler PhysicalPath="$(WebSiteA)" TargetPath="$(OutputPath)WebSiteA" Force="true" Updateable="false" Debug="false" FixedNames="true" />\n  </Target>\n\n  <!-- Publish Web Site B -->\n  <Target Name="PublishWebSiteB">\n    <AspNetCompiler PhysicalPath="$(WebSiteB)" VirtualPath="/WebSiteB" TargetPath="$(OutputPath)WebSiteB" Force="true" Updateable="false" Debug="false" FixedNames="true" />\n  </Target>\n</Project>