<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\n    version="1.0">\n\n    <!-- Key for grouping titles by their first letter -->\n    <xsl:key name="titles-by-letter" match="/databases/database/title_display" use="substring(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 1, 1)"/>\n\n    <xsl:template match="/">\n        <html>\n            <body>\n                <!-- Process each unique letter -->\n                <xsl:for-each select="/databases/database/title_display[generate-id() = generate-id(key('titles-by-letter', substring(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 1, 1))[1])]">\n                    <!-- Determine the first letter for grouping -->\n                    <xsl:variable name="letter" select="substring(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 1, 1)"/>\n\n                    <!-- Output the header and div -->\n                    <h2>\n                        <xsl:value-of select="uppercase($letter)"/>\n                    </h2>\n                    <div class="{lowercase($letter)}-content">\n                        <ul>\n                            <!-- Process each title that matches this letter key -->\n                            <xsl:for-each select="key('titles-by-letter', $letter)">\n                                <li>\n                                    <xsl:value-of select="."/>\n                                </li>\n                            </xsl:for-each>\n                        </ul>\n                    </div>\n                </xsl:for-each>\n            </body>\n        </html>\n    </xsl:template>\n\n</xsl:stylesheet>