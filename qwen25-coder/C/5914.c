#include <SystemConfiguration/SystemConfiguration.h>\n#include <unistd.h>\n#include <stdio.h>\n#include <stdlib.h>\n\nuid_t getLoggedInUserID() {\n    SCDynamicStoreRef store = SCDynamicStoreCreate(NULL, CFSTR("GetActiveUser"), NULL, NULL);\n    if (!store) return -1;\n\n    CFDictionaryRef dict = SCDynamicStoreCopyValue(store, kSCDynamicStoreDomainState, kSCEntNetDNS);\n    CFRelease(store);\n\n    if (dict) {\n        CFStringRef consoleOwnerStr = SCPreferencesGetValue(dict, kSCPrefSystemAnyUser);\n        if (consoleOwnerStr && CFGetTypeID(consoleOwnerStr) == CFStringGetTypeID()) {\n            char buffer[256];\n            if (CFStringGetCString(consoleOwnerStr, buffer, sizeof(buffer), kCFStringEncodingUTF8)) {\n                return atoi(buffer);\n            }\n        }\n        CFRelease(dict);\n    }\n\n    // Fallback method checking /dev/console owner\n    struct stat st;\n    if (stat("/dev/console", &st) == 0) {\n        return st.st_uid;\n    }\n\n    return -1; // Error in getting user ID\n}\n\nint main() {\n    uid_t userId = getLoggedInUserID();\n    if (userId != -1) {\n        printf("Logged-in user UID: %d\n", userId);\n    } else {\n        fprintf(stderr, "Failed to determine logged-in user.\n");\n    }\n    return 0;\n}