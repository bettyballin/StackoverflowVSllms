#include <stdio.h>\n#include <stdlib.h>\n\n// Define the event structure (you need to define it properly)\nstruct event {\n    int type;\n};\n\n/* Is the actual function pointer? */\ntypedef void (*event_cb_t)(const struct event *evt, void *user_data);\n\nstruct event_cb\n{\n    event_cb_t cb;\n    void *data;\n};\n\nstatic struct event_cb registered_callback;\n\n// Registering the callback (storing it in a global/static variable)\nint event_cb_register(event_cb_t cb, void *user_data) {\n    registered_callback.cb = cb;\n    registered_callback.data = user_data;\n    return 0; // or some error code\n}\n\nstatic void my_event_cb(const struct event *evt, void *data) {\n    /* do some stuff */\n    printf("Event received: %d\n", evt->type);\n}\n\nint main(void) {\n    int my_custom_data = 42;\n\n    // Registering the callback with user data\n    if (event_cb_register(my_event_cb, &my_custom_data)) {\n        fprintf(stderr, "Failed to register callback.\n");\n        return EXIT_FAILURE;\n    }\n\n    // Simulating an event\n    struct event evt = { .type = 1 }; \n\n    // Calling the registered callback\n    registered_callback.cb(&evt, registered_callback.data);\n\n    return 0;\n}