#include "hdf5.h"\n\nint main() {\n    hid_t file_id = H5Fopen("example.h5", H5F_ACC_RDWR, H5P_DEFAULT);\n    if (file_id < 0) {\n        fprintf(stderr, "Failed to open HDF5 file.\n");\n        return -1;\n    }\n\n    // Open the dataset\n    hid_t dset_id = H5Dopen2(file_id, "/dataset_name", H5P_DEFAULT);\n    if (dset_id < 0) {\n        fprintf(stderr, "Failed to open dataset.\n");\n        H5Fclose(file_id);\n        return -1;\n    }\n\n    // Open the dataspace\n    hid_t space_id = H5Dget_space(dset_id);\n    if (space_id < 0) {\n        fprintf(stderr, "Failed to get dataspace.\n");\n        H5Dclose(dset_id);\n        H5Fclose(file_id);\n        return -1;\n    }\n\n    // Allocate memory for the new data\n    int new_data[] = {42, 43, 44}; // Example new data\n    hsize_t dims_out[1];\n    H5Sget_simple_extent_dims(space_id, dims_out, NULL);\n\n    // Check if the dataset can be updated in place or needs resizing\n    if (dims_out[0] == sizeof(new_data) / sizeof(new_data[0])) {\n        // Write new data to the existing dataset\n        herr_t status = H5Dwrite(dset_id, H5T_NATIVE_INT, H5S_ALL, H5S_ALL, H5P_DEFAULT, new_data);\n        if (status < 0) {\n            fprintf(stderr, "Failed to write new data.\n");\n            H5Sclose(space_id);\n            H5Dclose(dset_id);\n            H5Fclose(file_id);\n            return -1;\n        }\n    } else {\n        // Resize dataset and then write new data\n        herr_t status = H5Dset_extent(dset_id, (hsize_t[]){sizeof(new_data) / sizeof(new_data[0])});\n        if (status < 0) {\n            fprintf(stderr, "Failed to resize dataset.\n");\n            H5Sclose(space_id);\n            H5Dclose(dset_id);\n            H5Fclose(file_id);\n            return -1;\n        }\n        status = H5Dwrite(dset_id, H5T_NATIVE_INT, H5S_ALL, H5S_ALL, H5P_DEFAULT, new_data);\n        if (status < 0) {\n            fprintf(stderr, "Failed to write new data after resizing.\n");\n            H5Sclose(space_id);\n            H5Dclose(dset_id);\n            H5Fclose(file_id);\n            return -1;\n        }\n    }\n\n    // Close resources\n    H5Sclose(space_id);\n    H5Dclose(dset_id);\n    H5Fclose(file_id);\n\n    return 0;\n}