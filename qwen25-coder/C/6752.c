#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <time.h>\n\n#define KEY_PART_LENGTH 5\n#define NUM_KEY_PARTS 4\n#define CHECKSUM_LENGTH 1\n\nvoid generate_random_string(char *str, size_t length) {\n    const char charset[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";\n    while (length-- > 0) {\n        int key = rand() % (int) (sizeof(charset) - 1);\n        *str++ = charset[key];\n    }\n    *str = '\0';\n}\n\nchar calculate_checksum(const char *key) {\n    int sum = 0;\n    for (size_t i = 0; i < strlen(key); ++i) {\n        sum += key[i] * (i + 1);\n    }\n    return 'A' + (sum % 26);\n}\n\nvoid generate_key(char *product_key, size_t length) {\n    srand(time(NULL));\n    char temp[KEY_PART_LENGTH + 1];\n    int pos = 0;\n    \n    for (int i = 0; i < NUM_KEY_PARTS; ++i) {\n        generate_random_string(temp, KEY_PART_LENGTH);\n        strncpy(product_key + pos, temp, KEY_PART_LENGTH);\n        pos += KEY_PART_LENGTH;\n        \n        if (i != NUM_KEY_PARTS - 1) {\n            product_key[pos++] = '-';\n        }\n    }\n\n    // Calculate checksum\n    char checksum = calculate_checksum(product_key);\n\n    // Append the checksum to make it part of the final key\n    product_key[pos] = checksum;\n    product_key[pos+1] = '\0';\n}\n\nint validate_key(const char *product_key) {\n    size_t length = strlen(product_key);\n    if (length != NUM_KEY_PARTS * KEY_PART_LENGTH + NUM_KEY_PARTS - 1 + CHECKSUM_LENGTH) return 0;\n\n    char calculated_checksum = calculate_checksum(product_key);\n    return product_key[length - 1] == calculated_checksum;\n}\n\nint main() {\n    char product_key[KEY_PART_LENGTH * NUM_KEY_PARTS + NUM_KEY_PARTS];\n    \n    // Generate a new key\n    generate_key(product_key, sizeof(product_key));\n    printf("Generated Key: %s\n", product_key);\n\n    // Validate the generated key\n    if (validate_key(product_key)) {\n        printf("Key is valid.\n");\n    } else {\n        printf("Invalid Key!\n");\n    }\n\n    return 0;\n}