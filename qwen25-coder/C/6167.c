// Example in C, demonstrating serialization of a simple object in MessagePack format\n   #include <msgpack.h>\n\n   int main(void) {\n       msgpack_sbuffer* sbuf = msgpack_sbuffer_new();\n       msgpack_packer* pk = msgpack_packer_new(sbuf, msgpack_sbuffer_write);\n\n       // pack values\n       msgpack_pack_map(pk, 3);\n       msgpack_pack_str(pk, 4); msgpack_pack_str_body(pk, "name", 4);\n       msgpack_pack_str(pk, 8); msgpack_pack_str_body(pk, "John Doe", 8);\n\n       msgpack_pack_str(pk, 3); msgpack_pack_str_body(pk, "age", 3);\n       msgpack_pack_int(pk, 30);\n\n       msgpack_pack_str(pk, 4); msgpack_pack_str_body(pk, "city", 4);\n       msgpack_pack_str(pk, 8); msgpack_pack_str_body(pk, "New York", 8);\n\n       // now sbuf->data is the serialized data\n       char* buf = sbuf->data;\n       size_t len = sbuf->size;\n\n       // print to stdout\n       fwrite(buf, len, 1, stdout);\n\n       msgpack_packer_free(pk);\n       msgpack_sbuffer_free(sbuf);\n   }