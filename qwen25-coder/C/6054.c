#include <gtk/gtk.h>\n#include <glib.h>\n\nstatic gboolean autosave_enabled = TRUE;\nstatic guint save_timeout_id = 0;\n\nvoid on_pen_up(GtkWidget *widget, GdkEventButton *event, gpointer user_data) {\n    // Ensure the event is a button release (pen up)\n    if (event->type == GDK_BUTTON_RELEASE) {\n        // Schedule the save operation with a delay\n        save_timeout_id = g_timeout_add_seconds(1, (GSourceFunc)perform_autosave, widget);\n    }\n}\n\nvoid perform_autosave(gpointer user_data) {\n    GtkWidget *widget = GTK_WIDGET(user_data);\n\n    if (autosave_enabled) {\n        // Perform the autosave operation here\n        printf("Autosaving...\n");\n        // Call your existing save function here\n\n        // Reset the timeout ID since this instance has been processed\n        save_timeout_id = 0;\n    }\n\n    return G_SOURCE_REMOVE; // Do not call again\n}\n\nint main(int argc, char *argv[]) {\n    gtk_init(&argc, &argv);\n\n    GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    g_signal_connect(window, "destroy", G_CALLBACK(gtk_main_quit), NULL);\n\n    GtkWidget *drawing_area = gtk_drawing_area_new();\n    gtk_container_add(GTK_CONTAINER(window), drawing_area);\n\n    // Connect the pen up event\n    g_signal_connect(drawing_area, "button-release-event", G_CALLBACK(on_pen_up), NULL);\n\n    gtk_widget_show_all(window);\n    gtk_main();\n\n    return 0;\n}