setup_socket();\n\nwhile(1) {\n   listen();\n   newfile_descriptor = accept();\n   \n   while (1) { // Inner loop to handle multiple commands over one connection\n       int command;\n       ssize_t bytesRead = read(newfile_descriptor, &command, sizeof(int));\n       \n       if (bytesRead <= 0) { // If no bytes are read or an error occurs, break the inner loop\n           close(newfile_descriptor); // Close the connection\n           break;\n       }\n       \n       switch(command) {\n           case YOUR_COMMAND_CONSTANT:\n               // Handle command\n               break;\n           // Add more cases as needed\n           \n           default:\n               // Optionally handle unknown commands or send an error response\n               break;\n           \n           case END_CONNECTION_COMMAND: // Define a special command to end the connection\n               close(newfile_descriptor);\n               break;\n       }\n   }\n}