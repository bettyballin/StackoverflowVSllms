#include <stdio.h>\n#include <stdlib.h>\n#include <mpg123.h>\n\nvoid decode_mp3_to_pcm(const char *filename) {\n    mpg123_handle *mh;\n    unsigned char *buffer;\n    size_t buffer_size;\n    size_t done;\n    int err;\n\n    // Initialize MPG123\n    if ((err = mpg123_init()) != MPG123_OK) {\n        fprintf(stderr, "mpg123 initialization failed: %s\n", mpg123_plain_strerror(err));\n        exit(1);\n    }\n\n    // Create an mpg123 handle\n    mh = mpg123_new(NULL, &err);\n    if (mh == NULL) {\n        fprintf(stderr, "Couldn't create mpg123 handle: %s\n", mpg123_plain_strerror(err));\n        exit(1);\n    }\n\n    // Ensure we are decoding to PCM format\n    err = mpg123_format_none(mh); // Clear all existing formats\n    if (err != MPG123_OK) {\n        fprintf(stderr, "Problem with mpg123_format_none: %s\n", mpg123_strerror(mh));\n        exit(1);\n    }\n    err = mpg123_format(mh, 44100, MPG123_MONO|MPG123_STEREO, MPG123_ENC_SIGNED_16);\n    if (err != MPG123_OK) {\n        fprintf(stderr, "Problem with setting the format: %s\n", mpg123_strerror(mh));\n        exit(1);\n    }\n\n    // Load an MP3 file\n    if ((err = mpg123_open(mh, filename)) != MPG123_OK) {\n        fprintf(stderr, "mpg123 can't open file %s: %s\n", filename,  mpg123_strerror(mh));\n        exit(1);\n    }\n\n    // Get some information about the loaded audio\n    long num_channels, rate;\n    mpg123_getformat(mh, &rate, &num_channels, NULL);\n\n    printf("Sampling rate: %ld Hz\n", rate);\n    printf("Channels: %ld\n", num_channels);\n\n    // Decode and print to stdout (or save to a file)\n    buffer_size = 16*8192;\n    buffer = malloc(buffer_size * sizeof(unsigned char));\n    if (!buffer) {\n        fprintf(stderr, "Buffer allocation failed!\n");\n        exit(1);\n    }\n\n    while ((err = mpg123_read(mh, buffer, buffer_size, &done)) == MPG123_OK) {\n        fwrite(buffer, 1, done, stdout); // or write to a file\n    }\n    \n    if (err != MPG123_DONE && err != MPG123_OK) {\n        fprintf(stderr, "Decoding error: %s\n", mpg123_strerror(mh));\n        exit(1);\n    }\n\n    // Clean up\n    free(buffer);\n    mpg123_close(mh);\n    mpg123_delete(mh);\n    mpg123_exit();\n}\n\nint main(int argc, char *argv[]) {\n    if (argc != 2) {\n        fprintf(stderr, "Usage: %s <filename.mp3>\n", argv[0]);\n        return 1;\n    }\n    decode_mp3_to_pcm(argv[1]);\n    return 0;\n}