#include <stdio.h>\n#include <stdlib.h>\n#include <pthread.h>\n\n// Define a global variable X and a reader-writer lock\nint X = 0;\npthread_rwlock_t rwlock;\n\nvoid* reader(void* arg) {\n    pthread_rwlock_rdlock(&rwlock); // Acquire read lock\n    printf("Reader: X = %d\n", X);\n    pthread_rwlock_unlock(&rwlock); // Release read lock\n    return NULL;\n}\n\nvoid* writer(void* arg) {\n    int newValue = *(int*)arg;\n    pthread_rwlock_wrlock(&rwlock); // Acquire write lock\n    X = newValue;\n    printf("Writer: Updated X to %d\n", X);\n    pthread_rwlock_unlock(&rwlock); // Release write lock\n    return NULL;\n}\n\nint main() {\n    pthread_t readers[5], writers[3];\n    int writerValues[] = {10, 20, 30};\n\n    // Initialize the reader-writer lock\n    if (pthread_rwlock_init(&rwlock, NULL) != 0) {\n        perror("Reader-writer lock init failed");\n        exit(1);\n    }\n\n    // Create some reader and writer threads\n    for (int i = 0; i < 5; i++) {\n        pthread_create(&readers[i], NULL, reader, NULL);\n    }\n    for (int i = 0; i < 3; i++) {\n        pthread_create(&writers[i], NULL, writer, &writerValues[i]);\n    }\n\n    // Wait for all threads to finish\n    for (int i = 0; i < 5; i++) {\n        pthread_join(readers[i], NULL);\n    }\n    for (int i = 0; i < 3; i++) {\n        pthread_join(writers[i], NULL);\n    }\n\n    // Destroy the reader-writer lock\n    pthread_rwlock_destroy(&rwlock);\n\n    return 0;\n}