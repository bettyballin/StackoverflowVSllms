#include <mqueue.h>\n#include <fcntl.h>    // For O_* constants\n#include <sys/stat.h> // For mode constants\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n\n#define QUEUE_NAME  "/my_queue"\n#define MESSAGE_SIZE sizeof(int)\n\nint main() {\n    mqd_t mq;\n    struct mq_attr attr;\n\n    attr.mq_flags = 0;\n    attr.mq_maxmsg = 10;       // Maximum number of messages in queue\n    attr.mq_msgsize = MESSAGE_SIZE; // Size of individual messages\n    attr.mq_curmsgs = 0;      // Currently available messages\n\n    mq = mq_open(QUEUE_NAME, O_CREAT | O_RDWR, 0644, &attr);\n    if (mq == -1) {\n        perror("mq_open");\n        exit(EXIT_FAILURE);\n    }\n\n    int message = 12345;\n    if (mq_send(mq, (const char *)&message, MESSAGE_SIZE, 0) == -1) {\n        perror("mq_send");\n        mq_close(mq);\n        mq_unlink(QUEUE_NAME);\n        exit(EXIT_FAILURE);\n    }\n\n    int received;\n    unsigned int prio;\n    if (mq_receive(mq, (char *)&received, MESSAGE_SIZE, &prio) == -1) {\n        perror("mq_receive");\n        mq_close(mq);\n        mq_unlink(QUEUE_NAME);\n        exit(EXIT_FAILURE);\n    }\n\n    printf("Received message: %d\n", received);\n\n    if (mq_close(mq) == -1) {\n        perror("mq_close");\n        exit(EXIT_FAILURE);\n    }\n\n    if (mq_unlink(QUEUE_NAME) == -1) {\n        perror("mq_unlink");\n        exit(EXIT_FAILURE);\n    }\n\n    return 0;\n}