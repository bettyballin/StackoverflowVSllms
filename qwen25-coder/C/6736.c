#include <stdio.h>\n#include <stdlib.h>\n\n// Function to calculate simple checksum of data\nunsigned char calculate_checksum(unsigned char *data, size_t len) {\n    unsigned int sum = 0;\n    for (size_t i = 0; i < len; i++) {\n        sum += data[i];\n    }\n    return sum % 256;\n}\n\n// Example usage: writing and verifying file with checksum\nint main() {\n    const char *filename = "example.dat";\n    unsigned char data[] = "Sample Data";\n    size_t datalen = sizeof(data) - 1; // Exclude null terminator\n\n    // Calculate checksum\n    unsigned char checksum = calculate_checksum(data, datalen);\n\n    // Write data and checksum to file\n    FILE *file = fopen(filename, "wb");\n    if (file == NULL) {\n        perror("Failed to open the file for writing");\n        return EXIT_FAILURE;\n    }\n    fwrite(data, sizeof(unsigned char), datalen, file);\n    fputc(checksum, file); // Write checksum as single byte\n    fclose(file);\n\n    // Read data and verify checksum\n    unsigned char read_data[datalen];\n    unsigned char read_checksum;\n\n    FILE *read_file = fopen(filename, "rb");\n    if (read_file == NULL) {\n        perror("Failed to open the file for reading");\n        return EXIT_FAILURE;\n    }\n    fread(read_data, sizeof(unsigned char), datalen, read_file);\n    read_checksum = fgetc(read_file);\n    fclose(read_file);\n\n    // Check if checksum matches\n    unsigned char recalculated_checksum = calculate_checksum(read_data, datalen);\n    if (checksum == recalculated_checksum) {\n        printf("File integrity verified.\n");\n        for (size_t i = 0; i < datalen; i++) {\n            putchar(read_data[i]);\n        }\n    } else {\n        printf("File corrupted.\n");\n    }\n\n    return EXIT_SUCCESS;\n}