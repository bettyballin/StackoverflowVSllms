#include <stdio.h>\n#include <windows.h>\n#include <winsock2.h>\n#include <iphlpapi.h>\n\nvoid CALLBACK NetworkChangeEvent(PVOID CallerContext, PMIB_IPNETROW IpRow) {\n    printf("Network interface change detected\n");\n    // Call GetAdaptersAddresses() or handle the event\n}\n\nint main() {\n    HANDLE EventHandle = CreateEvent(NULL, FALSE, FALSE, NULL);\n    if (EventHandle == NULL) {\n        perror("CreateEvent");\n        return EXIT_FAILURE;\n    }\n\n    ULONG OutBufLen = 15000; // Size of buffer\n    char *AdapterListBuffer = malloc(OutBufLen);\n\n    DWORD res = NotifyAddrChange(&Overlapped, NetworkChangeEvent);\n    if (res != NO_ERROR) {\n        perror("NotifyAddrChange");\n        free(AdapterListBuffer);\n        return EXIT_FAILURE;\n    }\n\n    while (1) {\n        WaitForSingleObject(EventHandle, INFINITE);\n        printf("Event signaled\n");\n        ResetEvent(EventHandle);\n    }\n\n    free(AdapterListBuffer);\n    CloseHandle(EventHandle);\n    return 0;\n}