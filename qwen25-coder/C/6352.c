#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/fs.h>\n#include <linux/device.h>\n#include <linux/cdev.h>\n#include <asm/uaccess.h>\n\n#define DEVICE_NAME "custom_hw"\n#define CLASS_NAME  "chardrv"\n\n// Prototypes for device functions\nstatic int dev_open(struct inode *, struct file *);\nstatic ssize_t dev_read(struct file *, char *, size_t, loff_t *);\n\nstatic struct class* chardrvClass = NULL; ///< The device-driver class struct pointer\nstatic struct cdev chardrvCDev;\n\nconst struct file_operations fops =\n{\n    .open = dev_open,\n    .read = dev_read,\n};\n\nint dev_major;\nchar custom_char_val = 0; // This would be your hardware read data\n\n// Read function to return the custom character value\nstatic ssize_t dev_read(struct file *filep, char *buffer, size_t len, loff_t *offset) {\n    return simple_read_from_buffer(buffer, len, offset, &custom_char_val, sizeof(char));\n}\n\n// Open file handler\nstatic int dev_open(struct inode *inodep, struct file *filep){\n   return 0;\n}\n\n// Initialize the module\nstatic int __init chardev_init(void)\n{\n    dev_t dev = MKDEV(dev_major, 0);\n\n    // Register a major number for your device\n    alloc_chrdev_region(&dev, 0, 1, DEVICE_NAME);\n    dev_major = MAJOR(dev);\n    cdev_init(&chardrvCDev, &fops);\n    cdev_add(&chardrvCDev, MKDEV(dev_major, 0), 1);\n\n    // Register the device class\n    chardrvClass = class_create(THIS_MODULE, CLASS_NAME);\n    class_device_create(chardrvClass, NULL, dev, NULL, DEVICE_NAME);\n\n    return 0;\n}\n\n// Cleanup module\nstatic void __exit chardev_exit(void)\n{\n    dev_t dev = MKDEV(dev_major, 0);\n    cdev_del(&chardrvCDev);\n    unregister_chrdev_region(dev, 1);\n    class_destroy(chardrvClass);\n}\n\nmodule_init(chardev_init);\nmodule_exit(chardev_exit);\n\nMODULE_LICENSE("GPL");