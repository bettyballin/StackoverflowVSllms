#include <stdio.h>\n#include <stdlib.h>\n#include <glib.h>\n#include <gio/gio.h>\n\nstatic void on_ap_added(GDBusConnection *connection, const gchar *sender_name,\n                       const gchar *object_path, const gchar *interface_name,\n                       const gchar *signal_name, GVariant *parameters,\n                       gpointer user_data) {\n    printf("Access Point Added: %s\n", g_variant_get_string(g_variant_get_child_value(parameters, 0), NULL));\n}\n\nstatic void on_ap_removed(GDBusConnection *connection, const gchar *sender_name,\n                        const gchar *object_path, const gchar *interface_name,\n                        const gchar *signal_name, GVariant *parameters,\n                        gpointer user_data) {\n    printf("Access Point Removed: %s\n", g_variant_get_string(g_variant_get_child_value(parameters, 0), NULL));\n}\n\nint main(int argc, char **argv) {\n    GMainLoop *loop;\n    GioDBusProxy *proxy;\n    GCancellable *cancellable;\n\n    loop = g_main_loop_new(NULL, FALSE);\n    cancellable = g_cancellable_new();\n\n    // Connect to NetworkManager's DBus service\n    proxy = g_dbus_proxy_new_for_bus_sync(G_BUS_TYPE_SYSTEM,\n                                        G_DBUS_PROXY_FLAGS_NONE,\n                                        NULL,\n                                        "org.freedesktop.NetworkManager",\n                                        "/org/freedesktop/NetworkManager",\n                                        "org.freedesktop.DBus.Properties",\n                                        cancellable,\n                                        NULL);\n\n    // Monitor AP additions and removals\n    g_signal_connect(proxy, "g-signal", G_CALLBACK(on_ap_added), loop);\n    g_signal_connect(proxy, "g-signal", G_CALLBACK(on_ap_removed), loop);\n\n    printf("Monitoring access points. Press Ctrl+C to exit...\n");\n    g_main_loop_run(loop);\n\n    return 0;\n}