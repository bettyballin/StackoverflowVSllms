#include <stdio.h>\n#include <stdlib.h>\n#include <fcntl.h>\n#include <unistd.h>\n\nvoid read_with_lock(const char *filename) {\n    int fd = open(filename, O_RDONLY);\n    if (fd == -1) {\n        perror("open");\n        exit(EXIT_FAILURE);\n    }\n\n    struct flock fl;\n    fl.l_type = F_RDLCK;  // Set up for a read lock\n    fl.l_whence = SEEK_SET;\n    fl.l_start = 0;\n    fl.l_len = 0;         // 0 means whole file\n\n    if (fcntl(fd, F_SETLK, &fl) == -1) {\n        perror("fcntl");\n        close(fd);\n        exit(EXIT_FAILURE);\n    }\n\n    printf("Read lock set. Reading from the file...\n");\n\n    // Perform your read operation here\n    char buffer[256];\n    ssize_t bytes_read;\n    while ((bytes_read = read(fd, buffer, sizeof(buffer) - 1)) > 0) {\n        buffer[bytes_read] = '\0';  // Null-terminate the string\n        printf("%s", buffer);\n    }\n\n    if (fcntl(fd, F_UNLCK, &fl) == -1) {  // Release the lock\n        perror("fcntl");\n    }\n\n    close(fd);\n}\n\nint main() {\n    read_with_lock("example.txt");\n    return 0;\n}