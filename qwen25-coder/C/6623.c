#include <stdio.h>\n   #include <stdlib.h>\n   #include "data.pb-c.h"\n\n   int main() {\n       Data *data = data_new();\n       data->id = 123;\n       data->name = strdup("example");\n       data->payload.data = (uint8_t *)"binary_payload";\n       data->payload.len = 16;\n\n       size_t message_length;\n       void *message = data__get_packed_size(data);\n       void *buffer = malloc(message_length);\n\n       data__pack(data, buffer);\n\n       // Send/Receive data over socket or shared-memory\n\n       Data *received_data = data__unpack(NULL, message_length, &buffer);\n       if (received_data != NULL) {\n           printf("Received ID: %d\n", received_data->id);\n           printf("Received Name: %s\n", received_data->name);\n           data__free_unpacked(received_data, NULL);\n       }\n\n       free(buffer);\n       data__free(data);\n\n       return 0;\n   }