#include <stdio.h>\n#include <Python.h>\n\nint main(int argc, char *argv[])\n{\n    PyObject* pName;\n    PyObject *pModule = NULL;\n    PyObject *pFunc = NULL;\n    PyObject *pArgs = NULL;\n    PyObject *pValue = NULL;\n\n    if (argc < 3) {\n        fprintf(stderr,"Usage: call pythonfile funcname [args]\n");\n        return 1;\n    }\n\n    Py_Initialize();\n\n    pName = PyUnicode_DecodeFSDefault(argv[1]);\n\n    /* Error checking of pName left out */\n\n    pModule = PyImport_Import(pName);\n    Py_DECREF(pName);\n\n    if (pModule != NULL) {\n        pFunc = PyObject_GetAttrString(pModule, argv[2]);\n        /* pFunc is a new reference to the attribute value */\n        if (pFunc && PyCallable_Check(pFunc)) {\n            int i;\n            pArgs = PyTuple_New(argc - 3);\n            for (i=0; i<argc-3; ++i)\n                PyTuple_SetItem(pArgs, i, PyLong_FromLong(atol(argv[i+3])));\n            \n            /* pValue is new reference */\n            pValue = PyObject_CallObject(pFunc, pArgs);\n            Py_DECREF(pArgs);\n\n            if (pValue != NULL) {\n                printf("Result of call: %ld\n", PyLong_AsLong(pValue));\n                Py_DECREF(pValue);\n            } else {\n                PyErr_Print();\n                fprintf(stderr,"Call failed\n");\n            }\n        } else {\n            if (PyErr_Occurred())\n                PyErr_Print();\n            fprintf(stderr, "Cannot find function \"%s\"\n", argv[2]);\n        }\n        Py_XDECREF(pFunc);\n\n        Py_DECREF(pModule);\n    } else {\n        PyErr_Print();\n        fprintf(stderr,"Failed to load \"%s\"\n", argv[1]);\n        return 1;\n    }\n\n    if (Py_FinalizeEx() < 0) {\n        return 120;\n    }\n    return 0;\n}