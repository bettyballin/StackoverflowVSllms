#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n\nvoid send_file(int sockfd, const char* filename) {\n    FILE *file = fopen(filename, "rb");\n    if (!file) {\n        perror("Failed to open file");\n        return;\n    }\n\n    // Set the socket send buffer size\n    int snd_buf_size = 128*1024; // 128KB\n    setsockopt(sockfd, SOL_SOCKET, SO_SNDBUF, &snd_buf_size, sizeof(snd_buf_size));\n\n    char buffer[1024];\n    size_t bytes_read;\n    while ((bytes_read = fread(buffer, 1, sizeof(buffer), file)) > 0) {\n        if (send(sockfd, buffer, bytes_read, 0) == -1) {\n            perror("Error sending data");\n            break;\n        }\n    }\n\n    fclose(file);\n}\n\nint main() {\n    int sockfd, newsockfd;\n    struct sockaddr_in serv_addr, cli_addr;\n    socklen_t clilen;\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd < 0) {\n        perror("ERROR opening socket");\n        exit(1);\n    }\n\n    bzero((char*) &serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = INADDR_ANY;\n    serv_addr.sin_port = htons(8888);\n\n    if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) {\n        perror("ERROR on binding");\n        exit(1);\n    }\n\n    listen(sockfd,5);\n    clilen = sizeof(cli_addr);\n    newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);\n\n    if (newsockfd < 0){\n         perror("ERROR on accept");\n         exit(1);\n     }\n    \n    send_file(newsockfd, "image.jpg");\n\n    close(newsockfd);\n    close(sockfd);\n    return 0;\n}