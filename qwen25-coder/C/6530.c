#include <stdio.h>\n#include <pthread.h>\n\nint shared_variable = 0;\n\nvoid* thread_func(void* arg) {\n    // Atomically set the shared variable to 1 if it is currently 0\n    int expected_value = 0;\n    __sync_lock_test_and_set(&shared_variable, 1);\n    printf("Thread: Shared variable updated.\n");\n    return NULL;\n}\n\nint main() {\n    pthread_t thread1, thread2;\n\n    pthread_create(&thread1, NULL, thread_func, NULL);\n    pthread_create(&thread2, NULL, thread_func, NULL);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n\n    printf("Main: Final value of shared variable: %d\n", shared_variable);\n    return 0;\n}