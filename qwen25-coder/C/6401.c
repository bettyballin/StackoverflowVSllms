if (data.size > 0) {\n    data.data = (unsigned char*)malloc(data.size);\n    if (!data.data) { // Check if malloc succeeded\n        perror("Failed to allocate memory");\n        exit(EXIT_FAILURE); // or handle error appropriately\n    }\n    memset(data.data, 0, data.size); // Correctly initialize the allocated memory\n    int remainingSize = data.size;\n    unsigned char *iter = data.data;\n    int count;\n\n    do {\n        count = read(connect_fd, iter, remainingSize);\n        if (count == -1) { // Check for errors in read\n            perror("Error reading from socket");\n            free(data.data); // Free allocated memory on error\n            exit(EXIT_FAILURE); // or handle error appropriately\n        }\n        iter += count;\n        remainingSize -= count;\n    } while (count > 0 && remainingSize > 0);\n\n    if (remainingSize > 0) { // Check if we read less than expected\n        fprintf(stderr, "Incomplete data read. Expected %u bytes but only received %u.\n", \n                data.size, data.size - remainingSize);\n    }\n} else {\n    data.data = NULL; // Use NULL instead of 0 for pointer types\n}