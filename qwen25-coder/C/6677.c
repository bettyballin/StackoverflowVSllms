#include <stdio.h>\n#include <stdlib.h>\n#include <sys/inotify.h>\n\n#define EVENT_SIZE  ( sizeof (struct inotify_event) )\n#define BUF_LEN     ( 1024 * ( EVENT_SIZE + 16 ) )\n\nint main() {\n    int fd, wd;\n    char buffer[BUF_LEN];\n\n    // Create an instance of the inotify API\n    fd = inotify_init();\n    if (fd < 0) {\n        perror("inotify_init");\n        exit(EXIT_FAILURE);\n    }\n\n    // Add a watch to the specific directory\n    wd = inotify_add_watch(fd, "/path/to/directory", IN_CREATE | IN_MODIFY);\n    if (wd == -1) {\n        fprintf(stderr, "Cannot watch '/path/to/directory'\n");\n        perror("inotify_add_watch");\n        exit(EXIT_FAILURE);\n    }\n\n    // Loop reading events\n    while(1) {\n        int length = read(fd, buffer, BUF_LEN);\n        if (length < 0) {\n            perror("read");\n            exit(EXIT_FAILURE);\n        } else if (length == 0) {\n            break;\n        }\n\n        // Process the event(s)\n        char *ptr;\n        for (ptr = buffer; ptr < buffer + length; ) {\n            struct inotify_event* event = (struct inotify_event*)ptr;\n            printf("New file created or modified: %s\n", event->name);\n            ptr += EVENT_SIZE + event->len;\n        }\n    }\n\n    // Close the notification instance\n    inotify_rm_watch(fd, wd);\n    close(fd);\n}