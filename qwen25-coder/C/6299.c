#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <sys/types.h>\n#include <sys/wait.h>\n\n#define MAX_CHILDREN 10\n\nvoid do_stuff_with(int item) {\n    printf("%d\n", item);\n}\n\nint main() {\n    int items[] = { /* initialize your items here */ };\n    int num_items = sizeof(items) / sizeof(items[0]);\n    pid_t pids[MAX_CHILDREN];\n    int active_children = 0;\n    \n    for (int i = 0; i < num_items; ++i) {\n        if (active_children >= MAX_CHILDREN) {\n            // Wait for any child to finish\n            wait(NULL);\n            --active_children;\n        }\n        \n        pids[active_children] = fork();\n        \n        if (pids[active_children] == -1) {\n            perror("fork");\n            exit(EXIT_FAILURE);\n        } else if (pids[active_children] == 0) {\n            // Child process\n            do_stuff_with(items[i]);\n            exit(EXIT_SUCCESS);\n        } else {\n            // Parent process\n            ++active_children;\n        }\n    }\n    \n    // Wait for all remaining children to finish\n    while (active_children > 0) {\n        wait(NULL);\n        --active_children;\n    }\n    \n    return 0;\n}