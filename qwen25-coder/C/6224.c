#include <gtk/gtk.h>\n#include <gdk/quartz/gdkquartzwindow.h>\n\nguintptr get_window_id(GtkWidget *widget) {\n    GdkWindow *window = gtk_widget_get_window(widget);\n    if (window == NULL) {\n        g_warning("Could not retrieve GDK window");\n        return 0;\n    }\n\n    GdkQuartzWindowData* quartz_data = (GdkQuartzWindowData*)gdk_window_get_impl(window);\n    NSView* ns_view = quartz_data->toplevel;\n\n    // Get the native window ID (NSWindow) from NSView\n    NSWindow* ns_window = [ns_view window];\n    gpointer window_id = (__bridge_transfer gpointer)(__bridge void*[ns_window]);\n\n    return (guintptr)window_id;\n}