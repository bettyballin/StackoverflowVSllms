// create 5 child processes\nfor(int k=0; k<5; k++) {\n    // Create a shared memory segment accessible by parent and children\n    if (k == 0) { // Parent creates the shared memory once\n        segment_id = shmget(IPC_PRIVATE, size, S_IRUSR | S_IWUSR);\n        shared_memory = (char *) shmat(segment_id, NULL, 0);\n    }\n\n    // fork a child process\n    pid = fork();\n\n    // error occurred on fork\n    if (pid < 0) {\n        fprintf(stderr, "Fork Failed\n");\n        return 1;\n    }\n    // this is what the child process will run\n    else if (pid == 0) {\n        // attach the shared memory segment created by parent\n        shared_memory = (char *) shmat(segment_id, NULL, 0);\n        \n        printf("this is child\n");\n\n        double x = 0;\n        double sum = 0;\n\n        // Run process that sums the function\n        for(int i=0; i<n; i++) {\n            // get random number in range of x1-x2\n            x = rand() % (x2 - x1 + 1) + x1;\n            sum = sum + f(x);\n        }\n\n        // write output to the shared memory segment\n        sprintf(shared_memory, "%f", sum);\n\n        // detach shared memory\n        shmdt(shared_memory);\n\n        // exit child process\n        _exit(0); \n    }\n}\n\n// parent waits for all children to finish\nwhile (wait(NULL) > 0)\n    ;\n\n// print output from shared memory\nprintf("\n*%s\n", shared_memory);\n\n// detach shared memory\nshmdt(shared_memory);\n\n// remove the shared memory segment\nshmctl(segment_id, IPC_RMID, NULL);