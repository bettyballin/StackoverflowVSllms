public Dictionary<String,DateTime> UserDictionary\n{\n    get\n    {\n        if (HttpContext.Current.Cache["UserDictionary"] != null)\n        {\n            return HttpContext.Current.Cache["UserDictionary"] as Dictionary<String,DateTime>;\n        }\n        return new Dictionary<String,DateTime>();\n    }\n    set\n    {\n        HttpContext.Current.Cache["UserDictionary"] = value;\n    }\n}\n\npublic bool IsUserAlreadyLoggedIn(string userName)\n{\n    removeIdleUsers();\n    return UserDictionary.ContainsKey(userName);\n}\n\npublic void UpdateUser(string userName)\n{\n    UserDictionary[userName] = DateTime.Now;\n\n    removeIdleUsers();\n}\n\nprivate void removeIdleUsers()\n{\n   for (int i = 0; i < UserDictionary.Length; i++)\n        {\n            if (user[i].Value < DateTime.Now.AddMinutes(-20))\n                user.RemoveAt(i);\n        }\n}