DataSet ds = new DataSet();\nusing (SqlConnection connection = new SqlConnection("some connection string"))\nusing (SqlCommand command = new SqlCommand("select * from mytable", connection))\nusing (SqlDataAdapter adapter = new SqlDataAdapter(command))\n{\n    adapter.Fill(ds);\n}\n\nXmlDocument xml = new XmlDocument();\nusing (Stream stream = new MemoryStream())\n{\n    ds.WriteXml(stream);\n    // We must reposition the memory stream before loading the xml\n    stream.Position = 0;\n    xml.Load(stream);\n}