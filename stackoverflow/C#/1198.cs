[DllImport("Kernel32")]\nprivate static extern bool SetConsoleCtrlHandler(EventHandler handler, bool add);\n\nprivate delegate bool EventHandler(CtrlType sig);\nstatic EventHandler _handler;\n\nenum CtrlType\n{\n  CTRL_C_EVENT = 0,\n  CTRL_BREAK_EVENT = 1,\n  CTRL_CLOSE_EVENT = 2,\n  CTRL_LOGOFF_EVENT = 5,\n  CTRL_SHUTDOWN_EVENT = 6\n}\n\nprivate static bool Handler(CtrlType sig)\n{\n  switch (sig)\n  {\n      case CtrlType.CTRL_C_EVENT:\n      case CtrlType.CTRL_LOGOFF_EVENT:\n      case CtrlType.CTRL_SHUTDOWN_EVENT:\n      case CtrlType.CTRL_CLOSE_EVENT:\n      default:\n          return false;\n  }\n}\n\n\nstatic void Main(string[] args)\n{\n  // Some biolerplate to react to close window event\n  _handler += new EventHandler(Handler);\n  SetConsoleCtrlHandler(_handler, true);\n  ...\n}