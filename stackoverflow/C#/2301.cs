public int GetUserIdByUsername(string username)\n{\n    EntityConnection connection = (EntityConnection)Connection;            \n    DbCommand com = connection.StoreConnection.CreateCommand();\n    com.CommandText = "select dbo.fn_GetUserId_Username(@Username)";\n    com.CommandType = CommandType.Text;\n    com.Parameters.Add(new SqlParameter("@Username", username));\n    if (com.Connection.State == ConnectionState.Closed) com.Connection.Open();\n    try\n    {\n        var result = com.ExecuteScalar(); // should properly get your value\n        return (int)result;\n    }\n    catch (Exception e)\n    {\n        // either put some exception-handling code here or remove the catch \n        //   block and let the exception bubble out \n    }\n}