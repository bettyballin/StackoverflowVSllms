double sqrt(double x) {\n    var goodEnough = new Func<double, bool>(guess =>\n        Math.Abs(square(guess) - x) < 0.001\n    );\n    var improve = new Func<double, double>(guess =>\n        average(guess, x / guess)\n    );\n    var sqrtIter = default(Func<double, double>);\n    sqrtIter = new Func<double, double>(guess =>\n        goodEnough(guess) ? guess : sqrtIter(improve(guess))\n    );\n    return sqrtIter(1.0);\n}