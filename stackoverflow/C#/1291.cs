class Program\n{\n    IEnumerable<int> GenerateSequence(int N)\n    {\n        Random r = new Random();\n        int M = NextLargestPowerOfTwo(N);\n        int c = r.Next(M / 2) * 2 + 1; // make c any odd number between 0 and M\n        int a = r.Next(M / 4) * 4 + 1; // M = 2^m, so make (a-1) divisible by all prime factors, and 4\n\n        int start = r.Next(M);\n        int x = start;\n        do\n        {\n            x = (a * x + c) % M;\n            if (x < N)\n                yield return x;\n        } while (x != start);\n    }\n\n    int NextLargestPowerOfTwo(int n)\n    {\n        n |= (n >> 1);\n        n |= (n >> 2);\n        n |= (n >> 4);\n        n |= (n >> 8);\n        n |= (n >> 16);\n        return (n + 1);\n    }\n\n    static void Main(string[] args)\n    {\n        Program p = new Program();\n        foreach (int n in p.GenerateSequence(1000))\n        {\n            Console.WriteLine(n);\n        }\n\n        Console.ReadKey();\n    }\n}