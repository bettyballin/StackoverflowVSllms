static byte[] Encrypt(byte[] clearText, byte[] key, byte[] iv)\n{\n    // Create an instance of our encyrption algorithm.\n    RijndaelManaged rijndael = new RijndaelManaged();\n\n    // Create an encryptor using our key and IV\n    ICryptoTransform transform = rijndael.CreateEncryptor(key, iv);\n\n    // Create the streams for input and output\n    MemoryStream outputStream = new MemoryStream();\n    CryptoStream inputStream = new CryptoStream(\n        outputStream,\n        transform,\n        CryptoStreamMode.Write);\n\n    // Feed our data into the crypto stream.\n    inputStream.Write(clearText, 0, clearText.Length);\n\n    // Flush the crypto stream.\n    inputStream.FlushFinalBlock();\n\n    // And finally return our encrypted data.\n    return outputStream.ToArray();\n}