void ProcessTree(GenTreeNode currentNode, Stack<GenTreeNode> seen)\n{\n   if(seen.Contains(currentNode)) return;\n   // Or, do whatever needs to be done when a cycle is detected\n\n   ProcessHorse(currentNode.Horse); // Or whatever processing you need\n\n   seen.Push(currentNode);\n\n   foreach(GenTreeNode childNode in currentNode.Nodes)\n   {\n      ProcessTree(childNode, seen);\n   }\n\n   seen.Pop();\n}