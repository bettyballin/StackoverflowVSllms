public static void CopySection(Stream input, string targetFile, int length)\n{\n    byte[] buffer = new byte[8192];\n\n    using (Stream output = File.OpenWrite(targetFile))\n    {\n        int bytesRead = 1;\n        // This will finish silently if we couldn't read "length" bytes.\n        // An alternative would be to throw an exception\n        while (length > 0 && bytesRead > 0)\n        {\n            bytesRead = input.Read(buffer, 0, Math.Min(length, buffer.Length));\n            output.Write(buffer, 0, bytesRead);\n            length -= bytesRead;\n        }\n    }\n}