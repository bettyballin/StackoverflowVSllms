public T FindParentControl<T>(\n    ref WebControl child, \n    int currentLevel, \n    int maxLevels)\n    where T : WebControl\n{\n    if (child.Parent == null || currentLevel > maxLevels)\n        return null;\n\n    if (child.Parent is T)\n        return child.Parent as T;\n    else \n        return FindParentControl<T>(\n            child.Parent, \n            currentLevel + 1, \n            maxLevels);\n}