[TestMethod]\n    public void Should_update_foo_to_active_inside_of_repository()\n    {\n        // arrange\n        var repo = MockRepository.GenerateMock<IRepository>();\n        var foo = new Foo() { ID = 1, IsActive = false };\n        var target = new Presenter(repo);\n        repo.Expect(x => x.ActivateFoo(foo)).\n            Do(new ActivateFooDelegate(ActivateFooDelegateInstance));\n        // act\n        target.Activate(foo);\n\n        // assert\n        Assert.IsTrue(foo.IsActive);\n        repo.VerifyAllExpectations();\n    }\n\n    private delegate bool ActivateFooDelegate(Foo f);\n\n    public bool ActivateFooDelegateInstance(Foo f)\n    {\n        f.IsActive = true;\n        return f.IsActive;\n    }