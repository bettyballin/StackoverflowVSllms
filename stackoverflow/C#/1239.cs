public class MyWCFService : IMyWCFService \n{\n        // retrieve your UserId from the MembershipProvider\n        private int GetUserId()\n        {\n            MembershipUser user = Membership.GetUser();\n            int userId = (int)user.ProviderUserKey;\n            return userId;\n        }\n\n        // check if user is authenticated\n        private bool IsUserAuthenticated()\n        {\n            return HttpContext.Current.User.Identity.IsAuthenticated;\n        }\n\n        public void Subscribe()\n        {\n            if (!IsUserAuthenticated())\n            {\n                throw new SecurityException("You must be authenticated to be able to use this service.");\n            }\n\n            int userId = GetUserId();\n            DoStuff(userId);\n        }\n}