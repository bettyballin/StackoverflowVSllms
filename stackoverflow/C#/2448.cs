private static IEnumerable<Range<int>> GenerateRanges(int amount, int max, float density, int seed)\n{\n    var r = new Random(seed);\n    var commonLength = max * density / amount; // edited\n    var maxLength = commonLength * 2;\n    while(--amount >= 0)\n    {\n        var length = r.Next(maxLength);\n        var start = r.Next(max - length);\n        var end = start + length;\n        yield return Range.Create(start, end);\n    }\n}