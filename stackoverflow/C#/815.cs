static IEnumerable<T> GetItems<T>(IEnumerable<Queue<T>> queues)\n{\n    int remaining = queues.Sum(q => q.Count);\n    Random rand = new Random();\n    while (remaining > 0)\n    {\n        int index = rand.Next(remaining);\n        foreach (Queue<T> q in queues)\n        {\n            if (index < q.Count)\n            {\n                yield return q.Dequeue();\n                remaining--;\n                break;\n            }\n            else\n            {\n                index -= q.Count;\n            }\n        }\n    }\n}