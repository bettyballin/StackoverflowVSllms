var advertisers = getAdvertisers();\nvar returnList = new List();\nint totalWeight = sumOfAllAdvertisersWeight();\nwhile (totalWeight > 0)\n{\n    for (int i=0; i<advertisers.Count; i++)\n    {\n        if (advertisers[i].Weight > 0)\n        {\n            returnList.add(advertisers[i]);\n            advertisers[i].Weight--;\n            totalWeight--;\n        }\n    }\n}\nreturn returnList;