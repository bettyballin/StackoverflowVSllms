// Use a class variable so that the RNG is only created once.\nprivate Random generator;\nprivate Random Generator\n{\n    get\n    {\n        if (this.generator == null)\n        {\n           this.generator = new Random();\n        }\n        return this.generator;\n    }\n}\nprivate string getrandomfile(string path)\n{\n    string file = null;\n    if (!string.IsNullOrEmpty(path))\n    {\n        var extensions = new string[] { ".png", ".jpg", ".gif" };\n        try\n        {\n            var di = new DirectoryInfo(path);\n            var rgFiles = di.GetFiles("*.*")\n                            .Where( f => extensions.Contains( f.Extension\n                                                               .ToLower() );\n            int fileCount = rgFiles.Count();\n            if (fileCount > 0)\n            {\n                int x = this.Generator.Next( 0, fileCount );\n                file = rgFiles.ElementAt(x).FullName;\n            }\n        }\n        // probably should only catch specific exceptions\n        // throwable by the above methods.\n        catch {}\n    }\n    return file;\n}