using System;\nusing System.Data;\nusing System.Data.SqlClient;\n\nclass Program\n{\n    static void Main()\n    {\n        using (SqlConnection connection = new SqlConnection("Data Source=server;database=mydb; Integrated Security=SSPI"))\n        {\n            SqlCommand command = connection.CreateCommand();\n            command.CommandText = "SELECT CategoryID, CategoryName FROM dbo.Categories;";\n\n            try\n            {\n                connection.Open();\n\n                SqlDataReader reader = command.ExecuteReader();\n\n                // process each row one at a time\n                while (reader.Read())\n                {\n                    // reader contains the row (reader[0] is first column, etc)\n                    Console.WriteLine("\t{0}\t{1}", reader[0], reader[1]);\n                }\n                reader.Close();\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine(ex.Message);\n            }\n        }\n    }\n}