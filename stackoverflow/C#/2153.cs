\n        protected void IdentityLabelInit(object sender, EventArgs e)\n        {\n            System.Threading.Thread testThread = new Thread(ReportIdentity);\n            testThread.Start();\n            testThread.Join();\n        }\n\n        private void ReportIdentity()\n        {\n            identityLabel.InnerText = "Initialized: " + System.Threading.Thread.CurrentPrincipal.Identity.Name;\n            System.Security.Principal.IPrincipal currentPrincipal = System.Threading.Thread.CurrentPrincipal;\n            SetAnonymousIdentity();\n            System.Security.Principal.IPrincipal newPrincipal = System.Threading.Thread.CurrentPrincipal;\n            if (newPrincipal.Equals(currentPrincipal))\n                identityLabel.InnerText += ("no change");\n            else\n                identityLabel.InnerText += " | new name: " + System.Threading.Thread.CurrentPrincipal.Identity.Name;\n        }\n\n        private void SetAnonymousIdentity()\n        {\n            WindowsIdentity tIdentity = WindowsIdentity.GetAnonymous();\n            WindowsPrincipal tPrincipal = new WindowsPrincipal(tIdentity);\n            System.Threading.Thread.CurrentPrincipal = tPrincipal;\n        }