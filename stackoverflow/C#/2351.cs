public class WebContentTypeAttribute : Attribute, IOperationBehavior, IDispatchMessageFormatter\n{\n    private IDispatchMessageFormatter innerFormatter;\n    public string ContentTypeOverride { get; set; }\n\n    public WebContentTypeAttribute(string contentTypeOverride)\n    {\n        this.ContentTypeOverride = contentTypeOverride;\n    }\n\n\n    // IOperationBehavior\n    public void Validate(OperationDescription operationDescription)\n    {\n\n    }\n\n    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)\n    {\n        innerFormatter = dispatchOperation.Formatter;\n        dispatchOperation.Formatter = this;\n    }\n\n    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)\n    {\n\n    }\n\n    public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters)\n    {\n\n    }\n\n    // IDispatchMessageFormatter\n    public void DeserializeRequest(Message message, object[] parameters)\n    {\n        if (message == null)\n            return;\n\n        if (string.IsNullOrEmpty(ContentTypeOverride))\n            return;\n\n        var httpRequest = (HttpRequestMessageProperty)message.Properties[HttpRequestMessageProperty.Name];\n        httpRequest.Headers["Content-Type"] = ContentTypeOverride;\n    }\n\n    public Message SerializeReply(MessageVersion messageVersion, object[] parameters, object result)\n    {\n        return innerFormatter.SerializeReply(messageVersion, parameters, result);\n    }\n}