static IPAddress ComputeBroadcastIP(IPAddress ip, IPAddress netmask)\n{\n    byte[] ipBytes = ip.GetAddressBytes();\n    byte[] maskBytes = netmask.GetAddressBytes();\n    byte[] broadcastBytes = new byte[ipBytes.Length];\n\n    for (int i = 0; i < broadcastBytes.Length; i++)\n    {\n        broadcastBytes[i] = (byte)(ipBytes[i] | ~maskBytes[i]);\n    }\n\n    return new IPAddress(broadcastBytes);\n}