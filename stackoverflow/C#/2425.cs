using System;\nusing System.Collections.Generic;\nusing System.ComponentModel;\nusing System.Data;\nusing System.Drawing;\nusing System.Text;\nusing System.Windows.Forms;\nusing System.Security.Cryptography;\n\nnamespace DataProtectionTest\n{\n    public partial class Form1 : Form\n    {\n        private static readonly byte[] entropy = { 1, 2, 3, 4, 1, 2, 3, 4 };\n        private string password;\n        public Form1()\n        {\n            InitializeComponent();\n        }\n\n        private void btnEncryptIt_Click(object sender, EventArgs e)\n        {\n            Byte[] pw = Encoding.Unicode.GetBytes(textBox1.Text);\n            Byte[] encryptedPw = ProtectedData.Protect(pw, entropy, DataProtectionScope.LocalMachine);\n            //password = Encoding.Unicode.GetString(encryptedPw);       \n            password = Convert.ToBase64String(encryptedPw);\n        }\n\n        private void btnDecryptIt_Click(object sender, EventArgs e)\n        {\n            //Byte[] pwBytes = Encoding.Unicode.GetBytes(password);\n            Byte[] pwBytes = Convert.FromBase64String(password);\n            try\n            {\n                Byte[] decryptedPw = ProtectedData.Unprotect(pwBytes, entropy, DataProtectionScope.LocalMachine);\n                string pw = Encoding.Unicode.GetString(decryptedPw);\n                textBox2.Text = pw;\n            }\n            catch (CryptographicException ce)\n            {\n                textBox2.Text = ce.Message;\n            }\n        }\n    }\n}