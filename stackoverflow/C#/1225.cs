private static void Swap(ref double a, ref double b) {\n    double t = a;\n    a = b;\n    b = t;\n}\n\nprivate static void Sort(ref double a, ref double b) {\n    if (a > b) {\n        double t = a;\n        a = b;\n        b = t;\n    }\n}\n\nprivate static double MedianOfFive(double a, double b, double c, double d, double e){\n    // makes a < b and c < d\n    Sort(ref a, ref b);\n    Sort(ref c, ref d);\n\n    // eleminate the lowest\n    if (c < a) {\n        Swap(ref b, ref d);\n        c = a;\n    }\n\n    // gets e in\n    a = e;\n\n    // makes a < b\n    Sort(ref a, ref b);\n\n    // eliminate another lowest\n    // remaing: a,b,d\n    if (a < c) {\n        Swap(ref b, ref d);\n        a = c;\n    }\n\n    return Math.Min(d, a);\n}