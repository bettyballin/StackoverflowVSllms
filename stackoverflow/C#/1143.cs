static bool IsUserMemberOf(string userName, string groupName)\n{\n    using (var ctx = new PrincipalContext(ContextType.Domain))\n    using (var groupPrincipal = GroupPrincipal.FindByIdentity(ctx, groupName))\n    using (var userPrincipal = UserPrincipal.FindByIdentity(ctx, userName))\n    {\n        return userPrincipal.IsMemberOf(groupPrincipal);\n    }\n}\n\n// Usage:\nbool result = IsUserMemberOf("CONTOSO\\john.doe", "CONTOSO\\Administrators");