def make_instance(instance, values):\n    '''\n    Copied from eviscape.com\n\n    generates an instance for dict data coming from an sp\n\n    expects:\n        instance - empty instance of the model to generate\n        values -   dictionary from a stored procedure with keys that are named like the\n                   model's attributes\n    use like:\n        evis = InstanceGenerator(Evis(), evis_dict_from_SP)\n\n    >>> make_instance(Evis(), {'evi_id': '007', 'evi_subject': 'J. Bond, Architect'})\n    <Evis: J. Bond, Architect>\n\n    '''\n    attributes = filter(lambda x: not x.startswith('_'), instance.__dict__.keys())\n\n    for a in attributes:\n        try:\n            # field names from oracle sp are UPPER CASE\n            # we want to put PIC_ID in pic_id etc.\n            setattr(instance, a, values[a.upper()])\n            del values[a.upper()]\n        except:\n            pass\n\n    #add any values that are not in the model as well\n    for v in values.keys():\n        setattr(instance, v, values[v])\n        #print 'setting %s to %s' % (v, values[v])\n\n    return instance