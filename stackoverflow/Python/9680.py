import bluetooth\n\ndef whats_nearby():\n    name_by_addr = {}\n    nearby = bluetooth.discover_devices(flush_cache=True)\n    for bd_addr in nearby:\n        name = bluetooth.lookup_name( bd_addr, 5)\n        print bd_addr, name\n        name_by_addr[bd_addr] = name\n    return name_by_addr\n\ndef what_services( addr, name ):\n    print " %s - %s" % ( addr, name )\n    for services in bluetooth.find_service(address = addr): \n        print "\t Name:           %s" % (services["name"]) \n        print "\t Description:    %s" % (services["description"]) \n        print "\t Protocol:       %s" % (services["protocol"]) \n        print "\t Provider:       %s" % (services["provider"]) \n        print "\t Port:           %s" % (services["port"]) \n        print "\t service-classes %s" % (services["service-classes"])\n        print "\t profiles        %s" % (services["profiles"])\n        print "\t Service id:  %s" % (services["service-id"]) \n        print "" \n\nif __name__ == "__main__":\n    name_by_addr = whats_nearby()\n    for addr in name_by_addr.keys():\n        what_services(addr, name_by_addr[addr])