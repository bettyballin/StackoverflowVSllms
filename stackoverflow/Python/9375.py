import subprocess\nproc = subprocess.Popen(['ssh', 'user@host', 'cat > %s' % filename],\n                        stdin=subprocess.PIPE)\nproc.communicate(file_contents)\nif proc.retcode != 0:\n    ...