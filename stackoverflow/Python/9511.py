import itertools\n\ncars = [\n    {'car': 'X2', 'mods': [1,2]},\n    {'car': 'Y2', 'mods': [2]},\n    {'car': 'W2', 'mods': [1]},\n    {'car': 'X1', 'mods': [1,2]},\n    {'car': 'W1', 'mods': [1]},\n    {'car': 'Y1', 'mods': [2]},\n    {'car': 'Z1', 'mods': [1,2,3]},\n    {'car': 'X3', 'mods': [1,2]},\n]\n\ncars.sort(key=lambda car: car['mods'])\n\ncars_by_common_mods = {}\nfor k, g in itertools.groupby(cars, lambda car: car['mods']):\n    cars_by_common_mods[frozenset(k)] = [car['car'] for car in g]\n\nprint cars_by_common_mods