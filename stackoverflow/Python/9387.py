import pprint\n\nm = [[1, 0, 1, 1, 0],\n     [0, 1, 1, 1, 0],\n     [1, 1, 1, 1, 1],\n     [1, 0, 1, 1, 1],\n     [1, 1, 1, 1, 1]]\n\n\n\nN = len(m)\n\n### pass 1\n\n# 1 rst line/column\nc = 1\nfor i in range(N):\n    c &= m[i][0]\n\nl = 1\nfor i in range(1,N):\n    l &= m[0][i]\n\n\n# other line/cols\n# use line1, col1 to keep only those with 1\nfor i in range(1,N):\n    for j in range(1,N):\n        if m[i][j] == 0:\n            m[0][j] = 0\n            m[i][0] = 0\n        else:\n            m[i][j] = 0\n\n### pass 2\n\n# if line1 and col1 are ones: it is 1\nfor i in range(1,N):\n    for j in range(1,N):\n        if m[i][0] & m[0][j]:\n            m[i][j] = 1\n\n# 1rst row and col: reset if 0\nif l == 0:\n    for i in range(N):\n        m [i][0] = 0\n\nif c == 0:\n    for j in range(1,N):\n        m [0][j] = 0\n\n\npprint.pprint(m)