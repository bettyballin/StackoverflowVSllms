# test_client.py\nfrom poster.encode import multipart_encode\nfrom poster.streaminghttp import register_openers\nimport urllib2\n\n# Register the streaming http handlers with urllib2\nregister_openers()\n\n# Start the multipart/form-data encoding of the file "DSC0001.jpg"\n# "image1" is the name of the parameter, which is normally set\n# via the "name" parameter of the HTML <input> tag.\n\n# headers contains the necessary Content-Type and Content-Length\n# datagen is a generator object that yields the encoded parameters\ndatagen, headers = multipart_encode({"image1": open("DSC0001.jpg")})\n\n# Create the Request object\nrequest = urllib2.Request("http://localhost:5000/upload_image", datagen, headers)\n# Actually do the request, and get the response\nprint urllib2.urlopen(request).read()