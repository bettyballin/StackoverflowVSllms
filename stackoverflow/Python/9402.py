#In your model\nhead = models.BooleanField(default=True)\n\n#As a signal plugin:\ndef check_head(sender, **kwargs):\n    message = kwargs['instance']\n    if hasattr(message,'no_check_head') and message.no_check_head:\n        return\n    previous_message = Message.objects.filter(time__lt=message.time).order_by('-time')[0]\n    if message.source == previous_message.source:\n        message.head = False\n    next_message = Message.objects.filter(time__gt=message.time).order_by('time')[0]\n    if message.source == next_message.source:\n        next_message.head = False\n        next_message.no_check_head\n        next_message.save()