class TimeStamper(object):\n        def __init__(self):\n            self.lock = threading.Lock()\n            self.prev = None\n            self.count = 0\n\n         def getTimestamp(self):\n             with self.lock:\n                 ts = str(datetime.now())\n                 if ts == self.prev:\n                     ts +='.%04d' % self.count\n                     self.count += 1\n                 else:\n                     self.prev = ts\n                     self.count = 1\n             return ts