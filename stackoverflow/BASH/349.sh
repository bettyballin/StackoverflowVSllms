#!/bin/bash\n\n# configuration\nhost="twitter.com"\n\n# usage\nif [ "$*" == "" ]; then\n    echo "usage: $0 [off|fast|medium|slow]"\n    exit\nfi\n\n# remove any previous firewall rules\nsudo ipfw list 10 > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n    sudo ipfw delete 10 > /dev/null 2>&1\nfi\nsudo ipfw list 11 > /dev/null 2>&1\nif [ $? -eq 0 ]; then\n    sudo ipfw delete 11 > /dev/null 2>&1\nfi\n\n# process the command line option\nif [ "$1" == "off" ]; then\n    # add rules to deny any connections to configured host\n    sudo ipfw add 10 deny tcp from $host to me\n    sudo ipfw add 11 deny tcp from me to $host\nelse\n    # create a pipe with limited bandwidth\n    bandwidth="100Kbit"\n    if [ "$1" == "fast" ]; then\n        bandwidth="300Kbit"\n    elif [ "$1" == "slow" ]; then\n        bandwidth="10Kbit"\n    fi\n    sudo ipfw pipe 1 config bw $bandwidth\n\n    # add rules to use bandwidth limited pipe \n    sudo ipfw add 10 pipe 1 tcp from $host to me\n    sudo ipfw add 11 pipe 1 tcp from me to $host\nfi