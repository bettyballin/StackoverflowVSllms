create or replace function splitter_count(str in varchar2, delim in char) return int as\nval int;\nbegin\n  val := length(replace(str, delim, delim || ' '));\n  return val - length(str); \nend;\n\ncreate type token_list is varray(100) of varchar2(200);\n\nCREATE or replace function tokenize (str varchar2, delim char) return token_list as\nret token_list;\ntarget int;\ni int;\nthis_delim int;\nlast_delim int;\nBEGIN\n  ret := token_list();\n  i := 1;\n  last_delim := 0;\n  target := splitter_count(str, delim);\n  while i <= target\n  loop\n    ret.extend();\n    this_delim := instr(str, delim, 1, i);\n    ret(i):= substr(str, last_delim + 1, this_delim - last_delim -1);\n    i := i + 1;\n    last_delim := this_delim;\n  end loop;\n  ret.extend();\n  ret(i):= substr(str, last_delim + 1);\n  return ret;\nend;