drop table event\ngo\n\ndrop table event_artist\ngo\n\ncreate table event (eventid int, eventname varchar(255))\ngo\n\ncreate table event_artist (eventid int, artistname varchar(255))\ngo\n\ninsert into event values (1, 'gig1')\ngo\n\ninsert into event values (2, 'gig2')\ngo\n\ninsert into event_artist values (1, 'Led Zip')\ngo\n\ninsert into event_artist values (1, 'The Beatles')\ngo\n\ndrop function Event_Display\ngo\n\ncreate function Event_Display (@EventID int) returns varchar(2000) as\nbegin\n    declare @artistList varchar(2000)\n    set @artistList=''\n\n    select @artistList=@artistList + ', ' + isnull(artistname,'') \n    from event_artist \n    where eventid=@EventID\n\n    return substring(@artistList,3,2000)  --eliminate initial comma\nend\ngo\n\nselect event.eventid, event.eventname, dbo.Event_Display(event.eventid) from event 