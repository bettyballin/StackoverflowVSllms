CREATE OR REPLACE TRIGGER trigger_w_subquery\nAFTER UPDATE OR INSERT ON project_archiving\nFOR EACH ROW WHEN (old.archiving_status <> new.archiving_status\n  AND new.archiving_status = 1\n)\nDECLARE\n  l_offer projects.offer%TYPE;\nBEGIN\n  SELECT offer INTO l_offer \n  FROM projects \n  WHERE projnum = :new.projnum;\n\n  IF l_offer IS NULL THEN\n    INSERT INTO offer_log (offer, status, date)\n    VALUES (null, 9, sysdate);\n  END IF;\nEND;