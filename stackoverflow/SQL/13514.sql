create or replace function bin_shift_right\n(  p_bin in varchar2,\n   p_shift in number default null) return varchar2\nis\n    l_len number;\n    l_shift number;\nbegin\n    l_shift := nvl(p_shift, 1);\n    l_len := length(p_bin);\n    if (l_len <= 0) then\n        return null;\n    end if; \n    if (l_shift > l_len) then\n        l_shift := l_len;\n    end if;\n\n    return lpad(substr(p_bin, 1, l_len - l_shift), l_len, '0'); \nend bin_shift_right;\n\ncreate or replace function shright\n(  p_num in number,\n   p_shift in number default null) return number\nis\nbegin\n    if (trunc(p_num) <> p_num OR p_num < 0) then\n        raise PROGRAM_ERROR;\n    end if;\n    return nvl(to_dec(bin_shift_right(to_bin(p_num), p_shift), 2), 0);\nend shright;\n/