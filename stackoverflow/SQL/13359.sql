SELECT  l.*\nFROM    (\n        SELECT  post_id,\n                COALESCE(\n                (\n                SELECT  id\n                FROM    replies li\n                WHERE   li.post_id = dlo.post_id\n                ORDER BY\n                        li.post_id, li.id\n                LIMIT 2, 1\n                ), CAST(0xFFFFFFFF AS DECIMAL)) AS mid\n        FROM    (\n                SELECT  DISTINCT post_id\n                FROM    replies dl\n                ) dlo\n        ) lo, replies l\nWHERE   l.replies >= lo.replies\n        AND l.replies <= lo.replies\n        AND l.id <= lo.mid