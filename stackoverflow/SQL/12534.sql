create table t1 (id int)\ngo\ncreate function t1_validateSingleton () \nreturns bit\nas\nbegin\ndeclare @ret bit\nset @ret = 1\nif exists (\n    select count(*)\n    from t1\n    group by id\n    having count(*) > 1\n)\nbegin\n    set @ret = 0\nend\nreturn (@ret)\nend\ngo\nalter table t1\nadd constraint t1_singleton\n    check (dbo.t1_validateSingleton()=1)\ngo\ninsert t1 values (1)\ninsert t1 values (2)\ninsert t1 values (1)