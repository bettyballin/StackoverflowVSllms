SELECT  item_type, person_name, item_count\nFROM    (\n        SELECT  item_type, person_name, item_count,\n                @r := IFNULL(@r, 0) + 1 AS rc,\n                CASE WHEN @_item_type IS NULL OR @_item_type <> item_type THEN @r := 0 ELSE 1 END,\n                @_item_type := item_type,\n        FROM    (\n                SELECT  @r := 0,\n                        @_item_type := NULL\n                ) vars,\n                (\n                SELECT  item_type, person_name, COUNT(*) AS item_count\n                FROM    items\n                GROUP BY\n                        item_type, person_name\n                ORDER BY\n                        item_type, person_name, item_count DESC\n                ) vo\n        ) voi\nWHERE   rc < 3