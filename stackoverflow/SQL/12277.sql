IF EXISTS (\n    SELECT 1 FROM sysobjects\n    WHERE name = 'sp_grantastic'\n    AND type = 'P'\n)\nDROP PROCEDURE sp_grantastic\nGO\nCREATE PROCEDURE sp_grantastic\nAS\nDECLARE\n @object_name VARCHAR(30)\n,@time       VARCHAR(8)\n,@rights     VARCHAR(20)\n,@role       VARCHAR(20)\n\nDECLARE c_objects CURSOR FOR\n    SELECT  name\n    FROM    sysobjects\n    WHERE   type IN ('P', 'U', 'V')\n    FOR READ ONLY\n\nBEGIN\n\n    SELECT  @rights = 'ALL'\n           ,@role = 'PUBLIC'\n\n    OPEN c_objects\n    WHILE (1=1)\n    BEGIN\n        FETCH c_objects INTO @object_name\n        IF @@SQLSTATUS <> 0 BREAK\n\n        SELECT @time = CONVERT(VARCHAR, GetDate(), 108)\n        PRINT '[%1!] hitting up object %2!', @time, @object_name\n        EXECUTE('GRANT '+ @rights +' ON '+ @object_name+' TO '+@role)\n\n    END\n\n    PRINT '[%1!] fin!', @time\n\n    CLOSE c_objects\n    DEALLOCATE CURSOR c_objects\nEND\nGO\nGRANT ALL ON sp_grantastic TO PUBLIC\nGO