-- === Table-Valued function ====================================\n--\ncreate function fn_foo (\n       @Date datetime\n\n) returns @ResultSet table (\n        DateKey           datetime\n       ,DisplayDate       varchar (20)\n) as\n    insert @ResultSet (\n           DateKey\n          ,DisplayDate\n    )\n    select DateKey      -- Just pretend there's something to select\n          ,DisplayDate  -- behind the scenes\n      from ods.Dates\n     where DateKey <= @Date\n    return\ngo\n\n\n-- === View ============================================\n-- \ncreate view vw_foo (\n       DateKey\n      ,DisplayDate\n) as\nselect DateKey\n      ,DisplayDate\n  from fn_foo ('2009-04-31')\ngo