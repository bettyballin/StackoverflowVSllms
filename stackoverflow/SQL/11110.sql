where (@IDCriteria is null or ID=@IDCriteria)\n  and (@MaxDateCriteria is null or Date<@MaxDateCriteria)