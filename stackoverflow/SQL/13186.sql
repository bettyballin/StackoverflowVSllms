DECLARE @DeleteDate datetime\nSET @DeleteDate = DateAdd(day, -7, GetDate())\n\nEXECUTE master.sys.xp_delete_file\n0, -- FileTypeSelected (0 = FileBackup, 1 = FileReport)\nN'D:\SQLbackups\', -- folder path (trailing slash)\nN'bak', -- file extension which needs to be deleted (no dot)\n@DeleteDate, -- date prior which to delete\n1 -- subfolder flag (1 = include files in first subfolder level, 0 = not)