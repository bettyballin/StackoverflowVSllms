CREATE TABLE dbo.Teams(TeamID INT NOT NULL PRIMARY KEY);\nGO\nCREATE TABLE dbo.Players(PlayerID INT NOT NULL PRIMARY KEY,\n  TeamID INT NOT NULL FOREIGN KEY REFERENCES dbo.Teams(TeamID),\n  NumberInTeam INT NOT NULL CHECK(NumberInTeam IN (1,2)),\n  TeamMateID INT NOT NULL,\n  TeamMatesNumberInTeam INT NOT NULL,\n-- if NumberInTeam=1 then TeamMatesNumberInTeam must be 2\n-- and vise versa\n  CHECK(NumberInTeam+TeamMatesNumberInTeam = 3), \n  UNIQUE(TeamID, NumberInTeam),\n  UNIQUE(PlayerID, TeamID, NumberInTeam),\n  FOREIGN KEY(TeamMateID, TeamID, TeamMatesNumberInTeam)\n    REFERENCES dbo.Players(PlayerID, TeamID, NumberInTeam)\n);\n\nINSERT INTO dbo.Teams(TeamID) SELECT 1 UNION ALL SELECT 2;\nGO