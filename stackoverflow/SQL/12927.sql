select thing.*, coalesce ( ( select access\n                             from   access\n                             where  userid = 1\n                             and    type = 'thing'\n                             and    object_id = thing.id\n                           ),\n                           ( select access\n                             from   access\n                             where  userid = 1\n                             and    type = 'group'\n                             and    object_id = thing.group_id\n                           )\n                         )\nfrom things