SELECT\n     ST.start_time,\n     ET.end_time\nFROM\n(\n     SELECT\n          T1.start_time\n     FROM\n          dbo.Test_Time_Spans T1\n     LEFT OUTER JOIN dbo.Test_Time_Spans T2 ON\n          T2.start_time < T1.start_time AND\n          T2.end_time >= T1.start_time\n     WHERE\n          T2.start_time IS NULL\n) AS ST\nINNER JOIN\n(\n     SELECT\n          T3.end_time\n     FROM\n          dbo.Test_Time_Spans T3\n     LEFT OUTER JOIN dbo.Test_Time_Spans T4 ON\n          T4.end_time > T3.end_time AND\n          T4.start_time <= T3.end_time\n     WHERE\n          T4.start_time IS NULL\n) AS ET ON\n     ET.end_time > ST.start_time\nLEFT OUTER JOIN\n(\n     SELECT\n          T5.end_time\n     FROM\n          dbo.Test_Time_Spans T5\n     LEFT OUTER JOIN dbo.Test_Time_Spans T6 ON\n          T6.end_time > T5.end_time AND\n          T6.start_time <= T5.end_time\n     WHERE\n          T6.start_time IS NULL\n) AS ET2 ON\n     ET2.end_time > ST.start_time AND\n     ET2.end_time < ET.end_time\nWHERE\n     ET2.end_time IS NULL