test=# create table foo (foo_id serial primary key, bar varchar);\nNOTICE:  CREATE TABLE will create implicit sequence "foo_foo_id_seq" for serial column "foo.foo_id"\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "foo_pkey" for table "foo"\nCREATE TABLE\ntest=# begin; insert into foo (bar) values ('test');\nBEGIN\nINSERT 0 1\ntest=# savepoint sp1;\nSAVEPOINT\ntest=# insert into foo (foo_id, bar) values (1, 'test');\nERROR:  duplicate key value violates unique constraint "foo_pkey"\ntest=# rollback to sp1;\nROLLBACK\ntest=# select * from foo;\n foo_id | bar  \n--------+------\n      1 | test\ntest=# -- note that you're still in a transactio