DECLARE @cmd NVARCHAR(2000), @my_db VARCHAR(255)\n\nSET @my_db = 'MyDatabaseName'\n\nSET @cmd = 'DECLARE @my_cmd NVARCHAR(2000); SET @my_cmd = ''CREATE TRIGGER DBA_Audit ON DATABASE\nFOR DDL_DATABASE_LEVEL_EVENTS\nAS\nDECLARE @data XML\nDECLARE @cmd NVARCHAR(1000)\nDECLARE @posttime NVARCHAR(24)\nDECLARE @spid NVARCHAR(6)\nDECLARE @loginname NVARCHAR(100)\nDECLARE @hostname NVARCHAR(100)\nSET @data = EVENTDATA()\nSET @cmd = @data.value(''''(/EVENT_INSTANCE/TSQLCommand/CommandText)[1]'''', ''''NVARCHAR(1000)'''')\nSET @cmd = LTRIM(RTRIM(REPLACE(@cmd,'''''''','''''''')))\nSET @posttime = @data.value(''''(/EVENT_INSTANCE/PostTime)[1]'''', ''''DATETIME'''')\nSET @spid = @data.value(''''(/EVENT_INSTANCE/SPID)[1]'''', ''''nvarchar(6)'''')\nSET @loginname = @data.value(''''(/EVENT_INSTANCE/LoginName)[1]'''',\n    ''''NVARCHAR(100)'''')\nSET @hostname = HOST_NAME()\nINSERT INTO [DBA_AUDIT].dbo.AuditLog(Command, PostTime,HostName,LoginName)\n VALUES(@cmd, @posttime, @hostname, @loginname);''; EXEC ' + @my_db + '..sp_executesql @my_cmd'\n\nEXEC (@cmd)