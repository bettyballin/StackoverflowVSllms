\ncreate table RandomKeys (RandomKey int)\ncreate table RandomKeysAttempt (RandomKey int)\n\n-- generate m random keys between 1 and n\nfor i = 1 to m\n  insert RandomKeysAttempt select rand()*n + 1\n\n-- eliminate duplicates\ninsert RandomKeys select distinct RandomKey from RandomKeysAttempt\n\n-- as long as we don't have enough, keep generating new keys,\n-- with luck (and m much less than n), this won't be necessary\nwhile count(RandomKeys) < m\n  NextAttempt = rand()*n + 1\n  if not exists (select * from RandomKeys where RandomKey = NextAttempt)\n    insert RandomKeys select NextAttempt\n\n-- get our random rows\nselect *\nfrom RandomKeys r\njoin table t ON r.RandomKey = t.UniqueKey