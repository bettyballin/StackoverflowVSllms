SELECT  tasks.*, students.*,\n        (\n        SELECT  grade\n        FROM    grades\n        WHERE   grades.task_id = tasks.task_id\n                AND grades.username = students.username\n        ORDER BY\n                date DESC\n        LIMIT 1\n        ) AS lastgrade\nFROM    assignments a\nJOIN    assignment_tasks at\nON      at.assignmentID = a.assignmentID\nJOIN    assignment_students ast\nON      ast.assignmentID = a.assignmentID\nJOIN    tasks\nON      tasks.task_id = at.task_id\nJOIN    students\nON      students.username = ast.username