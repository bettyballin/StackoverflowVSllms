prompt 1) Check DUP_VAL_ON_INDEX\nbegin\n   for i in 1..1000 loop\n      begin\n         insert into hasviewed values(7782,20);\n      exception\n         when dup_val_on_index then\n            null;\n      end;\n   end loop\n   rollback;\nend;\n/\n\nprompt 2) Test if row exists before inserting\ndeclare\n   dummy integer;\nbegin\n   for i in 1..1000 loop\n      select count(*) into dummy\n      from hasviewed\n      where objectid=7782 and userid=20;\n      if dummy = 0 then\n         insert into hasviewed values(7782,20);\n      end if;\n   end loop;\n   rollback;\nend;\n/\n\nprompt 3) Test if row exists while inserting\nbegin\n   for i in 1..1000 loop\n      insert into hasviewed\n      select 7782,20 from dual\n      where not exists (select null\n                        from hasviewed\n                        where objectid=7782 and userid=20);\n   end loop;\n   rollback;\nend;\n/