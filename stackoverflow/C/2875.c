// This assumes buffer is at least x bytes long,\n// and that the socket is blocking.\nvoid ReadXBytes(int socket, unsigned int x, void* buffer)\n{\n    int bytesRead = 0;\n    int result;\n    while (bytesRead < x)\n    {\n        result = read(socket, buffer + bytesRead, x - bytesRead);\n        if (result < 1 )\n        {\n            // Throw your error.\n        }\n\n        bytesRead += result;\n    }\n}