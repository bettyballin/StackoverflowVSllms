#include <stdio.h>\n\nstruct event_cb;\n\ntypedef void (*event_cb_t)(const struct event_cb *evt, void *user_data);\n\nstruct event_cb\n{\n    event_cb_t cb;\n    void *data;\n};\n\nstatic struct event_cb saved = { 0, 0 };\n\nvoid event_cb_register(event_cb_t cb, void *user_data)\n{\n    saved.cb = cb;\n    saved.data = user_data;\n}\n\nstatic void my_event_cb(const struct event_cb *evt, void *data)\n{\n    printf("in %s\n", __func__);\n    printf("data1: %s\n", (const char *)data);\n    printf("data2: %s\n", (const char *)evt->data);\n}\n\nint main(void)\n{\n    char my_custom_data[40] = "Hello!";\n    event_cb_register(my_event_cb, my_custom_data);\n\n    saved.cb(&saved, saved.data);\n\n    return 0;\n}