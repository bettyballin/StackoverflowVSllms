// The class for which calling any method should call PreMethod first.\nclass DogImplementation\n{\npublic:\n   void PreMethod();\n   void Bark();\nprivate:\n   DogImplementation(); // constructor private so can only be created via smart-pointer.\n   friend class Dog; // can access constructor.\n};\n\n// A 'smart-pointer' that wraps a DogImplementation to give you\n// more control.\nclass Dog\n{\npublic:\n   DogImplementation* operator -> ()\n   {\n       _impl.PreMethod();\n       return &_impl;\n   }\nprivate:\n   DogImplementation _impl;\n};\n\n// Example usage of the smart pointer. Use -> instead of .\nvoid UseDog()\n{\n  Dog dog;\n  dog->Bark();    // will call DogImplementation::PreMethod, then DogImplementation::Bark\n}