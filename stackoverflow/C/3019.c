// call in main() before printing to stdout\n// returns TRUE if program is in its own console (cursor at 0,0) or\n// FALSE if it was launched from an existing console.\n// See http://support.microsoft.com/kb/99115\n#include <stdio.h>\n#include <windows.h>\nint separate_console( void)\n{\n    CONSOLE_SCREEN_BUFFER_INFO csbi;\n\n    if (!GetConsoleScreenBufferInfo( GetStdHandle( STD_OUTPUT_HANDLE), &csbi))\n    {\n        printf( "GetConsoleScreenBufferInfo failed: %lu\n", GetLastError());\n        return FALSE;\n    }\n\n    // if cursor position is (0,0) then we were launched in a separate console\n    return ((!csbi.dwCursorPosition.X) && (!csbi.dwCursorPosition.Y));\n}