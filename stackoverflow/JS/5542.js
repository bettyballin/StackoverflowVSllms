/*\n\nhighlight v4\n\nHighlights arbitrary terms.\n\n<http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html>\n\nMIT license.\n\nJohann Burkard\n<http://johannburkard.de>\n<mailto:jb@eaio.com>\n\n*/\n\njQuery.fn.highlight = function(pat) {\n function innerHighlight(node, pat) {\n  var skip = 0;\n  if (node.nodeType == 3) {\n   var pos = node.data.toUpperCase().indexOf(pat);\n   if (pos >= 0) {\n    var spannode = document.createElement('span');\n    spannode.className = 'highlight';\n    var middlebit = node.splitText(pos);\n    var endbit = middlebit.splitText(pat.length);\n    var middleclone = middlebit.cloneNode(true);\n    spannode.appendChild(middleclone);\n    middlebit.parentNode.replaceChild(spannode, middlebit);\n    skip = 1;\n   }\n  }\n  else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {\n   for (var i = 0; i < node.childNodes.length; ++i) {\n    i += innerHighlight(node.childNodes[i], pat);\n   }\n  }\n  return skip;\n }\n return this.length && pat && pat.length ? this.each(function() {\n  innerHighlight(this, pat.toUpperCase());\n }) : this;\n};\n\njQuery.fn.removeHighlight = function() {\n return this.find("span.highlight").each(function() {\n  this.parentNode.firstChild.nodeName;\n  with (this.parentNode) {\n   replaceChild(this.firstChild, this);\n   normalize();\n  }\n }).end();\n};