$("li").click(function(){\n    if($(this).is("[id^='sub']")){\n        var all_ul_parents = [];\n        // get parents which are uls, and put each id in an array\n        $(this).parents().filter('ul').each(function(){\n            all_ul_parents.push($(this).attr('id'));\n        });\n        // the final one added will be highest level ul parent\n        current_id = all_ul_parents.pop();\n        alert(current_id);\n    }   \n});