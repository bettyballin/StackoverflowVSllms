function render($index){\n    $stack = array();\n    array_push($index);\n\n    $pre = '';\n    $post = '';\n\n    while(!empty($stack)){\n        $idx = array_pop($stack);\n\n        foreach($things[$idx] as $key => $value){\n            $pre .= '<1>';\n            $spost = '';\n\n            if(isset($data['id'])){\n                $pre .= '<2 class="wrap">';\n                $spost .= '</2>';\n\n                $stack[] = $things[$data['id']];\n            }\n\n            $spost .= '</1>';\n            $post .= $spost;\n        }\n    }\n\n    return $pre . $post;\n}