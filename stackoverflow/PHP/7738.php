<?PHP\nfunction watermark($source_file,$source_width,$source_height,$image_type) {\n    $validTypes = array("gif" => "gif", "jpg" => "jpeg", "jpeg" => "jpeg", "png" => "png");\n    if (!array_key_exists($image_type, $validTypes)) {\n        trigger_error("Not a valid image type", E_USER_WARNING);\n        return NULL;\n    }\n\n    $inFunc = "imagecreatefrom" . $validTypes[$image_type];\n    $outFunc = "image" . $validTypes[$image_type];\n\n    //first image below will be large then small in 1line if/else\n    $watermarksize = ($source_width > 300) ? '../images/fpwatermark.gif' : '../images/fpwatermark.gif';\n    //now add the watermark to the image.\n    $watermark = imagecreatefromgif($watermarksize);\n\n    // open the image using the assigned function\n    $image = $inFunc($source_file);\n\n    //get the dimensions of the watermark\n    list($water_width, $water_height) = getimagesize($watermarksize);\n    // Water mark process\n    $x = $source_width - $water_width - 8; //horizontal position\n    $y = $source_height - $water_height - 8; //vertical positon\n    // imagesy($image) can be the source images width\n    imagecopymerge($image, $watermark, $x, $y, 0, 0, $water_width, $water_height, 65);\n\n    // save the image\n    $outFunc($image, $source_file, 90);\n\n    imagedestroy($image);\n    return $source_file;\n}