<?\n/* Luhn algorithm number checker - (c) 2005-2008 shaman - www.planzero.org *\n * This code has been released into the public domain, however please      *\n * give credit to the original author where possible.                      */\n\nfunction luhn_check($number) {\n\n  // Strip any non-digits (useful for credit card numbers with spaces and hyphens)\n  $number=preg_replace('/\D/', '', $number);\n\n  // Set the string length and parity\n  $number_length=strlen($number);\n  $parity=$number_length % 2;\n\n  // Loop through each digit and do the maths\n  $total=0;\n  for ($i=0; $i<$number_length; $i++) {\n    $digit=$number[$i];\n    // Multiply alternate digits by two\n    if ($i % 2 == $parity) {\n      $digit*=2;\n      // If the sum is two digits, add them together (in effect)\n      if ($digit > 9) {\n        $digit-=9;\n      }\n    }\n    // Total up the digits\n    $total+=$digit;\n  }\n\n  // If the total mod 10 equals 0, the number is valid\n  return ($total % 10 == 0) ? TRUE : FALSE;\n\n}\n?>