/**\n * returns the pearson correlation coefficient (least squares best fit line)\n * \n * @param array $x array of all x vals\n * @param array $y array of all y vals\n */\n\nfunction pearson(array $x, array $y)\n{\n    // number of values\n    $n = count($x);\n    $keys = array_keys(array_intersect_key($x, $y));\n\n    // get all needed values as we step through the common keys\n    $x_sum = 0;\n    $y_sum = 0;\n    $x_sum_sq = 0;\n    $y_sum_sq = 0;\n    $prod_sum = 0;\n    foreach($keys as $k)\n    {\n        $x_sum += $x[$k];\n        $y_sum += $y[$k];\n        $x_sum_sq += pow($x[$k], 2);\n        $y_sum_sq += pow($y[$k], 2);\n        $prod_sum += $x[$k] * $y[$k];\n    }\n\n    $numerator = $prod_sum - ($x_sum * $y_sum / $n);\n    $denominator = sqrt( ($x_sum_sq - pow($x_sum, 2) / $n) * ($y_sum_sq - pow($y_sum, 2) / $n) );\n\n    return $denominator == 0 ? 0 : $numerator / $denominator;\n}