function decodeValue($cookie) {\n    $cookie = urldecode($cookie);\n    $re = '/^(a|n|d|b|s|o)\:(.*)$/';\n    $matches = array();\n    preg_match($re, $cookie, $matches);\n    if(!$matches || !$matches[1]) return; // non state cookie\n    $type = $matches[1];\n    $v = $matches[2];\n    switch ($type){\n        case "n":\n            return floatval($v);\n        case "d":\n            return new DateTime($v);\n        case "b":\n            return ($v == "1" ? true : false);\n        case "a":\n            $all = array();\n            $values = explode('^', $v);\n            $len = count($values);\n            for ($i = 0; $i < $len; $i++) {\n                $all.push(decodeValue($values[$i]));\n            }\n            return $all;\n       case "o":\n            $all = array();\n            $values = explode('^', $v);\n            $len = count($values);\n            for($i = 0; $i < $len; $i++){\n                $kv = explode('=', $values[$i]);\n                $all[$kv[0]] = decodeValue($kv[1]);\n            }\n            return $all;\n       default:\n            return $v;\n    }\n}