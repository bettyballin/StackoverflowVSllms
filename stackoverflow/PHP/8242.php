function select($name, $options = array(), $attrs = array(), $showEmpty = false) {\n    $attrs['name'] = $name;\n    $attrs['class'] = isset($attrs['class']) ? $attrs['class'] . ' input' : 'input';\n    if(isset($this->validation->invalid[$name])) {\n        $attrs['class'] .= ' errorinput';\n    }       \n    $opts = array();\n    foreach($attrs as $key => $value) {\n        $opts[] = $key . '="' . $value . '"';   \n    }\n    $htmloptions = array();\n    $hasSelected = false;\n    foreach($options as $option => $value) {\n        if(isset($this->validation->post[$name]) && $this->validation->post[$name] == $option) {\n            $hasSelected = true;\n            $htmloptions[] = '<option value="' . $option . '" selected>' . $value;  \n        } else {\n            $htmloptions[] = '<option value="' . $option . '">' . $value;                   \n        }\n    }\n    if($showEmpty) {\n        $emptyoption = '<option value=""' . (($hasSelected) ? '' : ' selected') . '>';\n        $htmloptions = array_merge($emptyoption, $htmloptions);\n    }\n    return '<select ' . implode(' ', $opts) . '>' . implode("\n", $htmloptions) . '</select>';\n}