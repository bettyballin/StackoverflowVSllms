<?php\n\nclass TablePeer extends BaseTablePeer\n{\n    public static function selectWithCalculatedColumns()\n    {\n        //  Do our custom selection, still using propel's column data constants\n        $sql = "\n            SELECT " . implode( ', ', self::getFieldNames( BasePeer::TYPE_COLNAME ) ) . "\n                 , count(" . JoinedTablePeer::ID . ") AS calc_col\n              FROM " . self::TABLE_NAME . "\n              LEFT JOIN " . JoinedTablePeer::TABLE_NAME . "\n                ON " . JoinedTablePeer::ID . " = " . self::FKEY_COLUMN\n        ;\n\n        //  Get the result set\n        $conn   = Propel::getConnection();\n        $stmt   = $conn->prepareStatement( $sql );\n        $rs = $stmt->executeQuery( array(), ResultSet::FETCHMODE_NUM );\n\n        //  Create an empty rowset\n        $rowset = array();\n\n        //  Iterate over the result set\n        while ( $rs->next() )\n        {\n            //  Create each row individually\n            $row = new Table();\n            $startcol = $row->hydrate( $rs );\n\n            //  Use our custom setter to populate the new column\n            $row->setCalcCol( $row->get( $startcol ) );\n            $rowset[] = $row;\n        }\n        return $rowset;\n    }\n}