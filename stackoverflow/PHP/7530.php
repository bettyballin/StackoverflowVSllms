<?php\n    $functions = array();\n    $path = "/path/to/my/php/project";\n    define_dir($path, $functions);\n    reference_dir($path, $functions);\n    echo\n        "<table>" .\n            "<tr>" .\n                "<th>Name</th>" .\n                "<th>Defined</th>" .\n                "<th>Referenced</th>" .\n            "</tr>";\n    foreach ($functions as $name => $value) {\n        echo\n            "<tr>" . \n                "<td>" . htmlentities($name) . "</td>" .\n                "<td>" . (isset($value[0]) ? count($value[0]) : "-") . "</td>" .\n                "<td>" . (isset($value[1]) ? count($value[1]) : "-") . "</td>" .\n            "</tr>";\n    }\n    echo "</table>";\n    function define_dir($path, &$functions) {\n        if ($dir = opendir($path)) {\n            while (($file = readdir($dir)) !== false) {\n                if (substr($file, 0, 1) == ".") continue;\n                if (is_dir($path . "/" . $file)) {\n                    define_dir($path . "/" . $file, $functions);\n                } else {\n                    if (substr($file, - 4, 4) != ".php") continue;\n                    define_file($path . "/" . $file, $functions);\n                }\n            }\n        }       \n    }\n    function define_file($path, &$functions) {\n        $tokens = token_get_all(file_get_contents($path));\n        for ($i = 0; $i < count($tokens); $i++) {\n            $token = $tokens[$i];\n            if (is_array($token)) {\n                if ($token[0] != T_FUNCTION) continue;\n                $i++;\n                $token = $tokens[$i];\n                if ($token[0] != T_WHITESPACE) die("T_WHITESPACE");\n                $i++;\n                $token = $tokens[$i];\n                if ($token[0] != T_STRING) die("T_STRING");\n                $functions[$token[1]][0][] = array($path, $token[2]);\n            }\n        }\n    }\n    function reference_dir($path, &$functions) {\n        if ($dir = opendir($path)) {\n            while (($file = readdir($dir)) !== false) {\n                if (substr($file, 0, 1) == ".") continue;\n                if (is_dir($path . "/" . $file)) {\n                    reference_dir($path . "/" . $file, $functions);\n                } else {\n                    if (substr($file, - 4, 4) != ".php") continue;\n                    reference_file($path . "/" . $file, $functions);\n                }\n            }\n        }       \n    }\n    function reference_file($path, &$functions) {\n        $tokens = token_get_all(file_get_contents($path));\n        for ($i = 0; $i < count($tokens); $i++) {\n            $token = $tokens[$i];\n            if (is_array($token)) {\n                if ($token[0] != T_STRING) continue;\n                if ($tokens[$i + 1] != "(") continue;\n                $functions[$token[1]][1][] = array($path, $token[2]);\n            }\n        }\n    }\n?>