<?\n$prepared_statement_name = 'activity1';\n$mydbname = '...';\n\n$conn = pg_connect("host=... port=... dbname=... user=... password=...");\n\n$result = pg_query_params($conn, 'SELECT name FROM pg_prepared_statements WHERE name = $1', array($prepared_statement_name));\n\nif (pg_num_rows($result) == 0) {\n    $result = pg_prepare($conn, $prepared_statement_name, 'SELECT * FROM pg_stat_activity WHERE datname =  $1');\n}\n\n$result = pg_execute($conn, $prepared_statement_name, array($mydbname));\nwhile($row = pg_fetch_row($result)) {\n    var_dump($row);\n}