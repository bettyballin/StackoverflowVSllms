function clean($str){\n\nglobal $clean_words; \n\n$replacement = '[explicit]';\n\nif(empty($clean_words)){\n    $badwords = explode("\n", file_get_contents('badwords.txt'));\n\n    $clean_words = array();\n\n    foreach($badwords as $word) {\n        $clean_words[]= '/(\b' . trim($word) . '\b)/si';\n    }\n}\n\n$out = preg_replace($clean_words, $replacement, $str);\nreturn $out;\n }