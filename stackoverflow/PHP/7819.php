$fileData = fillArrayWithFileNodes( new DirectoryIterator( '/path/to/root/' ) );\n\nfunction fillArrayWithFileNodes( DirectoryIterator $dir )\n{\n  $data = array();\n  foreach ( $dir as $node )\n  {\n    if ( $node->isDir() && !$node->isDot() )\n    {\n      $data[$node->getFilename()] = fillArrayWithFileNodes( new DirectoryIterator( $node->getPathname() ) );\n    }\n    else if ( $node->isFile() )\n    {\n      $data[] = $node->getFilename();\n    }\n  }\n  return $data;\n}