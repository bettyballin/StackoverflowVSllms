$content = 'Çà ! Nœm dé fîçhïèr tôrdù, @ pöür têstër... ? ~ Œ[€]';\n$content = preg_replace_callback('/[\x80-\xff]/', 'CB_CharToEntity', $content);\necho $econtent . '<br>';\necho htmlspecialchars($content) . '<br>';\necho htmlentities($content) . '<br>';\necho htmlentities($content, ENT_NOQUOTES, 'cp1252') . '<br>';\n\nfunction CB_CharToEntity($matches)\n{\n    return '&#' . ord($matches[0]) . ';';\n}