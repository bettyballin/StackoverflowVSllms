function get_connection() {\n  $test = mysql_connect('localhost', 'user', 'password');\n  mysql_select_db('db');\n  return $test;\n}\n\n$conn1 = get_connection();\n$conn2 = get_connection(); // "copied" resource under PHP4\n\n$query = "INSERT INTO test_table (id, field) VALUES ('', 'test')";\nmysql_query($query, $conn1);\nprint mysql_insert_id($conn1)."<br />"; // prints 1\n\nmysql_query($query, $conn2);\nprint mysql_insert_id($conn2)."<br />"; // prints 2\n\nprint mysql_insert_id($conn1); // prints 2, would print 1 if this was not a reference