<?php\n\nfunction getTitle($node) {\n    foreach ($node['value'] as $cnode) {\n            if ($cnode['tag'] == 'Title') {\n                return $cnode['value'];\n            }\n    }\n\n    return 'untitled';\n}\n\nfunction getCNodes($node) {\n    $cnodes = array();\n\n    foreach ($node['value'] as $cnode) {\n        if ($cnode['tag'] == 'NavigationNode') {\n            $cnodes[] = $cnode;\n        }\n    }\n\n    return $cnodes;\n}\n\nfunction runTree($node) {\n    $title  = getTitle($node);\n    $cnodes = getCNodes($node);\n\n    if (count($cnodes) > 0) {\n        $out = '<li>' . $title . "\n" . '<ul>';\n        foreach ($cnodes as $cnode) {\n            $out .= runTree($cnode);\n        }\n        $out .= '</ul>' . "\n" . '</li>' . "\n";\n\n        return $out;\n    } else {\n        return '<li>' . $title . '</li>' . "\n";\n    }\n}\n\n\n$tree = array(\n    0 => array(\n        'tag' => 'NavigationMode',\n        'value' => array(\n                0 => array(\n                        'tag' => 'Title',\n                        'value' => 'Introduction'\n                ),\n                1 => array(\n                        'tag' => 'NavigationNode',\n                        'value' => array(\n                                0 => array(\n                                        'tag' => 'Title',\n                                        'value' => 'Sub Intro'\n                                )\n                        )\n                )\n        )\n    ),\n    1 => array(\n        'tag' => 'NavigationMode',\n        'value' => array(\n                0 => array(\n                        'tag' => 'Title',\n                        'value' => 'Module 1'\n                )\n        )\n    )\n);\n\n\n\necho '<ul>';\nforeach ($tree as $node) {\n    echo runTree($node);\n}\necho '</ul>';\n\n?>