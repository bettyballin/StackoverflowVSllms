class ConnectionFactory\n{\n    private static $factory;\n    private $db;\n\n    public static function getFactory()\n    {\n        if (!self::$factory)\n            self::$factory = new ConnectionFactory(...);\n        return self::$factory;\n    }\n\n    public function getConnection() {\n        if (!$this->db)\n            $this->db = new PDO(...);\n        return $this->db;\n    }\n}\n\nfunction getSomething()\n{\n    $conn = ConnectionFactory::getFactory()->getConnection();\n    .\n    .\n    .\n}