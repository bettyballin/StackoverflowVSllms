<?php\n\nclass SimpleDMOZParser\n{\n    protected $_stack = array();\n    protected $_file = "";\n    protected $_parser = null;\n\n    protected $_currentId = "";\n    protected $_current = "";\n\n    public function __construct($file)\n    {\n        $this->_file = $file;\n\n        $this->_parser = xml_parser_create("UTF-8");\n        xml_set_object($this->_parser, $this);\n        xml_set_element_handler($this->_parser, "startTag", "endTag");\n    }\n\n    public function startTag($parser, $name, $attribs)\n    {\n        array_push($this->_stack, $this->_current);\n\n        if ($name == "TOPIC" && count($attribs)) {\n            $this->_currentId = $attribs["R:ID"];\n        }\n\n        if ($name == "LINK" && strpos($this->_currentId, "Top/Home/Consumer_Information/Electronics/") === 0) {\n            echo $attribs["R:RESOURCE"] . "\n";\n        }\n\n        $this->_current = $name;\n    }\n\n    public function endTag($parser, $name)\n    {\n        $this->_current = array_pop($this->_stack);\n    }\n\n    public function parse()\n    {\n        $fh = fopen($this->_file, "r");\n        if (!$fh) {\n            die("Epic fail!\n");\n        }\n\n        while (!feof($fh)) {\n            $data = fread($fh, 4096);\n            xml_parse($this->_parser, $data, feof($fh));\n        }\n    }\n}\n\n$parser = new SimpleDMOZParser("content.rdf.u8");\n$parser->parse();