function dateDifference($date1, $date2)\n{\n    $d1 = (is_string($date1) ? strtotime($date1) : $date1);\n    $d2 = (is_string($date2) ? strtotime($date2) : $date2);\n\n    $diff_secs = abs($d1 - $d2);\n    $base_year = min(date("Y", $d1), date("Y", $d2));\n\n    $diff = mktime(0, 0, $diff_secs, 1, 1, $base_year);\n\n    return array\n    (\n        "years"         => abs(substr(date('Ymd', $d1) - date('Ymd', $d2), 0, -4)),\n        "months_total"  => (date("Y", $diff) - $base_year) * 12 + date("n", $diff) - 1,\n        "months"        => date("n", $diff) - 1,\n        "days_total"    => floor($diff_secs / (3600 * 24)),\n        "days"          => date("j", $diff) - 1,\n        "hours_total"   => floor($diff_secs / 3600),\n        "hours"         => date("G", $diff),\n        "minutes_total" => floor($diff_secs / 60),\n        "minutes"       => (int) date("i", $diff),\n        "seconds_total" => $diff_secs,\n        "seconds"       => (int) date("s", $diff)\n    );\n}