class MyClass {\n    /** @var integer How deep the redirect layers of Apache go. -1 means not set. */\n    private $redirectLevel = -1;\n\n    /**\n     * Get an environment variable with all the REDIRECT_ prefixes stripped off\n     */\n    private function getEnv($var)\n    {\n        // Find out how deep the redirect goes\n        if ($this->redirectLevel == -1) {\n            reset($_SERVER);\n            $key = key($_SERVER);\n            $this->redirectLevel = substr_count($key, 'REDIRECT_');\n        }\n\n        $result = '';\n        $prefix = '';\n        for ($i = 0; $i < $this->redirectLevel + 1; $i++) {\n            if (isset($_SERVER[$prefix . $var])) {\n                $result = $_SERVER[$prefix . $var];\n            }\n            $prefix .= 'REDIRECT_';\n        }\n        return $result;\n    }\n}