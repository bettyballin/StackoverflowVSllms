<?php\n\n//this works\nclass a {\n   private function replaceCallback($m) { return 'replaced'; }\n\n   public function test() {\n        $str = " test test ";\n        $result = preg_replace_callback('/test/', array($this, 'replaceCallback'), $str);\n        echo $result;\n   } \n}\n\n$a = new a();\n$a->test();\n\n\n//this doesn't work\n$result = preg_replace_callback('/test/', array(new a(), 'replaceCallback'), ' test test ');    \necho $result;