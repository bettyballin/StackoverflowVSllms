$sql  = 'SELECT * FROM foo ';\n$sql .= 'WHERE 1 ';\n\nif (array_key_exists('category', $_GET)) {\n    $sql .= sprintf('AND category_id = %d ', intval($_GET["category"]));\n}\n\nif (array_key_exists('date', $_GET)) {\n    $sql .= sprintf('AND date = "%s" ', mysql_real_escape_string($_GET["date"]));\n}\n\n// and so on...