<?php\ninclude '../connection.php';\n$id = (int)$_GET['id'];\n$query = "SELECT * FROM `images` WHERE `image_id` = '$id'";\n\n$result=mysql_query($query);\n$row = mysql_fetch_array($result);\n\n$image = $row['image'];\n$image_type= $row['image_type'];\n$size = $row['image_size'];\n//alternative\n/* list($image, $image_type, $size) = array(\n                                       $row['image'],\n                                       $row['image_type'],\n                                       $row['image_size']\n                                      );\n*/\n$ext = explode('/', $image_type);\n$name = $id . '.' . $ext[1]; \n\nheader("Content-type: $image_type");\nheader("Content-length: $size");\nheader("Content-Disposition: attachment; filename=$name");\n\nprint $image;     \nexit;