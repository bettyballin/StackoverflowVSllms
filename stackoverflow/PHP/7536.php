function do_post_request($url, $data, $optional_headers = null) { \n  $params = array('http' => array( \n    'method' => 'post', \n    'content' => $data \n  )); \n\n  if ($optional_headers!== null) \n    $params['http']['header'] = $optional_headers; \n\n  $ctx = stream_context_create($params); \n  $fp = @fopen($url, 'rb', false, $ctx); \n  if (!$fp)\n    throw new Exception("Problem with $url, $php_errormsg"); \n\n  $response = @stream_get_contents($fp); \n  if ($response === false) \n    throw new Exception("Problem reading data from $url, $php_errormsg"); \n\n  return $response; \n}