if(!$acl->isAllowed($role, $resource, $privilege))\n{\n    if(!$this->getRequest()->isXMLHttpRequest())\n    {\n        //@todo getResponse\n        $response->setBody(Zend_Json::encode(array('result'=>'fail', 'reason'=>'Need login');\n        $response->sendResponse();\n        exit;\n    }\n\n    Booze_Log::log("ACLPlugin: Sent to login");\n\n    $request->setControllerName('login');\n    $request->setActionName('index');\n    $request->setDispatched(false);\n}