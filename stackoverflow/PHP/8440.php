$this->db->select('*');  \n$this->db->from('books b'); \n$this->db->join('collections c', 'c.collectid= b.collectionid');\n$books = $this->db->get()->result;\nforeach($books as $book) {\n     $this->db->select('*');  \n     $this->db->from('Tags t'); \n     $this->db->join('BooksTags bt', 't.tagid= bt.tagid');\n     $this->db->where('bt.bookid', $book->bookid);\n     $book->tags = $this->db->get()->result;\n}\n$data['books'] = $books;