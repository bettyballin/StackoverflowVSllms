<?php\n$con = mysql_connect("localhost","root","123456");\n$throttle = 0;\n$batch = 50;\n$pause = 10; // seconds\n\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db("maildb", $con);\n\n// Message Table\n$MSGresult = mysql_query("SELECT * FROM msgs");\n\n// User Table\n$USERresult = mysql_query("SELECT * FROM members");\n\nwhile($MSGrow = mysql_fetch_array($MSGresult))\n  {\n    while($USERrow = mysql_fetch_array($USERresult))\n        {\n          mail($USERrow['email'],$MSGrow['subject'],$MSGrow['body']);\n          $throttle += 1;\n          if ($throttle > $batch ) { sleep($pause); $throttle = 0;} \n        }\n    mysql_data_seek($USERresult,0);\n  }\n\nmysql_close($con);\n?> 