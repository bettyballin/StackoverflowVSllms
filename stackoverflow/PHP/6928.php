<?php\n\nfunction array_depth_count(&$array, $count=array(), $depth=1) {\n    foreach ($array as &$value) {\n        if (is_array($value)) {\n            $value['count'] = ++$count[$depth];\n            array_depth_count($value, $count, $depth + 1);\n        }\n    }\n}\n\n$a = array(array(array(array(0),array(0),array(),array()),0,array()));\n\necho "Before\n";\nprint_r($a);\narray_depth_count($a);\necho "\n\nAfter\n";\nprint_r($a);\n\n?>