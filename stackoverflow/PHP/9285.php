<?php\n\n$url = "http://stackoverflow.com/questions/1122845";\n\nfunction urlOK($url)\n{\n\n    $url_data = parse_url ($url);\n    if (!$url_data) return FALSE;\n\n   $errno="";\n   $errstr="";\n   $fp=0;\n\n   $fp=fsockopen($url_data['host'],80,$errno,$errstr,30);\n\n   if($fp===0) return FALSE;\n   $path ='';\n   if  (isset( $url_data['path'])) $path .=  $url_data['path'];\n   if  (isset( $url_data['query'])) $path .=  '?' .$url_data['query'];\n\n   $out="GET /$path HTTP/1.1\r\n";\n   $out.="Host: {$url_data['host']}\r\n";\n   $out.="Connection: Close\r\n\r\n";\n\n   fwrite($fp,$out);\n   $content=fgets($fp);\n   $code=trim(substr($content,9,4)); //get http code\n   fclose($fp);\n   // if http code is 2xx or 3xx url should work\n   return  ($code[0] == 2 || $code[0] == 3) ? TRUE : FALSE;\n}\n\necho $url;\nif (urlOK($url)) echo " is a working URL";\n    else echo " is a bad URL";\n?>