<?php\n\n$pattern = "#^https?://([a-z0-9-]+\.)*blah\.com(/.*)?$#";\n\n$tests = array(\n    'http://blah.com/so/this/is/good'\n  , 'http://blah.com/so/this/is/good/index.html'\n  , 'http://www.blah.com/so/this/is/good/mice.html#anchortag'\n  , 'http://anysubdomain.blah.com/so/this/is/good/wow.php'\n  , 'http://anysubdomain.blah.com/so/this/is/good/wow.php?search=doozy'\n  , 'http://any.sub-domain.blah.com/so/this/is/good/wow.php?search=doozy' // I added this case\n  , 'http://999.sub-domain.blah.com/so/this/is/good/wow.php?search=doozy' // I added this case\n  , 'http://obviousexample.com'\n  , 'http://bbc.co.uk/blah.com/whatever/you/get/the/idea'\n  , 'http://blah.com.example'\n  , 'not/even/a/blah.com/url'\n);\n\nforeach ( $tests as $test )\n{\n  if ( preg_match( $pattern, $test ) )\n  {\n    echo $test, " <strong>matched!</strong><br>";\n  } else {\n    echo $test, " <strong>did not match.</strong><br>";\n  }\n}\n\n//  Here's another way\necho '<hr>';\nforeach ( $tests as $test )\n{\n  if ( $filtered = filter_var( $test, FILTER_VALIDATE_URL ) )\n  {\n    $host = parse_url( $filtered, PHP_URL_HOST );\n    if ( $host && preg_match( "/blah\.com$/", $host ) )\n    {\n      echo $filtered, " <strong>matched!</strong><br>";\n    } else {\n      echo $filtered, " <strong>did not match.</strong><br>";\n    }\n  } else {\n    echo $test, " <strong>did not match.</strong><br>";\n  }\n}