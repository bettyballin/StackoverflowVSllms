$round_count = 0;\n$header_printed = false;\n$current_player = NULL;\n$current_total = 0;\n$current_output_line = "";\nforeach ($scores as $score) {\n    // Check whether we have to move to a new player\n    if ($score->Player_Name != $current_player) {\n        // Check whether we have anything to print before\n        // resetting the variables\n        if (!is_null($current_player)) {\n            if (!$header_printed) {\n                printf("%-10s", "Player");\n                for ($i = 0; $i < $round_count; $i++) {\n                    printf("%-10s", "Round $i");\n                }\n                printf("%-10s\n", "Total");\n\n                $header_printed = true;\n            }\n\n            $current_output_line .= sprintf("%5d\n", $current_total);\n            print $current_output_line;\n        }\n\n        // Reset the total and various variables for the new player\n        $round_count = 0;\n        $current_player = $score->Player_Name;\n        $current_total = 0;\n        $current_output_line = sprintf("%-10s", $score->Player_Name);\n    }\n\n    $round_count++;\n    $current_total += $score->Score;\n    $current_output_line .= sprintf("%5d     ", $score->Score);\n}\n// The last player is not printed because we exited the loop \n// before the print statement, so we need a print statement here.\nif ($current_output_line != "") {\n    $current_output_line .= sprintf("%5d\n", $current_total);\n    print $current_output_line;\n}