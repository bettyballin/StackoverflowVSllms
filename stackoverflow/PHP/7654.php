<?php\n\nfunction convertLikeToRegex( $command )\n{\n    return "/^" . str_replace( '%', '(.*?)', preg_quote( $command ) ) .  "$/s";\n}\n\nfunction selectLikeMatches( $haystack, $needle )\n{\n    return preg_grep( convertLikeToRegex( $needle ), $haystack );\n}\n\n$likeClauses = array(\n    '%foo'\n    ,'foo%'\n    ,'%foo%'\n);\n\n$testInput = array(\n    'foobar'\n    ,'barfoo'\n    ,'barfoobaz'\n);\n\nforeach ( $likeClauses as $clause )\n{\n    echo "Testing $clause:";\n    echo '<pre>';\n    print_r( selectLikeMatches( $testInput, $clause ) );\n    echo '</pre>';\n}