<?php\n\nclass foo {\n  var $bars = array();\n  function __construct() {\n    "Foo Exists!";\n  }\n\n  function magic_bullet($id) {\n    switch($id) {\n    case 1:\n      echo "There is no spoon! ";\n    case 2:\n      echo "Or is there... ";\n      break;\n    }\n  }\n\n  function addBar( &$bar )\n  {\n    $bar->setFoo( $this );\n    $this->bars[] = &$bar;\n  }\n}\n\nclass bar {\n  var $foo;\n  function __construct() {\n    echo "Bar exists";\n  }\n\n  function target($id){\n    if ( isset( $this->foo ) )\n    {\n      echo $this->foo->magic_bullet( $id );\n    } else {\n      trigger_error( 'There is no foo!', E_USER_ERROR );\n    }\n  }\n  function setFoo( &$foo )\n  {\n    $this->foo = &$foo;\n  }\n}\n\n$test = new foo();\n$bar1 = new bar();\n$bar2 = new bar();\n\n$test->addBar( $bar1 );\n$test->addBar( $bar2 );\n\n$bar1->target( 1 );\n$bar1->target( 2 );