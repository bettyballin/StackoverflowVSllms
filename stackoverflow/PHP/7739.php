<?php\n/**\n * Doctrine model loading bootstrap resource. Options must provide a connection string.\n * directory option for model directory is optional (default is ./models).\n * Further options will be set for the Doctrine manager via setAttribute (e.g. model_loading). \n * @author daff\n */\nclass Cuckoo_Application_Resource_Model extends Zend_Application_Resource_ResourceAbstract\n{\n    public function init()\n    {\n        $manager = Doctrine_Manager::getInstance();\n        $options = $this->getOptions();\n\n        foreach($options as $key => $value)\n        {\n           if($key != 'connection' && $key != 'directory')\n                    $manager->setAttribute($key, $value);\n        }\n\n        if(empty($options['connection']))\n            throw new Exception("No database connection string provided!");\n        Doctrine_Manager::connection($options['connection']);\n        if(empty($options['directory']))\n            $dir = './models';\n        else\n            $dir = $options['directory'];\n        Doctrine::loadModels(realpath($dir));\n        return $manager;\n    }\n}