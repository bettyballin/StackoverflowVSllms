<xsl:stylesheet version="1.0"\n xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n <xsl:output omit-xml-declaration="yes" indent="yes"/>\n\n <xsl:variable name="vLower" select=\n "'abcdefghijklmnopqrstuvwxyz'"/>\n\n <xsl:variable name="vUpper" select=\n "'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>\n\n <xsl:key name="kTitleBy1stLetter" match="database"\n  use="substring(title_display,1,1)"/>\n\n    <xsl:template match="/*">\n      <xsl:for-each select=\n      "database\n        [generate-id()\n        =\n         generate-id(key('kTitleBy1stLetter',\n                         substring(title_display,1,1)\n                         )[1]\n                    )\n        ]"\n      >\n        <xsl:variable name="v1st" \n         select="substring(title_display,1,1)"/>\n        <h2><xsl:value-of select="$v1st"/></h2>\n        <div class="{translate($v1st, \n                     $vUpper,\n                     $vLower)}-content">\n          <ul>\n            <xsl:for-each select=\n              "key('kTitleBy1stLetter',$v1st)">\n               <li><xsl:value-of select="title_display"/></li>\n            </xsl:for-each>\n          </ul>\n      </div>\n      </xsl:for-each>\n    </xsl:template>\n</xsl:stylesheet>