<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" \n      xmlns:xs="http://www.w3.org/2001/XMLSchema"\n      exclude-result-prefixes="xs"\n      version="2.0">\n\n    <xsl:template match="/">\n        <paths>\n            <xsl:apply-templates/>\n        </paths>\n    </xsl:template>\n\n    <xsl:template match="//*">\n        <path>\n        <xsl:for-each select="ancestor-or-self::*">\n            <xsl:call-template name="print-step"/>\n        </xsl:for-each>\n        </path>\n        <xsl:apply-templates select="*"/>\n    </xsl:template>\n\n    <xsl:template name="print-step">\n        <xsl:text>/</xsl:text>\n        <xsl:value-of select="name()"/>\n        <xsl:text>[</xsl:text>\n        <xsl:value-of select="1+count(preceding-sibling::*)"/>\n        <xsl:text>]</xsl:text>\n    </xsl:template>\n\n</xsl:stylesheet>