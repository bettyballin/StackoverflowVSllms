<Window.Resources>\n    <DataTemplate x:Key="DataTemplate_Level2">\n            <Button Content="{Binding}" Height="40" Width="50" Margin="4,4,4,4"/>\n    </DataTemplate>\n\n    <DataTemplate x:Key="DataTemplate_Level1">\n        <ItemsControl ItemsSource="{Binding}" ItemTemplate="{DynamicResource DataTemplate_Level2}">\n            <ItemsControl.ItemsPanel>\n                <ItemsPanelTemplate>\n                    <StackPanel Orientation="Horizontal"/>\n                </ItemsPanelTemplate>\n            </ItemsControl.ItemsPanel>\n        </ItemsControl>\n    </DataTemplate>\n\n</Window.Resources>\n<Grid>\n    <ItemsControl x:Name="lst" ItemTemplate="{DynamicResource DataTemplate_Level1}"/>\n</Grid>