<class name="com.agetor.commons.security.User" table="ac_users">\n    <id name="uid" column="uid" type="long" >\n        <generator class="increment"/>\n    </id>\n    <property name="deleted" column="deleted" />\n    <property name="username" column="username" />   \n    <property name="password" column="passwd" />\n    <property name="disabled" column="disabled" />\n    <property name="lockout" column="lockout" />\n    <property name="expires" column="expires" />\n    <bag name="fieldData" lazy="extra">\n        <key column="parentuid" not-null="true" />\n        <one-to-many class="com.agetor.commons.fields.FieldData"/>\n    </bag>\n    <bag name="groups" table="ac_group_rel" access="field" lazy="extra">\n        <key column="useruid"/>         \n        <many-to-many column="groupuid" class="com.agetor.commons.security.Group"/>\n    </bag>         \n    <join table="ac_userdef_data" optional="true" fetch="join">\n        <subselect>\n            select\n                *\n            from\n                ac_userdef_data data\n            where\n                data.objectname = 'user' and\n                data.fieldname = 'firstname'\n        </subselect>\n        <key column="parentuid" />\n        <property name="firstname" formula="(select data.value from ac_userdef_data data where data.fieldname = 'firstname' and data.uid = uid)"/>\n    </join>\n    <join table="ac_userdef_data" optional="true" fetch="join">\n        <subselect>\n            select\n                *\n            from\n                ac_userdef_data data\n            where\n                data.objectname = 'user' and\n                data.fieldname = 'lastname'\n        </subselect>        \n        <key column="parentuid" />\n        <property name="lastname" formula="(select data.value from ac_userdef_data data where data.fieldname = 'lastname' and data.uid = uid)"/>\n    </join>\n\n</class>