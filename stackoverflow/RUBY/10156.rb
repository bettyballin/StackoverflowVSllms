class User < ActiveRecord::Base\n  has_and_belongs_to_many :followers, :foreign_key => 'followed_id', \n      :class_name => 'User', :association_foreign_key => 'follower_id', \n      :include => [:messages]\n  has_and_belongs_to_many :follows, :foreign_key => 'follower_id', \n      :class_name => 'User', :association_foreign_key => 'followed_id'\n  has_many :messages\nend\n\nclass Message < ActiveRecord::Base\n  belongs_to :user\nend