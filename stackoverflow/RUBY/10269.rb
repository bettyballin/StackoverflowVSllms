module DateMethods\n\n  def self.included(klass)\n\n    # get all dates\n    # Loop through the class's column names\n    # then determine if each column is of the :date type.\n    fields = klass.column_names.select do |k| \n                  klass.columns_hash[k].type == :date\n                end\n\n\n    # for each of the fields we'll use class_eval to\n    # define the methods.\n    fields.each do |field|\n      klass.class_eval <<-EOF\n        def formatted_#{field}\n          #{field} ? #{field}.to_s(:date) : nil\n        end\n\n      EOF\n    end\n  end\nend