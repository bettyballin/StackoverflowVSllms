require "rexml/document"\ninclude REXML  # so that we don't have to prefix everything with REXML::...\n\ndef get_pair(xml_doc, key, value)\n  XPath.each(xml_doc, key) do |node| \n    if node.is_a?(Attribute)\n      def node.parent\n        self.element\n      end\n    end\n    puts "\"#{node}\" \"#{XPath.first(node, value)}\""\n  end\nend\n\nxml_doc = Document.new <<EOF\n  <root>\n    <add key="A" value="B" />\n    <add key="C" value="D" />\n    <add foo="E" bar="F" />\n  </root>\nEOF\n\nget_pair xml_doc, "//*/@key", "../@value"\nget_pair xml_doc, "//*/@foo", "../@bar"