require 'rubygems'\nrequire 'progressbar'\n\nin_name     = "src_file.txt"\nout_name    = "dest_file.txt"\n\nin_file     = File.new(in_name, "r")\nout_file    = File.new(out_name, "w")\n\nin_size     = File.size(in_name)\n# Edit: float division.\nbatch_bytes = ( in_size / 100.0 ).ceil\ntotal       = 0\np_bar       = ProgressBar.new('Copying', 100)\n\nbuffer      = in_file.sysread(batch_bytes)\nwhile total < in_size do\n out_file.syswrite(buffer)\n p_bar.inc\n total += batch_bytes\n if (in_size - total) < batch_bytes\n   batch_bytes = (in_size - total)\n end\n buffer = in_file.sysread(batch_bytes)\nend\np_bar.finish