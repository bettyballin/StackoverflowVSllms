require 'action_controller'\nrequire 'active_support'\nrequire 'action_pack'\nrequire 'action_view'\nrequire 'action_controller/test_case'\n\nclass StubController < ActionController::Base\n  helper MyHelper\n  append_view_path '...'\n  attr_accessor :thing\n  def my_partial\n    render :partial => '/my_partial', :locals => { :thing => thing }\n  end\n  def rescue_action(e) raise e end;\nend\n\nclass MyTestCase < ActionController::TestCase\n  self.controller_class = StubController\n  def setup\n    @controller.thing = ...\n    get :my_partial\n    assert ...\n  end\nend