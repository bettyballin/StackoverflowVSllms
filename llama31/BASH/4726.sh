# Get the list of running Passenger processes with memory usage\npassenger-memory-stats | grep "PID" | awk '{print $2}' > /tmp/passenger_pids.txt\n\n# Configure Monit to monitor the processes\nmonitrc:\ncheck process passenger with pidfile /tmp/passenger_pids.txt\n  start program = "/usr/bin/passenger start"\n  stop program = "/usr/bin/passenger stop"\n  if failed port 80 then restart\n  if totalmem > 512 MB then restart