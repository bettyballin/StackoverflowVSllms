#!/bin/bash\n\n# Input and output files\nINPUT_FILE="input.txt"\nOUTPUT_FILE="output.txt"\n\n# Detect file encoding\nENCODING=$(file --mime-encoding "$INPUT_FILE")\n\nif [ "$ENCODING" = "utf-16le" ] || [ "$ENCODING" = "utf-16be" ]; then\n  # Convert to UTF-8\n  iconv -f UTF-16 -t UTF-8 "$INPUT_FILE" -o temp_utf8.txt\n  \n  # Perform substitution\n  sed 's/old_text/new_text/g' temp_utf8.txt > temp_output.txt\n  \n  # Convert back to UTF-16 if needed\n  iconv -f UTF-8 -t UTF-16 temp_output.txt -o "$OUTPUT_FILE"\n  \n  # Clean up\n  rm temp_utf8.txt temp_output.txt\nelse\n  # File is not UTF-16, assume it's ANSI or UTF-8 and perform substitution directly\n  sed 's/old_text/new_text/g' "$INPUT_FILE" > "$OUTPUT_FILE"\nfi