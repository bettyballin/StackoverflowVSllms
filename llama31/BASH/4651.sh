#!/bin/bash\n\nDATA=data\nREMOTE=$1\n\nif ! grep -q "^/mnt/$REMOTE " /proc/mounts; then\n  if ! mount /dev/vg/$REMOTE /mnt/$REMOTE; then\n    echo "Can't backup $REMOTE, /mnt/$REMOTE could not be mounted: $?"\n    exit 1\n  fi\nfi\n\nif ! grep -q "^/mnt/$REMOTE/$DATA " /proc/mounts; then\n  if ! mount /dev/vg/$REMOTE$DATA /mnt/$REMOTE/data; then\n    echo "Can't backup $REMOTE, /mnt/$REMOTE/data could not be mounted."\n    exit 1\n  fi\nfi\n\nrsync -aqz --delete --numeric-ids --exclude=proc --exclude=sys \\n  root@$REMOTE.domain:/ /mnt/$REMOTE/\nRETVAL=$?\necho "Backup of $REMOTE completed, return value of rsync: $RETVAL"