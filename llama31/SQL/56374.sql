CREATE SERVER AUDIT LongRunningQueries\nTO FILE = 'C:\SQLAudit\LongRunningQueries.log'\nWITH \n    FORMAT = XML,\n    MAXSIZE = 10 MB,\n    MAX_ROLLOVER_FILES = 10;\n\nCREATE SERVER AUDIT SPECIFICATION LongRunningQueriesSpec\nFOR SERVER AUDIT LongRunningQueries\nADD (SCHEMA_OBJECT_ACCESS_GROUP);\n\nCREATE SERVER AUDIT LongRunningQueriesTrigger\nON ALL SERVER\nWITH (STATE = ON)\nFOR LongRunningQueriesSpec\nWHEN (event_data.value('(//AuditRecord/Duration[@Value>1000])[1]', 'int') > 0)\nBEGIN\n    -- Send notification (e.g., via Database Mail)\n    EXEC msdb.dbo.sp_send_dbmail \n        @recipients = 'your_email@example.com',\n        @subject = 'Long Running Query Alert',\n        @body = 'Query has been running for 1 second or longer. Please investigate.';\nEND