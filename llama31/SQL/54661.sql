SET @sql = 'SELECT people.*, ';\nSET @params = 'Red,United States,18-25'; -- comma-separated list of parameters\nSET @fields = 'favourite_colour,country,age_group'; -- comma-separated list of fields\n\nSET @score = '';\nSET @where = '';\n\nSET @i = 1;\nWHILE @i <= LENGTH(@params) - LENGTH(REPLACE(@params, ',', '')) + 1 DO\n  SET @param = SUBSTRING_INDEX(SUBSTRING_INDEX(@params, ',', @i), ',', -1);\n  SET @field = SUBSTRING_INDEX(SUBSTRING_INDEX(@fields, ',', @i), ',', -1);\n  \n  SET @score = CONCAT(@score, 'IF(', @field, ' = ''', @param, ''', 1, 0) + ');\n  SET @where = CONCAT(@where, @field, ' = ''', @param, ''' OR ');\n  \n  SET @i = @i + 1;\nEND WHILE;\n\nSET @sql = CONCAT(@sql, @score, ' AS score FROM people WHERE ', @where, '1 = 1 ORDER BY score DESC');\n\nPREPARE stmt FROM @sql;\nEXECUTE stmt;