CREATE PROCEDURE AssertEqual\n    @FunctionName nvarchar(128),\n    @ExpectedValue sql_variant,\n    @Message varchar(255)\nAS\nBEGIN\n    DECLARE @sql nvarchar(255);\n    SET @sql = 'SELECT ' + QUOTENAME(@FunctionName) + '()';\n    DECLARE @targetValue sql_variant;\n    EXEC sp_executesql @sql, N'@targetValue sql_variant OUTPUT', @targetValue OUTPUT;\n    -- rest of your procedure\nEND