DECLARE @ResourceXML xml = ...;  -- your XML data\n\nDECLARE @tmpRes TABLE (ResourceID int, Quantity int, FormID int);\n\nINSERT INTO @tmpRes (ResourceID, Quantity, FormID)\nSELECT \n    x.value('(ID)[1]', 'int'),\n    x.value('(Q)[1]', 'int'),\n    RESC.FormID\nFROM \n    @ResourceXML.nodes('/Resources/R') AS XT(x)\nINNER JOIN \n    dbo.tblResources RESC ON x.value('(ID)[1]', 'int') = RESC.ResourceID\nWHERE \n    RESC.OrgID = @OrgID;