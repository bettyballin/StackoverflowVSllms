SELECT w.*\nFROM WIDGET w\nJOIN WIDGETATTRIBUTEJUNCTION waj ON w.WIDGET_ID = waj.WIDGET_ID\nJOIN ATTRIBUTE a ON waj.ATTRIBUTE_ID = a.ATTRIBUTE_ID\nWHERE a.ATTRIBUTE_ID IN (:attribute_ids)\nGROUP BY w.WIDGET_ID\nHAVING COUNT(DISTINCT a.ATTRIBUTE_ID) = :num_attributes