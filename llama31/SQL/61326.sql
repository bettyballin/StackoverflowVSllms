DECLARE\n  file_handle UTL_FILE.FILE_TYPE;\n  xml_data XMLType;\nBEGIN\n  file_handle := UTL_FILE.FOPEN('D', 'tmp.xml', 'R');\n  xml_data := XMLType(UTL_FILE.FREAD(file_handle, 1024));\n  UTL_FILE.FCLOSE(file_handle);\n  \n  FOR rec IN (\n    SELECT UserId, Name, to_timestamp(dt, 'YYYY-MM-DD"T"HH24:MI:SS.FF3') dt\n    FROM \n      XMLTable('for $i in /badges/row return $i'\n        passing xml_data\n        columns \n          UserId NUMBER path '@UserId',\n          Name VARCHAR2(50) path '@Name',\n          dt VARCHAR2(25) path '@Date')\n  ) LOOP\n    DBMS_OUTPUT.PUT_LINE(rec.UserId || ', ' || rec.Name || ', ' || rec.dt);\n  END LOOP;\nEND;