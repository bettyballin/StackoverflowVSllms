CREATE OR REPLACE FUNCTION mytable_audit_trigger()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OPNAME = 'INSERT' THEN\n        INSERT INTO mytable_audit (mytable_id, name, created_at)\n        VALUES (NEW.id, NEW.name, CURRENT_TIMESTAMP);\n    ELSIF TG_OPNAME = 'UPDATE' THEN\n        INSERT INTO mytable_audit (mytable_id, name, updated_at)\n        VALUES (NEW.id, NEW.name, CURRENT_TIMESTAMP);\n    ELSIF TG_OPNAME = 'DELETE' THEN\n        INSERT INTO mytable_audit (mytable_id, deleted_at)\n        VALUES (OLD.id, CURRENT_TIMESTAMP);\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER mytable_audit_trigger\nAFTER INSERT OR UPDATE OR DELETE ON mytable\nFOR EACH ROW\nEXECUTE PROCEDURE mytable_audit_trigger();