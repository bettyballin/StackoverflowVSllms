CREATE PROCEDURE hd_invoice_select_dynamic (@id INT, @customerID INT = NULL, @year INT = NULL, @month INT = NULL)\nAS\nBEGIN\n    DECLARE @sql NVARCHAR(MAX)\n    SET @sql = N'SELECT * FROM Invoice WHERE 1=1'\n    IF @id IS NOT NULL\n        SET @sql += N' AND InvoiceID = @id'\n    IF @customerID IS NOT NULL\n        SET @sql += N' AND CustomerID = @customerID'\n    -- add other conditions\n    EXEC sp_executesql @sql, N'@id INT, @customerID INT, @year INT, @month INT', @id, @customerID, @year, @month\n    RETURN\nEND\nGO