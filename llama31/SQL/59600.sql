CREATE PROCEDURE MyProc\n    @ID INT,\n    @Col1 INT,\n    @Col2 INT\nAS\nBEGIN\n    BEGIN TRANSACTION;\n    BEGIN TRY\n        UPDATE myTable SET Col1 = @Col1, Col2 = @Col2 WHERE ID = @ID;\n        IF @@ROWCOUNT = 0\n            INSERT INTO myTable (Col1, Col2) VALUES (@Col1, @Col2);\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        ROLLBACK TRANSACTION;\n        THROW;\n    END CATCH;\nEND