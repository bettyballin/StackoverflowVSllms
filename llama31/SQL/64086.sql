CREATE TABLE replay_rounds (\n    replay_id INT UNSIGNED NOT NULL,\n    round SMALLINT UNSIGNED NOT NULL,\n    winner_type ENUM('player', 'team') NOT NULL,\n    winner_id INT UNSIGNED NOT NULL,\n    FOREIGN KEY (replay_id) REFERENCES replays(id),\n    PRIMARY KEY (replay_id, round)\n) CHARACTER SET=utf8 COLLATE=utf8_general_ci ENGINE=InnoDB;\n\nCREATE TABLE replay_round_winners (\n    replay_id INT UNSIGNED NOT NULL,\n    round SMALLINT UNSIGNED NOT NULL,\n    winner_type ENUM('player', 'team') NOT NULL,\n    winner_id INT UNSIGNED NOT NULL,\n    FOREIGN KEY (replay_id, round) REFERENCES replay_rounds(replay_id, round),\n    FOREIGN KEY (winner_id) REFERENCES players(id) ON DELETE CASCADE,\n    FOREIGN KEY (winner_id) REFERENCES teams(id) ON DELETE CASCADE,\n    PRIMARY KEY (replay_id, round, winner_type)\n) CHARACTER SET=utf8 COLLATE=utf8_general_ci ENGINE=InnoDB;