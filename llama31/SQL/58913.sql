ALTER PROCEDURE [dbo].[delete_treatment_category]\n(\n    @id INT,\n    @RetVal INT OUTPUT\n)\nAS\n    SET NOCOUNT ON\n\n    IF EXISTS\n    (\n        SELECT id\n        FROM dbo.treatment_item\n        WHERE category_id = @id\n    )\n    BEGIN\n        SET @RetVal = 1\n    END\n    ELSE\n    BEGIN\n        BEGIN TRY\n            DELETE FROM dbo.treatment_category\n            WHERE id = @id\n            SET @RetVal = 0\n        END TRY\n        BEGIN CATCH\n            SET @RetVal = 2\n        END CATCH\n    END\n\n    SELECT @RetVal AS RetVal