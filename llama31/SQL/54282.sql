-- Send an email to each customer with an overdue order\nDECLARE @customer_email VARCHAR(255)\nDECLARE cur_customers CURSOR FOR\n    SELECT email FROM customers WHERE order_status = 'overdue'\n\nOPEN cur_customers\n\nFETCH NEXT FROM cur_customers INTO @customer_email\n\nWHILE @@FETCH_STATUS = 0\nBEGIN\n    -- Send email to customer\n    EXEC msdb.dbo.sp_send_dbmail @recipients = @customer_email, @subject = 'Overdue Order'\n\n    FETCH NEXT FROM cur_customers INTO @customer_email\nEND\n\nCLOSE cur_customers\nDEALLOCATE cur_customers