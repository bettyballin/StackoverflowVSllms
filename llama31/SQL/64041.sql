CREATE FUNCTION EvaluatePermissions (\n  @ApplicationID INT,\n  @UserID INT,\n  @DepartmentID INT,\n  @LocationID INT\n)\nRETURNS BIT\nAS\nBEGIN\n  DECLARE @HasAccess BIT = 0;\n\n  SELECT @HasAccess = 1\n  FROM Permissions p\n  INNER JOIN AttributeValues av ON p.AttributeValueID = av.AttributeValueID\n  WHERE p.ApplicationID = @ApplicationID\n    AND (p.AttributeID = 1 AND av.Value = @DepartmentID)\n    OR (p.AttributeID = 2 AND av.Value = 'Manager')  -- Assuming 'Manager' is a role\n    OR (p.AttributeID = 3 AND av.Value = @LocationID);\n\n  RETURN @HasAccess;\nEND;