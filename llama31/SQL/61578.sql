-- Create a restore point\nCREATE RESTORE POINT my_restore_point;\n\n-- Execute the DDL statements\nBEGIN\n  CREATE TABLE A (PKey int NOT NULL, NewFieldKey int NULL, CONSTRAINT PK_A PRIMARY KEY (PKey));\n  CREATE INDEX A_2 ON A (NewFieldKey);\n  CREATE TABLE B (PKey int NOT NULL, CONSTRAINT PK_B PRIMARY KEY (PKey));\n  ALTER TABLE A ADD CONSTRAINT FK_B_A FOREIGN KEY (NewFieldKey) REFERENCES B (PKey);\nEXCEPTION\n  WHEN OTHERS THEN\n    -- If any statement fails, flashback to the restore point\n    FLASHBACK DATABASE TO RESTORE POINT my_restore_point;\n    RAISE;\nEND;\n\n-- If all statements succeed, drop the restore point\nDROP RESTORE POINT my_restore_point;