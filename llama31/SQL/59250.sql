CREATE OR REPLACE TRIGGER TRG_T1_TBL1_COL1\nBEFORE INSERT OR UPDATE OF t1_appnt_evnt_id ON TBL1\nFOR EACH ROW\nWHEN (NEW.t1_prnt_t1_pk IS NOT NULL)\nDECLARE\n  v_reassign_count NUMBER(20);\nBEGIN\n  SELECT COUNT(*) INTO v_reassign_count\n  FROM TBL1 t2\n  WHERE t2.t1_appnt_evnt_id = :NEW.t1_appnt_evnt_id\n  AND t2.t1_prnt_t1_pk IS NOT NULL\n  AND t2.t1_pk != :NEW.t1_pk;  -- exclude the current row\n\n  IF (v_reassign_count > 0) THEN\n    RAISE_APPLICATION_ERROR(-20013, 'Multiple reassignments not allowed');\n  END IF;\nEND;