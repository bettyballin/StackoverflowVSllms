CREATE PROCEDURE [dbo].[ExecView]\n    @publisherId bigint,\n    @advertId bigint,\n    @localeId int,\n    @ip varchar(15),\n    @ipIsUnique bit,\n    @success bit OUTPUT,\n    @campaignId bigint OUTPUT,\n    @advert varchar(500) OUTPUT,\n    @advertWidth int OUTPUT,\n    @advertHeight int OUTPUT\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    SELECT \n        @success = 1,\n        @advert = T1.Advert,\n        @advertWidth = T1.Width,\n        @advertHeight = T1.Height,\n        @campaignId = T2.Id\n    FROM \n        Advert AS T1\n    INNER JOIN \n        Campaign AS T2 ON T1.CampaignId = T2.Id\n    WHERE \n        T1.Id = @advertId\n        AND T2.LocaleId = @localeId\n        AND T2.Deleted = 0\n        AND T2.[Status] <> 1;\n\n    IF @success = 1\n    BEGIN\n        -- Perform additional checks and insert record if necessary\n        -- ...\n    END\nEND