SELECT \n  u.id, \n  COALESCE(p.n_photo, 0) AS n_photo, \n  COALESCE(c.n_classifications, 0) AS n_classifications, \n  (COALESCE(p.n_photo, 0) + COALESCE(c.n_classifications, 0)) AS n_sum\nFROM \n  users u\n  LEFT JOIN (\n    SELECT user_id, COUNT(id) AS n_photo\n    FROM photos\n    GROUP BY user_id\n  ) p ON u.id = p.user_id\n  LEFT JOIN (\n    SELECT user_id, COUNT(id) AS n_classifications\n    FROM classifications\n    GROUP BY user_id\n  ) c ON u.id = c.user_id\nORDER BY n_sum DESC;