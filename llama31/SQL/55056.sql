BEGIN TRAN\n    UPDATE  OrderTable WITH (UPDLOCK, ROWLOCK)\n    SET     ProcessorID = @PROCID\n    WHERE   OrderID IN ( SELECT TOP ( 20 )\n                                        OrderID\n                                FROM    OrderTable WITH (UPDLOCK, ROWLOCK)\n                                WHERE   ProcessorID = 0)\nCOMMIT TRAN\n\nSELECT  OrderID, ProcessorID, etc...\nFROM    OrderTable\nWHERE   ProcessorID = @PROCID