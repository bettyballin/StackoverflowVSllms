-- Create a test schema\nCREATE SCHEMA [test];\n\n-- Create a test table\nCREATE TABLE [test].[Customers] (\n    [CustomerId] INT,\n    [Name] VARCHAR(50),\n    [Email] VARCHAR(100)\n);\n\n-- Insert sample data\nINSERT INTO [test].[Customers] ([CustomerId], [Name], [Email])\nVALUES (1, 'John Doe', 'john.doe@example.com'),\n       (2, 'Jane Doe', 'jane.doe@example.com');\n\n-- Create a test class\nEXEC tSQLt.NewTestClass 'test.CustomersTests';\n\n-- Write a test for the query\nCREATE PROCEDURE [test].[test_CustomersTests_Query]\nAS\nBEGIN\n    DECLARE @actual TABLE ([CustomerId] INT, [Name] VARCHAR(50), [Email] VARCHAR(100));\n\n    -- Execute the query\n    INSERT INTO @actual\n    SELECT [CustomerId], [Name], [Email]\n    FROM [dbo].[Customers]\n    WHERE [Email] LIKE '%@example.com';\n\n    -- Assert the expected results\n    EXEC tSQLt.AssertEquals 2, (SELECT COUNT(*) FROM @actual);\n    EXEC tSQLt.AssertEquals 'John Doe', (SELECT [Name] FROM @actual WHERE [CustomerId] = 1);\nEND;\n\n-- Run the tests\nEXEC tSQLt.RunAll;