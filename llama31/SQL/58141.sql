DECLARE\n  error_var NUMBER;\nBEGIN\n  error_var := 0;\n  BEGIN\n    SAVEPOINT my_savepoint;\n    UPDATE MyTable1 SET MyColumn1 = 'JSMITH' WHERE MyColumn1 = 'JOHN';\n    error_var := error_var + SQL%ROWCOUNT;\n    UPDATE MyTable2 SET MyColumn2 = 'JSMITH' WHERE MyColumn2 = 'JOHN';\n    error_var := error_var + SQL%ROWCOUNT;\n    UPDATE MyTable SET LoginID = 'JSMITH' WHERE LoginID = 'JOHN';\n    error_var := error_var + SQL%ROWCOUNT;\n  EXCEPTION\n    WHEN OTHERS THEN\n      error_var := 1;\n  END;\n  \n  IF error_var <> 0 THEN\n    ROLLBACK TO SAVEPOINT my_savepoint;\n    DBMS_OUTPUT.PUT_LINE('We had a problem with JSMITH and rolled back *****');\n  ELSE\n    COMMIT;\n    DBMS_OUTPUT.PUT_LINE('JSMITH Updated ok');\n  END IF;\nEND;\n/