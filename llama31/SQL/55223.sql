CREATE FUNCTION myFunction (@areas nvarchar(max))\nRETURNS TABLE\nAS\nRETURN\n(\n    SELECT * \n    FROM regions \n    WHERE areas IN (SELECT value FROM dbo.Split(@areas, ','))\n);\n\nCREATE FUNCTION Split (@string nvarchar(max), @delimiter char(1))\nRETURNS @t TABLE (value nvarchar(50))\nAS\nBEGIN\n    DECLARE @xml xml;\n    SET @xml = CONVERT(xml, '<root><value>' + REPLACE(@string, @delimiter, '</value><value>') + '</value></root>');\n    INSERT INTO @t (value)\n    SELECT T.c.value('.', 'nvarchar(50)') \n    FROM @xml.nodes('/root/value') T(c);\n    RETURN;\nEND;