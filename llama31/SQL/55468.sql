CREATE OR REPLACE TYPE INTEGER_TABLE AS TABLE OF INTEGER;\n\nCREATE OR REPLACE PROCEDURE your_procedure(\n  PI_N_Dept IN INTEGER,\n  sExcludeCategories IN VARCHAR2\n) AS\n  exclude_categories INTEGER_TABLE;\n  ccur SYS_REFCURSOR;\nBEGIN\n  -- Split the comma-separated string into a collection\n  SELECT CAST(MULTISET(\n    SELECT REGEXP_SUBSTR(sExcludeCategories, '[^,]+', 1, LEVEL) AS category\n    FROM DUAL\n    CONNECT BY REGEXP_SUBSTR(sExcludeCategories, '[^,]+', 1, LEVEL) IS NOT NULL\n  ) AS INTEGER_TABLE) INTO exclude_categories FROM DUAL;\n\n  -- Use the collection with the IN operator\n  OPEN ccur FOR\n    SELECT c.category\n    FROM test_category c\n    WHERE c.deptid = PI_N_Dept\n    AND c.category NOT IN (SELECT * FROM TABLE(exclude_categories));\nEND;