DELIMITER $$\nCREATE PROCEDURE SP2()\nBEGIN\n  DECLARE customerID INT;\n  DECLARE orderID INT;\n  DECLARE orderStateDate DATETIME;\n\n  SELECT CustomerID INTO customerID\n  FROM Customers\n  WHERE CustomerID NOT IN (SELECT FK_CustomerID FROM CustomerOrders)\n  AND IsApproved = TRUE\n  AND CustomerID IN (SELECT FK_CustomerID FROM CustomerProductOrders WHERE DATE(OrderStartDate) = DATE(NOW()));\n\n  SELECT OrderID INTO orderID\n  FROM CustomerOrders\n  WHERE FK_CustomerID NOT IN (SELECT FK_CustomerID FROM CustomerProductOrders)\n  AND IsApproved = TRUE\n  AND DATE(OrderStartDate) = DATE(NOW());\n\n  IF customerID IS NOT NULL AND orderID IS NOT NULL THEN\n    CALL SP1(customerID, orderID);\n  ELSE\n    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid input parameters';\n  END IF;\nEND $$\nDELIMITER ;