CREATE FUNCTION dbo.Split (@string nvarchar(max), @delimiter nvarchar(10))\nRETURNS @array TABLE (value nvarchar(max))\nAS\nBEGIN\n    DECLARE @pos int, @piece nvarchar(max)\n    SET @pos = 1\n    WHILE @pos <= LEN(@string)\n    BEGIN\n        SET @piece = LEFT(@string, CHARINDEX(@delimiter, @string + @delimiter, @pos) - @pos)\n        INSERT @array (value) VALUES (@piece)\n        SET @pos = CHARINDEX(@delimiter, @string + @delimiter, @pos) + 1\n    END\n    RETURN\nEND\nGO\n\nDECLARE @customer_name nvarchar(max) = 'John Smith'\nDECLARE @array TABLE (value nvarchar(max))\n\nINSERT @array\nSELECT value FROM dbo.Split (@customer_name, ' ')\n\nSELECT * FROM customers\nWHERE (SELECT COUNT(*) FROM @array WHERE value LIKE '%' + customers.customer_name + '%') = (SELECT COUNT(*) FROM @array)