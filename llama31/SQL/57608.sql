WITH Ancestors (TaskID, [Subject], ParentID, HierarchyLevel) AS\n(\n    -- Base case\n    SELECT\n        TaskID,\n        [Subject],\n        ParentID,\n        0 as HierarchyLevel\n    FROM Task\n    WHERE TaskID = @ChildID\n\n    UNION ALL\n\n    -- Recursive step\n    SELECT\n        t.TaskID,\n        t.Subject,\n        t.ParentID,\n        a.HierarchyLevel + 1 AS HierarchyLevel\n    FROM Task t\n    INNER JOIN Ancestors a ON\n        t.TaskID = a.ParentID\n)\nSELECT *\nFROM Ancestors\nORDER BY HierarchyLevel DESC;