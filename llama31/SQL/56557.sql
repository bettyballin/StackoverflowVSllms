CREATE TABLE CounterQueue (\n    ObjectId INT,\n    Increment INT,\n    Timestamp DATETIME\n)\n\n-- Insert a new record into the queue\nINSERT INTO CounterQueue (ObjectId, Increment, Timestamp)\nVALUES (@ObjectId, 1, GETDATE())\n\n-- Scheduled task or worker process\nUPDATE ObjectCounters\nSET NumViews = NumViews + Increment\nFROM ObjectCounters\nINNER JOIN (\n    SELECT ObjectId, SUM(Increment) AS Increment\n    FROM CounterQueue\n    GROUP BY ObjectId\n) AS Queue ON ObjectCounters.ObjectId = Queue.ObjectId