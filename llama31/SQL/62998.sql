CREATE SEQUENCE child_id_seq;\n\nCREATE OR REPLACE FUNCTION set_child_id()\nRETURNS TRIGGER AS $$\nDECLARE\n    new_child_id INTEGER;\nBEGIN\n    SELECT COALESCE(MAX(child_id), 0) + 1\n    INTO new_child_id\n    FROM child\n    WHERE parent_id = NEW.parent_id;\n\n    NEW.child_id = new_child_id;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER set_child_id_trigger\nBEFORE INSERT ON child\nFOR EACH ROW\nEXECUTE PROCEDURE set_child_id();