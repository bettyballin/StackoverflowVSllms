-- Read version from file\nCOLUMN version NEW_VALUE version\nSELECT TRIM(BFILENAME('DATABASE', 'version.txt')) AS version\nFROM DUAL;\n\n-- Read schemas from file\nCOLUMN schema_list NEW_VALUE schema_list\nSELECT TRIM(BFILENAME('DATABASE', 'schemas.txt')) AS schema_list\nFROM DUAL;\n\n-- Define the version and schema variables\nDEFINE version = &version\nDEFINE schema_list = &schema_list\n\n-- Loop through the schema list and run the install scripts\nSET SERVEROUTPUT ON\nSET VERIFY OFF\nSET FEEDBACK OFF\n\nDECLARE\n  v_schema_list VARCHAR2(4000) := '&schema_list';\n  v_schema VARCHAR2(30);\n  v_version VARCHAR2(30) := '&version';\nBEGIN\n  FOR cur_rec IN (SELECT REGEXP_SUBSTR(v_schema_list, '[^'||CHR(10)||']+', 1, LEVEL) AS schema_name\n                  FROM DUAL\n                  CONNECT BY LEVEL <= REGEXP_COUNT(v_schema_list, '[^'||CHR(10)||']+', 1))\n  LOOP\n    v_schema := cur_rec.schema_name;\n    DBMS_OUTPUT.PUT_LINE('Running install script for schema: ' || v_schema);\n    \n    -- Run the install script for the current schema and version\n    EXECUTE IMMEDIATE '@DATABASE_' || v_version || '/' || v_schema || '/install.sql';\n  END LOOP;\nEND;\n/