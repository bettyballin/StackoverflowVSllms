CREATE FUNCTION fnGetOpManualXMLDataFromInt \n(\n    @valueXPath nvarchar(255), \n    @criteriaXPath nvarchar(255),\n    @intCriteriaVal int\n)\nRETURNS @returntable TABLE \n(\n    omId int,\n    xmlNodes xml\n)\nAS\nBEGIN\n    INSERT INTO @returntable (omId, xmlNodes)\n    SELECT omID, omText.query(@valueXPath)\n    FROM dbo.htOperationsManuals\n    WHERE omText.exist(@criteriaXPath) = 1\n    AND omText.value(@criteriaXPath, 'int') = @intCriteriaVal\n\n    RETURN\nEND