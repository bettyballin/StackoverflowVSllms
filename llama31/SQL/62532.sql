CREATE TABLE Companies (\n    ID INT PRIMARY KEY,\n    CompanyName VARCHAR(255)\n);\n\nCREATE TABLE Clients (\n    ID INT PRIMARY KEY,\n    CompanyID INT NOT NULL,\n    FirstName VARCHAR(255),\n    LastName VARCHAR(255),\n    FOREIGN KEY (CompanyID) REFERENCES Companies(ID)\n);\n\nCREATE TABLE Projects (\n    ID INT PRIMARY KEY,\n    CompanyID INT NOT NULL,\n    ClientID INT NULL,\n    ProjectName VARCHAR(255),\n    FOREIGN KEY (CompanyID) REFERENCES Companies(ID)\n);\n\nCREATE TRIGGER trg_Projects_ClientID_Check\nON Projects\nFOR INSERT, UPDATE\nAS\nBEGIN\n    IF EXISTS (\n        SELECT 1\n        FROM inserted\n        WHERE ClientID IS NOT NULL\n        AND CompanyID <> (SELECT CompanyID FROM Clients WHERE ID = inserted.ClientID)\n    )\n    BEGIN\n        RAISERROR ('ClientID does not belong to the same company as the project.', 16, 1);\n        ROLLBACK TRANSACTION;\n    END\nEND;