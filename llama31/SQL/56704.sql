SELECT \n    sp.name AS LoginName,\n    dp.name AS DatabaseUserName,\n    db.name AS DatabaseName,\n    dp.type_desc AS UserType,\n    dp.authentication_type_desc AS AuthenticationType\nFROM \n    sys.server_principals sp\nINNER JOIN \n    sys.database_principals dp ON sp.sid = dp.sid\nINNER JOIN \n    sys.databases db ON dp.database_id = db.database_id\nWHERE \n    sp.type IN ('S', 'U')  -- 'S' for SQL login, 'U' for Windows login\nORDER BY \n    sp.name, db.name;