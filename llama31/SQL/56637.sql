BEGIN\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN(\n    plan => 'my_plan',\n    comment => 'My resource plan');\n\n  DBMS_RESOURCE_MANAGER.CREATE_CONSUMER_GROUP(\n    consumer_group => 'SYS',\n    comment => 'System sessions');\n\n  DBMS_RESOURCE_MANAGER.CREATE_CONSUMER_GROUP(\n    consumer_group => 'OLTP',\n    comment => 'OLTP sessions');\n\n  DBMS_RESOURCE_MANAGER.CREATE_CONSUMER_GROUP(\n    consumer_group => 'BATCH',\n    comment => 'Batch processing');\n\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(\n    plan => 'my_plan',\n    group_or_subplan => 'SYS',\n    cpu_p1 => 100,\n    cpu_p2 => 0,\n    cpu_p3 => 0);\n\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(\n    plan => 'my_plan',\n    group_or_subplan => 'OLTP',\n    cpu_p1 => 0,\n    cpu_p2 => 80,\n    cpu_p3 => 0);\n\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(\n    plan => 'my_plan',\n    group_or_subplan => 'BATCH',\n    cpu_p1 => 0,\n    cpu_p2 => 0,\n    cpu_p3 => 100);\n\n  -- Create a sub-plan for OLTP\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN(\n    plan => 'oltp_subplan',\n    comment => 'OLTP sub-plan');\n\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(\n    plan => 'oltp_subplan',\n    group_or_subplan => 'OLTP_USER1',\n    cpu_p1 => 10,\n    cpu_p2 => 0,\n    cpu_p3 => 0);\n\n  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(\n    plan => 'oltp_subplan',\n    group_or_subplan => 'OLTP_USER2',\n    cpu_p1 => 10,\n    cpu_p2 => 0,\n    cpu_p3 => 0);\n\n  -- ... create directives for other OLTP users ...\n\n  DBMS_RESOURCE_MANAGER.UPDATE_PLAN(\n    plan => 'my_plan',\n    sub_plan => 'oltp_subplan');\nEND;