SET @max_streak = 0;\nSET @current_streak = 0;\nSET @start_date = NULL;\nSET @end_date = NULL;\nSET @max_start_date = NULL;\nSET @max_end_date = NULL;\nSET @max_profit = 0;\nSET @current_profit = 0;\n\nSELECT \n  @max_streak AS max_streak,\n  @max_start_date AS start_date,\n  @max_end_date AS end_date,\n  @max_profit AS max_profit\nFROM \n  (SELECT \n     @current_streak := IF(winner = 1, @current_streak + 1, 0) AS current_streak,\n     @start_date := IF(winner = 1 AND @current_streak = 1, created, @start_date) AS start_date,\n     @end_date := IF(winner = 1, created, @end_date) AS end_date,\n     @current_profit := IF(winner = 1, @current_profit + profit, 0) AS current_profit,\n     @max_streak := IF(@current_streak > @max_streak, @current_streak, @max_streak) AS max_streak,\n     @max_start_date := IF(@current_streak > @max_streak, @start_date, @max_start_date) AS max_start_date,\n     @max_end_date := IF(@current_streak > @max_streak, @end_date, @max_end_date) AS max_end_date,\n     @max_profit := IF(@current_streak > @max_streak, @current_profit, @max_profit) AS max_profit\n   FROM \n     your_table\n   ORDER BY \n     created) AS subquery\nORDER BY \n  created\nLIMIT 1;