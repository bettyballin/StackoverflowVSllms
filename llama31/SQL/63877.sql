SELECT \n    u.*,\n    (COALESCE(p.number_of_photos, 0) + COALESCE(c.number_of_comments, 0)) AS total_items\nFROM \n    users u\nLEFT JOIN \n    (SELECT user_id, COUNT(*) AS number_of_photos FROM photos GROUP BY user_id) p ON u.id = p.user_id\nLEFT JOIN \n    (SELECT user_id, COUNT(*) AS number_of_comments FROM comments GROUP BY user_id) c ON u.id = c.user_id\nORDER BY \n    total_items DESC;