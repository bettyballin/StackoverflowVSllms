SELECT \n  s.sample_id,\n  s.created_on,\n  s_acid,\n  s_ph,\n  s_titr\nFROM \n  sample s\n  JOIN (\n    SELECT \n      sample_id,\n      MAX(CASE WHEN tst_tmpl_id = 36 THEN status END) AS s_acid,\n      MAX(CASE WHEN tst_tmpl_id = 43 THEN status END) AS s_ph,\n      MAX(CASE WHEN tst_tmpl_id = 66 THEN status END) AS s_titr\n    FROM \n      test\n    WHERE \n      sample_id IN (SELECT sample_id FROM sample WHERE sam_tmpl_id = 18)\n    GROUP BY \n      sample_id\n  ) t USING (sample_id)\nWHERE \n  s.sam_tmpl_id = 18;