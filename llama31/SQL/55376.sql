CREATE PROCEDURE GetStudentsWithTopMarks\nAS\nBEGIN\n    -- Retrieve the list of students\n    SELECT StudentID, Name\n    FROM Students\n    WHERE -- add your criteria here\n    ORDER BY Name;\n\n    -- Retrieve the top 5 marks per student\n    WITH RankedMarks AS (\n        SELECT StudentID, Mark, \n               ROW_NUMBER() OVER (PARTITION BY StudentID ORDER BY Mark DESC) AS Rank\n        FROM Marks\n    )\n    SELECT StudentID, Mark\n    FROM RankedMarks\n    WHERE Rank <= 5;\nEND;