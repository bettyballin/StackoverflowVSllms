UPDATE vote_results vr\nJOIN (\n  SELECT question_id,\n         SUM(IF(vote = 2, 1, 0)) AS yes_count,\n         SUM(IF(vote = 0, 1, 0)) AS no_count,\n         SUM(IF(vote = 1, 1, 0)) AS maybe_count,\n         SUM(vote) AS total_score\n  FROM votes\n  GROUP BY question_id\n) v ON vr.question_id = v.question_id\nSET vr.yes_count = v.yes_count,\n    vr.no_count = v.no_count,\n    vr.maybe_count = v.maybe_count,\n    vr.total_score = v.total_score;