BEGIN TRANSACTION\n\nBEGIN TRY\n    INSERT INTO dbo.ITSUsage (Customer_ID, [Type], Source)\n    VALUES (@Customer_ID, @Type, @Source)\n\n    SET @ID = SCOPE_IDENTITY()\n\n    IF @Type = 1\n        EXEC usp_Type1_INS @ID, @UsageInfo\n    ELSE IF @Type = 2\n        EXEC usp_Type2_INS @ID, @UsageInfo\n\n    COMMIT TRANSACTION\nEND TRY\nBEGIN CATCH\n    ROLLBACK TRANSACTION\n    DECLARE @ErrorMessage NVARCHAR(4000)\n    SET @ErrorMessage = ERROR_MESSAGE()\n    RAISERROR (@ErrorMessage, 16, 1)\nEND CATCH