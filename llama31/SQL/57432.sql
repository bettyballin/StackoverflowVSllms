CREATE OR REPLACE PROCEDURE generate_inserts(\n  p_table_name  IN  VARCHAR2,\n  p_id_column   IN  VARCHAR2,\n  p_id_value    IN  NUMBER,\n  p_result      OUT VARCHAR2\n) IS\n  l_sql         VARCHAR2(4000);\n  l_table_name  VARCHAR2(30);\n  l_constraint  VARCHAR2(30);\n  l_column_name VARCHAR2(30);\n  l_id_value    NUMBER;\n\n  CURSOR c_cons IS\n    SELECT a.table_name, a.constraint_name, b.column_name\n    FROM all_constraints a, all_cons_columns b\n    WHERE a.constraint_name = b.constraint_name\n    AND a.constraint_type = 'R'\n    AND a.table_name = p_table_name;\n\n  CURSOR c_dependents IS\n    SELECT table_name, column_name\n    FROM all_cons_columns\n    WHERE constraint_name = l_constraint;\n\nBEGIN\n  l_sql := 'INSERT INTO ' || p_table_name || ' (';\n\n  FOR r_cons IN c_cons LOOP\n    l_constraint := r_cons.constraint_name;\n    l_column_name := r_cons.column_name;\n\n    FOR r_dependent IN c_dependents LOOP\n      l_table_name := r_dependent.table_name;\n\n      IF l_table_name != p_table_name THEN\n        l_sql := l_sql || 'SELECT ' || l_column_name || ' FROM ' || l_table_name || ' WHERE ' || l_column_name || ' = ' || p_id_value || ';';\n      END IF;\n    END LOOP;\n  END LOOP;\n\n  l_sql := l_sql || ' VALUES (' || p_id_value || ', ';\n\n  FOR r_col IN (SELECT column_name FROM all_tab_columns WHERE table_name = p_table_name AND column_name != p_id_column) LOOP\n    l_sql := l_sql || '''' || r_col.column_name || ''' ,';\n  END LOOP;\n\n  l_sql := RTRIM(l_sql, ',') || ');';\n\n  p_result := l_sql;\n\n  DBMS_OUTPUT.PUT_LINE(p_result);\nEND;