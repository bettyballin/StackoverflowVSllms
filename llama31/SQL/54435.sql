CREATE TABLE items (\n  item_id INT PRIMARY KEY,\n  value1 BOOL,\n  value2 BOOL,\n  ...\n  value40 BOOL\n);\n\nCREATE TABLE user_inputs (\n  user_id INT PRIMARY KEY,\n  input_values BIT(40)\n);\n\nSELECT i.*,\n       COUNT(*) AS matches\nFROM items i\nJOIN user_inputs ui ON i.value1 = (ui.input_values & 1)\n                    AND i.value2 = (ui.input_values & 2) >> 1\n                    ...\n                    AND i.value40 = (ui.input_values & (1 << 39)) >> 39\nGROUP BY i.item_id\nORDER BY matches DESC;