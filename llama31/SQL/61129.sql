-- Create shadow table\nCREATE TABLE ImportantTableB (\n    -- identical structure to ImportantTableA\n);\n\n-- Update shadow table\nCREATE PROCEDURE UpdateShadowTable\nAS\nBEGIN\n    TRUNCATE TABLE ImportantTableB;\n    INSERT INTO ImportantTableB\n    SELECT * FROM SqlFoxProData.ImportantTable;\nEND;\n\n-- Switch active table\nCREATE PROCEDURE SwitchActiveTable\nAS\nBEGIN\n    IF OBJECT_ID('ImportantTableA', 'U') IS NOT NULL\n    BEGIN\n        RENAME TABLE ImportantTableA TO ImportantTableInactive;\n        RENAME TABLE ImportantTableB TO ImportantTableA;\n    END\n    ELSE\n    BEGIN\n        RENAME TABLE ImportantTableB TO ImportantTableInactive;\n        RENAME TABLE ImportantTableA TO ImportantTableB;\n    END\nEND;