CREATE PROCEDURE sp_send_emails\nAS\nBEGIN\n    DECLARE @email_id INT;\n    DECLARE email_cursor CURSOR FOR\n        SELECT email_id FROM email_schedule WHERE send_date <= GETDATE();\n\n    OPEN email_cursor;\n\n    FETCH NEXT FROM email_cursor INTO @email_id;\n\n    WHILE @@FETCH_STATUS = 0\n    BEGIN\n        EXEC msdb.dbo.sp_send_dbmail\n            @recipients = 'recipient@example.com',\n            @subject = 'Email Notification',\n            @body = 'Email body';\n\n        FETCH NEXT FROM email_cursor INTO @email_id;\n    END\n\n    CLOSE email_cursor;\n    DEALLOCATE email_cursor;\nEND