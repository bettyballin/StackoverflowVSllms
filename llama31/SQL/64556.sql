CREATE FUNCTION dbo.GetInvoiceData (@id INT)\nRETURNS @InvoiceData TABLE (\n    InvoiceID INT,\n    -- other columns\n)\nAS\nBEGIN\n    INSERT INTO @InvoiceData\n    SELECT * FROM Invoice WHERE InvoiceID = @id\n    RETURN\nEND\nGO\n\nCREATE PROCEDURE hd_invoice_select (@id INT)\nAS\nBEGIN\n    SELECT * FROM dbo.GetInvoiceData (@id)\n    SELECT * FROM InvoiceItem WHERE InvoiceID = @id\n    SELECT * FROM InvoiceComments WHERE InvoiceID = @id\n    RETURN\nEND\nGO