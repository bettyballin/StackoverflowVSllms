DECLARE @table TABLE ([group] INT, isok BIT, x INT, y INT);\n\n-- insert your data here\n\nWITH OrderedRows AS (\n  SELECT [group], isok, x, y,\n         ROW_NUMBER() OVER (PARTITION BY [group] ORDER BY x, y) AS row_num\n  FROM @table\n)\nSELECT [group], \n       (SELECT CONVERT(VARCHAR(1), isok) AS [text()]\n        FROM OrderedRows o2\n        WHERE o2.[group] = o1.[group]\n        ORDER BY row_num\n        FOR XML PATH(''), TYPE).value('.', 'VARCHAR(MAX)') AS mask\nFROM (SELECT DISTINCT [group] FROM @table) o1;