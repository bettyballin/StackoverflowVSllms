-- Create the active table\nCREATE TABLE transactions (\n    id SERIAL PRIMARY KEY,\n    -- other columns...\n);\n\n-- Create the history table\nCREATE TABLE transaction_history (\n    id INTEGER,\n    -- other columns...\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (id, created_at)\n);\n\n-- Create a trigger to copy data to the history table\nCREATE OR REPLACE FUNCTION copy_to_history()\nRETURNS TRIGGER AS $$\nBEGIN\n    INSERT INTO transaction_history (id, -- other columns...)\n    VALUES (OLD.id, -- other columns...);\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER copy_to_history_trigger\nAFTER UPDATE OR DELETE ON transactions\nFOR EACH ROW\nEXECUTE PROCEDURE copy_to_history();