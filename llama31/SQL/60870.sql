CREATE TABLE IF NOT EXISTS `orders` (\n  `id` int(11) NOT NULL auto_increment,\n  `partner_id` int(11) NOT NULL,\n  `status` enum('pending','accepted','cancelled','other') NOT NULL,\n  `created_on` datetime NOT NULL,\n  `concept` varchar(250) NOT NULL,\n  `type` enum('membership','other') NOT NULL default 'membership',\n  `source` enum('dineromail','casati','deposit','other') NOT NULL default 'dineromail',\n  `notes` text NULL,\n  `last_check_on` datetime default NULL,\n  PRIMARY KEY  (`id`),\n  FOREIGN KEY (`partner_id`) REFERENCES `partners` (`id`)\n) ENGINE=InnoDB;\n\nCREATE TABLE IF NOT EXISTS `payments` (\n  `id` int(11) NOT NULL auto_increment,\n  `order_id` int(11) NOT NULL,\n  `month` int(11) default NULL,\n  `year` int(11) default NULL,\n  `amount` decimal(10, 2) NOT NULL,\n  `payment_date` date default NULL,\n  PRIMARY KEY  (`id`),\n  UNIQUE KEY `idx-order_id-month-year` (`order_id`,`month`,`year`),\n  FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`)\n) ENGINE=InnoDB;\n\nCREATE TABLE IF NOT EXISTS `partners` (\n  `id` int(10) unsigned NOT NULL auto_increment,\n  `name` varchar(255) default NULL,\n  `last_name` varchar(255) default NULL,\n  PRIMARY KEY  (`id`)\n) ENGINE=InnoDB;