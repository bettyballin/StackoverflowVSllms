BEGIN TRAN\n\nCREATE TABLE TempTable (c1 INT NULL)\n\nINSERT INTO TempTable (c1) SELECT 1\n\nSET XACT_ABORT OFF\nINSERT INTO TempTable (c1) SELECT 'ABS'\nSET XACT_ABORT ON\n\nIF (@@ERROR <> 0) \nBEGIN\n    PRINT 'error'\n    ROLLBACK TRAN\nEND\nELSE\nBEGIN\n    PRINT 'no error'\n    COMMIT TRAN\nEND