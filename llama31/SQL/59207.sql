-- Create a trigger to update the comment count on insert/delete\nCREATE TRIGGER trg_UpdateCommentCount ON Comments\nAFTER INSERT, DELETE\nAS\nBEGIN\n    UPDATE Posts\n    SET CommentCount = (SELECT COUNT(*) FROM Comments WHERE PostId = inserted.PostId)\n    FROM Posts\n    INNER JOIN inserted ON Posts.Id = inserted.PostId\nEND\n\n-- Alternatively, schedule a task to update the comment count periodically\nCREATE PROCEDURE sp_UpdateCommentCounts\nAS\nBEGIN\n    UPDATE Posts\n    SET CommentCount = (SELECT COUNT(*) FROM Comments WHERE PostId = Posts.Id)\nEND