WITH RecursiveProcCalls AS (\n  SELECT \n    p.name AS ProcName, \n    p.definition AS ProcText, \n    0 AS Level\n  FROM \n    sys.sql_modules m\n  JOIN \n    sys.objects p ON m.object_id = p.object_id\n  WHERE \n    p.name = 'ProcA'\n  UNION ALL\n  SELECT \n    p.name AS ProcName, \n    p.definition AS ProcText, \n    Level + 1\n  FROM \n    sys.sql_modules m\n  JOIN \n    sys.objects p ON m.object_id = p.object_id\n  JOIN \n    RecursiveProcCalls r ON m.definition LIKE '%' + r.ProcName + '%'\n)\nSELECT \n  ProcName, \n  ProcText\nFROM \n  RecursiveProcCalls\nORDER BY \n  Level;