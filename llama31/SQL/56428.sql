SELECT\n  P.*,\n  COALESCE(PV.views, 0) AS views,\n  COALESCE(PI.items, 0) AS items,\n  COALESCE(VS.votes_sum, 0) AS votes_sum\nFROM pages P\nLEFT JOIN (\n  SELECT page_id, COUNT(*) AS views\n  FROM page_views\n  GROUP BY page_id\n) PV ON P.id = PV.page_id\nLEFT JOIN (\n  SELECT page_id, COUNT(*) AS items\n  FROM page_items\n  GROUP BY page_id\n) PI ON P.id = PI.page_id\nLEFT JOIN (\n  SELECT page_id, SUM(vote) AS votes_sum\n  FROM page_votes\n  GROUP BY page_id\n) VS ON P.id = VS.page_id\nORDER BY PV.views DESC\nLIMIT 10 OFFSET 0;