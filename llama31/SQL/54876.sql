DO $$\nDECLARE \n  col text;\n  col_type text;\nBEGIN\n  FOR col, col_type IN SELECT column_name, data_type \n                       FROM information_schema.columns \n                       WHERE table_name = 'mytable' AND data_type = 'character varying'\n  LOOP\n    EXECUTE format('ALTER TABLE mytable ALTER COLUMN %I TYPE integer USING varchar_to_int(%I, -1);', col, col);\n  END LOOP;\nEND $$;