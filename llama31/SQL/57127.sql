SELECT TOP 10 \n    qs.execution_count, \n    qs.total_logical_reads, \n    qs.total_logical_writes, \n    qs.total_worker_time, \n    qs.total_elapsed_time, \n    qs.total_clr_time, \n    qs.total_physical_reads, \n    qs.total_physical_writes, \n    st.text AS query_text, \n    qp.query_plan AS query_plan\nFROM \n    sys.dm_exec_query_stats qs\nCROSS APPLY \n    sys.dm_exec_sql_text(qs.sql_handle) st\nCROSS APPLY \n    sys.dm_exec_query_plan(qs.plan_handle) qp\nORDER BY \n    qs.total_elapsed_time DESC;