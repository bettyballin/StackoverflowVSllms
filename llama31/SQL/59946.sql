DELIMITER //\nCREATE PROCEDURE generate_vouchers()\nBEGIN\n  DECLARE done INT DEFAULT 0;\n  DECLARE book_id INT;\n  DECLARE denomination INT;\n  DECLARE units INT;\n  DECLARE voucher_number INT;\n  DECLARE cur1 CURSOR FOR SELECT ID, DENOMINATION, UNITS FROM BOOK;\n  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\n\n  OPEN cur1;\n\n  read_loop: LOOP\n    FETCH cur1 INTO book_id, denomination, units;\n    IF done THEN\n      LEAVE read_loop;\n    END IF;\n\n    SET voucher_number = 1;\n    WHILE voucher_number <= units DO\n      INSERT INTO VOUCHER (VOUCHER_NUMBER, BOOK_ID, DENOMINATION) \n        VALUES (voucher_number, book_id, denomination);\n      SET voucher_number = voucher_number + 1;\n    END WHILE;\n  END LOOP;\n\n  CLOSE cur1;\nEND//\nDELIMITER ;\n\nCALL generate_vouchers();