SELECT \n  entries.entry_id, \n  entries.title, \n  entries.content,\n  entries.preview_image, \n  entries.preview_thumbnail, \n  entries.slug,\n  entries.view_count, \n  entries.posted_on, \n  entry_categories.title AS category_title,\n  entry_categories.slug AS category_slug, \n  entry_categories.parent AS category_parent,\n  entry_categories.can_comment AS can_comment, \n  entry_categories.can_rate AS can_rate,\n  users.user_id, \n  users.group_id, \n  users.username, \n  users.first_name, \n  users.last_name,\n  users.avatar_small, \n  users.avatar_big, \n  users.score AS user_score, \n  COUNT(entry_comments.comment_id) AS comment_count\n\nFROM \n  entries\n  JOIN entry_categories ON entries.category = entry_categories.category_id\n  JOIN users ON entries.user_id = users.user_id\n  LEFT JOIN entry_comments ON entries.entry_id = entry_comments.entry_id\n    AND entry_comments.publish = 'Y'\n    AND entry_comments.deleted_at IS NULL\n\nWHERE \n  entries.publish = 'Y'\n  AND category = 5\n\nGROUP BY \n  entries.entry_id, \n  entries.title, \n  entries.content,\n  entries.preview_image, \n  entries.preview_thumbnail, \n  entries.slug,\n  entries.view_count, \n  entries.posted_on, \n  category_title, \n  category_slug,\n  category_parent, \n  can_comment, \n  can_rate, \n  users.user_id, \n  users.group_id,\n  users.username, \n  users.first_name, \n  users.last_name, \n  users.avatar_big,\n  users.avatar_small, \n  user_score\n\nORDER BY \n  posted_on desc