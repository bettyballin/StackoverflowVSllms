CREATE PROCEDURE YourProcedure\n    @parameter1 INT = NULL,\n    @parameter2 INT = NULL,\n    @NewGroupId INT = NULL\nAS\nBEGIN\n    DECLARE @sql NVARCHAR(MAX) = N'SELECT * FROM YourTable WHERE 1=1';\n    DECLARE @params NVARCHAR(MAX) = N'';\n\n    IF @parameter1 IS NOT NULL\n        SET @sql += N' AND column1 = @parameter1';\n        SET @params += N',@parameter1 INT';\n\n    IF @parameter2 IS NOT NULL\n        SET @sql += N' AND column2 = @parameter2';\n        SET @params += N',@parameter2 INT';\n\n    IF @NewGroupId IS NOT NULL\n        SET @sql += N' AND si.SiteId IN (SELECT gs.SiteId FROM [UtilityWeb].[dbo].[GroupSites] AS gs WHERE gs.GroupId = @NewGroupId)';\n        SET @params += N',@NewGroupId INT';\n\n    EXEC sp_executesql @sql, @params, @parameter1 = @parameter1, @parameter2 = @parameter2, @NewGroupId = @NewGroupId;\nEND