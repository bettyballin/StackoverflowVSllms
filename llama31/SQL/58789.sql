CREATE OR REPLACE FUNCTION secure_delete(table_name text, id integer)\nRETURNS void AS $$\nDECLARE\n  row_data bytea;\nBEGIN\n  SELECT * INTO row_data\n  FROM table_name\n  WHERE id = $2;\n\n  IF row_data IS NOT NULL THEN\n    UPDATE table_name\n    SET column1 = crypt(column1, gen_salt('md5')),\n        column2 = crypt(column2, gen_salt('md5')),\n        ...\n    WHERE id = $2;\n\n    DELETE FROM table_name\n    WHERE id = $2;\n  END IF;\nEND;\n$$ LANGUAGE plpgsql;