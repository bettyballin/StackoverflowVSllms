SELECT name \nFROM Table1 \nWHERE (@param IS NULL OR EXISTS (SELECT ... FROM table2 WHERE param = @param AND ... AND ...))\nAND ... AND ...