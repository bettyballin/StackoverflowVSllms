DELIMITER $$\n\nCREATE TRIGGER trg_check_code\nBEFORE INSERT ON your_table\nFOR EACH ROW\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM other_table WHERE code = NEW.code) THEN\n    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid code';\n  END IF;\nEND$$\n\nCREATE TRIGGER trg_check_code_update\nBEFORE UPDATE ON your_table\nFOR EACH ROW\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM other_table WHERE code = NEW.code) THEN\n    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid code';\n  END IF;\nEND$$\n\nDELIMITER ;