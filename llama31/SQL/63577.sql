ALTER PROCEDURE [WTFAULT].[usp_WTFault_GetPartFaultStatus]\n(\n    @linxPartId int = -1,\n    @faultStatus varchar(10) output\n)\nAS\nBEGIN\n    DECLARE @NbFaultsInParts int,\n            @NbPartsReturned int\n\n    SELECT \n        @NbPartsReturned = COUNT(*),\n        @faultStatus = COALESCE(\n            CASE WHEN WTFAULT.FAULT.MATURITY = 'ALLOCATED' THEN 'ALLOCATED' END,\n            CASE WHEN WTFAULT.FAULT.MATURITY = 'DRAFT' THEN 'DRAFT' END,\n            CASE WHEN WTFAULT.FAULT.MATURITY = 'CLOSED' THEN 'CLOSED' END,\n            ''\n        )\n    FROM \n        WTFAULT.PART\n    INNER JOIN \n        WTFAULT.FAULT ON WTFAULT.PART.FAULT_COID = WTFAULT.FAULT.COID\n    WHERE \n        WTFAULT.PART.LINX_PARTID = @linxPartId\n\n    IF @NbPartsReturned = 0\n        SET @faultStatus = ''\nEND\nGO