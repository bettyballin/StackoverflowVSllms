CREATE FUNCTION [dbo].[udf_GetDateInBusinessDays]\n(\n    @StartDate datetime,  --Start Date\n    @NumberDays int           --Good days ahead\n)\nRETURNS datetime\nAS\nBEGIN\n    DECLARE @ReturnDate datetime\n\n    ;WITH Dates AS (\n        SELECT TOP (@NumberDays) \n            DateAdd(d, ROW_NUMBER() OVER (ORDER BY t1.object_id), @StartDate) AS Date\n        FROM master.sys.all_columns t1 \n        CROSS JOIN master.sys.all_columns t2\n    )\n    SELECT TOP 1 @ReturnDate = Date\n    FROM Dates d\n    WHERE NOT EXISTS (\n        SELECT 1\n        FROM dbo.[BadDates] bd\n        WHERE bd.StartDate = d.Date\n    )\n    ORDER BY Date\n\n    RETURN @ReturnDate\nEND