DELIMITER //\n\nCREATE PROCEDURE archive_account(IN n INT)\nBEGIN\n  DECLARE EXIT HANDLER FOR SQLEXCEPTION\n  BEGIN\n    ROLLBACK;\n    RESIGNAL;\n  END;\n  START TRANSACTION;\n  INSERT INTO credit_archive_acc SELECT * FROM credit_acc WHERE uid_usr = n;\n  DELETE FROM credit_acc WHERE uid_usr = n;\n  INSERT INTO user_archive_usr SELECT * FROM user_usr WHERE id_usr = n;\n  DELETE FROM user_usr WHERE id_usr = n;\n  -- Add more tables as needed\n  COMMIT;\nEND //\n\nDELIMITER ;