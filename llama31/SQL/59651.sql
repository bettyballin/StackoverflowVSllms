(\n  SELECT url, feed_id, timestamp\n  FROM urls\n  WHERE feed_id = ''\n  ORDER BY timestamp DESC\n  LIMIT 10\n)\nUNION\n(\n  SELECT u.url, u.feed_id, u.timestamp\n  FROM urls u\n  INNER JOIN (\n    SELECT feed_id, MAX(timestamp) as max_timestamp\n    FROM urls\n    WHERE feed_id != ''\n    GROUP BY feed_id\n  ) f ON u.feed_id = f.feed_id AND u.timestamp = f.max_timestamp\n  ORDER BY u.timestamp DESC\n  LIMIT 10\n)\nORDER BY timestamp DESC\nLIMIT 10;