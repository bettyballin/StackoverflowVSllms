BEGIN\n  DBMS_REDEFINITION.can_redef_table('A');\n  DBMS_REDEFINITION.start_redef_table('A');\n  -- Execute the DDL statements\n  CREATE TABLE A (PKey int NOT NULL, NewFieldKey int NULL, CONSTRAINT PK_A PRIMARY KEY (PKey));\n  CREATE INDEX A_2 ON A (NewFieldKey);\n  CREATE TABLE B (PKey int NOT NULL, CONSTRAINT PK_B PRIMARY KEY (PKey));\n  ALTER TABLE A ADD CONSTRAINT FK_B_A FOREIGN KEY (NewFieldKey) REFERENCES B (PKey);\n  DBMS_REDEFINITION.finish_redef_table('A');\nEXCEPTION\n  WHEN OTHERS THEN\n    -- If any statement fails, abort the redefinition\n    DBMS_REDEFINITION.abort_redef_table('A');\n    RAISE;\nEND;