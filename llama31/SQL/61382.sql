CREATE FUNCTION dbo.GetFriendlyDateTimeValue\n(\n    @CompareDate DateTime\n)\nRETURNS nvarchar(48)\nAS\nBEGIN\n    DECLARE @Now DateTime = GETDATE()\n    DECLARE @Seconds int = DATEDIFF(SECOND, @CompareDate, @Now)\n    DECLARE @Hours int = @Seconds / 3600\n\n    DECLARE @Suff nvarchar(256) = \n        CASE\n            WHEN @Hours <= 1 THEN 'Just Now'\n            WHEN @Hours < 24 THEN ' Hours Ago'\n            WHEN @Hours < 168 THEN ' Days Ago'\n            WHEN @Hours < 720 THEN ' Weeks Ago'\n            WHEN @Hours < 8760 THEN ' Months Ago'\n            ELSE ' Years Ago'\n        END\n\n    RETURN CONVERT(nvarchar, \n        CASE \n            WHEN @Suff = 'Just Now' THEN NULL \n            WHEN @Suff = ' Hours Ago' THEN @Hours \n            WHEN @Suff = ' Days Ago' THEN @Hours / 24 \n            WHEN @Suff = ' Weeks Ago' THEN @Hours / 168 \n            WHEN @Suff = ' Months Ago' THEN @Hours / 720 \n            ELSE @Hours / 8760 \n        END) + @Suff\nEND