CREATE PROCEDURE Stored_Proc_1\nAS\nBEGIN\n    BEGIN TRY\n        BEGIN TRANSACTION\n\n        -- Your code here\n\n        COMMIT TRANSACTION\n    END TRY\n    BEGIN CATCH\n        IF @@TRANCOUNT > 0\n            ROLLBACK TRANSACTION\n\n        DECLARE @ErrMsg nvarchar(4000), @ErrSeverity int, @ErrProc sysname, @ErrLine varchar(10)\n        SELECT @ErrMsg = ERROR_MESSAGE(), @ErrSeverity = ERROR_SEVERITY(), @ErrProc = ERROR_PROCEDURE(), @ErrLine = ERROR_LINE()\n\n        -- Log the error\n        -- sql logging code here...\n\n        RAISERROR(@ErrMsg, @ErrSeverity, 1)\n    END CATCH\nEND