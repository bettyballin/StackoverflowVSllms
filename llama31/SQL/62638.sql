DECLARE @logTable TABLE (log_data VARCHAR(MAX));\n\nBEGIN TRANSACTION  \n    EXEC myBusinessSPa\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\n    INSERT INTO @logTable (log_data) EXEC myLogSP\n\n    EXEC myBusinessSPb\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\n    INSERT INTO @logTable (log_data) EXEC myLogSP\n\n    EXEC myBusinessSPc\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\n    INSERT INTO @logTable (log_data) EXEC myLogSP\n\nCOMMIT TRANSACTION\n\n-- insert log data into permanent log table\nINSERT INTO log_table (log_data) SELECT log_data FROM @logTable