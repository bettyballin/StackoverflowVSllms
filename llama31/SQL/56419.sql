WITH RECURSIVE deps AS (\n  SELECT name, referenced_name, 1 AS level\n  FROM user_dependencies\n  WHERE type = 'PROCEDURE' AND name = :proc_name\n  UNION ALL\n  SELECT d.name, d.referenced_name, level + 1\n  FROM user_dependencies d\n  JOIN deps p ON d.name = p.referenced_name\n  WHERE d.type = 'PROCEDURE'\n)\nSELECT DISTINCT referenced_name\nFROM deps\nWHERE level > 1\nORDER BY referenced_name;