CREATE FUNCTION dbo.Split (@string nvarchar(max), @delimiter nvarchar(10))\nRETURNS @output TABLE (value nvarchar(max))\nBEGIN\n  DECLARE @start int, @end int\n  SELECT @start = 1, @end = CHARINDEX(@delimiter, @string)\n  WHILE @start < LEN(@string) + 1 BEGIN\n    IF @end = 0 \n      SET @end = LEN(@string) + 1\n    INSERT INTO @output (value) \n    VALUES(SUBSTRING(@string, @start, @end - @start))\n    SET @start = @end + 1\n    SET @end = CHARINDEX(@delimiter, @string, @start)\n  END\n  RETURN\nEND