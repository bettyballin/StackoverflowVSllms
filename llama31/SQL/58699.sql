SELECT \n  i.name AS ispname, \n  i.img_link, \n  c.download, \n  c.upload, \n  c.monthly_price, \n  c.link, \n  GROUP_CONCAT(a.name) AS addons, \n  SUM(pa.monthly_fee) AS addon_price\nFROM \n  isp i \n  JOIN product p ON i.id = p.isp_id\n  JOIN `connection` c ON p.id = c.product_id \n  LEFT JOIN product_addon pa ON pa.product_id = p.id AND pa.forced = 0\n  LEFT JOIN addon a ON pa.addon_id = a.id\nGROUP BY \n  c.id\nHAVING \n  SUM(IF(pa.addon_id IN (1, 14, 237), 1, 0)) = 3