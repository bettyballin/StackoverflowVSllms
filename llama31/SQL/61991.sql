-- Server-side (SQL) validation and encryption\nCREATE PROCEDURE validate_and_encrypt_user_data\n    @username nvarchar(50),\n    @password nvarchar(50)\nAS\nBEGIN\n    IF EXISTS (SELECT 1 FROM users WHERE username = @username)\n        DECLARE @encrypted_password varbinary(128) = ENCRYPTBYPASSPHRASE('my_secret_key', @password)\n        INSERT INTO users (username, password) VALUES (@username, @encrypted_password)\n    ELSE\n        RAISERROR ('Username already exists', 16, 1)\nEND\nGO