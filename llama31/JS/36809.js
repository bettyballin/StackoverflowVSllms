function getAllowableMoves(piece, grid) {\n  const possibleMoves = {\n    knight: [\n      [-2, -1], [-2, 1], [-1, -2], [-1, 2],\n      [1, -2], [1, 2], [2, -1], [2, 1]\n    ],\n    bishop: [\n      [-1, -1], [-1, 1], [1, -1], [1, 1]\n    ],\n    rook: [\n      [-1, 0], [1, 0], [0, -1], [0, 1]\n    ]\n  };\n\n  const allowableMoves = [];\n  for (const move of possibleMoves[piece.type]) {\n    const newX = piece.x + move[0];\n    const newY = piece.y + move[1];\n\n    if (newX >= 0 && newX < grid.width && newY >= 0 && newY < grid.height) {\n      const destinationSquare = grid[newX][newY];\n      if (!destinationSquare || destinationSquare.color !== piece.color) {\n        allowableMoves.push({ x: newX, y: newY });\n      }\n    }\n  }\n\n  return allowableMoves;\n}