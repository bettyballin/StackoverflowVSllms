$(function() {\n  var IntervalId;\n  var counter = 0; // declare counter here\n  var divs = $('#div1,#div2,#div3'); // declare divs here\n  var currentIndex; // declare currentIndex here\n\n  function first_function() {\n    function showDiv () {\n      divs.hide() // hide all divs\n      .filter(function (index) { return index == counter % 3; }) \n      .show('fast'); // and show it\n      counter++;\n      currentIndex = counter % 3; // store the current index\n    }; \n    if (typeof currentIndex !== 'undefined') {\n      counter = currentIndex;\n    }\n    showDiv();     \n    IntervalId = setInterval(showDiv, 5000);\n  };\n\n  function second_function(){\n    clearInterval(IntervalId);\n    currentIndex = divs.index(divs.filter(':visible')); // store the current index\n  }\n\n  $("#link1").toggle(\n    first_function,\n    second_function\n  );\n});