$(document).ready(function(){\n    $.ajax({\n        type: 'POST',\n        url: 'displaydocument.aspx',\n        xhrFields: {\n            responseType: 'blob'\n        },\n        success: function(data){\n            if (data.type === 'text/html') {\n                var html = new TextDecoder('utf-8').decode(data);\n                if (html == 'No Document'){\n                    UpdateControls('No document has been specified to load');\n                } else if (html == 'No Data'){\n                    UpdateControls('No data was found for that document');\n                } else if (html.indexOf('ERROR',0) != -1) {\n                    UpdateControls(html);\n                }\n            } else {\n                var url = window.URL || window.webkitURL;\n                var fileUrl = url.createObjectURL(data);\n                var a = document.createElement('a');\n                a.href = fileUrl;\n                a.target = '_blank';\n                a.click();\n                url.revokeObjectURL(fileUrl);\n            }\n        }\n    });\n});\n\nfunction UpdateControls(message){\n    $("#txtInfo").html(message);\n    $("#imgLoading").hide();\n}