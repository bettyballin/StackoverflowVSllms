var t = setTimeout(function() {\n  // If the browser is still here after a short delay,\n  // assume the protocol handler is not installed.\n  // This part is unreliable and may not work consistently.\n  console.log("Protocol handler not detected.");\n}, 100);\n\nwindow.location = 'trayapp://test';\n\n// If the protocol handler is installed, this might not execute.\n// But there's no reliable way to detect the outcome across all browsers.