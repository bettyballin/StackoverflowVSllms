xmlhttp.onreadystatechange = function() {\n    if (xmlhttp.readyState == 4) {\n        var response = xmlhttp.responseText;\n        if (response != "") {\n            var newValue = response.split("|");\n            available[0] = newValue[0];\n            available[1] = newValue[1];\n\n            // Move the validation logic here\n            if (available[1] == "taken") {\n                errorDiv.innerHTML += warningIcon + 'Username is already taken!<br />';\n                isValidForm = false;\n            } else if (u_username.value.length < 4) {\n                errorDiv.innerHTML += warningIcon + 'Username must be more than 4 characters long!<br />';\n                isValidForm = false;\n            }\n            // ...\n        }\n    }\n}