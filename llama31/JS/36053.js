// Generate a unique identifier\nfunction generateId() {\n    return Math.random().toString(36).substr(2, 9);\n}\n\n// Domain object constructor\nfunction DomainObject(id) {\n    this.Id = id || generateId();\n    // Other properties...\n}\n\n// Mapping\nvar map = {};\n\n// Creating a new domain object\nvar domainObj = new DomainObject();\n\n// Use the generated Id as the key in the mapping\nmap[domainObj.Id] = 'foo';\n\n// Upon saving, update the mapping with the new Id\ndomainObj.bind('saved', function(newId) {\n    map[newId] = map[domainObj.Id];\n    delete map[domainObj.Id];\n    domainObj.Id = newId;\n});