window.addEvent('domready', function() {\n    var shouts = "timed.php";\n    var log = $('log_res');\n    var loadingHtml = '<img src="spinner.gif" alt="Loading..."> Loading...';\n\n    function updateData (url, target) {\n        log.set('html', loadingHtml).addClass('ajax-loading');\n        new Ajax(url, {\n            method: 'get',\n            update: $(target),\n            onComplete: function() {\n                log.removeClass('ajax-loading');\n            }\n        }).request();\n    }\n\n    var update = function(){ updateData (shouts, 'log_res'); };\n    update();           // call it immediately\n    update.periodical(10000);   // and then periodically\n});