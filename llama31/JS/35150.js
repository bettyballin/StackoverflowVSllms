function getXY(obj) {\n  var rect = obj.getBoundingClientRect();\n  var iframe = getIframe(obj);\n  if (iframe) {\n    var iframeRect = iframe.getBoundingClientRect();\n    rect.left += iframeRect.left;\n    rect.top += iframeRect.top;\n  }\n  obj.x = rect.left;\n  obj.y = rect.top;\n}\n\nfunction getIframe(obj) {\n  var iframe = null;\n  while (obj.parentNode) {\n    if (obj.parentNode.tagName === 'IFRAME') {\n      iframe = obj.parentNode;\n      break;\n    }\n    obj = obj.parentNode;\n  }\n  return iframe;\n}