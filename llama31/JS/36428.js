var selectedItems = {};\n\n$('select').on('change', function() {\n  var selectedItem = $(this).find('option:selected');\n  if (selectedItem.val() !== '') {\n    selectedItems[selectedItem.text()] = selectedItem.val();\n    selectedItem.remove();\n    $('select option:first').prop('selected', true);\n    updateDisplayedList();\n  }\n});\n\nfunction updateDisplayedList() {\n  var displayedList = $('#displayed-list');\n  displayedList.empty();\n  $.each(selectedItems, function(realValue, dbValue) {\n    displayedList.append('<li>' + realValue + ' <a href="#" data-db-value="' + dbValue + '">Remove</a></li>');\n  });\n}\n\n$('#displayed-list').on('click', 'a', function(e) {\n  e.preventDefault();\n  var dbValue = $(this).data('db-value');\n  var realValue = $(this).closest('li').text().trim();\n  delete selectedItems[realValue];\n  updateDisplayedList();\n  // Add the item back to the available list\n  var option = $('<option value="' + dbValue + '">' + realValue + '</option>');\n  $('select').append(option);\n  // Sort the list\n  var options = $('select option:not(:first)').sort(function(a, b) {\n    return $(a).text().localeCompare($(b).text());\n  });\n  $('select').append(options);\n});