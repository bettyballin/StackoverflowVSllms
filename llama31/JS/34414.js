$(document).ready(function () {\n    $.ajax({\n        url: 'nav.xml',\n        type: 'GET',\n        dataType: 'xml',\n        error: function (XMLHttpRequest, textStatus, errorThrown) {\n            alert('Error: ' + textStatus + ", " + errorThrown);\n        },\n        success: function (xml) {\n            var count = 0;\n            var $list = $('#list');\n\n            function parseNode(node, level) {\n                var url = $(node).attr('url');\n                var title = $(node).attr('title');\n                var descr = $(node).attr('description');\n                var image = $(node).attr('image');\n                var $item = $('<li id="parent"><a href="' + url + '">' + title + '</a></li>');\n\n                if ($(node).children().length > 0) {\n                    var $subList = $('<ul></ul>');\n                    $(node).children().each(function () {\n                        parseNode(this, level + 1).appendTo($subList);\n                    });\n                    $item.append($subList);\n                }\n\n                return $item;\n            }\n\n            $(xml).find('siteMapNode').each(function () {\n                parseNode(this, 0).appendTo($list);\n                count++;\n            });\n        }\n    });\n});