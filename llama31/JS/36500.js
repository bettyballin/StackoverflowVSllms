$('select').each(function() {\n    var $select = $(this);\n    var $options = $select.find('option');\n\n    // Create a temporary span to measure option widths\n    var $widthSpan = $('<span id="option-width-span"></span>');\n    $widthSpan.appendTo('body');\n\n    // Set span's font styles to match select box's styles\n    $widthSpan.css({\n        'font-family': $select.css('font-family'),\n        'font-size': $select.css('font-size'),\n        'font-weight': $select.css('font-weight')\n    });\n\n    var maxWidth = 0;\n    $options.each(function() {\n        var $option = $(this);\n        $widthSpan.text($option.text());\n        var width = $widthSpan[0].offsetWidth;\n        maxWidth = Math.max(maxWidth, width);\n    });\n\n    // Remove the temporary span\n    $widthSpan.remove();\n\n    // Store the original width and max width in data attributes\n    $select.data('original-width', $select.width());\n    $select.data('max-width', maxWidth);\n\n    // Bind focus and blur events\n    $select.focus(function() {\n        $(this).width($(this).data('max-width'));\n    });\n    $select.blur(function() {\n        $(this).width($(this).data('original-width'));\n    });\n});