// JavaScript code to update the list of visible fields\nfunction updateVisibleFields() {\n    var visibleFields = [];\n    $('form input, form select, form textarea').each(function() {\n        if ($(this).is(':visible')) {\n            visibleFields.push($(this).attr('name'));\n        }\n    });\n    $('#visibleFields').val(visibleFields.join(','));\n}\n\n// Call this function whenever a field is shown or hidden\nupdateVisibleFields();