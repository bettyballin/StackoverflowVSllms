function addEllipsis() {\n  var h2s = document.querySelectorAll('h2');\n  h2s.forEach(function(h2) {\n    var text = h2.textContent;\n    var parentWidth = h2.parentNode.offsetWidth;\n    var textWidth = getTextWidth(text, h2.style.fontFamily, h2.style.fontSize);\n    if (textWidth > parentWidth) {\n      var newWidth = parentWidth - 30; // subtract some buffer for ellipsis\n      var newText = text.substring(0, text.length - 3) + '...';\n      while (getTextWidth(newText, h2.style.fontFamily, h2.style.fontSize) > newWidth) {\n        newText = newText.substring(0, newText.length - 4) + '...';\n      }\n      h2.textContent = newText;\n    }\n  });\n}\n\nfunction getTextWidth(text, fontFamily, fontSize) {\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n  ctx.font = fontSize + ' ' + fontFamily;\n  return ctx.measureText(text).width;\n}\n\n// Call the function on resize\nwindow.addEventListener('resize', addEllipsis);\naddEllipsis(); // initial call