function fitStringToSize(str, len) {\n  const tempSpan = document.createElement("span");\n  tempSpan.style.position = "absolute";\n  tempSpan.style.visibility = "hidden";\n  tempSpan.style.height = "0";\n  tempSpan.style.width = "auto";\n  document.body.appendChild(tempSpan);\n\n  tempSpan.textContent = str;\n\n  let shortStr = str;\n  let diff = tempSpan.offsetWidth - len;\n\n  while (diff > 0) {\n    const charsToRemove = Math.ceil(diff / 5);\n    shortStr = str.substring(0, str.length - charsToRemove) + 'â€¦';\n    tempSpan.textContent = shortStr;\n    diff = tempSpan.offsetWidth - len;\n  }\n\n  document.body.removeChild(tempSpan);\n\n  if (shortStr.length < str.length) {\n    return `<abbr title="${str}">${shortStr}</abbr>`;\n  } else {\n    return str;\n  }\n}