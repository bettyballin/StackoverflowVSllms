// Use the 'hashchange' event instead of polling\nwindow.addEventListener('hashchange', function() {\n  // Verify the hash value to prevent manipulation attacks\n  if (location.hash && location.hash.startsWith('#')) {\n    // Update the application state\n    appCache.currentHash = location.hash;\n    appCache.history.push(location.hash);\n    /* ... [load state using the hash value] ... */\n  }\n}, false);