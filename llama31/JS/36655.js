$.validator.addMethod("demographics", function(value, element) {\n  var demographics = $(".demographic");\n  var optedOut = $("#opt_out").is(":checked");\n  if (optedOut) return true;\n  if (demographics.filter(":checked").length > 0) {\n    return demographics.filter(":checked").length === demographics.length;\n  }\n  return true;\n}, "Please complete all demographic fields or opt out");\n\n$("#myForm").validate({\n  rules: {\n    "demographic[]": {\n      demographics: true\n    }\n  },\n  groups: {\n    demographics: ".demographic"\n  },\n  errorPlacement: function(error, element) {\n    if (element.hasClass("demographic")) {\n      error.appendTo("#demographic-error");\n    } else {\n      error.insertAfter(element);\n    }\n  }\n});