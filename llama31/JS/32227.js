const fingerprint = async () => {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const text = 'Hello, world!';\n  ctx.textBaseline = 'top';\n  ctx.font = '14px Arial';\n  ctx.textAlign = 'left';\n  ctx.fillStyle = '#000';\n  ctx.fillRect(20, 20, 100, 20);\n  ctx.fillText(text, 20, 20);\n  const b64 = canvas.toDataURL().replace('data:image/png;base64,', '');\n  const bin = atob(b64);\n  const u8 = new Uint8Array(bin.length);\n  for (let i = 0, len = bin.length; i < len; ++i) {\n    u8[i] = bin.charCodeAt(i);\n  }\n  const hash = await crypto.subtle.digest('SHA-256', u8);\n  const hex = Array.prototype.map.call(new Uint8Array(hash), x => x.toString(16).padStart(2, '0')).join('');\n  return hex;\n};\n\n// Store the fingerprint in local storage or a cookie\nconst fingerprintHash = await fingerprint();\nlocalStorage.setItem('fingerprint', fingerprintHash);