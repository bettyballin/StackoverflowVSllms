function resizeRectangle(rect, angle) {\n  const d2r = Math.PI / 180;\n  const r2d = 180 / Math.PI;\n  const deg = Math.abs(angle * r2d) % 360;\n  let degt;\n\n  if (deg < 91) {\n    degt = angle;\n  } else if (deg < 181) {\n    degt = (180 - deg) * d2r;\n  } else if (deg < 271) {\n    degt = (deg - 180) * d2r;\n  } else {\n    degt = (360 - deg) * d2r;\n  }\n\n  const sint = Math.sin(degt);\n  const cost = Math.cos(degt);\n\n  const h1 = rect.height * rect.height / (rect.width * sint + rect.height * cost);\n  const h2 = rect.height * rect.width / (rect.width * cost + rect.height * sint);\n  const hh = Math.min(h1, h2);\n  const ww = hh * rect.width / rect.height;\n\n  rect.x = (rect.width - ww) * 0.5;\n  rect.y = (rect.height - hh) * 0.5;\n  rect.height = hh;\n  rect.width = ww;\n\n  return rect;\n}