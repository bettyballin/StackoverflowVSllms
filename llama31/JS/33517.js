$('.this_img').each(function () {\n  var $this_img = $(this);\n  var $this_src = $(this).find('.sliderImage:first').attr('src');\n  var img = new Image();\n\n  $(img)\n    .load(function () {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.drawImage(img, 0, 0);\n\n      var dataUrl = canvas.toDataURL();\n      $this_img.css({\n        'background-image': 'url(' + dataUrl + ')',\n        'background-repeat': 'repeat'\n      });\n    })\n    .error(function () {\n      // handle error\n    })\n    .attr('src', $this_src);\n});