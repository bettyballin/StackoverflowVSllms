const express = require('express');\nconst Vote = require('./models/Vote');\n\nconst router = express.Router();\n\nrouter.post('/events/:eventId/votes', async (req, res) => {\n  const eventId = req.params.eventId;\n  const votes = req.body.votes;\n\n  // Validate votes\n  if (!votes || votes.length !== 3) {\n    return res.status(400).send({ error: 'Invalid votes' });\n  }\n\n  // Check for ties and invalid ranks\n  const ranks = votes.map((vote) => vote.rank);\n  if (new Set(ranks).size !== ranks.length) {\n    return res.status(400).send({ error: 'Ties are not allowed' });\n  }\n\n  // Update votes in a transaction\n  try {\n    await Vote.updateMany({ event_id: eventId, user_id: req.user.id }, votes);\n    res.send({ message: 'Votes updated successfully' });\n  } catch (error) {\n    res.status(500).send({ error: 'Failed to update votes' });\n  }\n});