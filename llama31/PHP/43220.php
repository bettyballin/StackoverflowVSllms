use Ratchet\MessageComponentInterface;\nuse Ratchet\ConnectionInterface;\n\nclass ChatServer implements MessageComponentInterface {\n    protected $clients;\n\n    public function __construct() {\n        $this->clients = new \SplObjectStorage;\n    }\n\n    public function onOpen(ConnectionInterface $conn) {\n        $this->clients->attach($conn);\n    }\n\n    public function onMessage(ConnectionInterface $from, $msg) {\n        foreach ($this->clients as $client) {\n            if ($client !== $from) {\n                $client->send($msg);\n            }\n        }\n    }\n\n    public function onClose(ConnectionInterface $conn) {\n        $this->clients->detach($conn);\n    }\n\n    public function onError(ConnectionInterface $conn, \Exception $e) {\n        // Handle error\n    }\n}\n\n$server = IoServer::factory(new ChatServer(), 8080);\n$server->run();