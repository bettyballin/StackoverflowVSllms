$stmt = $mysqli->prepare('\n  WITH RECURSIVE category_hierarchy AS (\n    SELECT category_id, parent_id, 0 AS level\n    FROM categories\n    WHERE category_id = ?  -- start with the given category id\n    UNION ALL\n    SELECT c.category_id, c.parent_id, level + 1\n    FROM categories c\n    JOIN category_hierarchy p ON c.parent_id = p.category_id\n  )\n  SELECT DISTINCT o.organization_id, o.organization_name\n  FROM organizations o\n  JOIN organizations_categories oc ON o.organization_id = oc.organization_id\n  JOIN category_hierarchy ch ON oc.category_id = ch.category_id;\n');\n$stmt->bind_param('i', $category_id);\n$stmt->execute();\n$result = $stmt->get_result();\nwhile ($row = $result->fetch_assoc()) {\n  echo $row['organization_id'] . ' ' . $row['organization_name'] . "\n";\n}