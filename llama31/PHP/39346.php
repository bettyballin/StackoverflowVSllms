// Record user entered\nrecordUserEntered();\n\nwhile (true) {\n    // Fetch changes in state since last awake\n    $changes = fetchChanges();\n\n    // Check if client is still connected\n    if (connection_status() == 1) {\n        // Client connection is closed, exit loop\n        break;\n    }\n\n    // Send changes to user\n    sendChangesToUser($changes);\n\n    // Sleep for 5 seconds\n    sleep(5);\n}\n\n// Record user exit\nrecordUserExit();