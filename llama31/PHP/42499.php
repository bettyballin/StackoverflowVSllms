function substr_words($text, $len) {\n    $words = explode(' ', $text);\n    $result = '';\n    foreach ($words as $word) {\n        if (strlen($result) + strlen($word) + 1 > $len) {\n            break;\n        }\n        $result .= $word . ' ';\n    }\n    return trim($result) . '...';\n}\n\n$text = 'Stack Overflow is as frictionless and painless to use as we could make it.';\necho substr_words($text, 28);