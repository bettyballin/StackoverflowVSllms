function setLocaleFromAcceptLanguage() {\n    $lang = $_SERVER['HTTP_ACCEPT_LANGUAGE'];\n    $locales = array();\n    preg_match_all('/([a-z]{2}(?:-[a-z]{2})?)(?:;q=([0-9.]+))?/', $lang, $matches, PREG_SET_ORDER);\n    foreach ($matches as $match) {\n        $locales[$match[1]] = (isset($match[2]) ? (float) $match[2] : 1.0);\n    }\n    arsort($locales);\n    $locale = key($locales);\n\n    // Map Windows locale strings to standard locale strings\n    if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {\n        $map = array(\n            'deu' => 'de',\n            'german' => 'de',\n            // Add more mappings as needed\n        );\n        $locale = isset($map[$locale]) ? $map[$locale] : $locale;\n    }\n\n    setlocale(LC_ALL, $locale);\n}\n\nsetLocaleFromAcceptLanguage();