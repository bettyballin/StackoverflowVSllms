$imagesPerPage = 20;\n$imagesPerUserPerPage = 5;\n\n// Retrieve images from database, including user_id\n$images = query("SELECT * FROM foto_images ORDER BY id DESC");\n\n// Group images by user_id\n$imagesByUser = array();\nforeach ($images as $image) {\n  if (!isset($imagesByUser[$image['user_id']])) {\n    $imagesByUser[$image['user_id']] = array();\n  }\n  $imagesByUser[$image['user_id']][] = $image;\n}\n\n// Paginate images, limiting the number of images per user per page\n$page = 1; // current page\n$paginatedImages = array();\nforeach ($imagesByUser as $userId => $userImages) {\n  $userImages = array_slice($userImages, 0, $imagesPerUserPerPage);\n  $paginatedImages = array_merge($paginatedImages, $userImages);\n  if (count($paginatedImages) >= $imagesPerPage) {\n    break;\n  }\n}\n\n// Display the paginated images\nforeach ($paginatedImages as $image) {\n  // display image\n}