<?php\n$nextcloud_url = 'https://your-nextcloud-instance.com';\n$username = 'your_username';\n$password = 'your_password';\n\n// Authenticate and get an app password\n$ch = curl_init($nextcloud_url . '/ocs/v1.php/apps/files/api/v1/token');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_USERPWD, $username . ':' . $password);\n$response = curl_exec($ch);\ncurl_close($ch);\n\n// Get the app password\n$app_password = json_decode($response, true)['ocs']['data']['token'];\n\n// Upload a file\n$file = '/path/to/your/file.txt';\n$ch = curl_init($nextcloud_url . '/ocs/v1.php/apps/files/api/v1/files');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Bearer ' . $app_password));\ncurl_setopt($ch, CURLOPT_PUT, true);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, file_get_contents($file));\n$response = curl_exec($ch);\ncurl_close($ch);\n\n// Set permissions\n$permissions = array('read' => true, 'write' => false, 'delete' => false);\n$ch = curl_init($nextcloud_url . '/ocs/v1.php/apps/files/api/v1/files/' . basename($file) . '/permissions');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Bearer ' . $app_password));\ncurl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($permissions));\n$response = curl_exec($ch);\ncurl_close($ch);