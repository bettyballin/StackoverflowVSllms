$smarty = new Smarty();\n$templateDirsCallback = function() {\n    // Return the list of directories based on the requested URL\n    $url = $_SERVER['REQUEST_URI'];\n    if (strpos($url, '/admin') === 0) {\n        return array('/path/to/admin/dir1', '/path/to/admin/dir2');\n    } else {\n        return array('/path/to/public/dir1', '/path/to/public/dir2');\n    }\n};\n$smarty->registerResource('custom', new CustomTemplateResource($smarty, $templateDirsCallback));