<?php\n// Set referral cookie duration (e.g., 30 days)\n$cookieDuration = 30 * 24 * 60 * 60;\n\n// Function to set referral cookie\nfunction setReferralCookie($referrerId) {\n  $cookieName = 'referrer_id';\n  $cookieValue = $referrerId;\n  setcookie($cookieName, $cookieValue, time() + $cookieDuration, '/');\n}\n\n// Function to track referral\nfunction trackReferral($referrerId, $referredId) {\n  $db = new mysqli('your_host', 'your_user', 'your_pass', 'your_db');\n  $query = "INSERT INTO referrals (referrer_id, referred_id) VALUES (?, ?)";\n  $stmt = $db->prepare($query);\n  $stmt->bind_param('ii', $referrerId, $referredId);\n  $stmt->execute();\n  $db->close();\n}\n\n// Check if referral cookie is set\nif (isset($_COOKIE['referrer_id'])) {\n  $referrerId = $_COOKIE['referrer_id'];\n  // If user is logged in, track referral\n  if (isset($_SESSION['user_id'])) {\n    $referredId = $_SESSION['user_id'];\n    trackReferral($referrerId, $referredId);\n  }\n}\n\n// Set referral cookie if referral link is clicked\nif (isset($_GET['ref'])) {\n  $referrerId = $_GET['ref'];\n  setReferralCookie($referrerId);\n}