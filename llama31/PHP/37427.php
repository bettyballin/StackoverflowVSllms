class Site_Mapper {\n    // ...\n\n    public function save(Site $site) {\n        // Perform the save operation\n        $this->db->save($site);\n\n        // Check if the saved site is now the primary site\n        if ($site->isPrimary) {\n            // Update the existing primary site to non-primary\n            $existingPrimary = $this->fetchPrimarySite();\n            if ($existingPrimary && $existingPrimary->id !== $site->id) {\n                $existingPrimary->isPrimary = false;\n                $this->save($existingPrimary);\n            }\n        }\n    }\n\n    private function fetchPrimarySite() {\n        // Query the DB to fetch the current primary site\n        // ...\n    }\n}