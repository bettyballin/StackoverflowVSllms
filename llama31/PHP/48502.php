// Connect to Memcached\n$memcached = new Memcached();\n$memcached->addServer('localhost', 11211);\n\n// Cache function\nfunction cacheQuery($query, $ttl = 3600) {\n    $hash = md5($query);\n    $result = $memcached->get($hash);\n    if (!$result) {\n        $result = mysql_query($query);\n        $memcached->set($hash, serialize($result), $ttl);\n    } else {\n        $result = unserialize($result);\n    }\n    return $result;\n}\n\n// Usage\n$query = "SELECT * FROM users";\n$result = cacheQuery($query);\nwhile ($row = mysql_fetch_assoc($result)) {\n    // Process the row\n}