function set_post_pending($data, $postarr) {\n    // If it's not valid...\n    $error = "You are missing some Custom Fields.";\n    add_settings_error('my_error', 'my_error', $error, 'error');\n    $data['post_status'] = 'pending';\n    return $data;\n}\nadd_filter('wp_insert_post_data', 'set_post_pending', 1, 2);\n\nfunction display_admin_notice() {\n    settings_errors('my_error');\n}\nadd_action('admin_notices', 'display_admin_notice');