use MaxMind\Db\Reader;\nuse Redis;\n\n$redis = new Redis();\n$redis->connect('localhost', 6379);\n\n$reader = new Reader('path/to/GeoLite2-Country.mmdb');\n\nfunction getCountryCode($ip) {\n    $cachedResult = $redis->get($ip);\n    if ($cachedResult) {\n        return $cachedResult;\n    }\n    $result = $reader->country($ip);\n    $redis->set($ip, $result);\n    return $result;\n}\n\n$countryCode = getCountryCode($_SERVER['REMOTE_ADDR']);