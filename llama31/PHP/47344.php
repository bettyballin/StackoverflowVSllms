function assign_thumbnail_to_category($term_id, $tt_id, $taxonomy) {\n  if ($taxonomy == 'category') {\n    $posts = get_posts(array(\n      'post_type' => 'post',\n      'tax_query' => array(\n        array(\n          'taxonomy' => 'category',\n          'field'    => 'id',\n          'terms'    => $term_id,\n        ),\n      ),\n    ));\n\n    if ($posts) {\n      $first_post_id = $posts[0]->ID;\n      $thumbnail_id = get_post_meta($first_post_id, '_thumbnail_id', true);\n      if ($thumbnail_id) {\n        $thumbnail_url = wp_get_attachment_url($thumbnail_id);\n        // Assign the thumbnail URL to the category\n        update_term_meta($term_id, 'thumbnail_url', $thumbnail_url);\n      }\n    }\n  }\n}\n\nadd_action('wp_insert_term', 'assign_thumbnail_to_category', 10, 3);