// Start a transaction\n$mysqli->begin_transaction();\n\ntry {\n    // Insert user data\n    $query = "INSERT INTO users (username, email) VALUES ('john', 'john@example.com')";\n    $mysqli->query($query);\n\n    // Get the newly inserted user ID\n    $user_id = $mysqli->insert_id;\n\n    // Insert profile data with the user ID as a foreign key\n    $query = "INSERT INTO profiles (user_id, bio) VALUES ($user_id, 'Hello, world!')";\n    $mysqli->query($query);\n\n    // Commit the transaction\n    $mysqli->commit();\n} catch (Exception $e) {\n    // Roll back the transaction if an error occurs\n    $mysqli->rollback();\n    throw $e;\n}