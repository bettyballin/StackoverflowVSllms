<?php\n$mysqli = new mysqli('localhost', 'username', 'password', 'database');\n\nif ($_FILES['image']['error'] !== UPLOAD_ERR_OK) {\n    // Handle upload errors\n    exit;\n}\n\n$uniqueFilename = bin2hex(random_bytes(16)) . '.jpg';\n$imageHash = hash('sha256', file_get_contents($_FILES['image']['tmp_name']));\n\n$stmt = $mysqli->prepare("INSERT INTO images (filename, hash, uploaded_at) VALUES (?, ?, NOW())");\n$stmt->bind_param("ss", $uniqueFilename, $imageHash);\n$stmt->execute();\n\n// Move the uploaded file to a secure location\nmove_uploaded_file($_FILES['image']['tmp_name'], 'uploads/' . $uniqueFilename);