<?php\nif (isset($_POST['code'])) {\n    $map = $_POST['code'];\n    $map = preg_replace("/,\\s*}/i", "}", $map);\n    $map = str_replace("{", "[", $map);\n    $map = str_replace("}", "]", $map);\n    $map = json_decode('[' . $map . ']');\n\n    $arrayCount1 = 0;\n    $arrayCount2 = -1;\n\n    $H = sprintf('%05d', 00000);\n    $V = sprintf('%05d', 00000);\n    $id = 1;\n\n    $sql = "INSERT INTO `map` (`id`, `horizontal`, `verticle`, `image`) VALUES\n";\n\n    for ($count1 = 0; $count1 < sizeof($map[0]); $count1++) {\n        $arrayCount2++;\n        $arrayCount1 = 0;\n        $V = sprintf('%05d', $V + 1);\n        $H = sprintf('%05d', 00000);\n\n        for ($count2 = 0; $count2 < sizeof($map); $count2++) {\n            $sql .= "(" . $id . ", '" . $H . "', '" . $V . "', '" . $map[$arrayCount1][$arrayCount2] . "'),\n";\n            $arrayCount1++;\n            $id++;\n            $H = sprintf('%05d', $H + 1);\n        }\n    }\n\n    $sql = rtrim($sql, ','); // remove trailing comma\n\n    file_put_contents('map.sql', $sql);\n}\n?>