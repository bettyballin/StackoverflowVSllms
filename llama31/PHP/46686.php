function generateRecurringDates($eventId, $startDate, $recurrence, $recurrenceInterval, $endDate = null) {\n  $dates = array();\n\n  switch ($recurrence) {\n    case 'daily':\n      $interval = new DateInterval('P1D');\n      break;\n    case 'weekly':\n      $interval = new DateInterval('P' . $recurrenceInterval . 'W');\n      break;\n    case 'monthly':\n      $interval = new DateInterval('P' . $recurrenceInterval . 'M');\n      break;\n    default:\n      throw new Exception('Invalid recurrence pattern');\n  }\n\n  $currentDate = clone $startDate;\n  while ($currentDate <= $endDate || $endDate === null) {\n    $dates[] = $currentDate->format('Y-m-d');\n    $currentDate->add($interval);\n  }\n\n  return $dates;\n}