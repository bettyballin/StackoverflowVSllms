function resampleImage($imagePath, $maxWidth, $maxHeight, $quality = 80) {\n    $img = imagecreatefromjpeg($imagePath);\n    $width = imagesx($img);\n    $height = imagesy($img);\n\n    if ($width > $maxWidth || $height > $maxHeight) {\n        $ratio = min($maxWidth / $width, $maxHeight / $height);\n        $newWidth = (int) ($width * $ratio);\n        $newHeight = (int) ($height * $ratio);\n\n        $newImg = imagecreatetruecolor($newWidth, $newHeight);\n        imagecopyresampled($newImg, $img, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);\n\n        imagejpeg($newImg, $imagePath, $quality);\n    }\n}