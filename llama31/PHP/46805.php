// Generate a secure token after user registration\n$token = bin2hex(random_bytes(16));\nmysqli_query($db, "INSERT INTO users (email, password, token) VALUES ('$email', '$password', '$token')");\n\n// Redirect to residence creation form with token\nheader("Location: https://example.com/residence-form?token=$token");\n\n// Validate token and retrieve user ID in residence creation form\nif (isset($_GET['token'])) {\n    $token = $_GET['token'];\n    $result = mysqli_query($db, "SELECT id FROM users WHERE token = '$token'");\n    if ($result && $row = mysqli_fetch_assoc($result)) {\n        $userId = $row['id'];\n        // Create residence and add entries to users_residences table\n    } else {\n        // Invalid token, handle error\n    }\n}