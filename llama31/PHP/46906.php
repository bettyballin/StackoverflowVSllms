$query = "SELECT s.*, a.* FROM students s LEFT JOIN addresses a ON s.id = a.student_id";\n\n$result = mysqli_query($conn, $query);\n\n$sortedArray = array_map(function($row) {\n    return array(\n        "s" => array_combine(array("id", "name"), array($row["s.id"], $row["s.name"])),\n        "a" => array_combine(array("id", "student_id", "address"), array($row["a.id"], $row["a.student_id"], $row["a.address"]))\n    );\n}, mysqli_fetch_all($result, MYSQLI_ASSOC));\n\nprint_r($sortedArray);