// mymodule.module\nfunction mymodule_form_alter(&$form, &$form_state, $form_id) {\n  if ($form_id == 'user_register_form') {\n    // Add a field to select the group\n    $form['group'] = array(\n      '#type' => 'select',\n      '#title' => t('Group'),\n      '#options' => array(),\n    );\n    // Populate the group options\n    foreach (group_get_groups() as $group) {\n      $form['group']['#options'][$group->gid] = $group->name;\n    }\n  }\n}\n\nfunction mymodule_user_insert($account) {\n  // Get the selected group\n  $group_id = $account->group;\n  // Add the user to the group\n  group_add_member($group_id, $account->uid);\n}