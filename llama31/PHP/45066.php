function addParam($url, $newParam) {\n    $params = array();\n    $queryString = parse_url($url, PHP_URL_QUERY);\n    if ($queryString) {\n        parse_str($queryString, $params);\n    }\n    $params = array_merge($params, $newParam);\n    $newQueryString = http_build_query($params);\n    $newUrl = substr($url, 0, strpos($url, '?')) . '?' . $newQueryString;\n    return $newUrl;\n}\n\n// Usage:\n$url = 'http://www.somesite.com/print.php?newUser=1';\n$newParam = array('mode' => 1);\n$newUrl = addParam($url, $newParam);\necho $newUrl; // Output: http://www.somesite.com/print.php?newUser=1&mode=1\n\n// If the parameter already exists, it will be replaced:\n$url = 'http://www.somesite.com/print.php?mode=2';\n$newParam = array('mode' => 1);\n$newUrl = addParam($url, $newParam);\necho $newUrl; // Output: http://www.somesite.com/print.php?mode=1