function nth_weekday($date, $weekday) {\n  $first_day = date('Y-m-01', $date);\n  $first_weekday = date('w', $first_day);\n  $weekday_diff = ($weekday - $first_weekday + 7) % 7;\n  $first_weekday_date = strtotime('+'.$weekday_diff.' days', $first_day);\n  $current_weekday_date = strtotime('+'.$weekday.' days', $first_weekday_date);\n  $nth = 1;\n  while ($current_weekday_date <= $date) {\n    if (date('Y-m', $current_weekday_date) == date('Y-m', $date)) {\n      $nth++;\n    }\n    $current_weekday_date = strtotime('+7 days', $current_weekday_date);\n  }\n  return $nth - 1;\n}\n\n$date = strtotime('2009-06-12');\n$weekday = 5; // 5 = Friday (0 = Sunday, 1 = Monday, ..., 6 = Saturday)\necho nth_weekday($date, $weekday); // outputs "2"