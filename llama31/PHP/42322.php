$file = '/var/www/html/file-to-download.xyz';\n$fileSize = filesize($file);\n\nheader('Content-Type: application/octet-stream');\nheader('Content-Length: ' . $fileSize);\nheader('Content-Disposition: attachment; filename=' . basename($file));\n\n// Track the number of bytes sent\n$bytesSent = 0;\n$fp = fopen($file, 'rb');\nwhile (!feof($fp)) {\n    $chunk = fread($fp, 8192);\n    echo $chunk;\n    $bytesSent += strlen($chunk);\n    ob_flush();\n    flush();\n}\nfclose($fp);\n\n// Check if the file was downloaded successfully\nif ($bytesSent == $fileSize) {\n    // Log or update database to mark the file as downloaded successfully\n    // ...\n}