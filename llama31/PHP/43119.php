function normalize_array_nesting($array, $target_depth = 3) {\n    $current_depth = array_depth($array);\n    if ($current_depth < $target_depth) {\n        while ($current_depth < $target_depth) {\n            $array = array($array);\n            $current_depth++;\n        }\n    } elseif ($current_depth > $target_depth) {\n        while ($current_depth > $target_depth) {\n            $array = array_shift($array);\n            $current_depth--;\n        }\n    }\n    return $array;\n}\n\nfunction array_depth($array) {\n    $max_depth = 1;\n    foreach ($array as $value) {\n        if (is_array($value)) {\n            $depth = array_depth($value) + 1;\n            if ($depth > $max_depth) {\n                $max_depth = $depth;\n            }\n        }\n    }\n    return $max_depth;\n}