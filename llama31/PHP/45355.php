$readable = array($socket);\n$writable = NULL;\n$errored = NULL;\n$timeout = 5; // seconds\n\n$nb = socket_select($readable, $writable, $errored, $timeout);\n\nif ($nb === 0) {\n    // Timeout reached, shutdown and close the socket\n    socket_shutdown($socket, 2); // 2 = SHUT_RDWR\n    socket_close($socket);\n} else {\n    // Data available, read from the socket\n    $data = socket_read($socket, 1024);\n    // Process the data\n}