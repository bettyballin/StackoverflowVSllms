function file_hash($file_path) {\n  $hash = hash_init('sha256');\n  $fp = fopen($file_path, 'rb');\n  while (!feof($fp)) {\n    $chunk = fread($fp, 4096);\n    hash_update($hash, $chunk);\n  }\n  fclose($fp);\n  return hash_final($hash);\n}\n\n// Assuming you have a database connection and a table to store file metadata\nfunction check_duplicate_file($file_path, $db_connection) {\n  $file_hash = file_hash($file_path);\n  $query = "SELECT * FROM files WHERE file_hash = :file_hash";\n  $stmt = $db_connection->prepare($query);\n  $stmt->bindParam(':file_hash', $file_hash);\n  $stmt->execute();\n  return $stmt->rowCount() > 0;\n}\n\n// Example usage:\n$file_path = $_FILES['uploaded_file']['tmp_name'];\n$db_connection = // establish a database connection\nif (check_duplicate_file($file_path, $db_connection)) {\n  echo "Duplicate file detected!";\n} else {\n  // Process the uploaded file\n}