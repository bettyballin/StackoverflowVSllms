$descriptorspec = array(\n    0 => array("pipe", "r"),  // stdin\n    1 => array("pipe", "w"),  // stdout\n    2 => array("pipe", "w")   // stderr\n);\n\n$process = proc_open($shell_command, $descriptorspec, $pipes);\n\nwhile ($s = fgets($pipes[1])) {\n    // Capture the output and extract the percentage\n    preg_match('/([0-9.]+)%/', $s, $matches);\n    $percentage = $matches[1];\n\n    // Send the percentage to the client using SSE\n    echo "data: $percentage\n\n";\n    flush();\n}\n\nproc_close($process);