<?php\n// chat.php\n\n// Store chat messages in a file (no database)\n$chatFile = 'chat.log';\n\n// Write a new message to the chat file\nfunction writeMessage($message) {\n    global $chatFile;\n    file_put_contents($chatFile, $message . "\n", FILE_APPEND);\n}\n\n// Read and return all chat messages\nfunction readMessages() {\n    global $chatFile;\n    return file_get_contents($chatFile);\n}\n\n// Handle incoming message\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $message = $_POST['message'];\n    writeMessage($message);\n}\n\n// Send chat messages to clients using SSE\nheader('Content-Type: text/event-stream');\nheader('Cache-Control: no-cache');\n\nwhile (true) {\n    $messages = readMessages();\n    echo "data: $messages\n\n";\n    flush();\n    sleep(1); // update every 1 second\n}\n\nexit;