$sqlq = "SELECT id,name FROM productcategories JOIN products ON productcategories.productid = products.id WHERE categoryid=?";\n$types = "i";\n$params = array($cat);\n\nif($allsubcats) {\n    foreach($allsubcats as $key => $data) {\n        $sqlq .= " OR categoryid=?";\n        $types .= "i";\n        $params[] = $data[0];\n    }\n}\n\necho $sqlq;\n\nif($query = $this->mysqli->connection->prepare($sqlq)) {\n    $query->bind_param($types, ...$params);\n    $query->execute();\n    $query->bind_result($id,$name);\n    $query->store_result();\n    if($query->num_rows > 0) {\n        while($row = $query->fetch()) {\n            $allprods["id"] = $id;\n            $allprods["name"] = $name;\n        }\n    }\n    $query->close();\n}