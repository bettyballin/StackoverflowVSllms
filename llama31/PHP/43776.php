function dateHasPassed($timestamp) {\n    $endDate = new DateTime($timestamp);\n    $now = new DateTime();\n\n    return $endDate < $now;\n}\n\n// Usage:\n$qry = "SELECT * FROM news WHERE display='Y' ORDER BY priority, date_added, title";\n$news = _execQry($qry);\n\nforeach ($news as $n) {\n    if (!dateHasPassed($n['end_date'])) {\n        echo '<h3>' . $n['title'] . '</h3>';\n        echo '<p>' . $n['story'];\n        echo '<br />Added on ' . dateFormat($n['date_added']) . '</p><br />';\n    }\n}