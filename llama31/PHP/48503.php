// Connect to Redis\n$redis = new Redis();\n$redis->connect('localhost', 6379);\n\n// Cache function\nfunction cacheQuery($query, $ttl = 3600) {\n    $hash = md5($query);\n    $result = $redis->get($hash);\n    if (!$result) {\n        $result = mysql_query($query);\n        $redis->setex($hash, $ttl, serialize($result));\n    } else {\n        $result = unserialize($result);\n    }\n    return $result;\n}\n\n// Usage\n$query = "SELECT * FROM users";\n$result = cacheQuery($query);\nwhile ($row = mysql_fetch_assoc($result)) {\n    // Process the row\n}