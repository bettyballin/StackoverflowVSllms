function drawDirectedGraph($nodes, $edges) {\n  $image = imagecreate(400, 400);\n  $white = imagecolorallocate($image, 255, 255, 255);\n  imagefill($image, 0, 0, $white);\n\n  $nodePositions = array();\n  $nodeSize = 20;\n\n  // Draw nodes\n  foreach ($nodes as $node) {\n    $x = rand(50, 350);\n    $y = rand(50, 350);\n    $nodePositions[$node] = array($x, $y);\n    $color = imagecolorallocate($image, 0, 0, 255);\n    imagefilledellipse($image, $x, $y, $nodeSize, $nodeSize, $color);\n    $textColor = imagecolorallocate($image, 0, 0, 0);\n    imagestring($image, 2, $x - 5, $y - 10, $node, $textColor);\n  }\n\n  // Draw edges\n  foreach ($edges as $edge) {\n    $fromNode = $edge['from'];\n    $toNode = $edge['to'];\n    $fromPos = $nodePositions[$fromNode];\n    $toPos = $nodePositions[$toNode];\n    $color = imagecolorallocate($image, 0, 0, 0);\n    imageline($image, $fromPos[0], $fromPos[1], $toPos[0], $toPos[1], $color);\n    // Draw arrow head\n    $arrowSize = 10;\n    $angle = atan2($toPos[1] - $fromPos[1], $toPos[0] - $fromPos[0]);\n    $arrowX = $toPos[0] - cos($angle) * $arrowSize;\n    $arrowY = $toPos[1] - sin($angle) * $arrowSize;\n    imageline($image, $arrowX, $arrowY, $toPos[0], $toPos[1], $color);\n    imageline($image, $arrowX - sin($angle) * $arrowSize, $arrowY + cos($angle) * $arrowSize, $toPos[0], $toPos[1], $color);\n  }\n\n  header('Content-Type: image/png');\n  imagepng($image);\n  imagedestroy($image);\n}\n\n$nodes = array('A', 'B', 'C', 'D');\n$edges = array(\n  array('from' => 'A', 'to' => 'B'),\n  array('from' => 'B', 'to' => 'C'),\n  array('from' => 'C', 'to' => 'D'),\n  array('from' => 'D', 'to' => 'A')\n);\n\ndrawDirectedGraph($nodes, $edges);