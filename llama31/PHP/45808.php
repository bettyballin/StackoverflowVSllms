$rows = query(\n    "SELECT key, SUM(numeric_data) as aggregate_data\n     FROM table\n     GROUP BY key"\n);\n\nforeach ($rows as $row) {\n    // Process aggregate data\n    $key = $row['key'];\n    $aggregateData = $row['aggregate_data'];\n\n    // Get individual rows for this key\n    $individualRows = query(\n        "SELECT string_data\n         FROM table\n         WHERE key = ?",\n        $key\n    );\n\n    // Process individual rows\n    foreach ($individualRows as $individualRow) {\n        // Process individual row data\n    }\n}