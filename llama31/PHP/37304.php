// On login\n$recentBookmarks = getRecentBookmarks($userId, 100); // Retrieve recent bookmarks from DB\n$_SESSION['bookmarks'] = $recentBookmarks; // Store in session\n\n// On page load\n$pageItemIds = getPageItemIds(); // Get item IDs for the current page\n$bookmarkStatus = array();\n\nforeach ($pageItemIds as $itemId) {\n    if (in_array($itemId, $_SESSION['bookmarks'])) {\n        $bookmarkStatus[$itemId] = true; // Item is bookmarked\n    } else {\n        // Make a separate DB call to check if the item is bookmarked\n        $isBookmarked = isItemBookmarked($userId, $itemId);\n        $bookmarkStatus[$itemId] = $isBookmarked;\n    }\n}