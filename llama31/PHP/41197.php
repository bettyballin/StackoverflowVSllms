class CaptureStream {\n    private $output = '';\n\n    public function stream_open($path, $mode, $options, &$opened_path) {\n        return true;\n    }\n\n    public function stream_write($data) {\n        $this->output .= $data;\n        return strlen($data);\n    }\n\n    public function stream_close() {\n        return null;\n    }\n\n    public function getOutput() {\n        return $this->output;\n    }\n}\n\n$wrapper = new CaptureStream();\nstream_wrapper_register('capture', $wrapper);\n\ninclude 'php://capture/myfile.php';\n\n$wrapper->stream_close();\n$output = $wrapper->getOutput();\n\nstream_wrapper_unregister('capture');