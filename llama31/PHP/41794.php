$polls = $db->get_results("\n  SELECT \n    p.pollID, \n    p.pollQuestion, \n    pa.pollAnswerID, \n    pa.pollAnswerText\n  FROM \n    poll p\n    LEFT JOIN poll_answers pa ON p.pollID = pa.pollID\n", ARRAY_A);\n\n$polls_array = array();\nforeach ($polls as $poll) {\n  $poll_id = $poll['pollID'];\n  if (!isset($polls_array[$poll_id])) {\n    $polls_array[$poll_id] = array(\n      'id' => $poll_id,\n      'question' => $poll['pollQuestion'],\n      'answers' => array()\n    );\n  }\n  if ($poll['pollAnswerID'] !== null) {\n    $polls_array[$poll_id]['answers'][] = array(\n      'id' => $poll['pollAnswerID'],\n      'text' => $poll['pollAnswerText']\n    );\n  }\n}