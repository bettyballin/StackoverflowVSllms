$writer = new XMLWriter();\n$writer->openMemory();\n$writer->startDocument('1.0', 'UTF-8');\n\n$namespaces = array();\n\nfunction startElementNS($writer, $prefix, $name, $namespace) {\n    global $namespaces;\n    if (!isset($namespaces[$namespace])) {\n        $writer->startElementNS($prefix, $name, $namespace);\n        $namespaces[$namespace] = true;\n    } else {\n        $writer->startElement($prefix . ':' . $name);\n    }\n}\n\n// Usage:\nstartElementNS($writer, 'soap', 'Envelope', 'http://www.w3.org/2003/05/soap-envelope/');\n// ...