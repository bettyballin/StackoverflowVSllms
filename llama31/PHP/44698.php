function countFiles($path = '.') {\n    $ignore = array('cgi-bin', '.', '..', '.DS_Store');\n    $total = 0;\n    $dh = @opendir($path);\n    while (false !== ($file = readdir($dh))) {\n        if (!in_array($file, $ignore)) {\n            $filePath = "$path/$file";\n            if (is_dir($filePath)) {\n                $total += countFiles($filePath);\n            } else {\n                $total++;\n            }\n        }\n    }\n    closedir($dh);\n    return $total;\n}