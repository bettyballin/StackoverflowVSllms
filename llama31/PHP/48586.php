function checkbadges($userid, $points, $rank, $friends) {\n    global $database;\n\n    $operators = [\n        '1' => function ($a, $b) { return $a == $b; },\n        '2' => function ($a, $b) { return $a >= $b; },\n        '3' => function ($a, $b) { return $a <= $b; },\n        '4' => function ($a, $b) { return $a != $b; },\n    ];\n\n    $q = $database->db_query("SELECT * FROM badges");\n    while ($bq = $database->db_fetch_assoc($q)) {\n        $var = $bq['badge_var'];\n        $value = $bq['badge_value'];\n        $operator = $bq['badge_sign'];\n\n        // Map the variable to the actual value\n        switch ($var) {\n            case 'points':\n                $varValue = $points;\n                break;\n            case 'rank':\n                $varValue = $rank;\n                break;\n            case 'friends':\n                $varValue = $friends;\n                break;\n            default:\n                // Handle unknown variable\n                continue 2;\n        }\n\n        // Check the condition\n        if ($operators[$operator]($varValue, $value)) {\n            givebadge($userid, $bq['badge_id']);\n        }\n    }\n}