function make_url($path, $secure = false) {\n    $protocol = $secure ? 'https://' : 'http://';\n    $host = $_SERVER['SERVER_NAME'];\n    $docRoot = $_SERVER['DOCUMENT_ROOT'];\n\n    // Ensure the path is within the document root to prevent directory traversal\n    if (strpos($path, $docRoot) !== 0) {\n        throw new Exception("Path is not within the document root");\n    }\n\n    return $protocol . $host . substr($path, strlen($docRoot));\n}