$conn = new mysqli($servername, $username, $password, $dbname);\n\n$query = $conn->query("\n    SELECT CONCAT(fname,', ',sname) AS name, email.address AS email\n    FROM contacts\n    LEFT JOIN emails ON contacts.contactID = email.contactID\n");\n\nwhile ($row = $query->fetch_assoc()) {\n    if (!empty($row['email'])) {\n        echo "<li><a href=\"mailto:" . $row['email'] . "\">" . $row['name'] . "</a></li>";\n    } else {\n        echo "<li>" . $row['name'] . "</li>";\n    }\n}