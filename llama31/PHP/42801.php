// Create an empty array to store the rows\n$rows = array();\n\n// While we still have rows from the db, store them in the array\nwhile ($row = mysql_fetch_array($result)) {\n    // Perform the distance calculation and profit transformation here...\n    $distance = ...;\n    $profit = round(Sqrt(min($decon, $econ)) * (1 + Sqrt($distance) / 75 + Sqrt($players) / 10));\n\n    // Store the row in the array\n    $rows[] = array(\n        'name' => stripslashes($row['name']),\n        'base' => stripslashes($row['base']),\n        'location' => stripslashes($row['location']),\n        'econ' => stripslashes($row['econ']),\n        'distance' => $distance,\n        'profit' => $profit,\n        'comment' => stripslashes($row['comment']),\n        'id' => stripslashes($row['id']),\n    );\n}\n\n// Sort the array in descending order of "profit"\nusort($rows, function($a, $b) {\n    return $b['profit'] - $a['profit'];\n});\n\n// Print the sorted array\nforeach ($rows as $row) {\n    echo '<tr>';\n    echo '<td width="20px"><center>(' . $row['name'] . ')</center></td>';\n    echo '<td><center>' . $row['base'] . '</center></td>';\n    echo '<td><a href="http://delta.astroempires.com/map.aspx?loc=' . $row['location'] . '">' . $row['location'] . '</a></td>';\n    echo '<td>' . $row['econ'] . '</td><td>' . $row['distance'] . ' </td>';\n    echo '<td>' . $row['profit'] . '</td>';\n    echo '<td>[' . $row['comment'] . ']</td>';\n    echo '<td><a href="deleterouteconfirm.php?id=' . $row['id'] . '">Delete</a></td>';\n    echo '</tr>';\n}