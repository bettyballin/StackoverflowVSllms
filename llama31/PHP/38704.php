function parse_template($template, $variables) {\n    $pattern = '/{@(.*?)}/';\n    while (preg_match($pattern, $template)) {\n        $template = preg_replace_callback($pattern, function($match) use ($variables) {\n            $tag_name = $match[1];\n            if (isset($variables[$tag_name])) {\n                return $variables[$tag_name];\n            } else {\n                return $match[0];\n            }\n        }, $template);\n    }\n    return $template;\n}\n\n$variables = array('a' => 'hello', 'b' => ' world');\n$template = 'This is my test {@a{@b}} string.';\n$output = parse_template($template, $variables);\nprint($output);  // Outputs: "This is my test hello world string."