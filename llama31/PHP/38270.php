// matcher.php\n$lockFile = 'matcher.lock';\n$ipsFile = 'matcher.ips';\n$maxIps = 5; // store last 5 IPs\n\n// Acquire lock to prevent concurrent writes\nif (!flock($lockFile, LOCK_EX | LOCK_NB)) {\n    // failed to acquire lock, try again later\n    header('Retry-After: 1');\n    http_response_code(503);\n    exit;\n}\n\n// Read current IPs from file\n$ips = [];\nif (file_exists($ipsFile)) {\n    $ips = unserialize(file_get_contents($ipsFile));\n}\n\n// Add current IP to the list\n$ips[] = $_SERVER['REMOTE_ADDR'];\n$ips = array_slice($ips, -$maxIps); // keep only last 5 IPs\n\n// Write IPs to file\nfile_put_contents($ipsFile, serialize($ips));\n\n// Release lock\nflock($lockFile, LOCK_UN);\n\n// Display IPs\necho implode('<br>', $ips);