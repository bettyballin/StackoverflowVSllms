$value = preg_replace('@(?<!\()https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)(?!\))@', '[$0]($0)', $value);