$mh = curl_multi_init();\n\n$chs = array();\n$chs[] = curl_init('http://example.com/request1');\n$chs[] = curl_init('http://example.com/request2');\n\nforeach ($chs as $ch) {\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    curl_multi_add_handle($mh, $ch);\n}\n\n$active = null;\ndo {\n    $mrc = curl_multi_exec($mh, $active);\n} while ($mrc == CURLM_CALL_MULTI_PERFORM);\n\nwhile ($active && $mrc == CURLM_OK) {\n    if (curl_multi_select($mh) == -1) {\n        usleep(1);\n    }\n    do {\n        $mrc = curl_multi_exec($mh, $active);\n    } while ($mrc == CURLM_CALL_MULTI_PERFORM);\n}\n\nforeach ($chs as $ch) {\n    $response = curl_multi_getcontent($ch);\n    curl_multi_remove_handle($mh, $ch);\n    curl_close($ch);\n}\n\ncurl_multi_close($mh);