<?php\n$con = mysqli_connect("localhost", "root", "root", "icrisis");\n\nif (!$con) {\n    die('Could not connect: ' . mysqli_connect_error());\n}\n\n$orderBy = $_GET['orderby'];\n\n// Validate the input to prevent SQL injection\nif (!in_array($orderBy, array('ASC', 'DESC'))) {\n    $orderBy = 'ASC'; // default to ASC\n}\n\n$stmt = $con->prepare("SELECT * FROM messages, user WHERE user_id = from_user ORDER BY user_name $orderBy");\n$stmt->execute();\n$result = $stmt->get_result();\n\nwhile ($row = $result->fetch_assoc()) {\n    // ... (rest of your code remains the same)\n}\n\n$con->close();\n?>