require_once 'XMPPHP/XMPP.php';\n\n$conn = new XMPPHP_XMPP('talk.google.com', 5222, 'your_username', 'your_password', 'xmpphp', 'gmail.com', $printlog=true, $loglevel=XMPPHP_Log::LEVEL_VERBOSE);\n\n$conn->connect();\n$conn->processUntil('session_start');\n\n// Send a message\n$conn->message('recipient_username@gmail.com', 'Hello, world!');\n\n// Get incoming messages\n$payloads = $conn->processUntil(array('message', 'presence', 'end_stream', 'session_start'));\n\nforeach ($payloads as $payload) {\n    if ($payload['type'] == 'message') {\n        echo "Received message: " . $payload['body'] . "\n";\n    }\n}\n\n$conn->disconnect();