$host = 'localhost';\n$port = 995; // or 993 for IMAP\n$username = 'your_username';\n$password = 'your_password';\n\n$ssl = 'ssl://'.$host;\n$pop3 = imap_open($ssl, $username, $password) or die('Could not connect');\n\n// retrieve emails\n$mailboxes = imap_list($pop3, $username, '*');\nforeach ($mailboxes as $mailbox) {\n    $msgs = imap_search($pop3, 'ALL', $mailbox);\n    foreach ($msgs as $msg_id) {\n        $msg = imap_fetchbody($pop3, $msg_id, 1);\n        // process email\n    }\n}\nimap_close($pop3);