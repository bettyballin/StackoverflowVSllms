use PHPUnit\Framework\TestCase;\nuse PHPUnit\Framework\MockObject\MockObject;\nuse ReflectionClass;\n\nclass TestMyObj extends TestCase\n{\n    public function testDoSomethingWhichIsLogged()\n    {\n        $loggerMock = $this->getMockBuilder('logger')\n            ->setMethods(['info'])\n            ->getMock();\n\n        $loggerMock->expects($this->once())\n            ->method('info')\n            ->with('some message');\n\n        $myObj = new myObj();\n\n        $reflectionClass = new ReflectionClass($myObj);\n        $property = $reflectionClass->getProperty('logger');\n        $property->setAccessible(true);\n        $property->setValue($myObj, $loggerMock);\n\n        $myObj->doSomethingWhichIsLogged();\n    }\n}