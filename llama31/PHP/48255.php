// Retrieve template metadata from database\n$templateMetadata = $db->query("SELECT * FROM templates WHERE id = ?", [$templateId]);\n\n// Load template file from file system\n$templateFile = file_get_contents("/path/to/templates/{$templateMetadata->name}.tpl");\n\n// Render template using metadata and file contents\n$templateEngine = new Twig_Environment(new Twig_Loader_String());\n$template = $templateEngine->loadTemplate($templateFile);\n$template->display($templateMetadata->params);