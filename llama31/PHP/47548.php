$retryCount = 0;\n$maxRetries = 3;\nwhile ($retryCount < $maxRetries) {\n    $response = curl_exec($ch);\n    if (curl_errno($ch)) {\n        // Handle CURL error\n    } elseif ($httpResponseCode = curl_getinfo($ch, CURLINFO_HTTP_CODE) >= 500) {\n        // Handle API error (5xx status code)\n        $retryCount++;\n        // wait for a short period before retrying\n        usleep(500000); // 0.5 seconds\n    } else {\n        break;\n    }\n}