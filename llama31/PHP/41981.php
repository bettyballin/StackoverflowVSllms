// Start a transaction\nmysql_query("BEGIN");\n\n// Insert into Table 1\nmysql_query("INSERT INTO Table1 (data) VALUES ('value1')");\n\n// Get the last insert ID for Table 1\n$id1 = mysql_insert_id();\n\n// Insert into Table 2\nmysql_query("INSERT INTO Table2 (data) VALUES ('value2')");\n\n// Get the last insert ID for Table 2\n$id2 = mysql_insert_id();\n\n// Insert into Link Table\nmysql_query("INSERT INTO LinkTable (table1_id, table2_id) VALUES ($id1, $id2)");\n\n// Commit the transaction if all queries were successful\nif (mysql_errno() == 0) {\n    mysql_query("COMMIT");\n} else {\n    // Rollback the transaction if any query failed\n    mysql_query("ROLLBACK");\n}