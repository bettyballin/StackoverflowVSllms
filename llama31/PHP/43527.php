$original = 'path/to/original/video.mp4'; // input video file\n$converted = 'path/to/converted/video.flv'; // output video file\n\n// Get the original video's resolution and aspect ratio\n$cmd = "ffmpeg -i $original -v 0 -select_streams v:0 -print_format json -show_streams";\n$output = shell_exec($cmd);\n$video_info = json_decode($output, true);\n$width = $video_info['streams'][0]['width'];\n$height = $video_info['streams'][0]['height'];\n$aspect_ratio = $width / $height;\n\n// Determine the target resolution and padding\nif ($aspect_ratio > 4/3) { // 16:9 or wider\n    $target_width = 640;\n    $target_height = (int)($target_width / $aspect_ratio);\n    $pad_top = (int)(($target_height - $height) / 2);\n    $pad_bottom = $pad_top;\n} elseif ($aspect_ratio < 4/3) { // 4:3 or narrower\n    $target_height = 480;\n    $target_width = (int)($target_height * $aspect_ratio);\n    $pad_left = (int)(($target_width - $width) / 2);\n    $pad_right = $pad_left;\n} else { // 4:3\n    $target_width = 640;\n    $target_height = 480;\n    $pad_top = $pad_bottom = $pad_left = $pad_right = 0;\n}\n\n// Convert the video with the determined resolution and padding\n$cmd = "ffmpeg -i $original -ab 96k -b 700k -ar 44100 -s ${target_width}x${target_height} ";\nif ($pad_top > 0 || $pad_bottom > 0) {\n    $cmd .= "-vf pad=${target_width}:${target_height}:${pad_left}:${pad_top} ";\n}\n$cmd .= "-acodec mp3 $converted";\nexec($cmd);