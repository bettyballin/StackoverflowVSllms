function getPictures() {\n    global $page, $per_page, $has_previous, $has_next;\n    if ($handle = opendir(".")) {\n        $lightbox = rand();\n        echo '<ul id="pictures">';\n\n        $files = array();\n        while (($file = readdir($handle)) !== false) {\n            if (!is_dir($file) && ($type = getPictureType($file)) != '') {\n                $files[] = $file;\n            }\n        }\n        closedir($handle);\n\n        natsort($files);\n\n        $count = 0;\n        $skip = $page * $per_page;\n\n        if ($skip != 0) {\n            $has_previous = true;\n        }\n\n        // Slice the array to get the files for the current page\n        $files = array_slice($files, $skip, $per_page);\n\n        foreach ($files as $file) {\n            if (!is_dir($file) && ($type = getPictureType($file)) != '') {\n                if (!is_dir('thumbs')) {\n                    mkdir('thumbs');\n                }\n                if (!file_exists('thumbs/' . $file)) {\n                    makeThumb($file, $type);\n                }\n                echo '<li><a href="' . $file . '" class="zoom" rel="group">';\n                echo '<img src="thumbs/' . $file . '" alt="" />';\n                echo '</a></li>';\n            }\n        }\n        echo '</ul>';\n\n        // Check for next page\n        if (count($files) == $per_page) {\n            $has_next = true;\n        }\n    }\n}