if ( $handle = opendir($absolute_dir) ) {\n    $image_array = array();\n\n    while ( ($file = readdir($handle)) !== false ) {\n        if ( $file != "." && $file != ".." && $file != ".svn" && $file != 'img' ) {\n            $image_array[] = array(\n                'url' => $relative_dir . $file,\n                'last_modified' => filemtime($absolute_dir . '/' . $file)\n            );\n        }\n    }\n\n    closedir($handle);\n\n    // sort the array based on last modified time\n    usort($image_array, function($a, $b) {\n        return $b['last_modified'] - $a['last_modified'];\n    });\n\n    // get the first 5 elements of the sorted array\n    $image_array = array_slice($image_array, 0, 5);\n\n    // format the last modified time\n    foreach ($image_array as &$image) {\n        $image['last_modified'] = date ("F d Y H:i:s", $image['last_modified']);\n    }\n}