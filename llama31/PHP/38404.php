// ImageController.php\n\nnamespace Application\Controller;\n\nuse Zend\Mvc\Controller\AbstractActionController;\nuse Zend\View\Model\ViewModel;\n\nclass ImageController extends AbstractActionController\n{\n    public function serveAction()\n    {\n        $filePath = $this->params()->fromRoute('filePath');\n        $file = '../filespool/' . $filePath;\n\n        if (!file_exists($file)) {\n            return $this->notFoundAction();\n        }\n\n        $response = new \Zend\Http\Response\Stream();\n        $response->setStream(fopen($file, 'r'));\n        $response->setStatusCode(200);\n\n        $headers = new \Zend\Http\Headers();\n        $headers->addHeaderLine('Content-Type', mime_content_type($file));\n        $headers->addHeaderLine('Content-Disposition', 'attachment; filename="' . basename($file) . '"');\n        $response->setHeaders($headers);\n\n        return $response;\n    }\n}