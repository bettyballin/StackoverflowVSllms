function buildMatrix($documents) {\n    $allWords = array();\n    foreach ($documents as $document) {\n        $words = extractWords($document);\n        $allWords = array_merge($allWords, $words);\n    }\n    $allWords = array_unique($allWords);\n    sort($allWords);\n\n    $matrix = array();\n    foreach ($allWords as $word) {\n        $row = array();\n        foreach ($documents as $document) {\n            $weights = calculateWeights($document);\n            $row[] = isset($weights[$word]) ? $weights[$word] : 0;\n        }\n        $matrix[] = $row;\n    }\n    return $matrix;\n}