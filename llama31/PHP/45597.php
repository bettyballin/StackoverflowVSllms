function findPermutations($array, $amountNeeded, $currentPermutation = array()) {\n  if (count($currentPermutation) == $amountNeeded) {\n    // We've found a permutation that satisfies the amountNeeded\n    return array($currentPermutation);\n  }\n\n  $permutations = array();\n  foreach ($array['resources'] as $resource) {\n    foreach ($resource['blocks'] as $block) {\n      $newPermutation = $currentPermutation;\n      $newPermutation[] = array(\n        'resourceID' => $resource['resourceID'],\n        'availDate' => $block['availDate'],\n        'startTime' => $block['startTime'],\n        'endTime' => $block['endTime'],\n      );\n\n      $remainingResources = $array;\n      unset($remainingResources['resources'][array_search($resource, $remainingResources['resources'])]);\n      $remainingResources['amountNeeded'] -= 1;\n\n      $permutations = array_merge($permutations, findPermutations($remainingResources, $amountNeeded, $newPermutation));\n    }\n  }\n\n  return $permutations;\n}\n\n$array = array(\n  'amountNeeded' => 2,\n  'resources' => array(\n    array(\n      'resourceID' => 10,\n      'blocks' => array(\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:00',\n          'endTime' => '08:10',\n        ),\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:10',\n          'endTime' => '08:20',\n        ),\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:20',\n          'endTime' => '08:30',\n        ),\n      ),\n    ),\n    array(\n      'resourceID' => 13,\n      'blocks' => array(\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:00',\n          'endTime' => '08:10',\n        ),\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:10',\n          'endTime' => '08:20',\n        ),\n        array(\n          'availDate' => '2008-05-14',\n          'startTime' => '08:30',\n          'endTime' => '08:40',\n        ),\n      ),\n    ),\n  ),\n);\n\n$permutations = findPermutations($array, $array['amountNeeded']);\n\nforeach ($permutations as $permutation) {\n  echo "Available on {$permutation[0]['availDate']} from {$permutation[0]['startTime']} to {$permutation[0]['endTime']} using resource {$permutation[0]['resourceID']}\n";\n  echo "Available on {$permutation[1]['availDate']} from {$permutation[1]['startTime']} to {$permutation[1]['endTime']} using resource {$permutation[1]['resourceID']}\n\n";\n}