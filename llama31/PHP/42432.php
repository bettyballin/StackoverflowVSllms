function parseTemplate($template, $data) {\n    $tags = array();\n    preg_match_all('/{{(.*?)}}/', $template, $tags);\n\n    foreach ($tags[1] as $tag) {\n        if (strpos($tag, '#') === 0) {\n            // Section tag\n            $sectionName = substr($tag, 1);\n            $sectionData = isset($data[$sectionName]) ? $data[$sectionName] : array();\n            $sectionTemplate = preg_replace('/{{\/' . $sectionName . '}}/', '', $template);\n            $sectionTemplate = preg_replace('/{{#' . $sectionName . '}}/', '', $sectionTemplate);\n            $parsedSection = '';\n            foreach ($sectionData as $sectionItem) {\n                $parsedSection .= parseTemplate($sectionTemplate, $sectionItem);\n            }\n            $template = str_replace('{{#' . $sectionName . '}}' . $sectionTemplate . '{{/' . $sectionName . '}}', $parsedSection, $template);\n        } else {\n            // Regular tag\n            $tagName = $tag;\n            $tagValue = isset($data[$tagName]) ? $data[$tagName] : '';\n            $template = str_replace('{{' . $tagName . '}}', $tagValue, $template);\n        }\n    }\n\n    return $template;\n}