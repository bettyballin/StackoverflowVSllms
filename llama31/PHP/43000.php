function appendGetVars($url, $vars) {\n    $parsedUrl = parse_url($url);\n    $existingVars = array();\n    if (isset($parsedUrl['query'])) {\n        parse_str($parsedUrl['query'], $existingVars);\n    }\n    $existingVars = array_merge($existingVars, $vars);\n    $newQuery = http_build_query($existingVars);\n    return $parsedUrl['scheme'] . '://' . $parsedUrl['host'] . $parsedUrl['path'] . '?' . $newQuery;\n}\n\n$domainURL = 'http://www.domain.com';\n$appendedTags = array('var1' => 2, 'var2' => 4);\n$sHTML = '<a href="http://www.domain.com/page/">http://www.domain.com/page/</a>';\n\npreg_match_all('/href="([^"]+)"/', $sHTML, $matches);\nforeach ($matches[1] as $match) {\n    if (strpos($match, $domainURL) === 0) {\n        $newUrl = appendGetVars($match, $appendedTags);\n        $sHTML = str_replace('href="' . $match . '"', 'href="' . $newUrl . '"', $sHTML);\n    }\n}\n\necho $sHTML;