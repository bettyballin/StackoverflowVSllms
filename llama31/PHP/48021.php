function fnSanitizePost($data) {\n    if (is_array($data)) {\n        $areturn = array();\n        foreach ($data as $skey => $svalue) {\n            $areturn[$skey] = fnSanitizePost($svalue);\n        }\n        return $areturn;\n    } else {\n        if (!is_numeric($data)) {\n            // Convert to UTF-8 to handle special characters\n            $data = iconv('ISO-8859-1', 'UTF-8', $data);\n\n            // Remove unwanted characters\n            $data = preg_replace('/[^\x20-\x7E]/', '', $data); // Remove non-printable ASCII characters\n            $data = preg_replace('/[“”‘’‛›]/', '', $data); // Remove curly quotes and other special characters\n\n            // Your existing sanitization code\n            if (get_magic_quotes_gpc()) {\n                $data = stripslashes($data);\n            }\n            $data = pg_escape_string($data);\n            $data = strip_tags($data);\n        }\n        $data = trim($data);\n        return $data;\n    }\n}