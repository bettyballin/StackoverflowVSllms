<?php\nheader('Content-Type: text/css');\n$content = file_get_contents('test.css');\nheader('Content-Length: '. strlen($content ));\n\n$expires = 3600;\n$etag = md5($content); // Generate an ETag for the content\n\nif (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) || isset($_SERVER['HTTP_IF_NONE_MATCH'])) {\n  if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE'])) {\n    // Split the If-Modified-Since (Netscape < v6 gets this wrong) \n    $modifiedSince = explode(';', $_SERVER['HTTP_IF_MODIFIED_SINCE']);\n    $modifiedSince = strtotime($modifiedSince[0]);\n  } else {\n    $modifiedSince = null;\n  }\n\n  if (isset($_SERVER['HTTP_IF_NONE_MATCH'])) {\n    $clientEtag = trim($_SERVER['HTTP_IF_NONE_MATCH'], '"');\n  } else {\n    $clientEtag = null;\n  }\n\n  $current_time = time();\n  if (($modifiedSince !== null && ($current_time - $modifiedSince) < $expires) ||\n      ($clientEtag !== null && $clientEtag === $etag)) {\n    header("304 Not Modified");\n    exit();\n  }\n}\n\n$current_time = time();\nheader("Last-Modified: ".gmdate("D, d M Y H:i:s", $current_time)." GMT");\nheader("Expires: " . gmdate("D, d M Y H:i:s", $current_time+$expires) . " GMT");\nheader("Cache-Control: max-age=$expires");\nheader("ETag: \"$etag\"");\necho $content;