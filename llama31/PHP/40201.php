$con->begin_transaction();\n\n$alterQuery = "UPDATE AUCTIONS SET subcat = ? WHERE article_no = ?";\nif ($altRecord = $con->prepare($alterQuery)) {\n    $altRecord->bind_param("ss", $subcat, $pk);\n    $altRecord->execute();\n    $altRecord->close();\n}\n\n$checkQuery = "SELECT username FROM USERS WHERE username = ?";\nif ($checkRecord = $con->prepare($checkQuery)) {\n    $checkRecord->bind_param("s", $username);\n    $checkRecord->execute();\n    $checkRecord->bind_result($existingUsername);\n    $checkRecord->fetch();\n    $checkRecord->close();\n\n    if (!$existingUsername) {\n        $insertQuery = "INSERT INTO USERS (username) VALUES (?)";\n        if ($insertRecord = $con->prepare($insertQuery)) {\n            $insertRecord->bind_param("s", $username);\n            $insertRecord->execute();\n            $insertRecord->close();\n        }\n    }\n}\n\n$con->commit();