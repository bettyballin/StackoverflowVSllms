function init($table, $parent_id = 0) {\n    $this->nodes = array();\n    $this->select = array();\n    $this->get_tree($table, $parent_id);\n    print_r($this->nodes);\n    print_r($this->select);\n}\n\nfunction get_tree($table, $parent_id, $depth = 0) {\n    $sql = "SELECT id, parent_category_id, name FROM $table WHERE parent_category_id = $parent_id ORDER BY display_order";\n    $result = mysql_query($sql);\n    while ($row = mysql_fetch_object($result)) {\n        $this->nodes[$row->id] = $row;\n        $text = str_repeat("    ", $depth) . $row->name;\n        $this->select[$row->id] = $text;\n        if ($this->has_children($table, $row->id)) {\n            $this->get_tree($table, $row->id, $depth + 1);\n        }\n    }\n}\n\nfunction has_children($table, $parent_id) {\n    $sql = "SELECT COUNT(*) FROM $table WHERE parent_category_id = $parent_id";\n    $result = mysql_query($sql);\n    $count = mysql_fetch_row($result);\n    return $count[0] > 0;\n}