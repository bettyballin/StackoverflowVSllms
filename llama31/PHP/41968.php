// Assuming a MySQL database connection\n\n// Create a table to store failed login attempts\nCREATE TABLE failed_logins (\n  id INT PRIMARY KEY,\n  ip_address VARCHAR(45),\n  timestamp TIMESTAMP\n);\n\n// Function to check if CAPTCHA should be displayed\nfunction shouldDisplayCaptcha($ipAddress) {\n  $maxAttempts = 5;\n  $timeFrame = 10 * 60; // 10 minutes\n\n  // Retrieve failed attempts for the given IP address\n  $failedAttempts = mysql_query("SELECT COUNT(*) FROM failed_logins WHERE ip_address = '$ipAddress' AND timestamp > NOW() - INTERVAL $timeFrame SECOND");\n\n  if (mysql_num_rows($failedAttempts) >= $maxAttempts) {\n    return true; // Display CAPTCHA\n  }\n\n  return false;\n}\n\n// Function to log a failed login attempt\nfunction logFailedAttempt($ipAddress) {\n  mysql_query("INSERT INTO failed_logins (ip_address, timestamp) VALUES ('$ipAddress', NOW())");\n}\n\n// Example usage:\n$ipAddress = $_SERVER['REMOTE_ADDR'];\nif (shouldDisplayCaptcha($ipAddress)) {\n  // Display CAPTCHA\n} else {\n  // Process login attempt as usual\n  // If login attempt fails, log the failed attempt\n  logFailedAttempt($ipAddress);\n}