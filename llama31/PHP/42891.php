require_once __DIR__ . '/vendor/autoload.php';\n\n$client = new Google_Client();\n$client->setApplicationName("Client_Gmail");\n$client->setAuthConfig('path/to/client_secret.json');\n$client->setScopes(['https://www.googleapis.com/auth/gmail.readonly', 'https://www.googleapis.com/auth/gmail.send']);\n$client->setAccessType('offline');\n$client->setPrompt('select_account consent');\n\nif (!isset($_GET['code'])) {\n    $authUrl = $client->createAuthUrl();\n    header('Location: ' . filter_var($authUrl, FILTER_SANITIZE_URL));\n} else {\n    $client->authenticate($_GET['code']);\n    $access_token = $client->getAccessToken();\n\n    // Use the access token to interact with the Gmail API\n    $service = new Google_Service_Gmail($client);\n\n    // Retrieve emails\n    $messagesResponse = $service->users_messages->listUsersMessages('me', ['labelIds' => 'INBOX']);\n    $messages = $messagesResponse->getMessages();\n\n    // Send an email\n    $message = new Google_Service_Gmail_Message();\n    $message->setRaw('From: sender@example.com\r\nTo: recipient@example.com\r\nSubject: Test email\r\n\r\nHello, world!');\n    $service->users_messages->send('me', $message);\n}