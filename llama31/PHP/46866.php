// Joomla site (token generation)\nfunction generateToken($user_id) {\n  $secret = 'your_secret_key_here';\n  $timestamp = time();\n  $token = hash_hmac('sha256', $user_id . $timestamp, $secret, true);\n  return bin2hex($token);\n}\n\n// Joomla site (token endpoint)\nfunction getToken($user_id) {\n  $token = generateToken($user_id);\n  // Store token in database associated with user's account\n  return $token;\n}\n\n// Moodle site (token validation)\nfunction validateToken($token, $user_id) {\n  $joomla_endpoint = 'https://your-joomla-site.com/token';\n  $response = file_get_contents($joomla_endpoint . '?user_id=' . $user_id . '&token=' . $token);\n  if ($response === 'success') {\n    return true;\n  }\n  return false;\n}