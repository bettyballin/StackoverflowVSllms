foreach ($eventfiles as $eventfile) {\n    if ($eventfile['filename']) {\n        $file = $eventfile['filepath'];\n\n        // Check if $file is a URL\n        if (preg_match('#^https?://#', $file)) {\n            // Use file_get_contents() to read data from the URL\n            $data = file_get_contents($file);\n        } else {\n            // Open local file\n            if (!($fp = fopen($file, "r"))) {\n                echo '<br>CAN NOT READ FILE.';\n                exit;\n            }\n            // Read data from the file into $data\n            $data = "";\n            while (!feof($fp)) $data .= fread($fp, 1024);\n            fclose($fp);\n        }\n\n        query("update event_rtab set html = '".escape($data)."' where id = {$eventfile[id]}");\n    }\n\n    // ... rest of your code ...\n}