class DatabaseException extends Exception {}\n\nfunction isDuplicateEmail($email) {\n    try {\n        $query = "SELECT COUNT(*) FROM users WHERE email = :email";\n        $stmt = $db->prepare($query);\n        $stmt->bindParam(':email', $email);\n        $stmt->execute();\n        $result = $stmt->fetchColumn();\n        return $result > 0;\n    } catch (PDOException $e) {\n        throw new DatabaseException("Database error: " . $e->getMessage());\n    }\n}\n\n// Set up error handler\nset_error_handler(function ($errno, $errstr, $errfile, $errline) {\n    // Log error\n    error_log("Error $errno: $errstr in $errfile on line $errline");\n    // Throw an exception to handle the error\n    throw new Exception("Internal Error");\n});\n\ntry {\n    $isDuplicate = isDuplicateEmail("example@example.com");\n    if ($isDuplicate) {\n        echo "Email already exists.";\n    } else {\n        echo "Email does not exist.";\n    }\n} catch (DatabaseException $e) {\n    echo "Internal Error: " . $e->getMessage();\n} catch (Exception $e) {\n    echo "Internal Error: " . $e->getMessage();\n}