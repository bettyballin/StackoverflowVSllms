// When caching a result\n$_SESSION['product_ids'] = array('product_id' => $productIds, 'timestamp' => time());\n\n// When a new product is added\nupdateTimestamp('product_ids');\n\n// When a user requests the cached result\nif ($_SESSION['product_ids']['timestamp'] < getLatestTimestamp('product_ids')) {\n    // Refresh the cache\n    $_SESSION['product_ids'] = array('product_id' => getProductIdsByCategory($categoryId), 'timestamp' => time());\n}\n\nfunction updateTimestamp($key) {\n    // Update the timestamp in a database or a global cache\n}\n\nfunction getLatestTimestamp($key) {\n    // Retrieve the latest timestamp from a database or a global cache\n}