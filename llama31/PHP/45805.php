class PluginRegistry {\n    private $plugins = [];\n\n    public function registerPlugin($plgFile, $db) {\n        require_once($plgFile);\n        $className = basename($plgFile, '.php');\n        $plgin = new $className\PlginImpl();\n        $plgin->setDb($db);\n        $this->plugins[] = $plgin;\n    }\n\n    public function processPlugins() {\n        foreach ($this->plugins as $plgin) {\n            $plgin->process();\n        }\n    }\n}