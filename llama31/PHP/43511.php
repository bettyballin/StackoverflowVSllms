function getSelfReferentialUrl() {\n    $protocol = (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] === 'on') ? 'https' : 'http';\n    $serverName = $_SERVER["SERVER_NAME"];\n    $port = $_SERVER["SERVER_PORT"];\n\n    // Standard ports for http and https can be omitted from the URL\n    if (($protocol === 'http' && $port === '80') || ($protocol === 'https' && $port === '443')) {\n        return $protocol . '://' . $serverName;\n    } else {\n        return $protocol . '://' . $serverName . ':' . $port;\n    }\n}\n\n// Example usage:\necho getSelfReferentialUrl();