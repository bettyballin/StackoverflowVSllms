// define a constant for the maximum upload size\ndefine ('MAX_FILE_SIZE', 1024000);\n\nif (array_key_exists('upload', $_POST)) {\n    // define constant for upload folder\n    define('UPLOAD_DIR', 'C:/Wamp/www/Version-1.4/posters_uploaded/');\n\n    // replace any spaces in original filename with underscores. At the same time, assign to a simpler variable\n    $file = str_replace(' ', '_', $_FILES['image']['name']);\n\n    // convert the maximum size to KB\n    $max = number_format(MAX_FILE_SIZE/1024, 1).'kb';\n    // create an array of permitted MIME types\n    $permitted = array('image/jpeg','image/pjpeg');\n    // begin by assuming the file is unacceptable\n    $sizeOK = false;\n    $typeOK = false;\n\n    // check that file is within the permitted size\n    if ($_FILES['image']['size'] > 0 && $_FILES['image']['size'] <= MAX_FILE_SIZE) {\n        $sizeOK = true;\n    }\n\n    // check that file is of a permitted MIME type\n    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n    $mime_type = finfo_file($finfo, $_FILES['image']['tmp_name']);\n    finfo_close($finfo);\n\n    if (in_array($mime_type, $permitted)) {\n        $typeOK = true;\n    }\n\n    if ($sizeOK && $typeOK) {\n        switch($_FILES['image']['error']) {\n            case 0:\n                // ...