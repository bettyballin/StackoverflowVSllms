private function updateChildrenAndParent() {\n    $currentTag = &$this->tags[$this->current_tag];\n    $parentTag = null;\n\n    // Find the parent tag\n    if ($this->current_tag > 0) {\n        $parentTag = &$this->tags[$this->current_tag - 1];\n    }\n\n    // Update the parent-child relationships\n    if ($parentTag) {\n        $parentTag['children'][] = $this->current_tag;\n        $currentTag['parent'] = $this->current_tag - 1;\n    }\n}