$dir = "path/to/image/folder";\n$files = scandir($dir);\n\nforeach ($files as $file) {\n    if (is_file($dir . "/" . $file)) {\n        $imagePath = $dir . "/" . $file;\n        $imageName = basename($file);\n        $newWidth = 200;\n        $newHeight = 150;\n\n        list($width, $height) = getimagesize($imagePath);\n        $ratio = $width / $height;\n\n        if ($width > $newWidth || $height > $newHeight) {\n            if ($ratio > 1) {\n                $newHeight = $newWidth / $ratio;\n            } else {\n                $newWidth = $newHeight * $ratio;\n            }\n        }\n\n        $thumb = imagecreatetruecolor($newWidth, $newHeight);\n        $source = imagecreatefromjpeg($imagePath);\n        imagecopyresampled($thumb, $source, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);\n        imagejpeg($thumb, $imagePath . "_thumb.jpg");\n\n        echo "<img src='" . $imagePath . "_thumb.jpg' alt='" . $imageName . "'>";\n    }\n}