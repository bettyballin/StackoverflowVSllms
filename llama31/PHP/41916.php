function binarySearchInsert(array &$array, $value) {\n    $low = 0;\n    $high = count($array) - 1;\n\n    while ($low <= $high) {\n        $mid = (int) (($low + $high) / 2);\n        if ($array[$mid] < $value) {\n            $low = $mid + 1;\n        } elseif ($array[$mid] > $value) {\n            $high = $mid - 1;\n        } else {\n            return $mid; // value already exists\n        }\n    }\n\n    // insert at correct position\n    array_splice($array, $low, 0, $value);\n}\n\n$allUsernames = array();\nwhile ($row = fgetcsv($fp)) {\n    $username = $row[0];\n    $index = binarySearchInsert($allUsernames, $username);\n    if ($index !== false) {\n        // process this row\n    }\n}