defined('_JEXEC') or die('Restricted access');\n\nrequire_once dirname(__FILE__).'/helper.php';\n\nclass modLatestUsers {\n  public function getAjax() {\n    $db = JFactory::getDBO();\n    $query = $db->getQuery(true);\n    $query->select('COUNT(*) AS total_users, SUM(IF(DATE(registerDate) = CURDATE(), 1, 0)) AS users_today, SUM(IF(DATE(registerDate) >= DATE_SUB(CURDATE(), INTERVAL 1 WEEK), 1, 0)) AS users_week, SUM(IF(DATE(registerDate) >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH), 1, 0)) AS users_month, MAX(registerDate) AS latest_user, (SELECT COUNT(*) FROM #__session) AS total_visitors');\n    $query->from('#__users');\n    $db->setQuery($query);\n    $results = $db->loadObjectList();\n    return $results;\n  }\n}\n\n$module = new modLatestUsers();\n$results = $module->getAjax();\n\n// Display the results\necho '<ul>';\necho '<li>Total Users: '.$results->total_users.'</li>';\necho '<li>Users Today: '.$results->users_today.'</li>';\necho '<li>Users This Week: '.$results->users_week.'</li>';\necho '<li>Users This Month: '.$results->users_month.'</li>';\necho '<li>Latest User: '.$results->latest_user.'</li>';\necho '<li>Total Visitors: '.$results->total_visitors.'</li>';\necho '</ul>';