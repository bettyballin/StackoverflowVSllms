$doc = new DOMDocument();\n$doc->loadHTML($yourHtmlString);\n\n$xpath = new DOMXPath($doc);\nforeach ($xpath->query('//text()') as $textNode) {\n    if ($textNode->isWhitespaceInElementContent()) {\n        $textNode->parentNode->removeChild($textNode);\n    }\n}\n\n$doc->formatOutput = true;\n$doc->preserveWhiteSpace = false;\n\n$html = $doc->saveHTML();\n\n// Add new lines and indentation manually\n$dom = new DOMDocument();\n$dom->loadHTML($html);\n$dom->formatOutput = true;\n$prettyHtml = $dom->saveXML();\n\n// Remove XML declaration\n$prettyHtml = preg_replace('/<\?xml.*?\?>/i', '', $prettyHtml);\n\nprint $prettyHtml;