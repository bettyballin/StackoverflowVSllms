function recursiveReplace(array &$nodes) {\n    foreach ($nodes as &$node) {\n        if ($node['type'] == 'RefObject') {\n            $n = $this->site->get_node_where('id', $node['node_ref']);\n            $node = $this->site->get_node_where('object_id', $n['object_id']);\n            $node['children'] = $this->site->get_descendants($node['lft'], $node['rgt']);\n        }\n        if (isset($node['children'])) {\n            recursiveReplace($node['children']);\n        }\n    }\n    return $nodes;\n}