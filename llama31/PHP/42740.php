$result = array(); // assuming this is your query result\n\n$processedResult = array();\n\nforeach ($result as $row) {\n    $articleNum = $row['articleNum'];\n    $message = $row['message'];\n    $timestamp = $row['timestamp'];\n\n    if (strpos($message, 'added') !== false) {\n        $created = $timestamp;\n        $modified = null;\n    } elseif (strpos($message, 'updated') !== false) {\n        $modified = $timestamp;\n    }\n\n    if (!isset($processedResult[$articleNum])) {\n        $processedResult[$articleNum] = array('created' => null, 'modified' => null);\n    }\n\n    if ($created) {\n        $processedResult[$articleNum]['created'] = $created;\n    }\n\n    if ($modified && ($processedResult[$articleNum]['modified'] === null || $modified > $processedResult[$articleNum]['modified'])) {\n        $processedResult[$articleNum]['modified'] = $modified;\n    }\n}