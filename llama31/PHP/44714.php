// db.php (database connection)\nfunction getDB() {\n  $db = new PDO('mysql:host=localhost;dbname=yourdb', 'youruser', 'yourpass');\n  $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n  return $db;\n}\n\n// tags.php (handling tag operations)\nrequire_once 'db.php';\n\nfunction getTags() {\n  $db = getDB();\n  $stmt = $db->query('SELECT * FROM Tags ORDER BY Title');\n  return $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n\nfunction getItemTags($itemID) {\n  $db = getDB();\n  $stmt = $db->prepare('SELECT T.* FROM Tags T JOIN ItemTags IT ON T.TagID = IT.TagID WHERE IT.ItemID = :itemID');\n  $stmt->execute(['itemID' => $itemID]);\n  return $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n\nfunction addTag($itemID, $tagTitle) {\n  $db = getDB();\n  $stmt = $db->prepare('INSERT INTO Tags (Title) VALUES (:title)');\n  $stmt->execute(['title' => $tagTitle]);\n  $tagID = $db->lastInsertId();\n  $stmt = $db->prepare('INSERT INTO ItemTags (ItemID, TagID) VALUES (:itemID, :tagID)');\n  $stmt->execute(['itemID' => $itemID, 'tagID' => $tagID]);\n  return $tagID;\n}\n\nfunction removeTag($itemID, $tagID) {\n  $db = getDB();\n  $stmt = $db->prepare('DELETE FROM ItemTags WHERE ItemID = :itemID AND TagID = :tagID');\n  $stmt->execute(['itemID' => $itemID, 'tagID' => $tagID]);\n  // update tag counter\n  $stmt = $db->prepare('UPDATE Tags SET Tag_Counter = Tag_Counter - 1 WHERE TagID = :tagID');\n  $stmt->execute(['tagID' => $tagID]);\n}\n\n// Ajax handling\nif (isset($_POST['action'])) {\n  switch ($_POST['action']) {\n    case 'addTag':\n      $itemID = $_POST['itemID'];\n      $tagTitle = $_POST['tagTitle'];\n      $tagID = addTag($itemID, $tagTitle);\n      echo json_encode(['success' => true, 'tagID' => $tagID]);\n      break;\n    case 'removeTag':\n      $itemID = $_POST['itemID'];\n      $tagID = $_POST['tagID'];\n      removeTag($itemID, $tagID);\n      echo json_encode(['success' => true]);\n      break;\n  }\n  exit;\n}