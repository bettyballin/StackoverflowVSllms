class TagEngine {\n  private $db;\n\n  public function __construct($db) {\n    $this->db = $db;\n  }\n\n  public function getTagsForItem($item_id) {\n    $query = "SELECT t.* FROM tags t JOIN item_tags it ON t.id = it.tag_id WHERE it.item_id = :item_id";\n    $stmt = $this->db->prepare($query);\n    $stmt->bindParam(':item_id', $item_id);\n    $stmt->execute();\n    return $stmt->fetchAll();\n  }\n\n  public function htmlItemTags($item_id = null) {\n    if ($item_id !== null) {\n      $tags = $this->getTagsForItem($item_id);\n    } else {\n      $tags = array();\n    }\n    $html = '<input type="text" name="tags" value="' . implode(', ', $tags) . '">';\n    return $html;\n  }\n\n  public function saveTagsForItem($item_id, $tags) {\n    // Save tags to database\n    // ...\n  }\n}