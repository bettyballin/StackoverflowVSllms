function convert_to_black_and_white($image_path) {\n    $img = imagecreatefromstring(file_get_contents($image_path));\n    $width = imagesx($img);\n    $height = imagesy($img);\n    \n    for ($y = 0; $y < $height; $y++) {\n        for ($x = 0; $x < $width; $x++) {\n            $rgb = imagecolorat($img, $x, $y);\n            $r = ($rgb >> 16) & 0xFF;\n            $g = ($rgb >> 8) & 0xFF;\n            $b = $rgb & 0xFF;\n            \n            $brightness = ($r + $g + $b) / 3;\n            $new_color = ($brightness > 128) ? imagecolorallocate($img, 255, 255, 255) : imagecolorallocate($img, 0, 0, 0);\n            \n            imagesetpixel($img, $x, $y, $new_color);\n        }\n    }\n    \n    header('Content-Type: image/jpeg');\n    imagejpeg($img);\n    imagedestroy($img);\n}