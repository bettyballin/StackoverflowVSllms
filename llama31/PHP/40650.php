<?php\n\n// Configuration\n$db_host = 'your_host';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a connection to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($conn->connect_error) {\n    die("Connection failed: " . $conn->connect_error);\n}\n\n// Get all tables in the database\n$tables = array();\n$result = $conn->query("SHOW TABLES");\nwhile ($row = $result->fetch_assoc()) {\n    $tables[] = $row['Tables_in_' . $db_name];\n}\n\n// Create a backup file\n$backup_file = 'backup-' . date('Y-m-d-H-i-s') . '.sql';\n\n// Open the backup file for writing\n$fp = fopen($backup_file, 'w');\n\n// Loop through each table and export its data\nforeach ($tables as $table) {\n    $result = $conn->query("SELECT * FROM $table");\n    $num_fields = $result->field_count;\n\n    // Write the table structure to the backup file\n    fwrite($fp, "CREATE TABLE $table (\n");\n    $result2 = $conn->query("SHOW CREATE TABLE $table");\n    $row2 = $result2->fetch_assoc();\n    fwrite($fp, $row2['Create Table'] . ";\n\n");\n\n    // Write the table data to the backup file\n    while ($row = $result->fetch_assoc()) {\n        fwrite($fp, "INSERT INTO $table VALUES (");\n        for ($i = 0; $i < $num_fields; $i++) {\n            fwrite($fp, "'" . addslashes($row[$i]) . "'");\n            if ($i < $num_fields - 1) {\n                fwrite($fp, ',');\n            }\n        }\n        fwrite($fp, ");\n");\n    }\n}\n\n// Close the backup file\nfclose($fp);\n\n// Download the backup file\nheader('Content-Type: application/sql');\nheader('Content-Disposition: attachment; filename="' . $backup_file . '"');\nreadfile($backup_file);\nunlink($backup_file);\n\n?>