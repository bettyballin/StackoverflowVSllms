<?php\n// Configuration\n$allowedExtensions = array('jpg', 'jpeg', 'png', 'gif');\n$maxFileSize = 1048576; // 1MB\n$uploadDir = '/path/to/temporary/upload/directory';\n\n// Validate file type and extension\nfunction validateFileType($file) {\n    $fileInfo = finfo_open(FILEINFO_MIME_TYPE);\n    $mimeType = finfo_file($fileInfo, $file);\n    finfo_close($fileInfo);\n    $extension = pathinfo($file, PATHINFO_EXTENSION);\n    return in_array($extension, $allowedExtensions) && strpos($mimeType, 'image/') === 0;\n}\n\n// Validate file size\nfunction validateFileSize($file) {\n    return filesize($file) <= $maxFileSize;\n}\n\n// Upload file\nfunction uploadFile($file) {\n    $tmpName = $_FILES['file']['tmp_name'];\n    $fileName = basename($_FILES['file']['name']);\n    $uploadPath = $uploadDir . DIRECTORY_SEPARATOR . $fileName;\n    if (move_uploaded_file($tmpName, $uploadPath)) {\n        // Scan uploaded file for malware (optional)\n        // ...\n        return true;\n    }\n    return false;\n}\n\n// Handle file upload\nif (isset($_FILES['file'])) {\n    $file = $_FILES['file'];\n    if (validateFileType($file['tmp_name']) && validateFileSize($file['tmp_name'])) {\n        if (uploadFile($file)) {\n            echo 'File uploaded successfully!';\n        } else {\n            echo 'Error uploading file!';\n        }\n    } else {\n        echo 'Invalid file type or size!';\n    }\n}