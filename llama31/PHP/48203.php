function hasLuceneIndex($luceneDir) {\n    $segmentsFile = $luceneDir . '/segments';\n    $segmentsGenDir = $luceneDir . '/segments.gen';\n    return file_exists($segmentsFile) && is_dir($segmentsGenDir);\n}\n\n$luceneDir = '/path/to/index';\nif (hasLuceneIndex($luceneDir)) {\n    $newIndex = Zend_Search_Lucene::open($luceneDir);\n} else {\n    $newIndex = Zend_Search_Lucene::create($luceneDir);\n}