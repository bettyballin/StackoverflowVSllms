function weightedRandomServer(array $servers): string\n{\n    // Calculate total weight\n    $totalWeight = array_sum(array_column($servers, 'weight'));\n\n    // Adjust weights based on free space\n    foreach ($servers as &$server) {\n        $server['adjustedWeight'] = $server['weight'] + ($server['freeSpace'] / 100); // Example adjustment, adjust this formula as needed\n    }\n\n    // Normalize adjusted weights\n    $totalAdjustedWeight = array_sum(array_column($servers, 'adjustedWeight'));\n    foreach ($servers as &$server) {\n        $server['normalizedWeight'] = $server['adjustedWeight'] / $totalAdjustedWeight;\n    }\n\n    // Generate a random number between 0 and 1\n    $random = mt_rand() / mt_getrandmax();\n\n    // Select server based on normalized weights and random number\n    $cumulativeWeight = 0;\n    foreach ($servers as $server) {\n        $cumulativeWeight += $server['normalizedWeight'];\n        if ($random <= $cumulativeWeight) {\n            return $server['name']; // Assuming 'name' is the key for the server name\n        }\n    }\n\n    // Should not reach here, return any server if does\n    return $servers[0]['name'];\n}\n\n// Example usage\n$servers = [\n    ['name' => 'Server1', 'weight' => 33, 'freeSpace' => 1000],\n    ['name' => 'Server2', 'weight' => 33, 'freeSpace' => 500],\n    ['name' => 'Server3', 'weight' => 34, 'freeSpace' => 2000],\n];\n\n$selectedServer = weightedRandomServer($servers);\necho "Selected Server: $selectedServer";