$data = array(\n    array('fname' => 'Joe', 'sname' => 'Blogs', 'uname' => 'joe.blogs', 'assignment' => 1, 'task' => 1, 'grade' => 52),\n    array('fname' => 'Joe', 'sname' => 'Blogs', 'uname' => 'joe.blogs', 'assignment' => 1, 'task' => 2, 'grade' => 58),\n    array('fname' => 'Jim', 'sname' => 'Blogs', 'uname' => 'jim.blogs', 'assignment' => 1, 'task' => 1, 'grade' => 95),\n    array('fname' => 'Jim', 'sname' => 'Blogs', 'uname' => 'jim.blogs', 'assignment' => 1, 'task' => 2, 'grade' => 86),\n    array('fname' => 'Amy', 'sname' => 'Blogs', 'uname' => 'amy.blogs', 'assignment' => 1, 'task' => 1, 'grade' => NULL),\n    array('fname' => 'Amy', 'sname' => 'Blogs', 'uname' => 'amy.blogs', 'assignment' => 1, 'task' => 2, 'grade' => 76),\n);\n\n$assignments = array();\n$tasks = array();\n\nforeach ($data as $row) {\n    if (!isset($assignments[$row['assignment']])) {\n        $assignments[$row['assignment']] = array();\n    }\n    if (!isset($tasks[$row['task']])) {\n        $tasks[$row['task']] = array();\n    }\n    $assignments[$row['assignment']][$row['task']] = $row['grade'];\n}\n\necho '<table>';\necho '<tr>';\necho '<th>Name</th>';\nforeach ($assignments as $assignment => $tasks) {\n    echo '<th>Assignment ' . $assignment . '</th>';\n}\necho '</tr>';\necho '<tr>';\necho '<th></th>';\nforeach ($assignments as $assignment => $tasks) {\n    echo '<th>Task 1</th>';\n    echo '<th>Task 2</th>';\n}\necho '</tr>';\n\nforeach ($data as $row) {\n    if (!isset($prevRow) || $prevRow['uname'] != $row['uname']) {\n        echo '<tr>';\n        echo '<td>' . $row['fname'] . ' ' . $row['sname'] . '</td>';\n        foreach ($assignments as $assignment => $tasks) {\n            echo '<td>';\n            if (isset($tasks[1])) {\n                echo $tasks[1];\n            } else {\n                echo 'U';\n            }\n            echo '</td>';\n            echo '<td>';\n            if (isset($tasks[2])) {\n                echo $tasks[2];\n            } else {\n                echo 'U';\n            }\n            echo '</td>';\n        }\n        echo '</tr>';\n    }\n    $prevRow = $row;\n}\n\necho '</table>';