books_to_consider = Book.find(:all, \n                              :joins => "LEFT JOIN notifications ON books.id = notifications.book_id \n                                         LEFT JOIN notification_types ON notifications.notification_type_id = notification_types.id",\n                              :conditions => ["books.created_at BETWEEN ? AND ? AND (notification_types.name != 'type1' OR notification_types.name IS NULL)", \n                                              min_date, max_date])