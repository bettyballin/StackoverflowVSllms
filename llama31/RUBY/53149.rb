# config/routes.rb\nRails.application.routes.draw do\n  resources :users\nend\n\n# app/controllers/users_controller.rb\nclass UsersController < ApplicationController\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      render json: @user\n    else\n      render json: { errors: @user.errors }\n    end\n  end\nend\n\n# app/views/users/new.html.erb\n <%= form_with(model: @user, url: users_path, method: :post, data: { turbolinks: true }) do |form| %>\n   <%= form.text_field :name %>\n   <%= form.submit %>\n <% end %>\n\n# app/javascript/controllers/users_controller.js\nimport { Controller } from 'stimulus';\n\nexport default class extends Controller {\n  static targets = ['form'];\n\n  submit(event) {\n    event.preventDefault();\n    fetch(this.formTarget.action, {\n      method: 'POST',\n      body: new FormData(this.formTarget),\n      headers: {\n        'X-CSRF-Token': this.token\n      }\n    })\n      .then(response => response.json())\n      .then(data => console.log(data))\n      .catch(error => console.error(error));\n  }\n\n  get token() {\n    return document.querySelector('meta[name="csrf-token"]').content;\n  }\n}