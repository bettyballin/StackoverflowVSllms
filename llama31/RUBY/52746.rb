require 'yaml'\n\ndef parse_metadata(template)\n  metadata = {}\n  lines = template.split("\n")\n  if lines.first =~ /^---$/\n    lines.shift\n    while lines.first =~ /^(\w+): (.*)$/\n      metadata[$1] = $2\n      lines.shift\n    end\n    lines.shift if lines.first =~ /^---$/\n  end\n  [metadata, lines.join("\n")]\nend\n\ntemplate = File.read('template.erb')\nmetadata, content = parse_metadata(template)\nputs metadata # => { "title" => "Baxter the Dog", "filter" => "textile" }