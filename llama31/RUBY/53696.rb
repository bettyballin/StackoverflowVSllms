module SmartTruncate\n  def smart_truncate(text, options = {})\n    if options[:sentences]\n      sentences = text.split('. ')\n      sentences = sentences.take(options[:sentences])\n      sentences.join('. ') + '.'\n    elsif options[:words]\n      words = text.split\n      words = words.take(options[:words])\n      words.join(' ') + '...'\n    else\n      truncate(text, options)\n    end\n  end\nend\n\n# Usage:\nclass Post\n  include SmartTruncate\n\n  def my_message\n    # Your text here\n  end\nend\n\npost = Post.new\nputs post.my_message.smart_truncate("Once upon a time in a world far far away. And they found that many people were sleeping better.", :sentences => 1)\n# => Once upon a time in a world far far away.\n\nputs post.my_message.smart_truncate("Once upon a time in a world far far away. And they found that many people were sleeping better.", :words => 12)\n# => Once upon a time in a world far far away. And they ...