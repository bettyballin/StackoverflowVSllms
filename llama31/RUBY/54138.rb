def build_file_list(files)\n  file_list = {}\n  files.each do |file|\n    path = file.split('/')\n    current_dir = file_list\n    path.each do |dir|\n      current_dir[dir] ||= {}\n      current_dir = current_dir[dir]\n    end\n  end\n\n  def build_html_list(file_list, path = '')\n    html = '<ul>'\n    file_list.each do |key, value|\n      if value.empty?\n        html += "<li>#{key}</li>"\n      else\n        html += "<li>#{key}</li><ul>"\n        html += build_html_list(value, "#{path}#{key}/")\n        html += '</ul>'\n      end\n    end\n    html += '</ul>'\n  end\n\n  build_html_list(file_list)\nend\n\nfiles = ['file1', 'dir1/file2', 'dir1/subdir1/file3']\nputs build_file_list(files)