class Foo\n  attr_accessor :bar\n  attr_accessor :baz\n\n  def initialize\n    @bar = 0\n    @baz = 0\n  end\n\n  def to_yaml(options = {})\n    YAML.quick_emit(self, options) do |out|\n      out.map(taguri, to_yaml_style) do |map|\n        map.add('bar', @bar)\n        map.add('baz', @baz)\n      end\n    end\n  end\n\n  def self.from_yaml(loader, node)\n    instance = loader.construct_mapping(node, deep_convert: true)\n    instance.bar ||= 0\n    instance.baz ||= 0\n    instance\n  end\n\n  yaml_as "tag:yaml.org,2002:ruby/object:Foobar"\nend