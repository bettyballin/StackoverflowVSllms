class User < ApplicationRecord\n  include StateMachine\n\n  state_machine :state, initial: :invited do\n    state :invited\n    state :active\n\n    event :accept_invitation do\n      transition invited: :active\n    end\n  end\n\n  validates :name, :email, presence: true\n\n  def validate_invited_state\n    # validation logic for invited state\n  end\n\n  def validate_active_state\n    # validation logic for active state\n    validates :password, presence: true\n  end\nend