# app/controllers/users_controller.rb\nclass UsersController < ApplicationController\n  def update\n    @user = User.find(params[:id])\n    if @user.update(user_params)\n      render json: @user\n    else\n      render json: @user.errors, status: :unprocessable_entity\n    end\n  end\n\n  private\n\n  def user_params\n    params.require(:user).permit(\n      public_profile_attributes: [\n        emails_attributes: [:id, :email],\n        phone_numbers_attributes: [:id, :phone_number]\n      ],\n      private_profile_attributes: [\n        addresses_attributes: [:id, :address],\n        credit_cards_attributes: [:id, :credit_card_number]\n      ]\n    )\n  end\nend