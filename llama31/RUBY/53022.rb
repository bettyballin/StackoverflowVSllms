# In your controller\ndef index\n  @grades = Grade.all\nend\n\n# In your view\n<table id="grades-table">\n  <thead>\n    <tr>\n      <th>Student</th>\n      <th>Grade</th>\n      <th>Average</th>\n    </tr>\n  </thead>\n  <tbody>\n    <% @grades.each do |grade| %>\n      <tr>\n        <td><%= grade.student.name %></td>\n        <td><%= grade.value %></td>\n        <td><%= grade.average %></td>\n      </tr>\n    <% end %>\n  </tbody>\n</table>\n\n# JavaScript code to perform calculations and update the table\n<script>\n  $(document).ready(function() {\n    $('#grades-table').DataTable({\n      "ajax": "/grades.json",\n      "columns": [\n        { "data": "student.name" },\n        { "data": "value" },\n        { "data": "average" }\n      ]\n    });\n\n    // Perform calculations and update the table when a grade is changed\n    $('#grades-table').on('change', 'input[type="number"]', function() {\n      var row = $(this).closest('tr');\n      var grade = parseFloat($(this).val());\n      var average = calculateAverage(row);\n      row.find('td:eq(2)').text(average);\n    });\n\n    function calculateAverage(row) {\n      var grades = row.find('input[type="number"]');\n      var sum = 0;\n      grades.each(function() {\n        sum += parseFloat($(this).val());\n      });\n      return sum / grades.length;\n    }\n  });\n</script>