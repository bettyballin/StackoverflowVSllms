class Link < ActiveRecord::Base\n  validates_format_of [:link1, :link2, :link3, :link4, :link5],\n    :with => /^(http|https|ftp):\/\/.*/,\n    :allow_blank => true\n\n  before_validation :prepend_http_if_necessary\n\n  private\n\n  def prepend_http_if_necessary\n    [:link1, :link2, :link3, :link4, :link5].each do |attribute|\n      value = self.send(attribute)\n      if value.present? && !value.starts_with?('http://', 'https://', 'ftp://')\n        self.send("#{attribute}=", "http://#{value}")\n      end\n    end\n  end\nend