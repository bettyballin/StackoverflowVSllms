# test/support/dynamic_test_generator.rb\nmodule DynamicTestGenerator\n  def self.generate_tests(controller, actions)\n    actions.each_pair do |action, type|\n      controller.class_eval(%Q{\n        def test_user_required_for_#{action}\n          set_active_user users(:one)\n          #{type} :#{action}\n          assert flash[:error]\n          assert_redirected_to :action => :index\n        end\n      })\n    end\n  end\nend