require 'nokogiri'\n\ndef get_pair(xml, key_xpath, value_xpath)\n  doc = Nokogiri::XML(xml)\n  doc.xpath(key_xpath).each do |key|\n    value = key.xpath(value_xpath).first\n    puts "#{key.value} #{value.value}" if value\n  end\nend\n\nxml = <<EOF\n<root>\n  <add key="A" value="B" />\n  <add key="C" value="D" />\n  <add foo="E" bar="F" />\n</root>\nEOF\n\nget_pair(xml, "//*/@key", "../@value")\nget_pair(xml, "//*/@foo", "../@bar")