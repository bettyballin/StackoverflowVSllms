require 'open-uri'\n\n# Specify the paths to your files\ninput_file_path = 'path/to/your/utf8_file.csv'\noutput_file_path = 'path/to/your/ansi_file.csv'\n\n# Open the UTF-8 file for reading and a new file for writing in Windows-1252 encoding\nFile.open(input_file_path, 'r:UTF-8') do |input_file|\n  File.open(output_file_path, 'w:windows-1252') do |output_file|\n    # Read the input file line by line to avoid loading large files into memory\n    input_file.each_line do |line|\n      begin\n        # Write the line to the output file; replace characters that cannot be encoded\n        output_file.puts line.encode('windows-1252', :replace => '')\n      rescue Encoding::UndefinedConversionError\n        # Handle characters that cannot be converted if :replace is not sufficient\n        puts "Warning: Could not convert a line - skipping."\n      end\n    end\n  end\nend