class Word < ActiveRecord::Base\n  has_many :links_as_word1, class_name: 'Link', foreign_key: :word1_id\n  has_many :links_as_word2, class_name: 'Link', foreign_key: :word2_id\n\n  has_many :synonyms_as_word1, through: :links_as_word1, source: :word2\n  has_many :synonyms_as_word2, through: :links_as_word2, source: :word1\n\n  # Combine both directions into one method for simplicity\n  def synonyms\n    synonyms_as_word1 + synonyms_as_word2\n  end\nend\n\nclass Link < ActiveRecord::Base\n  belongs_to :word1, class_name: 'Word'\n  belongs_to :word2, class_name: 'Word'\nend