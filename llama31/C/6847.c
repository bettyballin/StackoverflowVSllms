#include <Windows.h>\n#include <Netapi32.h>\n\nint main() {\n    DWORD dwShares = 0;\n    PSERVER_INFO_502 pServerInfo = NULL;\n\n    // Call NetServerEnum to get the server information\n    DWORD dwRet = NetServerEnum(NULL, 502, (LPBYTE*) &pServerInfo, MAX_PREFERRED_LENGTH, &dwShares, NULL, SV_TYPE_ALL, NULL, 0);\n\n    if (dwRet == ERROR_SUCCESS || dwRet == ERROR_MORE_DATA) {\n        // Loop through each share\n        for (DWORD i = 0; i < dwShares; i++) {\n            // Print the share name\n            printf("%s\n", pServerInfo[i].sv502_shi502_netname);\n        }\n    }\n\n    // Free the buffer\n    NetApiBufferFree(pServerInfo);\n\n    return 0;\n}