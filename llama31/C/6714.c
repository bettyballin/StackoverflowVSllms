#include <semaphore.h>\n\nsem_t semaphore;\nsem_init(&semaphore, 0, 10); // initialize a semaphore with a count of 10\n\n// ...\n\nfor (int i = 0; i < num_items; i++) {\n    sem_wait(&semaphore); // decrement the semaphore count\n    pid_t pid = fork();\n    if (pid == -1) {\n        // handle error\n    } else if (pid > 0) {\n        // parent\n        // ...\n    } else {\n        // child\n        do_stuff_with(item);\n        sem_post(&semaphore); // increment the semaphore count\n        exit(0);\n    }\n}\n\n// ...\n\nsem_destroy(&semaphore);