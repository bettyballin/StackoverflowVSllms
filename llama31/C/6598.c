#include <stdint.h>\n\n// Xorshift PRNG\nuint16_t xorshift(uint16_t seed) {\n    uint16_t x = seed;\n    x ^= x << 7;\n    x ^= x >> 9;\n    x ^= x << 8;\n    return x;\n}\n\nuint16_t generate_unique_id(uint16_t seed) {\n    uint16_t id;\n    do {\n        id = xorshift(seed);\n        // Scan the Flash device to check if the ID is already in use\n        if (!is_id_used(id)) {\n            return id;\n        }\n        seed++; // increment the seed for the next iteration\n    } while (1);\n}