#include <pthread.h>\n#include <semaphore.h>\n\nsem_t sem;\n\nvoid* thread_func(void* arg) {\n    sem_wait(&sem);\n    // critical section\n    sem_post(&sem);\n    return NULL;\n}\n\nint main() {\n    sem_init(&sem, 0, 1); // initialize semaphore to 1\n\n    pthread_t threads[10];\n    for (int i = 0; i < 10; i++) {\n        pthread_create(&threads[i], NULL, thread_func, NULL);\n    }\n\n    for (int i = 0; i < 10; i++) {\n        pthread_join(threads[i], NULL);\n    }\n\n    sem_destroy(&sem);\n    return 0;\n}