#include <fcntl.h>\n\nint fd = open("example.txt", O_RDONLY);\nif (fd == -1) {\n    perror("open");\n    return 1;\n}\n\nstruct flock lock;\nlock.l_type = F_WRLCK;\nlock.l_start = 0;\nlock.l_whence = SEEK_SET;\nlock.l_len = 0;\n\nif (fcntl(fd, F_SETLK, &lock) == -1) {\n    perror("fcntl");\n    return 1;\n}\n\n// Read from the file...\nread(fd, buffer, size);\n\nlock.l_type = F_UNLCK;\nif (fcntl(fd, F_SETLK, &lock) == -1) {\n    perror("fcntl");\n    return 1;\n}\n\nclose(fd);