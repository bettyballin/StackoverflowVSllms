#include <zlib.h>\n\nint compress_xml(const char* xml_data, int xml_len, unsigned char** compressed_data, int* compressed_len) {\n    z_stream strm;\n    strm.zalloc = Z_NULL;\n    strm.zfree = Z_NULL;\n    strm.opaque = Z_NULL;\n\n    deflateInit2(&strm, Z_DEFAULT_COMPRESSION, Z_DEFLATED, 15, 8, Z_DEFAULT_STRATEGY);\n\n    strm.avail_in = xml_len;\n    strm.next_in = (const unsigned char*)xml_data;\n\n    int ret = deflate(&strm, Z_FINISH);\n    if (ret != Z_STREAM_END) {\n        // handle error\n    }\n\n    *compressed_len = strm.total_out;\n    *compressed_data = (unsigned char*)malloc(*compressed_len);\n    memcpy(*compressed_data, strm.next_out, *compressed_len);\n\n    deflateEnd(&strm);\n    return 0;\n}