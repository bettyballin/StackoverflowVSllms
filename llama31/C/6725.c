const int BUFFER_SIZE = 1024;\nchar buffer[BUFFER_SIZE];\nint bytesRead = 0;\nint bufferPos = 0;\n\nwhile (/* connection is active */) {\n    int chunkSize = recv(socket, buffer + bufferPos, BUFFER_SIZE - bufferPos, 0);\n    if (chunkSize <= 0) {\n        // handle error or connection close\n        break;\n    }\n    bytesRead += chunkSize;\n\n    // Find the first CRLF in the buffer\n    char* crlfPos = strstr(buffer, "\r\n");\n    if (crlfPos != NULL) {\n        // Process the line\n        int lineLength = crlfPos - buffer;\n        processLine(buffer, lineLength);\n\n        // Move the remaining data to the beginning of the buffer\n        memmove(buffer, crlfPos + 2, bytesRead - lineLength - 2);\n        bufferPos = bytesRead - lineLength - 2;\n        bytesRead = bufferPos;\n    } else {\n        // No CRLF found, move the buffer position forward\n        bufferPos += chunkSize;\n        if (bufferPos >= BUFFER_SIZE) {\n            // Handle buffer overflow\n            break;\n        }\n    }\n}