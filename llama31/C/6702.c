// Original kernel code\nstatic void internal_function_original(void)\n{\n    // do something interesting\n    return;\n}\n\nstatic void (*internal_function)(void) = &internal_function_original;\nEXPORT_SYMBOL(internal_function);\n\n// Kernel module code\nstatic void (*original_function_reference)(void);\nextern void (*internal_function)(void);\n\nstatic void new_function_implementation(void)\n{\n    // do something new and interesting\n    // return\n}\n\nint init_module(void)\n{\n    original_function_reference = internal_function;\n    internal_function           = &new_function_implementation;\n    return 0;\n}\n\nvoid cleanup_module(void)\n{\n    internal_function = original_function_reference;\n}