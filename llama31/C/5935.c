#include <ffi.h>\n#include <stdio.h>\n#include <stdlib.h>\n\n// ...\n\nint call_function(void *funcptr, char *sig, char *params) {\n    ffi_cif cif;\n    ffi_type *arg_types[2];\n    ffi_type **arg_types_ptr = arg_types;\n    void **args[2];\n    ffi_closure *closure;\n    int ret;\n\n    // Parse the function signature to determine arg types\n    if (parse_signature(sig, arg_types) != 0) {\n        fprintf(stderr, "Error parsing signature: %s\n", sig);\n        return -1;\n    }\n\n    // Create an ffi_closure to call the function\n    closure = ffi_closure_alloc(sizeof(ffi_closure), funcptr);\n    if (!closure) {\n        fprintf(stderr, "Error allocating ffi_closure\n");\n        return -1;\n    }\n\n    // Prepare the arguments\n    args[0] = (void *)&someparam;\n    args[1] = (void *)&another;\n\n    // Call the function using ffi_call\n    ret = ffi_call(closure, &cif, args, NULL);\n\n    // Free the ffi_closure\n    ffi_closure_free(closure);\n\n    return ret;\n}\n\nint parse_signature(char *sig, ffi_type **arg_types) {\n    // Simple signature parsing example: "i:id" -> int, int, double\n    if (strcmp(sig, "i:id") == 0) {\n        arg_types[0] = &ffi_type_int;\n        arg_types[1] = &ffi_type_double;\n        return 0;\n    } else {\n        return -1;\n    }\n}