#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/select.h>\n\nint main() {\n    int server_fd, client_fd;\n    struct sockaddr_in client_addr;\n    socklen_t client_len = sizeof(client_addr);\n    fd_set read_fds;\n\n    // setup socket and bind\n    server_fd = socket(AF_INET, SOCK_STREAM, 0);\n    // ...\n\n    while (1) {\n        FD_ZERO(&read_fds);\n        FD_SET(server_fd, &read_fds);\n\n        // add all connected clients to the set\n        for (int i = 0; i < num_clients; i++) {\n            FD_SET(client_fds[i], &read_fds);\n        }\n\n        select(server_fd + 1, &read_fds, NULL, NULL, NULL);\n\n        if (FD_ISSET(server_fd, &read_fds)) {\n            // new connection\n            client_fd = accept(server_fd, (struct sockaddr *)&client_addr, &client_len);\n            // handle new connection\n        } else {\n            // handle existing connections\n            for (int i = 0; i < num_clients; i++) {\n                if (FD_ISSET(client_fds[i], &read_fds)) {\n                    // handle client i\n                }\n            }\n        }\n    }\n\n    return 0;\n}