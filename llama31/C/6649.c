#include <stdio.h>\n#include <stdbool.h>\n\n// Define a struct to hold the iterator state\ntypedef struct {\n    int current;\n    int max;\n} iterator_t;\n\n// Define the iterator function\niterator_t* iterator_new(int max) {\n    iterator_t* it = malloc(sizeof(iterator_t));\n    it->current = 0;\n    it->max = max;\n    return it;\n}\n\n// Define the "yield" function\nbool iterator_next(iterator_t* it, int* value) {\n    if (it->current >= it->max) return false;\n    *value = it->current++;\n    return true;\n}\n\n// Example usage:\nint main() {\n    iterator_t* it = iterator_new(10);\n    int value;\n    while (iterator_next(it, &value)) {\n        printf("%d\n", value);\n    }\n    free(it);\n    return 0;\n}