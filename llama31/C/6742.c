#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <arpa/nameser.h>\n#include <resolv.h>\n\nint main() {\n    unsigned char answer[NS_PACKETSZ];\n    int len = res_query("example.com", C_IN, T_MX, answer, NS_PACKETSZ);\n    if (len == -1) {\n        perror("res_query");\n        return 1;\n    }\n\n    ns_msg msg;\n    ns_initparse(answer, len, &msg);\n    for (int i = 0; i < ns_msg_count(msg, ns_s_an); i++) {\n        ns_rr rr;\n        ns_parserr(&msg, ns_s_an, i, &rr);\n        printf("MX record: %s\n", ns_rr_rdata(rr));\n    }\n\n    return 0;\n}