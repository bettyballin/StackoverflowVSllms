#include <stdio.h>\n\nint main() {\n    unsigned int eax, ebx, ecx, edx, esi, edi, ebp, esp;\n    unsigned int eflags;\n\n    asm volatile(\n        "movl %%eax, %0\n\t"\n        "movl %%ebx, %1\n\t"\n        "movl %%ecx, %2\n\t"\n        "movl %%edx, %3\n\t"\n        "movl %%esi, %4\n\t"\n        "movl %%edi, %5\n\t"\n        "movl %%ebp, %6\n\t"\n        "movl %%esp, %7\n\t"\n        "pushfl\n\t"\n        "popl %8\n\t"\n        : "=r" (eax), "=r" (ebx), "=r" (ecx), "=r" (edx),\n          "=r" (esi), "=r" (edi), "=r" (ebp), "=r" (esp),\n          "=r" (eflags)\n        :\n        : "cc"\n    );\n\n    printf("EAX=0x%08x EBX=0x%08x ECX=0x%08x EDX=0x%08x\n",\n           eax, ebx, ecx, edx);\n    printf("ESI=0x%08x EDI=0x%08x EBP=0x%08x ESP=0x%08x\n",\n           esi, edi, ebp, esp);\n\n    printf("CF=%d SF=%d ZF=%d OF=%d\n",\n           (eflags & 0x00000001) != 0,\n           (eflags & 0x00000080) != 0,\n           (eflags & 0x00000040) != 0,\n           (eflags & 0x00000008) != 0);\n\n    return 0;\n}