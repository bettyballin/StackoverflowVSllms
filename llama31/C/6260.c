#include <pthread.h>\n\n// Global variable X\nint X;\n\n// Lock for writers\npthread_mutex_t writer_mutex = PTHREAD_MUTEX_INITIALIZER;\n// Condition variable for readers\npthread_cond_t reader_cond = PTHREAD_COND_INITIALIZER;\n// Number of active writers\nint writer_count = 0;\n\n// Writer lock function\nvoid writer_lock() {\n    pthread_mutex_lock(&writer_mutex);\n    writer_count++;\n}\n\n// Writer unlock function\nvoid writer_unlock() {\n    writer_count--;\n    if (writer_count == 0) {\n        pthread_cond_signal(&reader_cond);\n    }\n    pthread_mutex_unlock(&writer_mutex);\n}\n\n// Reader lock function\nvoid reader_lock() {\n    pthread_mutex_lock(&writer_mutex);\n    while (writer_count > 0) {\n        pthread_cond_wait(&reader_cond, &writer_mutex);\n    }\n}\n\n// Reader unlock function\nvoid reader_unlock() {\n    pthread_mutex_unlock(&writer_mutex);\n}