#include <stdio.h>\n#include <stdlib.h>\n#include <pthread.h>\n#include <string.h>\n\n// Structure to represent a buffered stdout\ntypedef struct {\n    char* buf;\n    size_t size;\n    size_t pos;\n    pthread_mutex_t mutex;\n    pthread_cond_t cond;\n} stdout_buffer_t;\n\n// Dedicated thread to write the buffer to stdout\nvoid* write_stdout(void* arg) {\n    stdout_buffer_t* buf = (stdout_buffer_t*)arg;\n    while (1) {\n        pthread_mutex_lock(&buf->mutex);\n        while (buf->pos == 0) {\n            pthread_cond_wait(&buf->cond, &buf->mutex);\n        }\n        fwrite(buf->buf, 1, buf->pos, stdout);\n        buf->pos = 0;\n        pthread_mutex_unlock(&buf->mutex);\n    }\n    return NULL;\n}\n\n// Initialize the buffered stdout\nvoid init_buffered_stdout(size_t size) {\n    stdout_buffer_t* buf = malloc(sizeof(stdout_buffer_t));\n    buf->buf = malloc(size);\n    buf->size = size;\n    buf->pos = 0;\n    pthread_mutex_init(&buf->mutex, NULL);\n    pthread_cond_init(&buf->cond, NULL);\n    pthread_t thread;\n    pthread_create(&thread, NULL, write_stdout, buf);\n    // Set the buffer to stdout\n    setvbuf(stdout, buf->buf, _IOFBF, size);\n}\n\nint main() {\n    init_buffered_stdout(1024 * 1024); // 1MB buffer size\n    // Your application code here...\n    return 0;\n}