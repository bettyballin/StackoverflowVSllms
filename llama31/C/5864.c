#include <fuse.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n\n#define MAX_LINE_LENGTH 1024\n\nstatic int custom_fd_write(const char *path, const char *buf, size_t size, off_t offset, struct fuse_file_info *fi)\n{\n    char *new_buf = malloc(size + MAX_LINE_LENGTH);\n    if (!new_buf) {\n        return -ENOMEM;\n    }\n\n    char *line_start = new_buf;\n    char *line_end = new_buf;\n    const char *end = buf + size;\n    while (line_end < end) {\n        if (*line_end == '\n') {\n            // Prefix the line with process name and PID\n            char prefix[MAX_LINE_LENGTH];\n            snprintf(prefix, MAX_LINE_LENGTH, "[%s:%d] ", getprogname(), getpid());\n            memcpy(line_start, prefix, strlen(prefix));\n            line_start += strlen(prefix);\n            memcpy(line_start, buf, line_end - buf);\n            line_start += line_end - buf;\n            buf = line_end + 1;\n            line_end = line_start;\n        } else {\n            line_end++;\n        }\n    }\n\n    // Write the modified buffer to the underlying file\n    int ret = write(fi->fh, new_buf, line_start - new_buf);\n    free(new_buf);\n    return ret;\n}\n\nstatic struct fuse_operations custom_fd_ops = {\n    .write = custom_fd_write,\n};\n\nint main(int argc, char *argv[])\n{\n    return fuse_main(argc, argv, &custom_fd_ops, NULL);\n}