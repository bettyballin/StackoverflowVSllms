while (true) {\n    // Wait for incoming connections or data to be read\n    select(fds, num_fds, timeout);\n\n    // Handle new connections\n    for (i = 0; i < num_fds; i++) {\n        if (FD_ISSET(fds[i], &read_fds)) {\n            // Accept new connection\n            new_fd = accept(fds[i], NULL, NULL);\n            // Add new connection to the list of active connections\n            active_fds[num_active_fds++] = new_fd;\n        }\n    }\n\n    // Handle data to be read\n    for (i = 0; i < num_active_fds; i++) {\n        if (FD_ISSET(active_fds[i], &read_fds)) {\n            // Read data from the connection\n            bytes_read = read(active_fds[i], buffer, buffer_size);\n            // Process the request\n            process_request(buffer, bytes_read);\n        }\n    }\n\n    // Close inactive connections\n    for (i = 0; i < num_active_fds; i++) {\n        if (!FD_ISSET(active_fds[i], &read_fds)) {\n            close(active_fds[i]);\n            num_active_fds--;\n        }\n    }\n}