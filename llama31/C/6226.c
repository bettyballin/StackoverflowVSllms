typedef struct {\n    double mean;\n    double count;\n} TDigestBucket;\n\ntypedef struct {\n    TDigestBucket* buckets;\n    int num_buckets;\n} TDigest;\n\nTDigest* tdigest_new(int num_buckets) {\n    TDigest* digest = malloc(sizeof(TDigest));\n    digest->buckets = malloc(num_buckets * sizeof(TDigestBucket));\n    digest->num_buckets = num_buckets;\n    return digest;\n}\n\nvoid tdigest_add(TDigest* digest, double value) {\n    // implementation omitted for brevity\n}\n\ndouble tdigest_quantile(TDigest* digest, double q) {\n    // implementation omitted for brevity\n}