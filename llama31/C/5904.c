#include <stdio.h>\n#include <fcntl.h>\n#include <sys/ioctl.h>\n#include <linux/parport.h>\n\n#define DEVICE "/dev/parport0"\n\nint main() {\n    int fd;\n    struct parport_settings settings;\n\n    // Open the parallel port device\n    fd = open(DEVICE, O_RDWR);\n    if (fd < 0) {\n        perror("open");\n        return 1;\n    }\n\n    // Get the current settings\n    if (ioctl(fd, PPGETMODES, &settings)) {\n        perror("ioctl");\n        return 1;\n    }\n\n    // Set D0-D2 as inputs, D3-D7 as outputs\n    settings.mode = PS2_MODE;\n    settings.dir = (1 << 0) | (1 << 1) | (1 << 2); // D0-D2 as inputs\n    settings.dir |= (1 << 3) | (1 << 4) | (1 << 5) | (1 << 6) | (1 << 7); // D3-D7 as outputs\n\n    // Apply the new settings\n    if (ioctl(fd, PPSETMODES, &settings)) {\n        perror("ioctl");\n        return 1;\n    }\n\n    // Now you can read from D0-D2 and write to D3-D7 simultaneously\n    unsigned char data;\n    read(fd, &data, 1); // Read from D0-D2\n    data |= (1 << 3) | (1 << 4); // Set D3 and D4 high\n    write(fd, &data, 1); // Write to D3-D7\n\n    close(fd);\n    return 0;\n}