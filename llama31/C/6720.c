#include <stdio.h>\n#include <stdlib.h>\n#include <sys/wait.h>\n#include <signal.h>\n\n// List of children that have been forked\npid_t *children;\nint num_children;\n\n// List of children that have been reaped\npid_t *reaped_children;\nint num_reaped;\n\nvoid sigchld_handler(int signo) {\n    int status;\n    pid_t pid;\n\n    while ((pid = waitpid(-1, &status, WNOHANG)) > 0) {\n        // Add the reaped child to the list\n        reaped_children[num_reaped++] = pid;\n    }\n}\n\nint main() {\n    // Initialize the lists\n    children = malloc(10 * sizeof(pid_t));\n    reaped_children = malloc(10 * sizeof(pid_t));\n    num_children = 0;\n    num_reaped = 0;\n\n    // Set up the SIGCHLD handler\n    signal(SIGCHLD, sigchld_handler);\n\n    for (;;) {\n        if (is_time_to_make_babies) {\n            pid_t pid = fork();\n\n            if (pid == -1) {\n                // Error\n            } else if (pid == 0) {\n                // Child stuff\n                printf("Child started\n");\n                exit(0);\n            } else {\n                // Parent stuff\n                printf("Parent forked new child %d\n", pid);\n                children[num_children++] = pid;\n            }\n        }\n\n        // Check if there are any reaped children\n        for (int i = 0; i < num_reaped; i++) {\n            pid_t pid = reaped_children[i];\n\n            // Remove the reaped child from the list of children\n            for (int j = 0; j < num_children; j++) {\n                if (children[j] == pid) {\n                    children[j] = children[--num_children];\n                    break;\n                }\n            }\n        }\n\n        // Reset the list of reaped children\n        num_reaped = 0;\n    }\n\n    return 0;\n}