#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n#include <poll.h>\n\nint wait_for_process_exit(pid_t pid) {\n    char proc_path[32];\n    sprintf(proc_path, "/proc/%d", pid);\n\n    int fd = open(proc_path, O_RDONLY);\n    if (fd == -1) {\n        perror("open");\n        return -1;\n    }\n\n    struct pollfd pfd;\n    pfd.fd = fd;\n    pfd.events = POLLIN;\n\n    int ret = poll(&pfd, 1, -1);\n    if (ret == -1) {\n        perror("poll");\n        close(fd);\n        return -1;\n    }\n\n    close(fd);\n    return 0;\n}