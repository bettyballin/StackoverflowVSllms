// Receive the packet from the network\npacket_t* packet = malloc(MAX_PACKET_SIZE);\nrecv(sockfd, packet, MAX_PACKET_SIZE, 0);\n\n// Check the packet length and type\nsize_t payload_len = ntohs(packet->length);  // Convert to host byte order\nif (packet->type == 1) {  // Login packet, for example\n    // Process the payload\n    char* payload = packet->payload;\n    // Do something with the payload...\n}\n\n// Don't forget to free the packet buffer!\nfree(packet);