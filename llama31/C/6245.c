#define ARRAY_LEN 262144\n\nlong *sourceArrayPointer = getSourceArray();\n\nlong sourceArray[ARRAY_LEN];\nfor (int i = 0; i < ARRAY_LEN; i++)\n{\n    sourceArray[i] = sourceArrayPointer[i];\n}\n\nint bytesSent = 0;\nint bytesRemaining = sizeof(long) * ARRAY_LEN;\nwhile (bytesRemaining > 0)\n{\n    int result = send(clientSocketFD, sourceArray + bytesSent / sizeof(long), bytesRemaining);\n    if (result < 0)\n    {\n        // Handle error\n        break;\n    }\n    bytesSent += result;\n    bytesRemaining -= result;\n}\n\n// Receive\nlong targetArray[ARRAY_LEN];\nint bytesRead = 0;\nbytesRemaining = sizeof(long) * ARRAY_LEN;\nwhile (bytesRemaining > 0)\n{\n    int result = read(socketFD, targetArray + bytesRead / sizeof(long), bytesRemaining);\n    if (result < 0)\n    {\n        // Handle error\n        break;\n    }\n    bytesRead += result;\n    bytesRemaining -= result;\n}