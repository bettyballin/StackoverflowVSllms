#include <Windows.h>\n#include <SvcMgr.h>\n\nint main() {\n    // Create the service\n    SC_HANDLE hSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CONNECT);\n    SC_HANDLE hService = CreateService(\n        hSCManager,\n        "MyService",\n        "MyService",\n        SERVICE_ALL_ACCESS,\n        SERVICE_WIN32_OWN_PROCESS,\n        SERVICE_AUTO_START,\n        SERVICE_ERROR_NORMAL,\n        "C:\\Path\\To\\MyService.exe",\n        NULL,\n        NULL,\n        NULL,\n        NULL,\n        NULL\n    );\n\n    // Set the service's security descriptor\n    SECURITY_DESCRIPTOR sd;\n    InitializeSecurityDescriptor(&sd, SECURITY_DESCRIPTOR_REVISION);\n    SetSecurityDescriptorDacl(&sd, TRUE, NULL, FALSE);\n    SetSecurityDescriptorSacl(&sd, TRUE, NULL, FALSE);\n    SetServiceObjectSecurity(hService, DACL_SECURITY_INFORMATION, &sd);\n\n    // Set the service to start automatically\n    ChangeServiceConfig(hService, SERVICE_AUTO_START, SERVICE_NO_CHANGE);\n\n    // Close handles\n    CloseServiceHandle(hService);\n    CloseServiceHandle(hSCManager);\n\n    return 0;\n}