LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n    case WM_QUERYENDSESSION:\n        if (lParam == ENDSESSION_LOGOFF)\n        {\n            // Logoff event\n        }\n        else if (lParam == ENDSESSION_SHUTDOWN)\n        {\n            // Shutdown event (could be either power-off or restart)\n        }\n        break;\n    }\n    return 0;\n}