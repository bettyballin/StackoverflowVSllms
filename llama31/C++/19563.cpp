#include <windows.h>\n#include <schannel.h>\n\n// ...\n\n// Initialize the security context\nSecBufferDesc OutBuffer;\nSecBuffer OutBuffers[2];\nOutBuffers[0].pvBuffer = NULL;\nOutBuffers[0].cbBuffer = 0;\nOutBuffers[0].BufferType = SECBUFFER_TOKEN;\nOutBuffers[1].pvBuffer = NULL;\nOutBuffers[1].cbBuffer = 0;\nOutBuffers[1].BufferType = SECBUFFER_EMPTY;\nOutBuffer.cBuffers = 2;\nOutBuffer.pBuffers = OutBuffers;\nOutBuffer.ulVersion = SECBUFFER_VERSION;\n\nSECURITY_STATUS status = InitializeSecurityContext(\n    NULL,  // phContext\n    NULL,  // phCredential\n    &TargetName,  // pszTargetName\n    ASC_REQ_ALLOCATE_MEMORY | ASC_REQ_CONNECTION | ISC_REQ_SESSION_TICKET,  // fContextReq\n    0,  // Reserved1\n    NULL,  // pIn\n    0,  // cIn\n    NULL,  // pOut\n    &OutBuffer  // pOut\n);\n\n// ...\n\n// Use the cached session ticket for subsequent connections\n_SEC_BUFFER sessionTicket = { NULL, 0, SECBUFFER_SESSION_TICKET };\nstatus = InitializeSecurityContext(\n    NULL,  // phContext\n    NULL,  // phCredential\n    &TargetName,  // pszTargetName\n    ASC_REQ_ALLOCATE_MEMORY | ASC_REQ_CONNECTION,  // fContextReq\n    0,  // Reserved1\n    &sessionTicket,  // pIn\n    1,  // cIn\n    NULL,  // pOut\n    NULL  // pOut\n);