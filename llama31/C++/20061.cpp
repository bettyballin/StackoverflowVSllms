bool PointInRect(TPoint point, TRect rect) {\n  int pointX = point.X % MAP_SIZE;\n  int pointY = point.Y % MAP_SIZE;\n\n  int rectLeft = (rect.Left % MAP_SIZE + MAP_SIZE) % MAP_SIZE;\n  int rectRight = (rect.Right % MAP_SIZE + MAP_SIZE) % MAP_SIZE;\n  int rectTop = (rect.Top % MAP_SIZE + MAP_SIZE) % MAP_SIZE;\n  int rectBottom = (rect.Bottom % MAP_SIZE + MAP_SIZE) % MAP_SIZE;\n\n  if (rectLeft <= rectRight) {\n    return (pointX >= rectLeft && pointX <= rectRight) && \n           (pointY >= rectTop && pointY <= rectBottom);\n  } else {\n    return (pointX >= rectLeft || pointX <= rectRight) && \n           (pointY >= rectTop && pointY <= rectBottom);\n  }\n}