#include <Windows.h>\n#include <TlHelp32.h>\n\nint main() {\n    // Create a new process in suspended state\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    CreateProcess(NULL, "path/to/exe", NULL, NULL, FALSE, CREATE_SUSPENDED, NULL, NULL, &si, &pi);\n\n    // Get a handle to the process\n    HANDLE hProcess = pi.hProcess;\n\n    // Enumerate the modules\n    MODULEENTRY32 me32;\n    me32.dwSize = sizeof(MODULEENTRY32);\n    HANDLE hSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, pi.dwProcessId);\n    if (Process32First(hSnapshot, &me32)) {\n        do {\n            // Get the module name\n            WCHAR moduleName[MAX_PATH];\n            GetModuleBaseName(hProcess, me32.hModule, moduleName, MAX_PATH);\n\n            // Print the module name\n            wprintf(L"%s\n", moduleName);\n        } while (Process32Next(hSnapshot, &me32));\n    }\n\n    // Clean up\n    CloseHandle(hSnapshot);\n    TerminateProcess(hProcess, 0);\n    CloseHandle(hProcess);\n    return 0;\n}