#include <Windows.h>\n\nbool MoveFileWithReboot(const WCHAR* src, const WCHAR* dst) {\n    if (!MoveFileEx(src, dst, MOVEFILE_DELAY_UNTIL_REBOOT)) {\n        DWORD errorCode = GetLastError();\n        if (errorCode == ERROR_SHARING_VIOLATION || errorCode == ERROR_LOCK_VIOLATION) {\n            // File is in use, schedule move for reboot\n            return true;\n        } else {\n            // Actual permissions problem or other error\n            return false;\n        }\n    }\n    return true; // Move successful\n}