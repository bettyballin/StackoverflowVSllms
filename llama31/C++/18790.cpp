CDC* pOutputMemDC = new CDC();\nVERIFY(pOutputMemDC->CreateCompatibleDC(pInputDC));\n\nCRect rect(0, 0, nDCWidth, nDCHeight);\nCBitmap bitmap;\nif (bitmap.CreateBitmap(nDCWidth, nDCHeight, 1, 32, NULL))\n{\n    pOutputMemDC->SetViewportOrg(-rect.left, -rect.top);\n    m_pOldBitmap = pOutputMemDC->SelectObject(&bitmap);\n}\n\nCBrush brush;\nVERIFY(brush.CreateSolidBrush(RGB(255, 0, 0)));\nbrush.UnrealizeObject();\n\n// Divide the large bitmap into smaller parts to draw\nCRect smallerRect;\nfor (int y = 0; y < nDCHeight; y += 1024)\n{\n    for (int x = 0; x < nDCWidth; x += 1024)\n    {\n        smallerRect.SetRect(x, y, min(x + 1024, nDCWidth), min(y + 1024, nDCHeight));\n        pOutputMemDC->FillRect(smallerRect, &brush);\n    }\n}