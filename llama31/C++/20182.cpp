void createLinearGradient(unsigned char* array, int width, int height, \n                          int startX, int startY, int endX, int endY, \n                          unsigned char minVal, unsigned char maxVal) {\n  int dx = endX - startX;\n  int dy = endY - startY;\n  float length = sqrt(dx * dx + dy * dy);\n  float dirX = dx / length;\n  float dirY = dy / length;\n\n  for (int y = 0; y < height; y++) {\n    for (int x = 0; x < width; x++) {\n      float dotProduct = (x - startX) * dirX + (y - startY) * dirY;\n      dotProduct = std::max(0.0f, std::min(1.0f, dotProduct));\n      unsigned char value = (unsigned char)(minVal + dotProduct * (maxVal - minVal));\n      array[y * width + x] = value;\n    }\n  }\n}