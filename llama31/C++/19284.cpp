#include <Windows.h>\n\nint main()\n{\n    SYSTEM_POWER_STATUS_EX powerStatus;\n    ZeroMemory(&powerStatus, sizeof(powerStatus));\n    powerStatus.Size = sizeof(powerStatus);\n\n    if (GetSystemPowerStatusEx(&powerStatus))\n    {\n        if (powerStatus.ACLineStatus == 0)\n        {\n            // Not connected to AC power\n        }\n        else\n        {\n            // Connected to AC power\n        }\n    }\n    else\n    {\n        // Failed to get power status\n    }\n\n    return 0;\n}