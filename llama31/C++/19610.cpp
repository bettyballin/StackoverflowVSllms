#include <QtGui/QColor>\n\nQColor getForegroundColor(const QColor& backgroundColor) {\n    // Calculate relative luminance (W3C formula)\n    double luminance = 0.2126 * backgroundColor.redF() +\n                       0.7152 * backgroundColor.greenF() +\n                       0.0722 * backgroundColor.blueF();\n\n    // Choose a text color with sufficient contrast\n    if (luminance < 0.5) {\n        return Qt::white; // Light text on dark background\n    } else {\n        return Qt::black; // Dark text on light background\n    }\n}