void onExpand(const QModelIndex &index) {\n    Node* myNode = static_cast<Node*>(index.internalPointer());\n    Observer* foo = Observer::create();\n    myNode->addObserver(foo);\n    \n    // Store the Observer pointer with the index\n    QVariant data = QVariant::fromValue(foo);\n    index.model()->setData(index, data, Qt::UserRole + 1);\n}\n\nvoid onCollapse(const QModelIndex &index) {\n    Node* myNode = static_cast<Node*>(index.internalPointer());\n    QVariant data = index.data(Qt::UserRole + 1);\n    Observer* foo = data.value<Observer*>();\n    \n    myNode->remObserver(foo);\n}