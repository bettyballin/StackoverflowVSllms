<class name="Component" table="Components">\n  <id name="Id" column="Id" type="Int32">\n    <generator class="native"/>\n  </id>\n  <property name="Parent" column="ParentId" type="Component"/>\n  <set name="SubComponents" table="ComponentHierarchy" cascade="all">\n    <key column="ParentId"/>\n    <many-to-many class="Component" column="ChildId"/>\n  </set>\n  <many-to-one name="Group" column="GroupId" class="ComponentGroup"/>\n</class>\n\n<class name="ComponentGroup" table="ComponentGroups">\n  <id name="Id" column="Id" type="Int32">\n    <generator class="native"/>\n  </id>\n  <set name="Components" table="ComponentGroupComponents" cascade="all">\n    <key column="GroupId"/>\n    <many-to-many class="Component" column="ComponentId" where="ParentId is null"/>\n  </set>\n</class>