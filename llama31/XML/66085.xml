<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet version="1.0"\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\n  xmlns:msxsl="urn:schemas-microsoft-com:xslt"\n  exclude-result-prefixes="msxsl"\n>\n  <xsl:output method="text" encoding="UTF-8" indent="yes"/>\n\n  <!-- Define a key to group hotels by Adult and child -->\n  <xsl:key name="hotel-key" match="hotel" use="concat(rooms/room/Adult, '-', rooms/room/child)"/>\n\n  <!-- Sort the hotels by Adult and child -->\n  <xsl:template match="HotelDetails">\n    <xsl:apply-templates select="hotel">\n      <xsl:sort select="rooms/room/Adult" data-type="number"/>\n      <xsl:sort select="rooms/room/child" data-type="number"/>\n    </xsl:apply-templates>\n  </xsl:template>\n\n  <!-- Group hotels by Adult and child -->\n  <xsl:template match="hotel">\n    <xsl:value-of select="concat('Hotel: ', rooms/room/roomname, ' - ', rooms/room/Price)"/>\n    <xsl:text>&#10;</xsl:text>\n    <xsl:apply-templates select="key('hotel-key', concat(rooms/room/Adult, '-', rooms/room/child))"/>\n  </xsl:template>\n\n  <!-- Calculate the total price for each group -->\n  <xsl:template match="hotel" mode="total">\n    <xsl:value-of select="sum(rooms/room/Price)"/>\n  </xsl:template>\n</xsl:stylesheet>