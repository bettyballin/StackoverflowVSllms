private void AnimateScroll(Control control, Panel panel)\n{\n    int scrollPosition = panel.AutoScrollPosition.Y;\n    int controlPosition = control.Top;\n    int maxScrollPosition = panel.VerticalScroll.Maximum;\n\n    if (controlPosition > scrollPosition + panel.ClientSize.Height)\n    {\n        // control is below the fold, scroll down to it\n        int newPosition = Math.Min(maxScrollPosition, controlPosition - panel.ClientSize.Height + control.Height);\n        AnimateScrollTo(panel, newPosition, 200); // 200ms animation duration\n    }\n    else if (controlPosition < scrollPosition)\n    {\n        // control is above the fold, scroll up to it\n        AnimateScrollTo(panel, controlPosition, 200); // 200ms animation duration\n    }\n}\n\nprivate void AnimateScrollTo(Panel panel, int newPosition, int duration)\n{\n    Timer timer = new Timer();\n    timer.Interval = 16; // 16ms = 60fps\n    timer.Tick += (sender, args) =>\n    {\n        int currentScrollPosition = panel.AutoScrollPosition.Y;\n        int step = (newPosition - currentScrollPosition) / (duration / timer.Interval);\n        panel.AutoScrollPosition = new Point(0, currentScrollPosition + step);\n        if (Math.Abs(newPosition - panel.AutoScrollPosition.Y) < step)\n        {\n            panel.AutoScrollPosition = new Point(0, newPosition);\n            timer.Stop();\n        }\n    };\n    timer.Start();\n}