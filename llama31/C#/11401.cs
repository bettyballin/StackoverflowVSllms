public static void AcceptCallback(IAsyncResult ar)\n{\n    // Accept incoming connection\n    Socket listener = (Socket)ar.AsyncState;\n    handler = listener.EndAccept(ar);\n\n    // Start receiving data from the client\n    handler.BeginReceive(new byte[1], 0, 1, SocketFlags.None, ReceiveCallback, null);\n}\n\npublic static void ReceiveCallback(IAsyncResult ar)\n{\n    try\n    {\n        // Receive data from the client\n        int bytesReceived = handler.EndReceive(ar);\n\n        if (bytesReceived == 0)\n        {\n            // Client has disconnected\n            handler.Close();\n        }\n        else\n        {\n            // Process received data\n        }\n    }\n    catch (SocketException ex)\n    {\n        // Handle socket exception\n    }\n}