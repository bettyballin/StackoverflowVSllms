public IEnumerable<Task> GetAncestors(int childId)\n{\n    var tasks = db.Tasks;\n    var ancestors = new List<Task>();\n\n    GetAncestorsRecursive(tasks, childId, ancestors);\n\n    return ancestors;\n}\n\nprivate void GetAncestorsRecursive(IQueryable<Task> tasks, int taskId, List<Task> ancestors)\n{\n    var task = tasks.FirstOrDefault(t => t.TaskID == taskId);\n\n    if (task != null)\n    {\n        ancestors.Add(task);\n\n        if (task.ParentID != null)\n        {\n            GetAncestorsRecursive(tasks, task.ParentID.Value, ancestors);\n        }\n    }\n}