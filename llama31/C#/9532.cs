using System.IO;\n\nbool IsTextFile(string filename)\n{\n    using (var fileStream = File.OpenRead(filename))\n    {\n        var buffer = new byte[1024];\n        int bytesRead = fileStream.Read(buffer, 0, buffer.Length);\n        foreach (byte b in buffer.Take(bytesRead))\n        {\n            if (b == 0x00 || b == 0xFF || b == 0xFE) // Check for null characters or BOM\n            {\n                return false;\n            }\n        }\n        return true;\n    }\n}