using System;\nusing System.Diagnostics;\nusing System.IO;\n\npublic class LockedFiles\n{\n    public static void Main(string[] args)\n    {\n        string folderPath = @"C:\Path\To\Folder";\n\n        foreach (string filePath in Directory.EnumerateFiles(folderPath, "*", SearchOption.AllDirectories))\n        {\n            if (IsFileLocked(filePath))\n            {\n                Console.WriteLine(filePath);\n            }\n        }\n    }\n\n    private static bool IsFileLocked(string filePath)\n    {\n        try\n        {\n            using (FileStream fileStream = File.Open(filePath, FileMode.Open, FileAccess.Read, FileShare.None))\n            {\n                return false;\n            }\n        }\n        catch (IOException)\n        {\n            return true;\n        }\n    }\n}