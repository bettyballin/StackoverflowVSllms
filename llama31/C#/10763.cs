using System;\nusing System.Xml;\nusing System.Xml.XPath;\nusing System.Xml.Xsl;\n\npublic class CustomXsltContext : XsltContext\n{\n    public override IXsltContextFunction ResolveFunction(string prefix, string name, XPathResultType[] ArgTypes)\n    {\n        if (prefix == "fn" && name == "ends-with")\n        {\n            return new EndsWithFunction();\n        }\n        return null;\n    }\n\n    public override IXsltContextVariable ResolveVariable(string prefix, string name)\n    {\n        return null;\n    }\n\n    public override int CompareDocument(string baseUri, string nextbaseUri)\n    {\n        return 0;\n    }\n\n    public override bool PreserveWhitespace(XPathNavigator node)\n    {\n        return false;\n    }\n\n    public override bool AllowExtensionFunctions\n    {\n        get { return true; }\n    }\n}\n\npublic class EndsWithFunction : IXsltContextFunction\n{\n    public XPathResultType[] ArgTypes\n    {\n        get { return new XPathResultType[] { XPathResultType.String, XPathResultType.String }; }\n    }\n\n    public XPathResultType ReturnType\n    {\n        get { return XPathResultType.Boolean; }\n    }\n\n    public int Maxargs\n    {\n        get { return 2; }\n    }\n\n    public int Minargs\n    {\n        get { return 2; }\n    }\n\n    public string NameSpaceUri\n    {\n        get { return "http://www.w3.org/2005/xpath-functions"; }\n    }\n\n    public string LocalName\n    {\n        get { return "ends-with"; }\n    }\n\n    public object Invoke(XsltContext xsltContext, object[] args, XPathNavigator docContext)\n    {\n        string str = args[0] as string;\n        string substr = args[1] as string;\n        return str.EndsWith(substr);\n    }\n}\n\nclass Program\n{\n    static void Main()\n    {\n        XmlDocument xdoc = new XmlDocument();\n        xdoc.LoadXml(@"<?xml version=""1.0"" encoding=""utf-8"" ?>\n                        <myXml xmlns=""http://MyNamespace"" xmlns:fn=""http://www.w3.org/2005/xpath-functions""> \n                        <data>Hello World</data>\n                    </myXml>");\n        XPathNavigator navigator = xdoc.CreateNavigator();\n\n        CustomXsltContext xsltContext = new CustomXsltContext();\n        XmlNamespaceManager nsmgr = new XmlNamespaceManager(xdoc.NameTable);\n        nsmgr.AddNamespace("fn", "http://www.w3.org/2005/xpath-functions");\n\n        XPathExpression xpr;\n        xpr = navigator.Compile("fn:ends-with(/myXml/data, 'World')", xsltContext, nsmgr);\n\n        object result = navigator.Evaluate(xpr);\n        Console.WriteLine(result);\n    }\n}