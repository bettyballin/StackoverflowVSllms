public class DatasetDecryption\n{\n    public static DataSet DecryptDataset(byte[] encryptedData, byte[] key, byte[] iv)\n    {\n        DataSet dataset = new DataSet();\n\n        using (Aes aes = Aes.Create())\n        {\n            aes.Key = key;\n            aes.IV = iv;\n\n            using (MemoryStream ms = new MemoryStream(encryptedData))\n            {\n                using (CryptoStream cs = new CryptoStream(ms, aes.CreateDecryptor(), CryptoStreamMode.Read))\n                {\n                    dataset.ReadXml(cs);\n                }\n            }\n        }\n\n        return dataset;\n    }\n}