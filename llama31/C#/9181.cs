using System.Net.Mail;\n\n// Create a single SmtpClient instance\nSmtpClient smtpClient = new SmtpClient("your-smtp-server");\n\n// Set up your email batches (e.g., 20 emails per batch)\nint batchSize = 20;\nList<MailMessage> emailBatch = new List<MailMessage>();\n\n// Send emails in batches\nforeach (MailMessage email in yourEmailList)\n{\n    emailBatch.Add(email);\n\n    if (emailBatch.Count >= batchSize)\n    {\n        // Send the batch\n        foreach (MailMessage emailToSend in emailBatch)\n        {\n            smtpClient.Send(emailToSend);\n        }\n\n        // Clear the batch\n        emailBatch.Clear();\n    }\n}\n\n// Send any remaining emails in the last batch\nforeach (MailMessage emailToSend in emailBatch)\n{\n    smtpClient.Send(emailToSend);\n}