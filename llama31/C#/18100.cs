using System;\nusing System.Threading;\n\nclass Program\n{\n    static string userInput = "";\n    static object lockObj = new object();\n\n    static void Main(string[] args)\n    {\n        // Start listening for incoming messages in a separate thread\n        Thread listenerThread = new Thread(ListenerThread);\n        listenerThread.Start();\n\n        while (true)\n        {\n            ConsoleKeyInfo cki = Console.ReadKey(true);\n            if (cki.Key == ConsoleKey.Enter)\n            {\n                lock (lockObj)\n                {\n                    Console.WriteLine(userInput);\n                    userInput = "";\n                }\n            }\n            else\n            {\n                lock (lockObj)\n                {\n                    userInput += cki.KeyChar;\n                    Console.Write("\r" + userInput);\n                }\n            }\n        }\n    }\n\n    static void ListenerThread()\n    {\n        while (true)\n        {\n            // Simulate receiving a message from the server\n            string message = "Message from server";\n            lock (lockObj)\n            {\n                Console.WriteLine(message);\n                Console.Write("\r" + userInput);\n            }\n            Thread.Sleep(1000); // wait for 1 second\n        }\n    }\n}