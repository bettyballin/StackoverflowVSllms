// Create a DataTable to hold the IDs\nDataTable idTable = new DataTable();\nidTable.Columns.Add("msgId", typeof(long));\n\n// Populate the DataTable\nforeach (string id in ids)\n{\n    idTable.Rows.Add(long.Parse(id));\n}\n\n// Create a SQL parameter with the TVP\nSqlParameter param = new SqlParameter("@ids", SqlDbType.Structured);\nparam.TypeName = "dbo.LongList"; // Your TVP type name\nparam.Value = idTable;\n\n// Create a command with the TVP parameter\nstring sql = "DELETE FROM your_table WHERE msgId IN (SELECT msgId FROM @ids)";\nusing (SqlCommand cmd = new SqlCommand(sql, your_connection))\n{\n    cmd.Parameters.Add(param);\n    cmd.ExecuteNonQuery();\n}