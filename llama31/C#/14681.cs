using System;\nusing System.Net.Http;\nusing System.Threading;\nusing System.Threading.Tasks;\n\npublic class HttpProxy : HttpMessageHandler\n{\n    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)\n    {\n        // Inspect the request here\n        Console.WriteLine($"Request: {request.Method} {request.RequestUri}");\n\n        // Forward the request to the original destination\n        var response = await base.SendAsync(request, cancellationToken);\n\n        // Inspect the response here\n        Console.WriteLine($"Response: {response.StatusCode}");\n\n        return response;\n    }\n}\n\nclass Program\n{\n    static async Task Main(string[] args)\n    {\n        var handler = new HttpProxy();\n        var client = new HttpClient(handler);\n\n        // Set the proxy as the default handler for the browser\n        var browser = new Browser(); // Your browser automation instance\n        browser.SetProxy(handler);\n\n        // Navigate to a website\n        await browser.NavigateAsync("https://example.com");\n    }\n}