int Until = 20000000;\nBitArray PrimeBits = new BitArray(Until, true);\n\nPrimeBits.Set(0, false);\nPrimeBits.Set(1, false);\n\nint sqrtUntil = (int)Math.Sqrt(Until) + 1;\n\nParallel.For(2, sqrtUntil, P =>\n{\n    if (PrimeBits.Get(P))\n    {\n        for (int PMultiply = P * 2; PMultiply < Until; PMultiply += P)\n        {\n            PrimeBits.Set(PMultiply, false);\n        }\n    }\n});\n\nList<int> Primes = new List<int>();\n\nfor (int i = 2; i < Until; i++)\n{\n    if (PrimeBits.Get(i))\n    {\n        Primes.Add(i);\n    }\n}