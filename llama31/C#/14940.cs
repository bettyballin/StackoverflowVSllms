MemoryStream ms = new MemoryStream();\nbyte[] rawPlaintext = Encoding.Unicode.GetBytes("This is annoying!");\n\nusing (Aes aes = new AesManaged())\n{\n    aes.Padding = PaddingMode.PKCS7;\n    aes.Key = new byte[128/8];\n    aes.IV = new byte[128/8];\n\n    using (CryptoStream cs = new CryptoStream(ms, aes.CreateEncryptor(), CryptoStreamMode.Write))\n    {\n        cs.Write(rawPlaintext, 0, rawPlaintext.Length);\n        cs.Flush();\n        cs.FlushFinalBlock();\n    }\n\n    ms = new MemoryStream(ms.GetBuffer());\n    using (CryptoStream cs = new CryptoStream(ms, aes.CreateDecryptor(), CryptoStreamMode.Read))\n    {\n        byte[] rawData = new byte[ms.Length];\n        int len = cs.Read(rawData, 0, (int)ms.Length);\n        string s = Encoding.Unicode.GetString(rawData, 0, len);\n        Console.WriteLine(s);\n    }\n}