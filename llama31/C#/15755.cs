public class UserService\n{\n    private readonly DbContext _context;\n\n    public UserService(DbContext context)\n    {\n        _context = context;\n    }\n\n    public User GetCurrentUser()\n    {\n        var userId = HttpContext.Current.User.Identity.GetUserId();\n        return _context.Users.Find(userId);\n    }\n\n    public void UpdateUser(User user)\n    {\n        _context.Users.Attach(user);\n        _context.Entry(user).State = EntityState.Modified;\n        _context.SaveChanges();\n    }\n}