using System;\nusing System.ComponentModel.Composition;\nusing System.ComponentModel.Composition.Hosting;\n\nnamespace ConsoleApplication2\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            var p = new Program();\n            p.Run();\n        }\n\n        [Import]\n        private ILog logger { get; set; }\n\n        public void Run()\n        {\n            var catalog = new DirectoryCatalog(".");\n            var container = new CompositionContainer(catalog);\n            var batch = new CompositionBatch();\n            batch.AddPart(this);\n            container.Compose(batch);\n\n            logger.Log("hello");\n            var h = container.GetExportedValue<Helper>();\n            logger.Log(h.TimesTwo(15).ToString());\n            Console.ReadKey();\n        }\n    }\n\n    [Export]\n    class Helper\n    {\n        [Import]\n        private IDouble doubler { get; set; }\n\n        public double TimesTwo(double d)\n        {\n            return doubler.DoubleIt(d);\n        }\n    }\n\n    interface ILog\n    {\n        void Log(string message);\n    }\n\n    [Export(typeof(ILog))]\n    class MyLog : ILog\n    {\n        public void Log(string message)\n        {\n            Console.WriteLine("mylog: " + message);\n        }\n    }\n\n    interface IDouble\n    {\n        double DoubleIt(double d);\n    }\n\n    [Export(typeof(IDouble))]\n    class MyDoubler : IDouble\n    {\n        public double DoubleIt(double d)\n        {\n            return d * 2.0;\n        }\n    }\n}