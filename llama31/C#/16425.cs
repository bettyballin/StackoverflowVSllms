private readonly int[] _freeSlots;\n\npublic RingBuffer(int slots)\n{\n    _freeSlots = new int[slots];\n}\n\npublic void MarkSlotFree(int slot)\n{\n    Interlocked.Exchange(ref _freeSlots[slot], 1);\n}\n\npublic void MarkSlotOccupied(int slot)\n{\n    Interlocked.Exchange(ref _freeSlots[slot], 0);\n}\n\npublic bool IsSlotFree(int slot)\n{\n    return Interlocked.CompareExchange(ref _freeSlots[slot], 0, 1) == 1;\n}