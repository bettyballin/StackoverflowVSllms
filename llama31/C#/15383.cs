protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)\n{\n    // Check if all required fields are valid\n    if (Page.IsValid)\n    {\n        args.IsValid = true;\n    }\n    else\n    {\n        args.IsValid = false;\n    }\n}\n\nprotected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)\n{\n    // If page is not valid, prevent selected index change\n    if (!Page.IsValid)\n    {\n        ListBox1.SelectedIndex = -1; // Or restore the previous index\n    }\n}