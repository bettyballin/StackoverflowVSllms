using Moq;\nusing System.Web;\nusing System.Web.Mvc;\n\npublic class MyControllerTests\n{\n    private Mock<HttpSessionStateBase> _sessionMock;\n    private MyController _controller;\n\n    [SetUp]\n    public void SetUp()\n    {\n        _sessionMock = new Mock<HttpSessionStateBase>();\n        var contextMock = new Mock<ControllerContext>();\n        contextMock.Setup(c => c.HttpContext.Session).Returns(_sessionMock.Object);\n        _controller = new MyController();\n        _controller.ControllerContext = contextMock.Object;\n    }\n\n    [Test]\n    public void MyAction_SessionValueIsSet()\n    {\n        // Arrange\n        _sessionMock.Setup(s => s["MyKey"]).Returns("MyValue");\n\n        // Act\n        var result = _controller.MyAction();\n\n        // Assert\n        Assert.AreEqual("MyValue", _sessionMock.Object["MyKey"]);\n    }\n}