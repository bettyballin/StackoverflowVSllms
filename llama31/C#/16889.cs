public interface IUnitOfWork : IDisposable\n{\n    ISession Session { get; }\n    void Commit();\n    void Rollback();\n}\n\npublic class NhUnitOfWork : IUnitOfWork\n{\n    private readonly ISession _session;\n    private readonly ITransaction _transaction;\n\n    public NhUnitOfWork(ISession session)\n    {\n        _session = session;\n        _transaction = _session.BeginTransaction();\n    }\n\n    public ISession Session { get { return _session; } }\n\n    public void Commit()\n    {\n        _transaction.Commit();\n    }\n\n    public void Rollback()\n    {\n        _transaction.Rollback();\n    }\n\n    public void Dispose()\n    {\n        _transaction.Dispose();\n        _session.Dispose();\n    }\n}