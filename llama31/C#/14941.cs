public static string ToProperCase(string input)\n{\n    if (string.IsNullOrEmpty(input))\n        return input;\n\n    string[] words = input.Split(' ');\n    for (int i = 0; i < words.Length; i++)\n    {\n        words[i] = words[i].Substring(0, 1).ToUpper() + words[i].Substring(1).ToLower();\n    }\n\n    // Handle special cases like O'Reilly and McDonald's\n    for (int i = 0; i < words.Length; i++)\n    {\n        if (words[i].Contains("'"))\n        {\n            int apostropheIndex = words[i].IndexOf("'");\n            words[i] = words[i].Substring(0, apostropheIndex).ToUpper() + words[i].Substring(apostropheIndex);\n        }\n    }\n\n    return string.Join(" ", words);\n}