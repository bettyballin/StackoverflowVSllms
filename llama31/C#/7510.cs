using System.IO.Compression;\n\n// ...\n\nbyte[] bytMessage = Encoding.ASCII.GetBytes("data=[a several MB XML document]");\nbyte[] compressedMessage = Compress(bytMessage);\n\nmyWebRequest.ContentLength = compressedMessage.Length;\nmyWebRequest.Method = "POST";\nmyWebRequest.ContentType = "application/x-www-form-urlencoded";\n\n// ...\n\nstatic byte[] Compress(byte[] data)\n{\n    using (var ms = new MemoryStream())\n    {\n        using (var gz = new GZipStream(ms, CompressionMode.Compress, true))\n        {\n            gz.Write(data, 0, data.Length);\n        }\n        return ms.ToArray();\n    }\n}