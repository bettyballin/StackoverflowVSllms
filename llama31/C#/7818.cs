string GetNameFromSID(SecurityIdentifier sid)\n{\n    try\n    {\n        // Try to translate locally first\n        NTAccount ntAccount = (NTAccount)sid.Translate(typeof(NTAccount));\n        return ntAccount.ToString();\n    }\n    catch (IdentityNotMappedException)\n    {\n        // Local translation failed, try LDAP lookup\n        using (DirectoryEntry dirEntry = new DirectoryEntry("LDAP://RootDSE"))\n        {\n            string dnsDomain = dirEntry.Properties["defaultNamingContext"][0].ToString();\n            using (DirectoryEntry searchEntry = new DirectoryEntry($"LDAP://{dnsDomain}"))\n            {\n                using (DirectorySearcher searcher = new DirectorySearcher(searchEntry))\n                {\n                    searcher.Filter = $"(objectSid={sid.Value})";\n                    var result = searcher.FindOne();\n                    if (result != null)\n                    {\n                        return result.Properties["sAMAccountName"][0].ToString();\n                    }\n                }\n            }\n        }\n    }\n    catch (Exception ex)\n    {\n        // Handle other exceptions appropriately\n        Console.WriteLine($"An error occurred: {ex.Message}");\n    }\n\n    return null; // or throw an exception, depending on your requirements\n}