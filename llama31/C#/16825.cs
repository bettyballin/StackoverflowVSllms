using System;\nusing System.Data.Common;\nusing System.Transactions;\nusing DevArtTry1.DataSet1TableAdapters;\n\nnamespace DevArtTry1\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            using (TransactionScope ts = new TransactionScope())\n            {\n                using (DataContext1 dc = new DataContext1())\n                {\n                    dc.Connection.Open();\n                    using (DbTransaction transaction = dc.Connection.BeginTransaction(System.Data.IsolationLevel.ReadCommitted))\n                    {\n                        dc.Transaction = transaction;\n\n                        Parent parent = new Parent();\n                        parent.Id = 1;\n                        parent.Name = "Parent 1";\n                        dc.Parents.InsertOnSubmit(parent);\n                        dc.SubmitChanges(); // This will impose a write lock on the child table.\n\n                        DataSet1.CHILDDataTable dt = new DataSet1.CHILDDataTable();\n                        DataSet1.CHILDRow row = dt.NewCHILDRow();\n                        row.ID = 1;\n                        row.PARENTID = 1;\n                        row.NAME = "Child 1";\n                        dt.AddCHILDRow(row);\n\n                        CHILDTableAdapter cta = new CHILDTableAdapter();\n                        cta.Connection = new System.Data.OracleClient.OracleConnection(dc.Connection.ConnectionString);\n                        cta.Connection.Open();\n                        cta.Transaction = cta.Connection.BeginTransaction(System.Data.IsolationLevel.ReadCommitted);\n                        Transaction.Current.EnlistDurable(cta.Connection, cta.Transaction, EnlistmentOptions.None);\n\n                        cta.Update(dt);\n\n                        transaction.Commit();\n                        cta.Transaction.Commit();\n                    }\n                }\n\n                ts.Complete();\n            }\n\n            Console.WriteLine("Successfully inserted parent and child rows.");\n            Console.ReadLine();\n        }\n    }\n}