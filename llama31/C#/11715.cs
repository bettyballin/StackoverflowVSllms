using (var connection = new SQLiteConnection(connectionString))\n{\n    connection.Open();\n\n    using (var transaction = connection.BeginTransaction())\n    {\n        try\n        {\n            // Check for conflicting bookings\n            var conflictingBookings = connection.Query<Bookings>(\n                "SELECT COUNT(*) FROM Bookings WHERE Date = @Date AND Time = @Time AND InstructorID = @InstructorID",\n                new { Date = booking.Date, Time = booking.Time, InstructorID = booking.InstructorID });\n\n            if (conflictingBookings.Count > 0)\n            {\n                transaction.Rollback();\n                return "Booking conflicts with an existing booking.";\n            }\n\n            // Insert new booking\n            connection.Execute("INSERT INTO Bookings (Date, Time, InstructorID, CustomerID) VALUES (@Date, @Time, @InstructorID, @CustomerID)",\n                new { Date = booking.Date, Time = booking.Time, InstructorID = booking.InstructorID, CustomerID = booking.CustomerID });\n\n            transaction.Commit();\n            return "Booking successful.";\n        }\n        catch (Exception ex)\n        {\n            transaction.Rollback();\n            return "An error occurred during booking.";\n        }\n    }\n}