using System.Xml;\nusing System.Xml.Linq;\n\nXDocument document = ...;\n\nvar namespaceManager = new XmlNamespaceManager(new NameTable());\nforeach (var ns in document.Root.GetNamespacesInScope(XmlNamespaceScope.All))\n{\n    namespaceManager.AddNamespace(ns.Key, ns.Value);\n}\n\n// Now you can use the namespaceManager with your XPath queries\nvar elements = document.XPathSelectElements("//xx:Name", namespaceManager);