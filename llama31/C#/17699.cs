private void Example()\n{\n    using (var permission = new FileIOPermission(PermissionState.Unrestricted))\n    {\n        permission.Deny();\n        // permission is denied here\n        Foo();\n    }\n    // permission is no longer denied here\n    Bar();\n}\n\nprivate void Foo()\n{\n    // permission is still denied here\n    using (var fileStream = new FileStream(@"C:\temp\test.txt", FileMode.Create))\n    {\n    }\n}\n\nprivate void Bar()\n{\n    // permission is no longer denied here\n    using (var fileStream = new FileStream(@"C:\temp\test.txt", FileMode.Create))\n    {\n    }\n}