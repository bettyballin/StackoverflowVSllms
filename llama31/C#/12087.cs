using System.Web.Services.Protocols;\n\n// Assume your web service class is named FileService\n[WebService(Namespace = "http://tempuri.org/")]\npublic class FileService : System.Web.Services.WebService\n{\n    [WebMethod]\n    public string[] GetFiles(string userId)\n    {\n        // Use the userId to impersonate the user\n        // ...\n    }\n}\n\n// In your web.config, add the following configuration\n<system.web>\n    <authentication mode="Windows" />\n    <identity impersonate="true" />\n</system.web>