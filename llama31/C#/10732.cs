int retryCount = 0;\nwhile (retryCount < 3)\n{\n    try\n    {\n        // Attempt to write to the file\n        using (var writer = new XmlTextWriter("D:\\myService\\eventlog.xml", Encoding.UTF8))\n        {\n            // Write to the file\n        }\n        break;\n    }\n    catch (IOException ex)\n    {\n        // If the file is still locked, wait for a short period and retry\n        Thread.Sleep(1000);\n        retryCount++;\n    }\n}