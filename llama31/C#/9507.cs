using System;\nusing System.Runtime.InteropServices;\nusing Microsoft.WindowsMobile.Telephony;\n\nnamespace FlashSms\n{\n    public class FlashSmsSender\n    {\n        [DllImport("sms.dll")]\n        private static extern IntPtr SmsOpen(IntPtr hWnd, uint wMsg, uint wParam, uint lParam);\n\n        [DllImport("sms.dll")]\n        private static extern bool SmsSendMessage(IntPtr handle, byte[] pdu, uint pduLength, uint options);\n\n        public void SendFlashSms(string phoneNumber, string message)\n        {\n            // Convert the message to a PDU (Protocol Data Unit)\n            byte[] pdu = new byte[message.Length * 2 + 15];\n            pdu[0] = 0x00; // SC address\n            pdu[1] = 0x11; // First octet of the service center address\n            pdu[2] = 0x00; // Address length\n            pdu[3] = 0x00; // Type of address\n            pdu[4] = 0x00; // Address value\n            pdu[5] = 0x00; // Protocol identifier\n            pdu[6] = 0x00; // Data coding scheme\n            pdu[7] = 0x00; // Validity period\n            pdu[8] = 0x00; // User data length\n            pdu[9] = 0x00; // User data header\n            pdu[10] = 0x00; // User data\n\n            // Set the message class to 0 (Flash SMS)\n            pdu[11] = 0x00;\n\n            // Copy the message to the PDU\n            for (int i = 0; i < message.Length; i++)\n            {\n                pdu[12 + i * 2] = (byte)message[i];\n                pdu[13 + i * 2] = 0x00; // Null-terminate each character\n            }\n\n            // Open the SMS handle\n            IntPtr handle = SmsOpen(IntPtr.Zero, 0, 0, 0);\n\n            // Send the SMS\n            SmsSendMessage(handle, pdu, (uint)pdu.Length, 0);\n\n            // Close the SMS handle\n            SmsClose(handle);\n        }\n\n        [DllImport("sms.dll")]\n        private static extern void SmsClose(IntPtr handle);\n    }\n}