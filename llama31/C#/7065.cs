public class MyClass : IDisposable\n{\n    private bool disposed = false;\n\n    public void Dispose()\n    {\n        Dispose(true);\n        GC.SuppressFinalize(this);\n    }\n\n    protected virtual void Dispose(bool disposing)\n    {\n        if (!disposed)\n        {\n            if (disposing)\n            {\n                // Free managed resources\n            }\n\n            // Free unmanaged resources\n            disposed = true;\n        }\n    }\n\n    ~MyClass()\n    {\n        Dispose(false);\n    }\n}