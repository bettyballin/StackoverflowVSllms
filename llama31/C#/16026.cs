using System;\nusing System.Data;\nusing System.Data.SqlClient;\n\npublic class RetryTransaction\n{\n    private const int MaxRetries = 3;\n    private const int RetryDelay = 500; // milliseconds\n\n    public void ExecuteTransaction(SqlConnection connection, SqlTransaction transaction)\n    {\n        int retryCount = 0;\n\n        while (retryCount < MaxRetries)\n        {\n            try\n            {\n                // Execute the transaction\n                using (SqlCommand command = new SqlCommand("your_sql_command", connection, transaction))\n                {\n                    command.ExecuteNonQuery();\n                }\n\n                // Commit the transaction\n                transaction.Commit();\n\n                break;\n            }\n            catch (SqlException ex)\n            {\n                if (ex.Number == 1205) // Deadlock exception\n                {\n                    retryCount++;\n\n                    if (retryCount < MaxRetries)\n                    {\n                        // Roll back the transaction and wait for a short period of time before retrying\n                        transaction.Rollback();\n                        System.Threading.Thread.Sleep(RetryDelay);\n                    }\n                    else\n                    {\n                        // Maximum retries exceeded, re-throw the exception\n                        throw;\n                    }\n                }\n                else\n                {\n                    // Re-throw the exception\n                    throw;\n                }\n            }\n        }\n    }\n}