public int GetUserIdByUsername(string username)\n{\n    using (var connection = (EntityConnection)Connection)\n    {\n        connection.Open();\n\n        using (var command = connection.StoreConnection.CreateCommand())\n        {\n            command.CommandText = "SELECT dbo.fn_GetUserId_Username(@Username)";\n            command.CommandType = CommandType.Text;\n\n            var parameter = new SqlParameter("Username", SqlDbType.VarChar, 32);\n            parameter.Value = username;\n            command.Parameters.Add(parameter);\n\n            var result = command.ExecuteScalar();\n\n            if (result != null)\n            {\n                return Convert.ToInt32(result);\n            }\n        }\n    }\n\n    return -1; // or throw an exception if not found\n}