using System.IO;\nusing System.Web.Mvc;\n\npublic class CachedViewPage : ViewPage\n{\n    public string RenderToString()\n    {\n        var stringWriter = new StringWriter();\n        var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, ViewName, ViewData);\n        viewResult.View.Render(new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, output: null), new HtmlTextWriter(stringWriter));\n        return stringWriter.ToString();\n    }\n}