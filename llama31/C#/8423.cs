private Thread thread;\nprivate Semaphore semaphore = new Semaphore(0, 1);\n\nprivate void StartQuery()\n{\n    thread = new Thread(RunQuery);\n    thread.Start();\n}\n\nprivate void CancelQuery()\n{\n    semaphore.Release();\n}\n\nprivate void RunQuery()\n{\n    try\n    {\n        // Execute the query\n        using (SqlConnection conn = new SqlConnection(connectionString))\n        {\n            conn.Open();\n            SqlCommand cmd = new SqlCommand("SELECT * FROM my_table", conn);\n            SqlDataReader reader = cmd.ExecuteReader();\n\n            while (reader.Read())\n            {\n                // Process the results\n            }\n        }\n    }\n    catch (ThreadInterruptedException)\n    {\n        // Handle the interruption\n    }\n    finally\n    {\n        // Release resources\n    }\n}