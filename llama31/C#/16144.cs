public void Init(HttpApplication context)\n{\n    context.PostAuthenticateRequest += (sender, e) =>\n    {\n        // Set the Principal and Identity here...\n    };\n\n    context.AuthorizeRequest += (sender, e) =>\n    {\n        var urlAuthorizationModule = new UrlAuthorizationModule();\n        urlAuthorizationModule.Init(context);\n        urlAuthorizationModule.OnEnter(context);\n    };\n}