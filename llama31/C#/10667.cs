NetworkStream ns = new NetworkStream(clientSocket);\nStreamReader sr = new StreamReader(ns);\nint maxLength = 1024;\nstring line = "";\nint bytesRead = 0;\nwhile (bytesRead < maxLength)\n{\n    int nextChar = sr.Read();\n    if (nextChar == -1 || nextChar == '\n')\n    {\n        break;\n    }\n    if (nextChar == '\r')\n    {\n        int followingChar = sr.Peek();\n        if (followingChar == '\n')\n        {\n            sr.Read();\n            break;\n        }\n    }\n    line += (char)nextChar;\n    bytesRead++;\n}\nstring request = line;