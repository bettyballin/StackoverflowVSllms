using System;\nusing System.IO;\nusing System.Threading;\n\npublic static class FileWaiter\n{\n    public static bool WaitForFile(string filePath, TimeSpan timeout)\n    {\n        DateTime startTime = DateTime.Now;\n        while (true)\n        {\n            try\n            {\n                using (FileStream fs = File.Open(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.None))\n                {\n                    fs.Close();\n                    return true;\n                }\n            }\n            catch (IOException)\n            {\n                if (DateTime.Now - startTime > timeout)\n                {\n                    return false;\n                }\n                Thread.Sleep(100);\n            }\n        }\n    }\n}