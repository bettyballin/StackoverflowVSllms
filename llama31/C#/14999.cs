using System;\nusing System.Net;\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\n\n[ServiceContract]\npublic interface IMonitoringService\n{\n    [OperationContract]\n    [WebInvoke(Method = "POST", UriTemplate = "/ReportStatus")]\n    void ReportStatus(string companyName, string serviceName, bool isRunning);\n}\n\npublic class MonitoringService : IMonitoringService\n{\n    private static readonly Dictionary<string, Dictionary<string, bool>> _statusCache = new Dictionary<string, Dictionary<string, bool>>();\n\n    public void ReportStatus(string companyName, string serviceName, bool isRunning)\n    {\n        if (!_statusCache.ContainsKey(companyName))\n        {\n            _statusCache[companyName] = new Dictionary<string, bool>();\n        }\n\n        _statusCache[companyName][serviceName] = isRunning;\n    }\n}\n\nclass Program\n{\n    static void Main()\n    {\n        // Create the monitoring service host\n        ServiceHost host = new ServiceHost(typeof(MonitoringService));\n        host.Open();\n\n        // Start the timer-based polling\n        Timer timer = new Timer(10000); // 10 second interval\n        timer.Elapsed += new ElapsedEventHandler(OnTimerElapsed);\n        timer.Start();\n\n        Console.ReadLine();\n    }\n\n    static void OnTimerElapsed(object sender, ElapsedEventArgs e)\n    {\n        // Poll each company's web service for their status\n        foreach (string companyName in _statusCache.Keys)\n        {\n            foreach (string serviceName in _statusCache[companyName].Keys)\n            {\n                // Use RESTful web service to retrieve status information\n                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(string.Format("http://{0}/{1}/status", companyName, serviceName));\n                HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n\n                if (response.StatusCode == HttpStatusCode.OK)\n                {\n                    bool isRunning = Convert.ToBoolean(response.ReadToEnd());\n                    ReportStatus(companyName, serviceName, isRunning);\n                }\n            }\n        }\n    }\n}