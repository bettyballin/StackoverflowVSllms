public class HtmlCaptureFilter : Stream\n{\n    private readonly Stream _originalStream;\n    private readonly MemoryStream _captureStream = new MemoryStream();\n\n    public HtmlCaptureFilter(Stream originalStream)\n    {\n        _originalStream = originalStream;\n    }\n\n    public override void Write(byte[] buffer, int offset, int count)\n    {\n        _captureStream.Write(buffer, offset, count);\n        _originalStream.Write(buffer, offset, count);\n    }\n\n    public string GetCapturedHtml()\n    {\n        _captureStream.Position = 0;\n        using (var reader = new StreamReader(_captureStream))\n        {\n            return reader.ReadToEnd();\n        }\n    }\n}\n\n// In your aspx page\nprotected void Page_Load(object sender, EventArgs e)\n{\n    Response.Filter = new HtmlCaptureFilter(Response.OutputStream);\n    // ...\n}\n\n// Later, when you want to capture the HTML\nvar capturedHtml = ((HtmlCaptureFilter)Response.Filter).GetCapturedHtml();