public bool IsDateBetweenRecurringSpan(DateTime date, DateTime start, DateTime end, TimeSpan recurrence)\n{\n    var duration = end - start;\n    var recurrenceStart = start;\n\n    while (recurrenceStart <= date)\n    {\n        var recurrenceEnd = recurrenceStart + duration;\n        if (date >= recurrenceStart && date <= recurrenceEnd)\n        {\n            return true;\n        }\n\n        recurrenceStart += recurrence;\n    }\n\n    return false;\n}