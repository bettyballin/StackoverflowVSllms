public void ReadWholeArray(string fileName, byte[] data)\n{\n    const int bufferSize = 4096; // adjust this value as needed\n\n    log.Debug("ReadWholeArray");\n\n    using (FileStream stream = new FileStream(fileName, FileMode.Open, FileAccess.Read))\n    {\n        int offset = 0;\n        int remaining = data.Length;\n\n        byte[] buffer = new byte[bufferSize];\n\n        while (remaining > 0)\n        {\n            int read = stream.Read(buffer, 0, Math.Min(bufferSize, remaining));\n            if (read <= 0)\n                throw new EndOfStreamException(String.Format("End of stream reached with {0} bytes left to read", remaining));\n\n            Buffer.BlockCopy(buffer, 0, data, offset, read);\n            offset += read;\n            remaining -= read;\n        }\n    }\n}