using (SqlConnection connection = new SqlConnection(connectionString))\n{\n    connection.InfoMessage += (sender, args) => Console.WriteLine(args.Message);\n    connection.Open();\n\n    using (SqlCommand command = new SqlCommand(sql, connection))\n    {\n        using (SqlDataReader reader = command.ExecuteReader())\n        {\n            do\n            {\n                while (reader.Read())\n                {\n                    for (int i = 0; i < reader.FieldCount; i++)\n                    {\n                        Console.Write(reader[i] + " ");\n                    }\n                    Console.WriteLine();\n                }\n            } while (reader.NextResult());\n        }\n    }\n}