protected void PerformCircularReferenceCheck(AmICircular target)\n{\n    var visited = new HashSet<AmICircular>();\n    if (IsReachable(target, visited))\n    {\n        throw new InvalidOperationException("Circular reference detected");\n    }\n}\n\nprivate bool IsReachable(AmICircular node, HashSet<AmICircular> visited)\n{\n    if (visited.Contains(node))\n    {\n        return true;\n    }\n    visited.Add(node);\n    foreach (var child in node.Children)\n    {\n        if (IsReachable(child, visited))\n        {\n            return true;\n        }\n    }\n    return false;\n}