[HttpPost]\npublic ActionResult Vote(int pictureId)\n{\n    var ip = Request.UserHostAddress;\n    var voterId = Request.Cookies["VoterId"] != null ? Guid.Parse(Request.Cookies["VoterId"].Value) : Guid.Empty;\n\n    if (db.Votes.Any(v => v.PictureId == pictureId && (v.IpAddress == ip || v.VoterId == voterId)))\n    {\n        // Vote already exists, prevent it\n        return RedirectToAction("Index");\n    }\n\n    // Generate a new voter ID and set the cookie\n    voterId = Guid.NewGuid();\n    Response.Cookies.Add(new HttpCookie("VoterId", voterId.ToString()));\n\n    // Store the vote in the database\n    var vote = new Vote { PictureId = pictureId, VoterId = voterId, IpAddress = ip };\n    db.Votes.Add(vote);\n    db.SaveChanges();\n\n    return RedirectToAction("Index");\n}