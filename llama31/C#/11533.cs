using System;\nusing System.IO;\nusing System.Net.Http;\n\npublic string GetWebPageAsString(string url)\n{\n    using (var client = new HttpClient())\n    {\n        var response = client.GetAsync(url).Result;\n        response.EnsureSuccessStatusCode();\n        using (var stream = new MemoryStream())\n        {\n            response.Content.CopyToAsync(stream).Wait();\n            stream.Position = 0;\n            using (var reader = new StreamReader(stream))\n            {\n                return reader.ReadToEnd();\n            }\n        }\n    }\n}