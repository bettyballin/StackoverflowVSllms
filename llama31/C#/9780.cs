using System.Drawing;\nusing System.Drawing.Imaging;\nusing System.IO;\n\nclass ImageResizer\n{\n    public void ResizeImages(string directory, int width, int height, int quality)\n    {\n        foreach (string file in Directory.GetFiles(directory, "*.jpg"))\n        {\n            using (Image image = Image.FromFile(file))\n            {\n                using (Bitmap thumbnail = new Bitmap(width, height))\n                {\n                    using (Graphics graphics = Graphics.FromImage(thumbnail))\n                    {\n                        graphics.DrawImage(image, 0, 0, width, height);\n                    }\n\n                    ImageCodecInfo codec = GetEncoderInfo("image/jpeg");\n                    EncoderParameters parameters = new EncoderParameters(1);\n                    parameters.Param[0] = new EncoderParameter(Encoder.Quality, quality);\n\n                    string newFile = Path.Combine(directory, Path.GetFileNameWithoutExtension(file) + "_thumb.jpg");\n                    thumbnail.Save(newFile, codec, parameters);\n                }\n            }\n        }\n    }\n\n    private ImageCodecInfo GetEncoderInfo(string mimeType)\n    {\n        foreach (ImageCodecInfo codec in ImageCodecInfo.GetImageEncoders())\n        {\n            if (codec.MimeType == mimeType)\n            {\n                return codec;\n            }\n        }\n        return null;\n    }\n}