public class RememberUrlAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        var httpContext = filterContext.HttpContext;\n\n        if (httpContext.Request.RequestType == "GET" && !httpContext.Request.IsAjaxRequest())\n        {\n            Session["PreviousUrl"] = Session["CurrentUrl"] ?? httpContext.Request.Url;\n            Session["CurrentUrl"] = httpContext.Request.Url;\n        }\n    }\n}