public static Broker GetBroker(List<Broker> brokers, int totalWeight)\n{\n    int randomNumber = _rnd.Next(0, totalWeight);\n    int cumulativeWeight = 0;\n\n    foreach (Broker broker in brokers)\n    {\n        cumulativeWeight += broker.Weight;\n        if (randomNumber < cumulativeWeight)\n        {\n            return broker;\n        }\n    }\n\n    // Should never reach this point, but return null just in case\n    return null;\n}