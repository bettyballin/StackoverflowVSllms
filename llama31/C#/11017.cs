using System;\nusing System.IO;\nusing System.Web;\n\npublic class SubdomainRewriter : IHttpModule\n{\n    public void Init(HttpApplication context)\n    {\n        context.BeginRequest += new EventHandler(context_BeginRequest);\n    }\n\n    void context_BeginRequest(object sender, EventArgs e)\n    {\n        HttpApplication app = (HttpApplication)sender;\n        HttpRequest request = app.Request;\n\n        // Parse the subdomain from the request URL\n        string subdomain = request.Url.Host.Split('.')[0];\n\n        // Rewrite the URL to point to the subdomain folder\n        string rewritePath = string.Format("/subdomains/{0}", subdomain);\n\n        // Check if the subdomain folder exists\n        if (Directory.Exists(app.Server.MapPath(rewritePath)))\n        {\n            app.Context.RewritePath(rewritePath);\n        }\n        else\n        {\n            // Handle unknown subdomain (e.g., return 404 error)\n        }\n    }\n\n    public void Dispose() { }\n}