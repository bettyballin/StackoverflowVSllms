using System.Data.SqlClient;\n\npublic class DataAccess\n{\n    private readonly string _connectionString;\n\n    public DataAccess(string connectionString)\n    {\n        _connectionString = connectionString;\n    }\n\n    public IEnumerable<MyEntity> GetEntities()\n    {\n        using (var connection = new SqlConnection(_connectionString))\n        {\n            connection.Open();\n\n            using (var command = new SqlCommand("SELECT * FROM MyTable", connection))\n            {\n                using (var reader = command.ExecuteReader())\n                {\n                    while (reader.Read())\n                    {\n                        yield return new MyEntity\n                        {\n                            Id = reader["Id"].ToInt32(),\n                            Name = reader["Name"].ToString()\n                        };\n                    }\n                }\n            }\n        }\n    }\n}