[DataContract]\npublic class ProductQuery\n{\n    [DataMember]\n    public string Category { get; set; }\n\n    [DataMember]\n    public decimal? MinPrice { get; set; }\n\n    [DataMember]\n    public decimal? MaxPrice { get; set; }\n}\n\n[ServiceContract]\npublic class ProductService\n{\n    [OperationContract]\n    public List<Product> GetProducts(ProductQuery query)\n    {\n        var criteria = new DetachedCriteria.For<Product>()\n            .Add(query.Category != null, Restrictions.Eq("Category", query.Category))\n            .Add(query.MinPrice.HasValue, Restrictions.Ge("Price", query.MinPrice))\n            .Add(query.MaxPrice.HasValue, Restrictions.Le("Price", query.MaxPrice));\n\n        // Execute the query using the NHibernate session\n        using (var session = NHibernateHelper.OpenSession())\n        {\n            return criteria.GetExecutableCriteria(session).List<Product>();\n        }\n    }\n}