string itemsXML = @"\n    <items>\n        <item>\n            <id>i1</id>\n            <name>item1</name>\n            <subitems>\n                <name>subitem1</name>\n                <name>subitem2</name>\n            </subitems>\n        </item>\n        <item>\n            <id>i2</id>\n            <name>item2</name>\n            <subitems>\n                <name>subitem1</name>\n                <name>subitem2</name>\n            </subitems>\n        </item>\n    </items>";\n\nMemoryStream itemsStream = new MemoryStream(Encoding.ASCII.GetBytes(itemsXML));\nDataSet itemsSet = new DataSet();\nitemsSet.ReadXml(itemsStream, XmlReadMode.InferSchema);\n\n// Get the item table\nDataTable itemTable = itemsSet.Tables["item"];\n\n// Get the subitems table\nDataTable subitemsTable = itemsSet.Tables["subitems"];\n\n// Get the relationship between item and subitems\nDataRelation itemSubitemsRelation = itemsSet.Relations["item_subitems"];\n\n// Iterate through the item table\nforeach (DataRow itemRow in itemTable.Rows)\n{\n    Console.WriteLine("column id=" + itemRow["id"] as string + " name=" + itemRow["name"] as string);\n\n    // Get the related subitems\n    DataRow[] subitemsRows = itemRow.GetChildRows(itemSubitemsRelation);\n    foreach (DataRow subitemRow in subitemsRows)\n    {\n        Console.WriteLine("  subitem: " + subitemRow["name"] as string);\n    }\n}