using Microsoft.SharePoint;\n\npublic class PrioritySorter : SPItemEventReceiver\n{\n    public override void ItemAdded(SPItemEventProperties properties)\n    {\n        base.ItemAdded(properties);\n        SortList(properties.List);\n    }\n\n    public override void ItemUpdated(SPItemEventProperties properties)\n    {\n        base.ItemUpdated(properties);\n        SortList(properties.List);\n    }\n\n    private void SortList(SPList list)\n    {\n        SPQuery query = new SPQuery(list);\n        query.Query = "<OrderBy><FieldRef Name='Priority' Ascending='True' /></OrderBy>";\n        SPListItemCollection items = list.GetItems(query);\n\n        int priority = 1;\n        foreach (SPListItem item in items)\n        {\n            item["Priority"] = priority++;\n            item.SystemUpdate(false);\n        }\n    }\n}