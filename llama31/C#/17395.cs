private List<string> GetColumnNames(GridView gridView)\n{\n    List<string> columnNames = new List<string>();\n\n    foreach (DataControlField field in gridView.Columns)\n    {\n        if (field is TemplateField)\n        {\n            TemplateField templateField = (TemplateField)field;\n            Control template = templateField.ItemTemplate.InstantiateIn(gridView);\n\n            foreach (Control control in template.Controls)\n            {\n                if (control is Label)\n                {\n                    Label label = (Label)control;\n                    string dataBindingExpression = label.Text.Trim();\n\n                    if (dataBindingExpression.StartsWith("<%#") && dataBindingExpression.EndsWith("%>"))\n                    {\n                        string columnName = dataBindingExpression.Substring(4, dataBindingExpression.Length - 6);\n                        columnNames.Add(columnName);\n                    }\n                }\n            }\n        }\n    }\n\n    return columnNames;\n}