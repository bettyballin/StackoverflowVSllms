using (var stream = new FileStream("file.txt", FileMode.Create, FileAccess.Write, FileShare.None, 4096, FileOptions.DeleteOnClose))\n{\n    using (var writer = new StreamWriter(stream))\n    {\n        writer.Write(i);\n    }\n}