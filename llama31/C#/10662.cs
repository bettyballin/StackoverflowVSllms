// Create a DynamicMethod\nDynamicMethod method = new DynamicMethod(\n    "MyMethod",\n    typeof(void),\n    new Type[] { typeof(MyClass), typeof(TextWriter) }\n);\n\n// Generate the IL code\nILGenerator il = method.GetILGenerator();\n// ...\n\n// Create an instance of MyClass and a TextWriter\nMyClass obj = new MyClass();\nTextWriter writer = new StringWriter();\n\n// Call the dynamic method\nmethod.Invoke(null, new object[] { obj, writer });