using System.IO;\nusing System.IO.Compression;\n\npublic class compressionFilter : Stream\n{\n    private readonly Stream _outputStream;\n    private readonly GZipStream _gzipStream;\n\n    public compressionFilter(Stream outputStream)\n    {\n        _outputStream = outputStream;\n        _gzipStream = new GZipStream(outputStream, CompressionMode.Compress);\n    }\n\n    public override void Write(byte[] buffer, int offset, int count)\n    {\n        _gzipStream.Write(buffer, offset, count);\n    }\n\n    public override void Close()\n    {\n        _gzipStream.Close();\n        _outputStream.Close();\n    }\n}