using System;\nusing System.Net;\nusing System.Xml;\n\npublic class USPSApi\n{\n    private string _apiKey;\n    private string _apiUrl = "http://production.shippingapis.com/ShippingAPI.dll";\n\n    public USPSApi(string apiKey)\n    {\n        _apiKey = apiKey;\n    }\n\n    public string GetCounty(string zip)\n    {\n        string xml = string.Format("<CityStateLookupRequest USERID=\"{0}\">" +\n                                   "<ZipCode ID=\"0\"><Zip5>{1}</Zip5></ZipCode>" +\n                                   "</CityStateLookupRequest>", _apiKey, zip);\n\n        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(_apiUrl);\n        request.Method = "POST";\n        request.ContentType = "text/xml";\n\n        using (Stream requestStream = request.GetRequestStream())\n        {\n            byte[] bytes = Encoding.UTF8.GetBytes(xml);\n            requestStream.Write(bytes, 0, bytes.Length);\n        }\n\n        HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n        string responseXml = new StreamReader(response.GetResponseStream()).ReadToEnd();\n\n        XmlDocument xmlDoc = new XmlDocument();\n        xmlDoc.LoadXml(responseXml);\n\n        XmlNode countyNode = xmlDoc.SelectSingleNode("//County");\n        return countyNode.InnerText;\n    }\n}