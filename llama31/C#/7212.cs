public static int BinarySearch<T>(this List<T> list, Func<T, int> compare)\n{\n    int left = 0;\n    int right = list.Count - 1;\n\n    while (left <= right)\n    {\n        int mid = left + (right - left) / 2;\n        int result = compare(list[mid]);\n\n        if (result < 0)\n        {\n            right = mid - 1;\n        }\n        else if (result > 0)\n        {\n            left = mid + 1;\n        }\n        else\n        {\n            return mid;\n        }\n    }\n\n    return -1; // not found\n}