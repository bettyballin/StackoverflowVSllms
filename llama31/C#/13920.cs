using Microsoft.TeamFoundation.Client;\nusing Microsoft.TeamFoundation.VersionControl.Client;\n\n// Connect to TFS\nTfsTeamProjectCollection collection = new TfsTeamProjectCollection(new Uri("http://your-tfs-server:8080/tfs/your-collection"));\ncollection.EnsureAuthenticated();\n\n// Get the version control server\nVersionControlServer vcs = collection.GetService<VersionControlServer>();\n\n// Get the file history with labels\nItem item = vcs.GetItem("$/path/to/your/file.cs");\nItemSet items = vcs.QueryHistory(item.ServerItem, VersionSpec.Latest, 0, RecursionType.Full, null, null, true, true);\n\n// Iterate through the items and display the labels\nforeach (Item i in items.Items)\n{\n    foreach (Label l in i.Labels)\n    {\n        Console.WriteLine(string.Format("Label: {0}, Changeset: {1}", l.Name, i.ChangesetId));\n    }\n}