public class CustomerService\n{\n    private readonly IUnitOfWork _unitOfWork;\n    private readonly ICustomerRepository _customerRepository;\n    private readonly IOrderRepository _orderRepository;\n\n    public CustomerService(IUnitOfWork unitOfWork, ICustomerRepository customerRepository, IOrderRepository orderRepository)\n    {\n        _unitOfWork = unitOfWork;\n        _customerRepository = customerRepository;\n        _orderRepository = orderRepository;\n    }\n\n    public void CreateCustomerAndOrder(Customer customer, Order order)\n    {\n        _unitOfWork.BeginTransaction();\n\n        try\n        {\n            _customerRepository.CreateCustomer(customer);\n            _orderRepository.CreateOrder(order);\n\n            _unitOfWork.Commit();\n        }\n        catch (Exception ex)\n        {\n            _unitOfWork.Rollback();\n            throw;\n        }\n    }\n}