using System;\nusing System.IO;\nusing System.Text.RegularExpressions;\n\npublic class NaturalSortComparer : IComparer<FileInfo>\n{\n    private static readonly Regex _re = new Regex(@"(\d+)");\n\n    public int Compare(FileInfo x, FileInfo y)\n    {\n        var xParts = _re.Split(x.Name);\n        var yParts = _re.Split(y.Name);\n\n        for (int i = 0; i < Math.Min(xParts.Length, yParts.Length); i++)\n        {\n            if (xParts[i] == yParts[i]) continue;\n\n            if (int.TryParse(xParts[i], out int xNumber) && int.TryParse(yParts[i], out int yNumber))\n            {\n                return xNumber.CompareTo(yNumber);\n            }\n            else\n            {\n                return string.Compare(xParts[i], yParts[i], StringComparison.OrdinalIgnoreCase);\n            }\n        }\n\n        return xParts.Length.CompareTo(yParts.Length);\n    }\n}