using System;\nusing System.Xml;\nusing System.Xml.Schema;\nusing HtmlAgilityPack;\n\npublic class HtmlValidator\n{\n    public bool IsValid { get; set; }\n    public string Doctype { get; set; }\n    public string[] Errors { get; set; }\n\n    public HtmlValidator(string html)\n    {\n        var doc = new HtmlDocument();\n        doc.LoadHtml(html);\n\n        // Get the DOCTYPE\n        var doctypeNode = doc.DocumentNode.SelectSingleNode("//doctype");\n        if (doctypeNode != null)\n        {\n            Doctype = doctypeNode.InnerText.Trim();\n        }\n\n        // Validate against XHTML schema\n        var xhtmlSchema = new XmlSchema();\n        xhtmlSchema.Source = "http://www.w3.org/2002/08/xhtml/xhtml1-strict.xsd";\n\n        var xmlDoc = new XmlDocument();\n        xmlDoc.LoadXml(doc.DocumentNode.OuterHtml);\n\n        var validationErrors = new List<string>();\n        xmlDoc.Schemas.Add(xhtmlSchema);\n        xmlDoc.Validate((sender, args) =>\n        {\n            if (args.Severity == XmlSeverityType.Error)\n            {\n                validationErrors.Add(args.Message);\n            }\n        });\n\n        IsValid = validationErrors.Count == 0;\n        Errors = validationErrors.ToArray();\n    }\n}