using System;\nusing System.Linq.Expressions;\n\npublic class SqlExpressionVisitor : ExpressionVisitor\n{\n    private StringBuilder _sql = new StringBuilder();\n\n    protected override Expression VisitBinary(BinaryExpression node)\n    {\n        _sql.Append("(");\n        Visit(node.Left);\n        _sql.Append(node.NodeType == ExpressionType.AndAlso ? " AND " : " OR ");\n        Visit(node.Right);\n        _sql.Append(")");\n        return node;\n    }\n\n    protected override Expression VisitMember(MemberExpression node)\n    {\n        _sql.Append(node.Member.Name);\n        return node;\n    }\n\n    protected override Expression VisitConstant(ConstantExpression node)\n    {\n        _sql.Append("'" + node.Value.ToString() + "'");\n        return node;\n    }\n\n    public string GetSql(Expression expression)\n    {\n        Visit(expression);\n        return _sql.ToString();\n    }\n}