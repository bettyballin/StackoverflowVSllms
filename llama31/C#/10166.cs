public class CustomClientMessageInspector : IClientMessageInspector\n{\n    public void AfterReceiveReply(ref Message reply, object correlationState)\n    {\n        var httpResponse = reply.Properties["httpResponse"] as HttpResponseMessageProperty;\n        if (httpResponse != null && httpResponse.StatusCode >= HttpStatusCode.BadRequest)\n        {\n            throw new WebException((int)httpResponse.StatusCode, httpResponse.StatusDescription);\n        }\n    }\n\n    public object BeforeSendRequest(ref Message request, IClientChannel channel)\n    {\n        return null;\n    }\n}