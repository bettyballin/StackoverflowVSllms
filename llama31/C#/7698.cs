public class CustomSession\n{\n    private Dictionary<string, object> _sessionVariables = new Dictionary<string, object>();\n    private Dictionary<string, TimeSpan> _timeouts = new Dictionary<string, TimeSpan>();\n\n    public void SetVariable(string key, object value, TimeSpan timeout)\n    {\n        _sessionVariables[key] = value;\n        _timeouts[key] = timeout;\n    }\n\n    public object GetVariable(string key)\n    {\n        if (_sessionVariables.ContainsKey(key))\n        {\n            var timeout = _timeouts[key];\n            if (DateTime.Now - _sessionVariables[key].Timestamp > timeout)\n            {\n                // Remove the variable if it has timed out\n                _sessionVariables.Remove(key);\n                _timeouts.Remove(key);\n                return null;\n            }\n            return _sessionVariables[key];\n        }\n        return null;\n    }\n}