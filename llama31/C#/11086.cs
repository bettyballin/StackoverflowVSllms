using MimeKit;\nusing MimeKit.Cryptography;\n\n// Create a new message\nvar message = new MimeMessage();\n\n// Set the sender and recipient\nmessage.From.Add(new MailboxAddress("Sender", "sender@example.com"));\nmessage.To.Add(new MailboxAddress("Recipient", "recipient@example.com"));\n\n// Set the subject and body\nmessage.Subject = "Signed and Encrypted Email";\nmessage.Body = new TextPart("plain") { Text = "Hello, world!" };\n\n// Load the sender's certificate and private key\nvar certificate = new X509Certificate2("sender.crt", "password");\nvar privateKey = certificate.GetRSAPrivateKey();\n\n// Sign the message\nvar signedMessage = MultipartSigned.Create(certificate, privateKey, message);\n\n// Load the recipient's certificate\nvar recipientCertificate = new X509Certificate2("recipient.crt");\n\n// Encrypt the message\nvar encryptedMessage = MultipartEncrypted.Create(recipientCertificate, signedMessage);\n\n// Send the encrypted message\nusing (var smtpClient = new SmtpClient())\n{\n    smtpClient.Send(encryptedMessage);\n}