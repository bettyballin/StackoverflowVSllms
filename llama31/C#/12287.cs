using MailKit.Net.Smtp;\nusing MailKit.Security;\n\nvar message = new MimeMessage();\nmessage.From.Add(new MailboxAddress("from@example.com"));\nmessage.To.Add(new MailboxAddress("to@example.com"));\nmessage.Subject = "Test Email";\nmessage.Body = new TextPart("This is a test email");\n\nusing (var client = new SmtpClient())\n{\n    client.Connect("smtp.example.com", 587, SecureSocketOptions.StartTls);\n    client.Authenticate("username", "password");\n\n    // Set the HTTP proxy details\n    client.Proxy = new HttpProxy("http://proxy-server:8080");\n\n    client.Send(message);\n    client.Disconnect(true);\n}