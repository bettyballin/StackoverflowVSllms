// ...\n\nHttpWebResponse response = (HttpWebResponse)request.GetResponse();\nStream responsestream = response.GetResponseStream();\n\n// Get the cookies from the response\nCookieCollection cookies = response.Cookies;\n\n// Construct the HTTP response headers\nStringBuilder headers = new StringBuilder();\nheaders.AppendLine("HTTP/1.1 " + response.StatusCode + " " + response.StatusDescription);\nheaders.AppendLine("Content-Type: " + response.ContentType);\n\n// Add the Set-Cookie headers\nforeach (Cookie cookie in cookies)\n{\n    headers.AppendLine("Set-Cookie: " + cookie.Name + "=" + cookie.Value + "; Path=/");\n}\n\n// Send the headers to the client\nbyte[] headerBuffer = Encoding.ASCII.GetBytes(headers.ToString());\nsoket.Send(headerBuffer, headerBuffer.Length, 0);\n\n// Send the response body to the client\nbyte[] buffer = new byte[bz];\nrebu = responsestream.Read(buffer, 0, bz);\nwhile (rebu != 0)\n{\n    soket.Send(buffer, rebu, 0);\n    rebu = responsestream.Read(buffer, 0, bz);\n}