public class CustomServiceHostFactory : ServiceHostFactory\n{\n    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)\n    {\n        var host = base.CreateServiceHost(serviceType, baseAddresses);\n\n        host.Closed += (sender, args) => FreeResources();\n        host.Faulted += (sender, args) => FreeResources();\n\n        return host;\n    }\n\n    private void FreeResources()\n    {\n        // Free your application-wide resources here\n    }\n}