Container.Register(\n    AllTypes.Pick()\n    .FromAssemblyNamed("MyAssembly")\n    .If(t => t.Name.EndsWith("ABC"))\n    .Configure(c => \n    {\n        c.LifeStyle.Is(LifestyleType.Transient);\n        c.DynamicParameters((k, d) => d["P"] = Container.Resolve<A>("foo"));\n    })\n    .WithService.Select(i => typeof(I))\n);\n\nContainer.Register(\n    AllTypes.Pick()\n    .FromAssemblyNamed("MyAssembly")\n    .If(t => t.Name.EndsWith("123"))\n    .Configure(c => \n    {\n        c.LifeStyle.Is(LifestyleType.Transient);\n        c.DynamicParameters((k, d) => d["P"] = Container.Resolve<B>("foobar"));\n    })\n    .WithService.Select(i => typeof(I))\n);