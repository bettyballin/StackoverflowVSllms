[ServiceContract]\npublic interface IDataService\n{\n    [OperationContract]\n    DataSet GetData();\n\n    [OperationContract]\n    void SubscribeForUpdates();\n\n    [OperationContract]\n    void UnsubscribeForUpdates();\n}\n\n[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]\npublic class DataService : IDataService\n{\n    private DataSet _data;\n    private List<ICallback> _subscribers = new List<ICallback>();\n\n    public DataSet GetData()\n    {\n        return _data;\n    }\n\n    public void SubscribeForUpdates()\n    {\n        ICallback callback = OperationContext.Current.GetCallbackChannel<ICallback>();\n        _subscribers.Add(callback);\n    }\n\n    public void UnsubscribeForUpdates()\n    {\n        ICallback callback = OperationContext.Current.GetCallbackChannel<ICallback>();\n        _subscribers.Remove(callback);\n    }\n\n    private void NotifySubscribers()\n    {\n        foreach (ICallback subscriber in _subscribers)\n        {\n            subscriber.Update(_data);\n        }\n    }\n}\n\npublic interface ICallback\n{\n    [OperationContract(IsOneWay = true)]\n    void Update(DataSet data);\n}