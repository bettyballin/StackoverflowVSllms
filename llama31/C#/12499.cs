using System.Web.Http;\n\nnamespace MyApi.Controllers\n{\n    public class ProductsController : ApiController\n    {\n        private readonly IProductRepository _repository;\n\n        public ProductsController(IProductRepository repository)\n        {\n            _repository = repository;\n        }\n\n        // GET api/products\n        public IHttpActionResult Get()\n        {\n            return Ok(_repository.GetAll());\n        }\n\n        // GET api/products/1\n        public IHttpActionResult Get(int id)\n        {\n            var product = _repository.Get(id);\n            if (product == null)\n            {\n                return NotFound();\n            }\n            return Ok(product);\n        }\n\n        // POST api/products\n        public IHttpActionResult Post(Product product)\n        {\n            _repository.Create(product);\n            return CreatedAtRoute("DefaultApi", new { id = product.Id }, product);\n        }\n\n        // PUT api/products/1\n        public IHttpActionResult Put(int id, Product product)\n        {\n            if (id != product.Id)\n            {\n                return BadRequest();\n            }\n            _repository.Update(product);\n            return Ok();\n        }\n\n        // DELETE api/products/1\n        public IHttpActionResult Delete(int id)\n        {\n            _repository.Delete(id);\n            return Ok();\n        }\n    }\n}