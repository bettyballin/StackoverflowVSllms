public class SomeDataClass : IDisposable\n{\n    private SqlConnection _conn;\n\n    // constructors and methods\n\n    private void DoSomethingWithTheSqlConnection()\n    {\n        // some code excluded for brevity\n\n        try\n        {\n            using (SqlCommand cmd = new SqlCommand(SqlQuery.CountSomething, _conn))\n            {\n                _conn.Open();\n                countOfSomething = Convert.ToInt32(cmd.ExecuteScalar());\n            }\n        }\n        catch (Exception ex)\n        {\n            // handle the exception, e.g., log it\n        }\n        finally\n        {\n            if (_conn != null)\n            {\n                if (_conn.State != ConnectionState.Closed)\n                {\n                    _conn.Close();\n                }\n                _conn.Dispose();\n            }\n        }\n\n        // some code excluded for brevity\n    }\n\n    public void Dispose()\n    {\n        Dispose(true);\n        GC.SuppressFinalize(this);\n    }\n\n    protected virtual void Dispose(bool disposing)\n    {\n        if (disposing)\n        {\n            if (_conn != null)\n            {\n                _conn.Dispose();\n                _conn = null;\n            }\n        }\n    }\n}