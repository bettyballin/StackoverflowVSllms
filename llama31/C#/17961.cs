using System.Data.SqlClient;\n\n// ...\n\nusing (SqlConnection connection = new SqlConnection(connectionString))\n{\n    connection.Open();\n\n    // Verify SQL Server write permission\n    SqlCommand command = new SqlCommand("SELECT IS_MEMBER('db_datawriter') AS HasWritePermission", connection);\n    int writePermission = (int)command.ExecuteScalar();\n    if (writePermission != 1)\n    {\n        // Handle error: user does not have write permission\n    }\n\n    // Verify user permission to add books by a specific publisher\n    command = new SqlCommand("SELECT CASE WHEN EXISTS (...) THEN 1 ELSE 0 END AS HasPermission", connection);\n    command.Parameters.AddWithValue("@Publisher", publisherName);\n    int permission = (int)command.ExecuteScalar();\n    if (permission != 1)\n    {\n        // Handle error: user does not have permission to add books by this publisher\n    }\n\n    // If both conditions are met, add the data\n    if (writePermission == 1 && permission == 1)\n    {\n        // Add the book to the database\n    }\n}