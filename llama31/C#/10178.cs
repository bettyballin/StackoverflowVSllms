var nodes = new[]\n{\n    new Node { Id = 1, Name = "TOP CHILD", ParentId = null },\n    new Node { Id = 2, Name = "Child C", ParentId = 3 },\n    new Node { Id = 3, Name = "Child B", ParentId = 4 },\n    new Node { Id = 4, Name = "Child A", ParentId = 1 },\n};\n\nvar sortedNodes = SortHierarchy(nodes);\n\nforeach (var node in sortedNodes)\n{\n    Console.WriteLine($"{node.Id} | {node.Name} | {node.ParentId}");\n}