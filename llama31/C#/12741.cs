using System;\nusing System.Net;\nusing System.Net.Sockets;\nusing System.Text;\nusing System.Threading;\n\nclass Program\n{\n    private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);\n    private static readonly int port = 12345;\n    private static readonly string serverIp = "127.0.0.1";\n\n    static void Main(string[] args)\n    {\n        StartServer();\n        StartClient();\n    }\n\n    private static void StartServer()\n    {\n        new Thread(() =>\n        {\n            log.Info("Server started");\n            TcpListener server = new TcpListener(IPAddress.Parse(serverIp), port);\n            server.Start();\n\n            TcpClient client = server.AcceptTcpClient();\n            log.Info("Client connected");\n\n            while (true)\n            {\n                NetworkStream stream = client.GetStream();\n                byte[] buffer = new byte[1024];\n                int bytesRead = stream.Read(buffer, 0, buffer.Length);\n                string data = Encoding.UTF8.GetString(buffer, 0, bytesRead);\n                log.Info("Received: " + data);\n            }\n        }).Start();\n    }\n\n    private static void StartClient()\n    {\n        new Thread(() =>\n        {\n            TcpClient client = new TcpClient();\n            client.Connect(serverIp, port);\n\n            while (true)\n            {\n                Thread.Sleep(1000);\n                string packet = "Hello, world!";\n                SendPacket(client, packet);\n            }\n        }).Start();\n    }\n\n    private static void SendPacket(TcpClient client, string packet)\n    {\n        NetworkStream stream = client.GetStream();\n        byte[] data = Encoding.UTF8.GetBytes(packet);\n        stream.Write(data, 0, data.Length);\n        log.Info("Sent: " + packet);\n    }\n}