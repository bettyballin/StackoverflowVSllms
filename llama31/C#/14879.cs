[AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]\npublic ActionResult Edit(int id, FormCollection formCollection)\n{\n    var product = productsRepository.GetProduct(id);\n\n    if (formCollection["btnSave"] != null)\n    {\n        // Update product properties\n        if (TryUpdateModel(product))\n        {\n            // Update images collection\n            var images = product.Images.ToList();\n            for (int i = 0; i < images.Count; i++)\n            {\n                var image = images[i];\n                var imagePrefix = "images[" + i + "]";\n                image.ID = int.Parse(formCollection[imagePrefix + "ID"]);\n                image.Description = formCollection[imagePrefix + "Description"];\n                image.Order = int.Parse(formCollection[imagePrefix + "Order"]);\n            }\n\n            productsRepository.Save();\n\n            return RedirectToAction("Details", new { id = product.ID });\n        }\n\n        return View(ContentViewModel.Create(product));\n    }\n\n    return RedirectToAction("Details", new { id = product.ID });\n}