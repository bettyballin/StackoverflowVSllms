private void OnMouseMove(object sender, MouseEventArgs e)\n{\n    Point mousePosition = e.GetPosition(this);\n    IInputElement inputElement = this.InputHitTest(mousePosition);\n    if (inputElement != null)\n    {\n        // inputElement is the topmost element under the mouse\n        var elementsUnderMouse = GetElementsUnderMouse(inputElement);\n        // elementsUnderMouse now contains the elements under the mouse\n    }\n}\n\nprivate List<DependencyObject> GetElementsUnderMouse(IInputElement inputElement)\n{\n    var elements = new List<DependencyObject>();\n    var visual = inputElement as Visual;\n    while (visual != null)\n    {\n        elements.Add(visual);\n        visual = (Visual)VisualTreeHelper.GetParent(visual);\n    }\n    return elements;\n}