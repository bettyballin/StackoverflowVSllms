public static int MostFreq(int[] _M, out int x)\n{\n    var frequency = new Dictionary<int, int>();\n    int maxFrequency = 0;\n    x = 0;\n\n    foreach (var num in _M)\n    {\n        if (frequency.ContainsKey(num))\n        {\n            frequency[num]++;\n        }\n        else\n        {\n            frequency[num] = 1;\n        }\n\n        if (frequency[num] > maxFrequency)\n        {\n            maxFrequency = frequency[num];\n            x = num;\n        }\n    }\n\n    return maxFrequency;\n}