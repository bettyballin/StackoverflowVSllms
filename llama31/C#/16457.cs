HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.Public);\nHttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(true);\nif(imgRepGetCache.DateCached.HasValue)\n    HttpContext.Current.Response.Cache.SetLastModified(imgRepGetCache.DateCached.Value);\nHttpContext.Current.Response.Cache.SetExpires(DateTime.Now.AddDays(2));\nHttpContext.Current.Response.Cache.SetETag(GetETag(imageBytes)); // Use a robust ETag generation method\nHttpContext.Current.Response.ContentType = "image/jpeg";\nHttpContext.Current.Response.BinaryWrite(imageBytes);\n\n// ...\n\nprivate string GetETag(byte[] data)\n{\n    using (var md5 = System.Security.Cryptography.MD5.Create())\n    {\n        byte[] hash = md5.ComputeHash(data);\n        return Convert.ToBase64String(hash);\n    }\n}