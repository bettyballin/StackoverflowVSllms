using NLog;\nusing NLog.Targets;\nusing System.Data.Linq;\n\npublic class LinqToSqlTarget : Target\n{\n    private readonly DataContext _dataContext;\n\n    public LinqToSqlTarget(DataContext dataContext)\n    {\n        _dataContext = dataContext;\n    }\n\n    protected override void Write(LogEventInfo logEvent)\n    {\n        LogEntry logEntry = new LogEntry\n        {\n            Date = logEvent.TimeStamp,\n            Level = logEvent.Level.Name,\n            Message = logEvent.FormattedMessage,\n            Exception = logEvent.Exception.ToString()\n        };\n\n        _dataContext.GetTable<LogEntry>().InsertOnSubmit(logEntry);\n        _dataContext.SubmitChanges();\n    }\n}\n\npublic class LogEntry\n{\n    public DateTime Date { get; set; }\n    public string Level { get; set; }\n    public string Message { get; set; }\n    public string Exception { get; set; }\n}