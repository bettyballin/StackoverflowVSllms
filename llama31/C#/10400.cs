using System.Security.Cryptography;\nusing System.Text;\n\npublic class ViewStateMacGenerator\n{\n    private string _validationKey;\n\n    public ViewStateMacGenerator(string validationKey)\n    {\n        _validationKey = validationKey;\n    }\n\n    public string ComputeMac(string viewState)\n    {\n        byte[] viewStateBytes = Encoding.UTF8.GetBytes(viewState);\n        byte[] validationKeyBytes = Encoding.UTF8.GetBytes(_validationKey);\n\n        using (HMACSHA1 hmac = new HMACSHA1(validationKeyBytes))\n        {\n            byte[] macBytes = hmac.ComputeHash(viewStateBytes);\n            return Convert.ToBase64String(macBytes);\n        }\n    }\n}