using System.Security.Cryptography.X509Certificates;\n\nclass SelfSignedCertificate\n{\n    public static X509Certificate2 CreateSelfSignedCertificate(string subjectName)\n    {\n        using (var rsa = RSA.Create(2048))\n        {\n            var certRequest = new CertificateRequest(subjectName, rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);\n            certRequest.CertificateExtensions.Add(new X509SubjectAlternativeNameExtension(new[] { "localhost" }, false));\n\n            using (var cert = certRequest.CreateSelfSigned(DateTime.UtcNow, DateTime.UtcNow.AddYears(1)))\n            {\n                return new X509Certificate2(cert.Export(X509ContentType.Pfx));\n            }\n        }\n    }\n}