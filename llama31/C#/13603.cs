void MethodA()\n{\n    try\n    {\n        stream.Read(...);\n    }\n    catch (IOException ioexc1)\n    {\n        if (OkToCallUnmanaged())\n        {\n            MethodC(ioexc1);\n        }\n        else\n        {\n            throw ioexc1;\n        }\n    }\n}\n\nvoid MethodC(IOException ioexc1)\n{\n    uint hr = (uint) Marshal.GetHRForException(ioexc1);\n    if (hr == ...) \n        do_one_thing();\n    else\n        do_another();\n}\n\nbool OkToCallUnmanaged()\n{\n    SecurityPermission permission = new SecurityPermission(SecurityPermissionFlag.UnmanagedCode);\n    try\n    {\n        permission.Demand();\n        return true;\n    }\n    catch (SecurityException)\n    {\n        return false;\n    }\n}