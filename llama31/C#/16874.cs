int totalGridSize = iSquare * iSquare;\nint gridSize = iSquare;\n\nint offset = 0;\nfor (int gridRow = 0; gridRow < gridSize; gridRow++)\n{\n    int rowOffset = offset;\n    int interleavedRowOffset = 0;\n    for (int gridCol = 0; gridCol < gridSize; gridCol++)\n    {\n        int columnOffset = rowOffset;\n        int interleavedColumnOffset = interleavedRowOffset;\n        for (int row = 0; row < gridSize; row++)\n        {\n            int cellOffset = columnOffset + row;\n            gridbox[cellOffset] = interleavedColumnOffset + row;\n            gridbox1[gridbox[cellOffset]] = columnOffset;\n        }\n        rowOffset += gridSize;\n        interleavedRowOffset += totalGridSize;\n    }\n    offset += totalGridSize * gridSize;\n}