using System.IO;\nusing Microsoft.SqlServer.Server;\n\npublic partial class StoredProcedures\n{\n    [SqlProcedure]\n    public static void DirScan(string directoryPath)\n    {\n        // Get files and directories\n        string[] files = Directory.GetFiles(directoryPath);\n        string[] dirs = Directory.GetDirectories(directoryPath);\n\n        // Process files and directories\n        foreach (string file in files)\n        {\n            SqlContext.Pipe.Send(file);\n        }\n        foreach (string dir in dirs)\n        {\n            SqlContext.Pipe.Send(dir);\n        }\n    }\n}