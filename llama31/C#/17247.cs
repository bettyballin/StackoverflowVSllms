using (var s = _sessionFactory.OpenSession())\nusing (var t = s.BeginTransaction(IsolationLevel.RepeatableRead))\n{\n    var taskToSave = new Task\n                         {\n                             Class = "test class",\n                             IsActive = true,\n                             Namespace = "test namespace"\n                         };\n\n    s.FlushMode = FlushMode.Commit;\n    s.Save(taskToSave);\n    s.Flush(); // Add this line\n    t.Commit();\n}