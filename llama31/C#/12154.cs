HttpResponse response = HttpContext.Current.Response;\nresponse.BufferOutput = false;\nresponse.ContentType = "application/octet-stream";\nresponse.AppendHeader("Content-Disposition", "attachment; filename=file.txt");\n\n// Generate data in chunks\nbyte[] buffer = new byte[4096];\nwhile (/* generate data */)\n{\n    int bytesRead = /* fill buffer */;\n    response.OutputStream.Write(buffer, 0, bytesRead);\n    response.Flush();\n}\nresponse.End();