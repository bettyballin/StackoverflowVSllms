using System;\nusing System.IO;\nusing System.Data.SqlClient;\n\n// Assuming you have a User class with an ID property\npublic class ImageUploader\n{\n    private string _uploadPath; // Path to the upload directory\n    private string _dbConnectionString; // Connection string to your database\n\n    public void UploadImage(User user, HttpPostedFile file)\n    {\n        // Generate a unique filename\n        string filename = Guid.NewGuid().ToString("N") + Path.GetExtension(file.FileName);\n\n        // Store the image on the filesystem\n        string filePath = Path.Combine(_uploadPath, filename);\n        file.SaveAs(filePath);\n\n        // Store metadata in the database\n        using (SqlConnection connection = new SqlConnection(_dbConnectionString))\n        {\n            connection.Open();\n            SqlCommand command = new SqlCommand("INSERT INTO Images (UserId, Filename, Timestamp) VALUES (@UserId, @Filename, @Timestamp)", connection);\n            command.Parameters.AddWithValue("@UserId", user.ID);\n            command.Parameters.AddWithValue("@Filename", filename);\n            command.Parameters.AddWithValue("@Timestamp", DateTime.Now);\n            command.ExecuteNonQuery();\n        }\n    }\n}