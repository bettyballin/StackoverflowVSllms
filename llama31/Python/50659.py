import wx\n\nclass BuildProcess(wx.Process):\n    def __init__(self, cmd, notify=None):\n        wx.Process.__init__(self, notify)\n        print "Constructing a build process"\n        self.Redirect()\n        self.cmd = cmd\n        self.pid = None\n        self.timer = wx.Timer(self)\n        self.Bind(wx.EVT_TIMER, self.on_timer, self.timer)\n\n    def start(self):\n        print "Starting the process"\n        self.pid = wx.Execute(self.cmd, wx.EXEC_ASYNC, self)\n        self.timer.Start(100, True)  # check every 100ms\n        print "Started."\n\n    def on_timer(self, evt):\n        stream = self.GetInputStream()\n        if stream.CanRead():\n            text = stream.read()\n            wx.PostEvent(self, BuildEvent(EVT_BUILD_UPDATE, self, data=text))\n            print text\n        else:\n            self.timer.Start(100, True)  # restart timer\n\n    def OnTerminate(self, *args, **kwargs):\n        wx.Process.OnTerminate(self, *args, **kwargs)\n        print "Terminating"\n        self.timer.Stop()