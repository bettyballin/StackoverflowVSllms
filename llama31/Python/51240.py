import urllib2\n\n# Define the proxy settings\nproxy_info = {\n    'host': 'myproxy.com',\n    'user': Username,\n    'pass': Password,\n    'port': 1080\n}\n\n# Define the exceptions list\nexceptions = ['example.com', 'localhost']\n\n# Create a custom ProxyHandler\nclass CustomProxyHandler(urllib2.ProxyHandler):\n    def __init__(self, proxy_dict, exceptions):\n        self.proxy_dict = proxy_dict\n        self.exceptions = exceptions\n\n    def proxy_open(self, request):\n        if request.get_host() in self.exceptions:\n            return urllib2.urlopen(request)\n        else:\n            return urllib2.ProxyHandler.proxy_open(self, request)\n\n# Create the proxy dictionary\nhttp_str = "http://%(user)s:%(pass)s@%(host)s:%(port)d" % proxy_info\nproxy_dict = {'http': http_str}\n\n# Create the custom ProxyHandler\nproxy_handler = CustomProxyHandler(proxy_dict, exceptions)\n\n# Create an opener with the custom ProxyHandler\nopener = urllib2.build_opener(proxy_handler, urllib2.HTTPHandler)\n\n# Install the opener\nurllib2.install_opener(opener)