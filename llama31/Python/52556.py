import random\n\ndef quickselect(arr, k):\n    if len(arr) == 1:\n        return arr[0]\n\n    pivot_index = random.randint(0, len(arr) - 1)\n    pivot = arr[pivot_index]\n\n    left = [x for i, x in enumerate(arr) if x < pivot and i != pivot_index]\n    middle = [x for x in arr if x == pivot]\n    right = [x for i, x in enumerate(arr) if x > pivot and i != pivot_index]\n\n    if k <= len(right):\n        return quickselect(right, k)\n    elif k <= len(right) + len(middle):\n        return middle[0]\n    else:\n        return quickselect(left, k - len(right) - len(middle))\n\n# Example usage:\narr = [12, 7, 9, 7, 21, 50]\nk = 3\nresult = quickselect(arr, k)\nprint(f"The {k}th largest element is {result}")