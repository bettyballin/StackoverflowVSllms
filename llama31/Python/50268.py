def max_discount(matrix, num_coupons):\n    num_items = len(matrix)\n    dp = [[0] * (num_coupons + 1) for _ in range(num_items + 1)]\n\n    for i in range(1, num_items + 1):\n        for j in range(1, num_coupons + 1):\n            max_val = 0\n            for k in range(min(j, len(matrix[i - 1])) + 1):\n                max_val = max(max_val, (matrix[i - 1][k - 1] if k > 0 else 0) + dp[i - 1][j - k])\n            dp[i][j] = max_val\n\n    return dp[num_items][num_coupons]\n\n# Example usage:\nmatrix = [[10, 15], [0, 5, 15, 25, 35], [2]]\nnum_coupons = 5\nprint(max_discount(matrix, num_coupons))  # Output: 35