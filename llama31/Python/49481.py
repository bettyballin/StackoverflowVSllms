import random\n\ndef weighted_random_selection_with_replacement(weights):\n    cum_weights = [sum(weights[:i+1]) for i in range(len(weights))]\n    total_weight = cum_weights[-1]\n    selection = []\n    \n    for _ in range(len(weights)):\n        r = random.random() * total_weight\n        idx = next(i for i, cw in enumerate(cum_weights) if cw >= r)\n        selection.append(idx)\n    \n    return selectio