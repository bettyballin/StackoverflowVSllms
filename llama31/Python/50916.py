class Category(Base):\n    __tablename__ = 'categories'\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(128), nullable=False)\n    lft = Column(Integer, nullable=False, unique=True)\n    rgt = Column(Integer, nullable=False, unique=True)\n\n    def insert_node(self, parent_id):\n        # Get the parent node\n        parent = self.query.get(parent_id)\n\n        # Calculate the new lft and rgt values\n        new_lft = parent.rgt + 1\n        new_rgt = new_lft + 1\n\n        # Update the lft and rgt values of the affected nodes\n        self.query.filter(self.lft >= new_lft).update({self.lft: self.lft + 2})\n        self.query.filter(self.rgt >= new_lft).update({self.rgt: self.rgt + 2})\n\n        # Insert the new node\n        new_node = Category(name=self.name, lft=new_lft, rgt=new_rgt)\n        self.session.add(new_node)\n        self.session.commit()