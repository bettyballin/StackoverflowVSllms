def get_effective_permissions(user_groups, group_permissions):\n    def recursive_get_permissions(groups):\n        permissions = set()\n        for group in groups:\n            if group in group_permissions:\n                permissions.update(group_permissions[group])\n            if group in user_groups:\n                permissions.update(recursive_get_permissions(user_groups[group]))\n        return permissions\n\n    return recursive_get_permissions(user_groups)