from itertools import groupby\nfrom operator import itemgetter\n\ndef cars_by_common_mods():\n    cars = Cars.objects.all()\n\n    # Create a list of dictionaries with car and mods\n    mod_list = [{'car': car, 'mods': frozenset(car.mods.all())} for car in cars]\n\n    # Sort the list by mods\n    mod_list.sort(key=itemgetter('mods'))\n\n    # Group the list by mods\n    ret = []\n    for key, group in groupby(mod_list, key=itemgetter('mods')):\n        cars_in_group = [car['car'] for car in group]\n        ret.append({'mods': key, 'cars': cars_in_group})\n\n    return ret