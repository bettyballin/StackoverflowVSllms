import sys\nimport time\nimport os\nimport subprocess\n\ndef watch_files(files, commands):\n    last_modified = {}\n    while True:\n        for file in files:\n            stat = os.stat(file)\n            if file not in last_modified or stat.st_mtime != last_modified[file]:\n                last_modified[file] = stat.st_mtime\n                for command in commands:\n                    command_str = command.replace("{}", file)\n                    subprocess.run(command_str, shell=True)\n        time.sleep(1)\n\ndef main():\n    if len(sys.argv) < 4:\n        print("Usage: watching <FILE+> do <COMMAND> [ARGS] (and <COMMAND> [ARGS])*")\n        sys.exit(1)\n\n    files = sys.argv[1:sys.argv.index("do")]\n    commands = []\n    current_command = []\n    for arg in sys.argv[sys.argv.index("do") + 1:]:\n        if arg == "and":\n            commands.append(" ".join(current_command))\n            current_command = []\n        else:\n            current_command.append(arg)\n    commands.append(" ".join(current_command))\n\n    watch_files(files, commands)\n\nif __name__ == "__main__":\n    main()