import httplib\nimport ssl\n\nclass MyBaseConnection(httplib.HTTPConnection):\n    def __init__(self, *args, **kw):\n        httplib.HTTPConnection.__init__(self, *args, **kw)\n        # common initialization code here\n\nclass MySecureConnection(MyBaseConnection):\n    def __init__(self, *args, **kw):\n        MyBaseConnection.__init__(self, *args, **kw)\n        self.ssl_context = ssl.create_default_context()\n        self.ssl_sock = None\n\n    def connect(self):\n        MyBaseConnection.connect(self)\n        self.ssl_sock = self.ssl_context.wrap_socket(self.sock, server_hostname=self.host)\n        self.sock = self.ssl_sock\n\nclass MyConnection:\n    def __new__(cls, use_ssl, *args, **kw):\n        if use_ssl:\n            return MySecureConnection(*args, **kw)\n        else:\n            return MyBaseConnection(*args, **kw)