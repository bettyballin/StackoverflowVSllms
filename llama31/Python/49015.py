from flask import Flask, request\nfrom redis import Redis\n\napp = Flask(__name__)\nredis = Redis()\n\nMAX_VISITS_PER_IP = 5\nTIME_FRAME = 60  # 1 minute\n\n@app.before_request\ndef rate_limit():\n    ip_address = request.remote_addr\n    key = f"visits:{ip_address}"\n    visits = redis.get(key)\n    if visits is None:\n        redis.set(key, 1)\n        redis.expire(key, TIME_FRAME)\n    elif int(visits) >= MAX_VISITS_PER_IP:\n        return "Rate limit exceeded", 429\n    else:\n        redis.incr(key)