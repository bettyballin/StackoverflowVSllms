import os\nimport shutil\n\ndef write_to_file(filename, data):\n    # Create a shadow copy of the file\n    shadow_filename = filename + '.shadow'\n    with open(shadow_filename, 'w') as shadow_file:\n        shadow_file.write(data)\n\n    # Replace the original file with the shadow copy\n    os.replace(shadow_filename, filename)\n\n# Example usage:\nfilename = 'example.txt'\ndata = 'Hello, World!'\nwrite_to_file(filename, data)