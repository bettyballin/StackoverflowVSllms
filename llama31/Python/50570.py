def detect_repetitions(input_list):\n    if not input_list:\n        return []\n\n    result = []\n    current_element = input_list[0]\n    current_count = 1\n\n    for element in input_list[1:]:\n        if element == current_element:\n            current_count += 1\n        else:\n            if current_count > 1:\n                result.append([current_element] * current_count)\n            else:\n                result.append(current_element)\n            current_element = element\n            current_count = 1\n\n    if current_count > 1:\n        result.append([current_element] * current_count)\n    else:\n        result.append(current_element)\n\n    # Detect nested repetitions\n    for i in range(len(result) - 1):\n        if isinstance(result[i], list) and isinstance(result[i + 1], list):\n            if result[i] == result[i + 1]:\n                repetition_count = 2\n                while i + repetition_count < len(result) and result[i] == result[i + repetition_count]:\n                    repetition_count += 1\n                result[i:i + repetition_count] = [[result[i]] * repetition_count]\n\n    return result