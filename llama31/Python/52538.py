import re\n\ndef extract_domain_manual(url):\n    # Remove protocol and path\n    url = re.sub(r'^https?://', '', url)\n    url = re.sub(r'/.*$', '', url)\n    \n    # Remove subdomains\n    url = re.sub(r'^.*\.(?=.*\..*)', '', url)\n    \n    return url\n\n# Example usage:\nprint(extract_domain_manual("http://www.example.com"))  # Output: example.com\nprint(extract_domain_manual("www.example.co.uk/path/script.php?=whatever"))  # Output: example.co.uk