def count_lattice_points(n):\n    factors = prime_factors(n)\n    count = 1\n    for p in factors:\n        if p % 4 == 1:\n            count *= (2 * factors[p] + 1)\n    return 4 * count\n\ndef prime_factors(n):\n    factors = {}\n    i = 2\n    while i * i <= n:\n        if n % i:\n            i += 1\n        else:\n            n //= i\n            factors[i] = factors.get(i, 0) + 1\n    if n > 1:\n        factors[n] = factors.get(n, 0) + 1\n    return factors