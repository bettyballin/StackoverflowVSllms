import subprocess\nimport os\n\ndef minimize_includes(file):\n    includes = []\n    with open(file) as f:\n        for line in f.readlines():\n            if line.startswith("#include"):\n                includes.append(line.strip())\n\n    minimal_includes = []\n    for include in includes:\n        subprocess.run(["gcc", "-c", file])\n        if subprocess.run(["gcc", "-c", file, "-D", f"REMOVE_{include}"]).returncode == 0:\n            minimal_includes.append(include)\n        else:\n            with open(file) as f:\n                lines = f.readlines()\n            with open(file, "w") as f:\n                for line in lines:\n                    if line.strip() != include:\n                        f.write(line)\n\n    return minimal_includes