from celery import Celery\nfrom redis import Redis\n\napp = Celery('api_queue', broker='redis://localhost:6379/0')\n\n# Set the rate limit to 5000 calls per 24 hours\nrate_limit = 5000\n\n@app.task\ndef process_api_request(customer_id, api_request):\n    # Make the API call here\n    pass\n\ndef add_api_request_to_queue(customer_id, api_request):\n    redis = Redis(host='localhost', port=6379, db=0)\n    redis.incr('api_requests')\n    if redis.get('api_requests') > rate_limit:\n        # Rate limit exceeded, delay the request\n        delay = 24 * 60 * 60  # 24 hours in seconds\n        process_api_request.apply_async(args=[customer_id, api_request], countdown=delay)\n    else:\n        process_api_request.apply_async(args=[customer_id, api_request])