from PIL import Image\nfrom flask import send_file\nfrom flask_caching import Cache\n\napp = Flask(__name__)\ncache = Cache(app, config={'CACHE_TYPE': 'simple'})\n\ndef generate_thumbnail(image_path, size):\n    image = Image.open(image_path)\n    image.thumbnail(size)\n    return image\n\n@app.route('/thumbnails/<int:image_id>')\ndef get_thumbnail(image_id):\n    image_path = get_image_path(image_id)\n    size = (100, 100)  # thumbnail size\n    thumbnail = cache.get(f'thumbnail_{image_id}_{size}')\n    if thumbnail is None:\n        thumbnail = generate_thumbnail(image_path, size)\n        cache.set(f'thumbnail_{image_id}_{size}', thumbnail)\n    return send_file(thumbnail, mimetype='image/jpeg')