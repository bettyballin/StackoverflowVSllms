import os\nimport shutil\n\nsrc_dir = 'C:\\images'\ndst_dir = 'D:\\media'\n\nfor root, dirs, files in os.walk(src_dir):\n    for file in files:\n        if file.endswith('.jpg'):\n            src_file = os.path.join(root, file)\n            dst_file = os.path.join(dst_dir, os.path.relpath(src_file, src_dir))\n            dst_dir_path = os.path.dirname(dst_file)\n            if not os.path.exists(dst_dir_path):\n                os.makedirs(dst_dir_path)\n            shutil.move(src_file, dst_file)