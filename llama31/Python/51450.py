def layer_dict(flat_dict):\n    layered_dict = {}\n    for key, value in flat_dict.items():\n        current = layered_dict\n        path = key.split('/')\n        for p in path[:-1]:\n            if p not in current:\n                current[p] = {}\n            current = current[p]\n        current[path[-1]] = value\n    return layered_dict\n\nflat_dict = {\n    'foo': {'opt1': 1, 'opt2': 2},\n    'foo/bar': {'opt3': 3, 'opt4': 4},\n    'foo/bar/baz': {'opt5': 5, 'opt6': 6}\n}\n\nlayered_dict = layer_dict(flat_dict)\nprint(layered_dict)