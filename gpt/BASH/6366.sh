#!/bin/bash\n\nLOCKFILE="/tmp/myhappyschedule.lock"\n\n# Check if the lock file exists\nif [ -e $LOCKFILE ]; then\n  echo "Another instance is running. Exiting."\n  exit 1\nfi\n\n# Create the lock file\ntouch $LOCKFILE\n\n# Function to clean up the lock file on exit\ncleanup() {\n  rm -f $LOCKFILE\n}\ntrap cleanup EXIT\n\n# Process the queue\nwhile true; do\n  # Fetch the next job from the database\n  job=$(mysql -u user -p password -e "SELECT id, data FROM myhappyschedule WHERE scheduled_time <= NOW() ORDER BY scheduled_time LIMIT 1")\n\n  # Check if there are no jobs left\n  if [ -z "$job" ]; then\n    echo "No jobs to process. Exiting."\n    exit 0\n  fi\n\n  # Extract job details (assuming the output format is: id\ndata)\n  job_id=$(echo "$job" | sed -n '2p' | awk '{print $1}')\n  job_data=$(echo "$job" | sed -n '2p' | awk '{print $2}')\n\n  # Process the job\n  echo "Processing job $job_id with data $job_data"\n  # Add your script execution logic here\n  /path/to/your_script.sh "$job_data"\n\n  # Mark the job as processed in the database\n  mysql -u user -p password -e "DELETE FROM myhappyschedule WHERE id = $job_id"\n\n  # Wait a bit before processing the next job\n  sleep 1\ndone