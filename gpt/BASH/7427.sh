#!/bin/bash\n\n# Get the current time in minutes since the epoch\ncurrent_time=$(date +%s)\n\n# Define the idle threshold (30 minutes in seconds)\nidle_threshold=$((30 * 60))\n\n# List all processes and filter for those idle for more than the threshold\nps -eo pid,etime,comm --sort=etime | awk -v threshold=$idle_threshold '\nBEGIN {\n    split("s m h d w", units, " ")\n}\n{\n    cmd = $3\n    split($2, time, "[-:]")\n    n = length(time)\n    age = 0\n    for (i = 1; i <= n; i++) {\n        if (time[i] ~ /^[0-9]+$/) {\n            age += time[i] * (60 ^ (n - i))\n        }\n    }\n    if (age >= threshold) {\n        print $1, $2, cmd\n    }\n}'