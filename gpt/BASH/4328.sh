#!/bin/bash\n\nfor i in /test/emailfile\ndo\n    # Extract the date string\n    date=$(sed -n '/Received: from/ { :a; n; /;/ {s/.*; //p;q}; b a }' "$i")\n    echo "Extracted date string: $date"\n\n    # Convert the extracted date string to the desired format, and check for conversion errors\n    newdate=$(date -d "$date" +'%Y%m%d%H%M.%S' 2>/dev/null)\n    if [ $? -ne 0 ]; then\n        echo "Date conversion failed for file: $i"\n        continue\n    fi\n    \n    echo "Formatted date: $newdate"\n\n    # Update the mtime of the file\n    touch -t "$newdate" "$i"\ndone