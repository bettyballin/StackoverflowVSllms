@echo off\nsetlocal\n\nREM Define variables\nset INSTANCE_ID=i-xxxxxxxxxxxxxxxxx\nset ALLOCATION_ID=eipalloc-xxxxxxxx\n\nREM Start the instance\naws ec2 start-instances --instance-ids %INSTANCE_ID%\n\nREM Wait for the instance to be in 'running' state\n:waitloop\nfor /f "tokens=1,2" %%i in ('aws ec2 describe-instances --instance-ids %INSTANCE_ID% --query "Reservations[*].Instances[*].State.Name" --output text') do (\n    if %%i==running (\n        goto :associateip\n    )\n    echo Waiting for instance to start...\n    timeout /t 10\n    goto waitloop\n)\n\n:associateip\nREM Associate the Elastic IP address with the instance\naws ec2 associate-address --instance-id %INSTANCE_ID% --allocation-id %ALLOCATION_ID%\n\necho Elastic IP associated with the instance.\n\nendlocal