import gi\nimport sys\nimport json\n\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk\n\ndef read_message():\n    raw_length = sys.stdin.read(4)\n    if len(raw_length) == 0:\n        sys.exit(0)\n    message_length = int.from_bytes(raw_length.encode('utf-8'), byteorder='little')\n    message = sys.stdin.read(message_length)\n    return json.loads(message)\n\ndef send_message(message):\n    response = json.dumps(message)\n    sys.stdout.write(response)\n    sys.stdout.flush()\n\ndef create_gtk_menu():\n    menu = Gtk.Menu()\n    item = Gtk.MenuItem(label="Hello, World")\n    menu.append(item)\n    item.show()\n    menu.show()\n\ndef main():\n    Gtk.init()\n    while True:\n        message = read_message()\n        if message['command'] == 'create_menu':\n            create_gtk_menu()\n            send_message({"status": "menu_created"})\n\nif __name__ == "__main__":\n    main()