from PIL import Image\nimport os\n\ndef save_image(file, user_id):\n    # Define paths\n    upload_directory = f'/path/to/upload/directory/user_{user_id}/'\n    thumbnail_directory = f'/path/to/upload/directory/user_{user_id}/thumbnails/'\n    os.makedirs(upload_directory, exist_ok=True)\n    os.makedirs(thumbnail_directory, exist_ok=True)\n\n    # Save original image\n    file_path = os.path.join(upload_directory, file.filename)\n    file.save(file_path)\n\n    # Create and save thumbnail\n    thumbnail_path = os.path.join(thumbnail_directory, file.filename)\n    with Image.open(file_path) as img:\n        img.thumbnail((150, 150))  # Resize to 150x150 pixels\n        img.save(thumbnail_path, "JPEG")\n\n    # Return file paths for database storage\n    return file_path, thumbnail_path\n\n# Example usage\nfile_path, thumbnail_path = save_image(uploaded_file, user_id)\n# Store `file_path` and `thumbnail_path` in the database