# myapp/middleware.py\nfrom django.utils.deprecation import MiddlewareMixin\nfrom django.conf import settings\nfrom django.template.context import RequestContext\nfrom django.contrib.auth.context_processors import auth\n\nclass AdminAuthContextMiddleware(MiddlewareMixin):\n    def process_request(self, request):\n        if request.path.startswith('/admin/') and 'admin' in settings.INSTALLED_APPS:\n            request.context_processors = [auth]\n        else:\n            request.context_processors = []