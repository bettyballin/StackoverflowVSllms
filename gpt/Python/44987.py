import ctypes\nimport sys\n\ndef cleanup_resources(ctrl_type):\n    if ctrl_type in (0, 2):  # CTRL_C_EVENT and CTRL_CLOSE_EVENT\n        print("Cleaning up resources...")\n        # Add your resource deallocation logic here\n        sys.exit(0)\n    return True\n\nkernel32 = ctypes.windll.kernel32\nkernel32.SetConsoleCtrlHandler(ctypes.WINFUNCTYPE(ctypes.c_bool, ctypes.c_uint)(cleanup_resources), True)\n\n# Simulate long-running process\nwhile True:\n    pass