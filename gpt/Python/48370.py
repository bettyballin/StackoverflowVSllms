import pandas as pd\nfrom sklearn.metrics.pairwise import cosine_similarity\n\n# Load data from database\nusers_products = pd.read_sql_query('SELECT * FROM Users_Products', conn)\n\n# Create a user-item matrix\nuser_item_matrix = users_products.pivot(index='userid', columns='productid', values='productid').notna().astype(int)\n\n# Calculate cosine similarity\nuser_similarity = pd.DataFrame(cosine_similarity(user_item_matrix), index=user_item_matrix.index, columns=user_item_matrix.index)\n\nprint(user_similarity)