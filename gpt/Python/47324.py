from django.db.models import Count\nfrom django.contrib.contenttypes.models import ContentType\n\ndef get_object_votes(self, obj):\n    """\n    Get a dictionary mapping vote to votecount\n    """\n    ctype = ContentType.objects.get_for_model(obj)\n\n    votes = (Vote.objects\n             .filter(content_type=ctype, object_id=obj.id)\n             .values('vote')\n             .annotate(vote_count=Count('vote'))\n             .order_by('vote'))\n\n    return {vote['vote']: vote['vote_count'] for vote in votes}