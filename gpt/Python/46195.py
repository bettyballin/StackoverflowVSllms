def reverse(arr, start, end):\n    while start < end:\n        arr[start], arr[end] = arr[end], arr[start]\n        start += 1\n        end -= 1\n\ndef circular_shift(arr, M):\n    N = len(arr)\n    M = M % N  # To handle shifts greater than the size of the array\n    reverse(arr, 0, N - 1)\n    reverse(arr, 0, M - 1)\n    reverse(arr, M, N - 1)\n    return arr\n\n# Example usage:\narr = [3, 4, 5, 2, 3, 1, 4]\nM = 2\nshifted_arr = circular_shift(arr, M)\nprint(shifted_arr)  # Output: [1, 4, 3, 4, 5, 2, 3]