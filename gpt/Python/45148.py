from sqlalchemy.orm import sessionmaker\n\nSession = sessionmaker(bind=engine)\nsession = Session()\n\n# Create instances\nperson = Person(name='John Doe')\naddress1 = Address(street='123 Main St')\naddress2 = Address(street='456 Elm St')\n\n# Associate addresses with the person\nperson.addresses = [address1, address2]\n\n# Commit to create records\nsession.add(person)\nsession.commit()\n\n# Set default address\nstmt = person_addresses.update().\\n    where(person_addresses.c.person_id == person.id).\\n    where(person_addresses.c.address_id == address2.id).\\n    values(is_default=True)\n\nsession.execute(stmt)\nsession.commit()