def partitions(n, max_val=None, memo=None):\n    if memo is None:\n        memo = {}\n    if max_val is None or max_val > n:\n        max_val = n\n    if n == 0:\n        return [[]]\n    if (n, max_val) in memo:\n        return memo[(n, max_val)]\n    result = []\n    for i in range(1, max_val + 1):\n        for part in partitions(n - i, i, memo):\n            result.append([i] + part)\n    memo[(n, max_val)] = result\n    return result\n\n# Example usage\nnumber = 5\nall_partitions = partitions(number)\nfor partition in all_partitions:\n    print(partition)