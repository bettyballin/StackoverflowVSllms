import re\n\ndef remove_whitespace_outside_brackets(text):\n    pattern = r'\s+(?=[^][]*?(?:\[|$))'\n    return re.sub(pattern, '', text)\n\n# Testing the function\ntest_strings = [\n    "aaa[bb b]",\n    "aaa[bbb]ccc[d dd]",\n    "[aaa]bbb[c cc]",\n    "a aa[bb b]",\n    "a aa[bb b]c cc[d dd]e ee[f ff]"\n]\n\nfor s in test_strings:\n    print(remove_whitespace_outside_brackets(s))