import re\n\ndef parse_irc_message(message):\n    prefix = ''\n    trailing = []\n    if not message:\n        raise ValueError('Empty message')\n    \n    if message[0] == ':':\n        prefix, message = message[1:].split(' ', 1)\n    \n    if ' :' in message:\n        message, trailing = message.split(' :', 1)\n        args = message.split()\n        args.append(trailing)\n    else:\n        args = message.split()\n    \n    command = args.pop(0)\n    \n    return {\n        "prefix": prefix,\n        "command": command,\n        "params": args\n    }\n\n# Example usage\nmessage = ":test!~test@test.com PRIVMSG #channel :Hi!"\nparsed_message = parse_irc_message(message)\n\nprint(parsed_message)