from django.db.models import Subquery, OuterRef\nfrom invitation.models import Invitation\n\n# Subquery to get the latest date_invited for each to_email\nlatest_invitations = Invitation.objects.filter(\n    to_email=OuterRef('to_email')\n).order_by('-date_invited')\n\n# Main query to get distinct invitations based on to_email\ndistinct_invitations = Invitation.objects.filter(\n    pk=Subquery(latest_invitations.values('pk')[:1])\n).distinct('to_email')\n\n# Execute the query\nresults = distinct_invitations.all()