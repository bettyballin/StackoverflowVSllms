import requests\n\ndef translate_text(api_key, text, target_language, source_language='auto'):\n    url = "https://translation.googleapis.com/language/translate/v2"\n    params = {\n        'q': text,\n        'target': target_language,\n        'source': source_language,\n        'key': api_key\n    }\n    \n    response = requests.get(url, params=params)\n    \n    if response.status_code == 200:\n        translation = response.json()['data']['translations'][0]['translatedText']\n        return translation\n    else:\n        raise Exception(f"Error: {response.status_code}, {response.text}")\n\n# Example usage\napi_key = 'YOUR_API_KEY'\ntext = 'Hello, world!'\ntarget_language = 'es'  # Translate to Spanish\n\ntranslated_text = translate_text(api_key, text, target_language)\nprint(translated_text)