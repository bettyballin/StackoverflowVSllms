def reverse_words(s):\n    # Convert to list for mutability\n    s = list(s)\n    n = len(s)\n    \n    # Helper function to reverse characters in place\n    def reverse(start, end):\n        while start < end:\n            s[start], s[end] = s[end], s[start]\n            start += 1\n            end -= 1\n    \n    # Step 1: Reverse the entire array\n    reverse(0, n - 1)\n    \n    # Step 2: Reverse each word in the reversed array\n    start = 0\n    while start < n:\n        # Find the start of a word\n        while start < n and s[start] == ' ':\n            start += 1\n        if start >= n:\n            break\n        end = start\n        # Find the end of the word\n        while end < n and s[end] != ' ':\n            end += 1\n        # Reverse the word\n        reverse(start, end - 1)\n        start = end\n    \n    # Return the result as a string\n    return ''.join(s)\n\n# Example usage\ninput_str = "this is a string"\noutput_str = reverse_words(input_str)\nprint(output_str)  # Output: "string a is this"