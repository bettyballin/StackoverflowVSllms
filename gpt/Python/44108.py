import sys\nimport json\n\ndef read_message():\n    raw_length = sys.stdin.read(4)\n    if len(raw_length) == 0:\n        sys.exit(0)\n    message_length = struct.unpack('@I', raw_length)[0]\n    message = sys.stdin.read(message_length)\n    return json.loads(message)\n\ndef send_message(message):\n    encoded_message = json.dumps(message).encode('utf-8')\n    sys.stdout.write(struct.pack('@I', len(encoded_message)))\n    sys.stdout.flush()\n    sys.stdout.write(encoded_message)\n    sys.stdout.flush()\n\nif __name__ == "__main__":\n    while True:\n        received_message = read_message()\n        print(f"Received message: {received_message}")\n        response = {"response": "Hello from native app!"}\n        send_message(response)