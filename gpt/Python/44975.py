import random\nimport string\nfrom google.appengine.api import memcache\n\ndef generate_random_string(length=6):\n    return ''.join(random.choices(string.ascii_letters + string.digits, k=length))\n\ndef check_and_store_to_memcache(key):\n    while True:\n        random_string = generate_random_string()\n        if not memcache.get(random_string):\n            memcache.set(key, random_string)\n            return random_string