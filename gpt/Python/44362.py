import os\nimport hashlib\n\ndef create_directories(base_path, user_id, album_id, image_id):\n    # Generate MD5 hash for user_id\n    user_hash = hashlib.md5(user_id.encode()).hexdigest()\n    \n    # Create the directory path\n    user_dir = os.path.join(base_path, user_hash[:1], user_hash[1:3], user_hash[3:5], user_id)\n    album_dir = os.path.join(user_dir, album_id)\n    \n    # Ensure directories exist\n    os.makedirs(album_dir, exist_ok=True)\n    \n    # Construct the image file path\n    image_file_path = os.path.join(album_dir, f"{image_id}.jpeg")\n    \n    return image_file_path\n\n# Example usage\nbase_path = "/var/imageStorage"\nuser_id = "user_123"\nalbum_id = "album_456"\nimage_id = "image_789"\n\nimage_path = create_directories(base_path, user_id, album_id, image_id)\nprint(f"Image will be stored at: {image_path}")