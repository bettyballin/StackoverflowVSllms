from flask import Flask, request, jsonify\nfrom time import time\n\napp = Flask(__name__)\n\n# Dictionary to store request times\nrequest_times = {}\n\n# Rate limiting settings\nRATE_LIMIT = 5  # maximum number of requests\nTIME_WINDOW = 60  # time window in seconds\n\n@app.route('/query')\ndef query():\n    user_ip = request.remote_addr\n    current_time = time()\n    \n    if user_ip not in request_times:\n        request_times[user_ip] = []\n    \n    # Remove old requests\n    request_times[user_ip] = [timestamp for timestamp in request_times[user_ip] if current_time - timestamp < TIME_WINDOW]\n    \n    # Check if rate limit exceeded\n    if len(request_times[user_ip]) >= RATE_LIMIT:\n        return jsonify({"error": "Rate limit exceeded"}), 429\n    \n    # Record the new request\n    request_times[user_ip].append(current_time)\n    \n    # Handle the request\n    return jsonify({"message": "Request successful"})\n\nif __name__ == "__main__":\n    app.run()