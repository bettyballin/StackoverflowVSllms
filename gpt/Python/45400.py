from django.http import JsonResponse\nfrom django.shortcuts import render\nfrom .models import Message, User\n\ndef get_updates(request):\n    last_message_id = request.GET.get('last_message_id', None)\n    if last_message_id:\n        new_messages = Message.objects.filter(id__gt=last_message_id)\n    else:\n        new_messages = Message.objects.all()\n\n    messages_data = [{\n        'id': msg.id,\n        'sender': msg.sender.username,\n        'content': msg.content,\n        'timestamp': msg.timestamp.strftime('%Y-%m-%d %H:%M:%S')\n    } for msg in new_messages]\n\n    return JsonResponse({'messages': messages_data})\n\ndef chat_room(request):\n    return render(request, 'chat_room.html')