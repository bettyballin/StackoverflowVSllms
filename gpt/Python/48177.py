import gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk, Gdk\n\ndef on_right_click(status_icon, button, time):\n    menu = Gtk.Menu()\n\n    # Populate the menu\n    item = Gtk.MenuItem(label="Option 1")\n    menu.append(item)\n    item = Gtk.MenuItem(label="Option 2")\n    menu.append(item)\n    item = Gtk.MenuItem(label="Quit")\n    item.connect("activate", Gtk.main_quit)\n    menu.append(item)\n\n    menu.show_all()\n\n    # Get screen dimensions\n    screen = Gdk.Screen.get_default()\n    screen_height = screen.get_height()\n\n    # Get pointer position\n    display = Gdk.Display.get_default()\n    seat = display.get_default_seat()\n    pointer = seat.get_pointer()\n    _, x, y, _ = pointer.get_position()\n\n    # Calculate menu position\n    menu_height = menu.get_preferred_height()[1]\n    if y + menu_height > screen_height:\n        menu_y = y - menu_height\n    else:\n        menu_y = y\n\n    menu.popup(None, None, None, None, button, time)\n    menu.set_position(Gtk.MenuPositionFunc(lambda menu, x, y, data: (x, menu_y)))\n\nstatus_icon = Gtk.StatusIcon()\nstatus_icon.set_from_icon_name("your-icon-name")\nstatus_icon.connect("popup-menu", on_right_click)\n\nGtk.main()