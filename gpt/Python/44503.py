def settle_expenses(expenses):\n    total_expense = sum(expenses.values())\n    num_people = len(expenses)\n    share_per_person = total_expense / num_people\n\n    # Determine net balance for each person\n    balances = {person: spent - share_per_person for person, spent in expenses.items()}\n\n    # Separate the positive and negative balances\n    creditors = [(person, amount) for person, amount in balances.items() if amount > 0]\n    debtors = [(person, amount) for person, amount in balances.items() if amount < 0]\n\n    # Sort creditors and debtors\n    creditors.sort(key=lambda x: x[1], reverse=True)\n    debtors.sort(key=lambda x: x[1])\n\n    transactions = []\n\n    i, j = 0, 0\n    while i < len(creditors) and j < len(debtors):\n        creditor, credit_amount = creditors[i]\n        debtor, debt_amount = debtors[j]\n\n        settled_amount = min(credit_amount, -debt_amount)\n        transactions.append((debtor, creditor, settled_amount))\n\n        # Update the balances\n        creditors[i] = (creditor, credit_amount - settled_amount)\n        debtors[j] = (debtor, debt_amount + settled_amount)\n\n        # Move to the next creditor or debtor if one is settled\n        if creditors[i][1] == 0:\n            i += 1\n        if debtors[j][1] == 0:\n            j += 1\n\n    return transactions\n\n# Example usage:\nexpenses = {\n    'A': 400,\n    'B': 1000,\n    'C': 100\n}\ntransactions = settle_expenses(expenses)\nfor debtor, creditor, amount in transactions:\n    print(f"{debtor} pays {creditor} {amount:.2f}")\n\n# Output:\n# C pays B 400.00\n# A pays B 100.00