@app.route('/shorten', methods=['POST'])\n   def shorten_url():\n       long_url = request.json['long_url']\n       if not long_url:\n           return jsonify({"error": "Invalid URL"}), 400\n\n       existing_url = URL.query.filter_by(long_url=long_url).first()\n       if existing_url:\n           return jsonify({"short_url": request.host_url + existing_url.short_url})\n\n       new_url = URL(long_url=long_url, short_url='')\n       db.session.add(new_url)\n       db.session.commit()\n\n       new_url.short_url = base62_encode(new_url.id)\n       db.session.commit()\n\n       return jsonify({"short_url": request.host_url + new_url.short_url})\n\n   @app.route('/<short_url>', methods=['GET'])\n   def redirect_url(short_url):\n       url = URL.query.filter_by(short_url=short_url).first_or_404()\n       return redirect(url.long_url)\n\n   if __name__ == '__main__':\n       app.run(debug=True)