import datetime\nimport time\nimport threading\n\nlock = threading.Lock()\ncounter = 0\n\ndef get_thread_safe_timestamp():\n    global counter\n    with lock:\n        now = datetime.datetime.now()\n        precise_time = time.perf_counter()\n        counter += 1\n        unique_counter = counter\n    return now, precise_time, unique_counter\n\n# Example usage\ntimestamps = []\nfor i in range(1000):\n    timestamps.append(get_thread_safe_timestamp())\n\nfor ts in timestamps:\n    print(ts)