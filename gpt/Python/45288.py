from sympy import isprime, primerange, totient\n\ndef is_carmichael(n):\n    if n < 2 or isprime(n) or n % 2 == 0:\n        return False\n    for p in primerange(2, n + 1):\n        if n % p == 0:\n            if (n - 1) % (p - 1) != 0 or n % (p * p) == 0:\n                return False\n    return True\n\ndef find_valid_numbers(limit):\n    valid_numbers = []\n    for n in range(3, limit + 1, 2):\n        if is_carmichael(n):\n            phi_n = totient(n)\n            if n % phi_n == 0:\n                valid_numbers.append(n)\n    return valid_numbers\n\n# Example usage\nlimit = 10**6  # Adjust the limit as needed\nvalid_numbers = find_valid_numbers(limit)\nresult_sum = sum(valid_numbers)\nprint(f"Sum of valid numbers up to {limit}: {result_sum}")