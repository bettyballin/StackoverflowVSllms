NSGraphicsContext.saveGraphicsState()\n\n# Enable font smoothing\nCGContextSetShouldSmoothFonts(ctx, True)\nCGContextSetAllowsFontSmoothing(ctx, True)\nCGContextSetShouldAntialias(ctx, True)\nCGContextSetAllowsAntialiasing(ctx, True)\n\ngraphics = NSGraphicsContext.graphicsContextWithGraphicsPort_flipped_(ctx, True)\nNSGraphicsContext.setCurrentContext_(graphics)\n\nheight = size.height\nxform = NSAffineTransform.transform()\nxform.translateXBy_yBy_(0.0, height)\nxform.scaleXBy_yBy_(1.0, -1.0)\nxform.concat()\n\nself.textContainer.setContainerSize_(size)\n\nglyphRange = self.layoutManager.glyphRangeForTextContainer_(self.textContainer)\n\nself.layoutManager.drawBackgroundForGlyphRange_atPoint_(glyphRange, topLeft)\nself.layoutManager.drawGlyphsForGlyphRange_atPoint_(glyphRange, topLeft)\n\nNSGraphicsContext.restoreGraphicsState()