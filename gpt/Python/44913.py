import multiprocessing\nimport multiprocessing.connection\nimport time\n\ndef worker(q1, q2):\n    for i in range(5):\n        time.sleep(1)\n        q1.put(f"Message {i} from q1")\n        q2.put(f"Message {i} from q2")\n\ndef main():\n    q1 = multiprocessing.Queue()\n    q2 = multiprocessing.Queue()\n\n    p = multiprocessing.Process(target=worker, args=(q1, q2))\n    p.start()\n\n    while True:\n        ready = multiprocessing.connection.wait([q1._reader, q2._reader])\n        for r in ready:\n            if r is q1._reader:\n                print("Received from q1:", q1.get())\n            elif r is q2._reader:\n                print("Received from q2:", q2.get())\n\n        if not p.is_alive() and q1.empty() and q2.empty():\n            break\n\n    p.join()\n\nif __name__ == "__main__":\n    main()