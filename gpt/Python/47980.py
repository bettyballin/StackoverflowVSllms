from lxml import etree\n\n# Sample XML\nxml = '''<root>\n    <foo>\n        <bar>a</bar>\n        <bar>b</bar>\n        <bar>c</bar>\n    </foo>\n    <foo>\n        <bar>b</bar>\n        <bar>c</bar>\n    </foo>\n    <foo>\n        <bar>a</bar>\n        <bar>c</bar>\n    </foo>\n</root>'''\n\n# Parse the XML\nroot = etree.fromstring(xml)\n\n# Values to check for\nvalues = ['a', 'c']\n\n# Construct XPath expression\nxpath_expr = "//foo" + "".join([f"[bar='{value}']" for value in values])\n\n# Find all matching elements\nmatching_elements = root.xpath(xpath_expr)\n\n# Print matching elements\nfor elem in matching_elements:\n    print(etree.tostring(elem).decode())