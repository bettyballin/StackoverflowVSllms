import csv\n\n# Sample nested dictionary\nd = {\n    'time1': {\n        'column1': {'data1', 'data2', 'data3'},\n        'column2': {'data1', 'data2', 'data3'},\n        'column3': {'data1', 'data2', 'data3'}\n    },\n    'time2': {\n        'column1': {'data1', 'data2', 'data3'},\n        'column2': {'data1', 'data2', 'data3'},\n        'column3': {'data1', 'data2', 'data3'}\n    }\n}\n\n# Extract all unique columns\ncolumns = sorted({col for time in d.values() for col in time.keys()})\n\n# Create the header\nheader = ['Timestamp'] + [f'{col}/{data}' for col in columns for data in sorted(d[next(iter(d))][col])]\n\n# Write to a CSV file\nwith open('output.csv', 'w', newline='') as csvfile:\n    writer = csv.writer(csvfile)\n    writer.writerow(header)\n    \n    for timestamp, columns_dict in d.items():\n        row = [timestamp]\n        for col in columns:\n            for data in sorted(d[next(iter(d))][col]):\n                row.append(data if data in columns_dict.get(col, {}) else '')\n        writer.writerow(row)