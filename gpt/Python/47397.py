from django.contrib import admin\nfrom .models import Client\n\nclass ClientAdmin(admin.ModelAdmin):\n    def get_queryset(self, request):\n        qs = super().get_queryset(request)\n        if request.user.has_perm('yourapp.view_all_clients'):\n            return qs\n        return qs.filter(store__in=request.user.stores_managed.all())\n\n    def has_change_permission(self, request, obj=None):\n        if obj is not None and request.user.has_perm('yourapp.edit_all_clients'):\n            return True\n        return super().has_change_permission(request, obj)\n\n    def has_view_permission(self, request, obj=None):\n        if obj is not None and request.user.has_perm('yourapp.view_all_clients'):\n            return True\n        return super().has_view_permission(request, obj)\n\nadmin.site.register(Client, ClientAdmin)