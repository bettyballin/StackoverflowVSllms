def simple_app(environ, start_response):\n    try:\n        if environ['REQUEST_METHOD'] == 'POST':\n            # Specify the maximum size of each chunk to read (e.g., 1MB)\n            chunk_size = 1024 * 1024\n            \n            # Open a file to write the uploaded content\n            with open('uploaded_file.txt', 'wb') as output_file:\n                # Read the input stream in chunks\n                while True:\n                    chunk = environ['wsgi.input'].read(chunk_size)\n                    if not chunk:\n                        break\n                    output_file.write(chunk)\n            \n            # Respond with a success message\n            start_response('200 OK', [('Content-Type', 'text/plain')])\n            return [b'File uploaded successfully.']\n\n        else:\n            # If not POST, respond with a simple form page (for testing purposes)\n            start_response('200 OK', [('Content-Type', 'text/html')])\n            return [b'''\n                <html>\n                <body>\n                <form method="post" enctype="multipart/form-data">\n                <input type="file" name="file">\n                <input type="submit" value="Upload">\n                </form>\n                </body>\n                </html>\n            ''']\n    except Exception as e:\n        start_response('500 Internal Server Error', [('Content-Type', 'text/plain')])\n        return [str(e).encode('utf-8')]\n\n# To run this WSGI app, use a WSGI server like wsgiref.simple_server\nif __name__ == '__main__':\n    from wsgiref.simple_server import make_server\n    server = make_server('localhost', 8051, simple_app)\n    print("Serving on port 8051...")\n    server.serve_forever()