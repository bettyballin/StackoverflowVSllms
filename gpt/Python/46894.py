# Initial connection to the server\nserver_ip = "central.server.ip"\npeer_1.connect(server_ip)\npeer_2.connect(server_ip)\n\n# Server exchanges IP and port information\npeer_1_info = server.get_peer_info(peer_1)\npeer_2_info = server.get_peer_info(peer_2)\n\n# Peer 1 starts attempting to connect to Peer 2 directly\npeer_1.start_hole_punching(peer_2_info)\n\n# Peer 2 starts attempting to connect to Peer 1 directly\npeer_2.start_hole_punching(peer_1_info)\n\n# If successful, switch to direct connection\nif peer_1.direct_connection_established() and peer_2.direct_connection_established():\n    peer_1.switch_to_direct_connection()\n    peer_2.switch_to_direct_connection()\n\n# Otherwise, continue using server as relay\nelse:\n    continue_using_server_relay()