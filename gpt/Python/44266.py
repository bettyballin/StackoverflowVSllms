from PIL import Image\nimport piexif\n\ndef set_gps_location(img_path, lat, lng):\n    # Convert latitude and longitude to the EXIF format\n    def to_deg(value, loc):\n        if value < 0:\n            loc_value = loc[0]\n        else:\n            loc_value = loc[1]\n\n        abs_value = abs(value)\n        deg = int(abs_value)\n        min = int((abs_value - deg) * 60)\n        sec = int((abs_value - deg - min / 60) * 3600000)\n\n        return ((deg, 1), (min, 1), (sec, 1000), loc_value)\n\n    gps_ifd = {\n        piexif.GPSIFD.GPSLatitudeRef: 'N' if lat >= 0 else 'S',\n        piexif.GPSIFD.GPSLatitude: to_deg(lat, ('S', 'N')),\n        piexif.GPSIFD.GPSLongitudeRef: 'E' if lng >= 0 else 'W',\n        piexif.GPSIFD.GPSLongitude: to_deg(lng, ('W', 'E'))\n    }\n\n    exif_dict = piexif.load(img_path)\n    exif_dict['GPS'] = gps_ifd\n    exif_bytes = piexif.dump(exif_dict)\n    \n    image = Image.open(img_path)\n    image.save(img_path, "jpeg", exif=exif_bytes)\n\n# Example usage\nimage_path = 'path_to_your_image.jpg'\nlatitude = 37.7749\nlongitude = -122.4194\nset_gps_location(image_path, latitude, longitude)