-- Pseudo-code for clarity\n\nBEGIN TRANSACTION\n\n    -- Business logic SPs within transaction\n    EXEC @err = myBusinessSPa\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\n    EXEC @err = myBusinessSPb\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\n    EXEC @err = myBusinessSPc\n    IF (@err <> 0) BEGIN ROLLBACK TRANSACTION RETURN -1 END\n\nCOMMIT TRANSACTION\n\n-- Logging outside of transaction to ensure it is not rolled back\nEXEC myLogSP\nEXEC myLogSP\nEXEC myLogSP\nEXEC myLogSP\n\nRETURN 0