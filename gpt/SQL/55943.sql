-- Step 1: Add the new column with a default value\nALTER TABLE mytable ADD COLUMN mycolumn character varying(50) DEFAULT 'default_value';\n\n-- Step 2: Update existing rows if needed (optional if default is acceptable)\nUPDATE mytable SET mycolumn = 'some_value' WHERE mycolumn IS NULL;\n\n-- Step 3: Alter the column to set the NOT NULL constraint\nALTER TABLE mytable ALTER COLUMN mycolumn SET NOT NULL;