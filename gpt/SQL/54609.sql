-- Step 1: Add a status column to your table\nALTER TABLE YourTable ADD ProcessingStatus VARCHAR(50) DEFAULT 'Pending';\n\n-- Step 2: Use UPDATE ... OUTPUT to select and lock rows for processing\nBEGIN TRANSACTION;\n\n-- Mark rows as 'InProcess' and return them for processing\nWITH RowsToProcess AS (\n    SELECT TOP (10) * \n    FROM YourTable\n    WHERE ProcessingStatus = 'Pending'\n    ORDER BY SomeColumn -- Use appropriate ordering for your scenario\n)\nUPDATE RowsToProcess\nSET ProcessingStatus = 'InProcess'\nOUTPUT inserted.*;\n\n-- Commit the transaction\nCOMMIT TRANSACTION;