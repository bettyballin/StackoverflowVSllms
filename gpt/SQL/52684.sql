DECLARE @XMLData XML = '\n<Root>\n    <Cookie>\n       <id>Chocolate Chip</id>\n       <ChocolateChipPeanutButter>...</ChocolateChipPeanutButter>\n       <ChocolateChipPecan>...</ChocolateChipPecan>\n    </Cookie>\n    <Cookie>\n       <id>Raisin</id>\n    </Cookie>\n    <Cookie>\n       <id>Coconut</id>\n    </Cookie>\n    <Cookie>\n       <id>Sugar</id>\n    </Cookie>\n</Root>';\n\nSELECT\n    CookieName = C.value('(id/text())[1]', 'nvarchar(100)'),\n    SubCookieName = SC.value('local-name(.)', 'nvarchar(100)')\nFROM \n    @XMLData.nodes('/Root/Cookie') AS T(C)\nOUTER APPLY\n    (SELECT NULL\n     UNION ALL\n     SELECT SC.value('local-name(.)', 'nvarchar(100)')\n     FROM T.C.nodes('*[local-name(.) != "id"]') AS X(SC)\n    ) AS SC(SC)\nORDER BY CookieName, SubCookieName;