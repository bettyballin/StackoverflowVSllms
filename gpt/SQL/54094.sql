-- Assuming table structures:\n-- Table1 (ID INT IDENTITY(1,1) PRIMARY KEY, ColumnA VARCHAR(100))\n-- Table2 (ID INT PRIMARY KEY, ColumnB VARCHAR(100), FOREIGN KEY (ID) REFERENCES Table1(ID))\n\n-- Step 1: Create a table variable to store the identity values and any other necessary columns\nDECLARE @InsertedValues TABLE (ID INT, ColumnB VARCHAR(100));\n\n-- Step 2: Insert into the first table and capture the identity values\nINSERT INTO Table1 (ColumnA)\nOUTPUT inserted.ID, source.ColumnB INTO @InsertedValues (ID, ColumnB)\nSELECT ColumnA, ColumnB\nFROM SourceTable AS source;\n\n-- Step 3: Insert into the second table using the captured values\nINSERT INTO Table2 (ID, ColumnB)\nSELECT ID, ColumnB\nFROM @InsertedValues;