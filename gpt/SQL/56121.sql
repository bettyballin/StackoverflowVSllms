DECLARE @RequestId INT\nDECLARE @CallingProcedure NVARCHAR(MAX)\n\n-- Get the session id of the current request\nSET @RequestId = @@SPID\n\n-- Retrieve the SQL text of the calling procedure\nSELECT @CallingProcedure = st.text\nFROM sys.dm_exec_requests AS r\nCROSS APPLY sys.dm_exec_sql_text(r.sql_handle) AS st\nWHERE r.session_id = @RequestId\n\n-- Output the calling procedure text\nPRINT @CallingProcedure