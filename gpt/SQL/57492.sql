CREATE OR REPLACE FUNCTION audit_changes() RETURNS TRIGGER AS $$\n   BEGIN\n       IF TG_OP = 'INSERT' THEN\n           INSERT INTO audit_log (table_name, operation, changed_data)\n           VALUES (TG_TABLE_NAME, 'I', row_to_json(NEW));\n       ELSIF TG_OP = 'UPDATE' THEN\n           INSERT INTO audit_log (table_name, operation, changed_data)\n           VALUES (TG_TABLE_NAME, 'U', row_to_json(NEW));\n       ELSIF TG_OP = 'DELETE' THEN\n           INSERT INTO audit_log (table_name, operation, changed_data)\n           VALUES (TG_TABLE_NAME, 'D', row_to_json(OLD));\n       END IF;\n       RETURN NULL;\n   END;\n   $$ LANGUAGE plpgsql;