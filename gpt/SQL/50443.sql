CREATE OR REPLACE TRIGGER trigger_w_subquery\nAFTER UPDATE OR INSERT ON project_archiving\nFOR EACH ROW\nBEGIN\n  IF :OLD.archiving_status <> :NEW.archiving_status\n     AND :NEW.archiving_status = 1 THEN\n    DECLARE\n      v_offer projects.offer%TYPE;\n    BEGIN\n      SELECT offer INTO v_offer FROM projects WHERE projnum = :NEW.projnum;\n      IF v_offer IS NULL THEN\n        INSERT INTO offer_log (offer, status, date)\n        VALUES (NULL, 9, SYSDATE);\n      END IF;\n    EXCEPTION\n      WHEN NO_DATA_FOUND THEN\n        -- Handle the case where no project is found with the given projnum\n        INSERT INTO offer_log (offer, status, date)\n        VALUES (NULL, 9, SYSDATE);\n    END;\n  END IF;\nEND;\n/