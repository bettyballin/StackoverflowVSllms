CREATE TABLE IF NOT EXISTS `orders` (\n  `id` INT(11) NOT NULL AUTO_INCREMENT,\n  `partner_id` INT(11) NOT NULL,\n  `status` ENUM('pending', 'accepted', 'cancelled', 'other') NOT NULL,\n  `created_on` DATETIME NOT NULL,\n  `concept` VARCHAR(250) NOT NULL,\n  `type` ENUM('membership', 'other') NOT NULL DEFAULT 'membership',\n  `source` ENUM('dineromail', 'casati', 'deposit', 'other') NOT NULL DEFAULT 'dineromail',\n  `notes` TEXT NULL,\n  `last_check_on` DATETIME DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  INDEX (`partner_id`),\n  CONSTRAINT `fk_orders_partner` FOREIGN KEY (`partner_id`) REFERENCES `partners` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB;\n\nCREATE TABLE IF NOT EXISTS `payments` (\n  `id` INT(11) NOT NULL AUTO_INCREMENT,\n  `order_id` INT(11) NOT NULL,\n  `month` INT(2) DEFAULT NULL,\n  `year` INT(4) DEFAULT NULL,\n  `amount` DECIMAL(10, 2) NOT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `idx-order_id-month-year` (`order_id`, `month`, `year`),\n  INDEX (`order_id`),\n  CONSTRAINT `fk_payments_order` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB;\n\nCREATE TABLE IF NOT EXISTS `partners` (\n  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n  `name` VARCHAR(255) DEFAULT NULL,\n  `last_name` VARCHAR(255) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB;