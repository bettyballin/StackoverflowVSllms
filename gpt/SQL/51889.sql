CREATE TRIGGER adjust_total_purchases\nAFTER UPDATE OR DELETE ON purchase_orders\nFOR EACH ROW\nBEGIN\n    IF OLD.amount IS NOT NULL THEN\n        UPDATE customers\n        SET total_purchases = total_purchases - OLD.amount\n        WHERE customer_id = OLD.customer_id;\n    END IF;\n\n    IF NEW.amount IS NOT NULL THEN\n        UPDATE customers\n        SET total_purchases = total_purchases + NEW.amount\n        WHERE customer_id = NEW.customer_id;\n    END IF;\nEND;