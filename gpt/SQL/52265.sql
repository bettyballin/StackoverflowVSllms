CREATE FUNCTION dbo.SplitString\n(\n    @string NVARCHAR(MAX),\n    @delimiter CHAR(1)\n)\nRETURNS @output TABLE(Value NVARCHAR(MAX))\nAS\nBEGIN\n    DECLARE @start INT, @end INT\n    SET @start = 1\n    SET @end = CHARINDEX(@delimiter, @string)\n\n    WHILE @start < LEN(@string) + 1\n    BEGIN\n        IF @end = 0 \n            SET @end = LEN(@string) + 1\n\n        INSERT INTO @output (Value)\n        VALUES(SUBSTRING(@string, @start, @end - @start))\n\n        SET @start = @end + 1\n        SET @end = CHARINDEX(@delimiter, @string, @start)\n    END\n    RETURN\nEND\nGO