CREATE PROCEDURE DeleteBookAndPages\n    @BookId INT\nAS\nBEGIN\n    SET NOCOUNT ON;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        \n        -- Delete pages first\n        DELETE FROM Pages\n        WHERE BookId = @BookId;\n        \n        -- Delete the book\n        DELETE FROM Books\n        WHERE Id = @BookId;\n        \n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        ROLLBACK TRANSACTION;\n        -- Handle error or re-throw\n        THROW;\n    END CATCH\nEND