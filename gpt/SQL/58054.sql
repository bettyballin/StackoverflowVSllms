SELECT t1."Category", t1."Timestamp", t1."Value"\nFROM "Table" t1\nJOIN (\n    SELECT t2."Category", t2."Timestamp"\n    FROM "Table" t2\n    JOIN (\n        SELECT "Category", "Timestamp"\n        FROM "Table"\n        ORDER BY "Category", "Timestamp" DESC\n    ) t3\n    ON t2."Category" = t3."Category" AND t2."Timestamp" = t3."Timestamp"\n    GROUP BY t2."Category", t2."Timestamp"\n    HAVING COUNT(*) <= 5\n) t4\nON t1."Category" = t4."Category" AND t1."Timestamp" = t4."Timestamp"\nORDER BY t1."Category", t1."Timestamp" DESC;