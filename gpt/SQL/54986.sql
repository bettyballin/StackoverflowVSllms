USE master;\n   GO\n\n   -- Create a table to log long-running procedures\n   CREATE TABLE LongRunningProcedures (\n       EventTime DATETIME,\n       SPID INT,\n       Duration BIGINT,\n       ObjectName NVARCHAR(256)\n   );\n\n   -- Create a stored procedure to start the trace\n   CREATE PROCEDURE StartLongRunningTrace\n   AS\n   BEGIN\n       DECLARE @TraceID INT;\n       DECLARE @MaxDuration BIGINT = 1000; -- Duration in milliseconds (1 second)\n\n       -- Define the trace\n       EXEC sp_trace_create @TraceID OUTPUT, 0, N'C:\Traces\LongRunningTrace';\n       \n       -- Add events to the trace (example: RPC:Completed and SP:Completed)\n       EXEC sp_trace_setevent @TraceID, 10, 1, 1; -- RPC:Completed - EventClass\n       EXEC sp_trace_setevent @TraceID, 10, 16, 1; -- Duration\n       EXEC sp_trace_setevent @TraceID, 10, 12, 1; -- SPID\n       EXEC sp_trace_setevent @TraceID, 10, 13, 1; -- ObjectName\n       \n       EXEC sp_trace_setevent @TraceID, 43, 1, 1; -- SP:Completed - EventClass\n       EXEC sp_trace_setevent @TraceID, 43, 16, 1; -- Duration\n       EXEC sp_trace_setevent @TraceID, 43, 12, 1; -- SPID\n       EXEC sp_trace_setevent @TraceID, 43, 13, 1; -- ObjectName\n\n       -- Set a filter for the duration\n       EXEC sp_trace_setfilter @TraceID, 16, 0, 4, @MaxDuration;\n\n       -- Start the trace\n       EXEC sp_trace_setstatus @TraceID, 1;\n   END;\n   GO