DECLARE @ResourceXML XML\n\n-- Example XML data\nSET @ResourceXML = '<Resources>\n                      <R>\n                        <ID>1</ID>\n                        <Q>10</Q>\n                      </R>\n                      <R>\n                        <ID>2</ID>\n                        <Q>20</Q>\n                      </R>\n                    </Resources>'\n\nDECLARE @OrgID INT = 123 -- Example OrgID\nDECLARE @tmpRes TABLE (ResourceID int, Quantity int, FormID int)\n\n-- Using nodes() and CROSS APPLY\nINSERT INTO @tmpRes (ResourceID, Quantity, FormID)\nSELECT  x.value('(ID/text())[1]', 'INT') AS ResourceID,\n        x.value('(Q/text())[1]', 'INT') AS Quantity,\n        RESC.FormID\nFROM    @ResourceXML.nodes('/Resources/R') AS T(x)\nINNER JOIN dbo.tblResources RESC ON x.value('(ID/text())[1]', 'INT') = RESC.ResourceID\nWHERE   RESC.OrgID = @OrgID