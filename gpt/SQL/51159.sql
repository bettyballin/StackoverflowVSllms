BEGIN TRANSACTION\n    DECLARE @id INT;\n\n    -- Lock the identities table row for the subscriber table\n    SELECT @id = next_id\n    FROM identities WITH (UPDLOCK, ROWLOCK)\n    WHERE table_name = 'subscriber';\n\n    -- Insert the new record using the fetched ID\n    INSERT INTO subscriber (recid) VALUES (@id);\n\n    -- Update the next available ID in the identities table\n    UPDATE identities SET next_id = next_id + 1\n    WHERE table_name = 'subscriber';\n\nCOMMIT TRANSACTION;