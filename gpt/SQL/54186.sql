-- Ensure proper indexes are created\nCREATE INDEX idx_products_dates ON products (date_start, date_end);\nCREATE INDEX idx_products_store_id ON products (store_id);\nCREATE INDEX idx_products_subcategory_id ON products (subcategory_id);\nCREATE INDEX idx_stores_id ON stores (id);\nCREATE INDEX idx_categories_sub_id ON categories_sub (id);\nCREATE INDEX idx_categories_id ON categories (id);\nCREATE INDEX idx_cities_id ON cities (id);\nCREATE INDEX idx_regions_id ON regions (id);\n\n-- Optimized query\nSELECT p.*,\n       s.name AS store_name,\n       cs.name AS subcategory_name,\n       cat.id AS category_id, \n       cat.name AS category_name,\n       c.id AS city_id, \n       c.name AS city_name,\n       r.id AS region_id, \n       r.name AS region_name\n  FROM products p\n       JOIN stores s ON s.id = p.store_id\n       JOIN categories_sub cs ON cs.id = p.subcategory_id\n       JOIN categories cat ON cat.id = cs.category_id\n       JOIN cities c ON c.id = s.city_id\n       JOIN regions r ON r.id = c.region_id\n  WHERE DATE(NOW()) BETWEEN p.date_start AND p.date_end;