SELECT \n    g.gallery_id,\n    IFNULL(p.picture_count, 0) AS picture_count,\n    IFNULL(v.vote_sum, 0) AS vote_sum\nFROM \n    gallery g\nLEFT JOIN \n    (SELECT \n         picture_gallery_ref, \n         COUNT(picture_id) AS picture_count \n     FROM \n         picture \n     GROUP BY \n         picture_gallery_ref) p \nON \n    g.gallery_id = p.picture_gallery_ref\nLEFT JOIN \n    (SELECT \n         vote_gallery_ref, \n         SUM(vote_value) AS vote_sum \n     FROM \n         vote \n     GROUP BY \n         vote_gallery_ref) v \nON \n    g.gallery_id = v.vote_gallery_ref;