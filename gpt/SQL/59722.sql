CREATE FUNCTION dbo.CapitalizeWords(@input NVARCHAR(MAX))\nRETURNS NVARCHAR(MAX)\nAS\nBEGIN\n    DECLARE @output NVARCHAR(MAX) = ''\n    DECLARE @position INT = 1\n    DECLARE @length INT = LEN(@input)\n    DECLARE @char NVARCHAR(1)\n    DECLARE @prevChar NVARCHAR(1) = ' '\n\n    WHILE @position <= @length\n    BEGIN\n        SET @char = SUBSTRING(@input, @position, 1)\n        IF @prevChar = ' ' AND @char BETWEEN 'a' AND 'z'\n        BEGIN\n            SET @output = @output + UPPER(@char)\n        END\n        ELSE\n        BEGIN\n            SET @output = @output + @char\n        END\n        SET @prevChar = @char\n        SET @position = @position + 1\n    END\n\n    RETURN @output\nEND