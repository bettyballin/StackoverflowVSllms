-- Assuming we have a table variable or temporary table to hold the analysis IDs\nDECLARE @AnalysisIds TABLE (analysis_id INT);\n\n-- Insert the analysis IDs you want to compare\nINSERT INTO @AnalysisIds (analysis_id)\nVALUES (1), (2);\n\n-- Query to find differing ranks between the specified analysis IDs\nWITH RankedData AS (\n    SELECT \n        r.indicator_id,\n        r.alternative_id,\n        r.analysis_id,\n        r.[rank],\n        DENSE_RANK() OVER (PARTITION BY r.indicator_id, r.alternative_id ORDER BY r.[rank]) as rank_grp\n    FROM \n        rankings r\n    INNER JOIN \n        @AnalysisIds a ON r.analysis_id = a.analysis_id\n)\nSELECT \n    r1.analysis_id,\n    r1.alternative_id,\n    r1.indicator_id,\n    r1.[rank]\nFROM \n    RankedData r1\nINNER JOIN \n    RankedData r2\n    ON r1.indicator_id = r2.indicator_id \n    AND r1.alternative_id = r2.alternative_id\n    AND r1.rank_grp != r2.rank_grp\nORDER BY \n    r1.indicator_id, r1.alternative_id, r1.analysis_id;