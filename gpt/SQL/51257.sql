CREATE PROCEDURE GetAppsByLocationAndApplication\n    @application_id NVARCHAR(MAX),\n    @location_ids NVARCHAR(MAX)\nAS\nBEGIN\n    SELECT DISTINCT name, location_id, application_id \n    FROM apps\n    WHERE ((application_id IS NULL) OR (application_id = @application_id))\n    AND ((location_id IS NULL) OR (location_id IN (SELECT number FROM iter$simple_intlist_to_tbl(@location_ids))))\nEND