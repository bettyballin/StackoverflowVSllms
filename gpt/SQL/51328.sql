CREATE PROCEDURE UpdateStudentsStatus\nAS\nBEGIN\n    -- Declare a cursor to loop through the records\n    DECLARE @studentID INT, @statusID INT, @comments NVARCHAR(255), @userID INT;\n\n    -- Create a temporary table to hold the records that need updating\n    CREATE TABLE #TempStudentsToUpdate (\n        studentID INT,\n        statusID INT,\n        comments NVARCHAR(255),\n        userID INT\n    );\n\n    -- Insert the records that need updating into the temporary table\n    INSERT INTO #TempStudentsToUpdate (studentID, statusID, comments, userID)\n    SELECT studentID, statusID, comments, userID\n    FROM Students\n    WHERE <your criteria here>;\n\n    -- Open the cursor\n    DECLARE studentCursor CURSOR FOR\n    SELECT studentID, statusID, comments, userID\n    FROM #TempStudentsToUpdate;\n\n    OPEN studentCursor;\n\n    -- Fetch the first row\n    FETCH NEXT FROM studentCursor INTO @studentID, @statusID, @comments, @userID;\n\n    -- Loop through the records\n    WHILE @@FETCH_STATUS = 0\n    BEGIN\n        -- Call the existing stored procedure for each record\n        EXEC pUpdateStudentStatus @studentID, @statusID, @comments, @userID;\n\n        -- Fetch the next row\n        FETCH NEXT FROM studentCursor INTO @studentID, @statusID, @comments, @userID;\n    END;\n\n    -- Close and deallocate the cursor\n    CLOSE studentCursor;\n    DEALLOCATE studentCursor;\n\n    -- Drop the temporary table\n    DROP TABLE #TempStudentsToUpdate;\nEND;