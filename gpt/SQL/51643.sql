-- Example SQL to create a restricted user and encrypt data\n\n-- Step 1: Create a login for your application\nCREATE LOGIN AppUser WITH PASSWORD = 'StrongPassword123!';\n\n-- Step 2: Create a user in your database for the login\nUSE YourDatabase;\nCREATE USER AppUser FOR LOGIN AppUser;\n\n-- Step 3: Grant necessary permissions (least privilege)\nGRANT SELECT, INSERT, UPDATE, DELETE ON YourTable TO AppUser;\n\n-- Step 4: Encrypt sensitive columns using symmetric key encryption\n-- Create a master key\nCREATE MASTER KEY ENCRYPTION BY PASSWORD = 'AnotherStrongPassword123!';\n\n-- Create a certificate\nCREATE CERTIFICATE MyCert WITH SUBJECT = 'My Certificate';\n\n-- Create a symmetric key\nCREATE SYMMETRIC KEY MySymmetricKey WITH ALGORITHM = AES_256 ENCRYPTION BY CERTIFICATE MyCert;\n\n-- Encrypt data\nOPEN SYMMETRIC KEY MySymmetricKey DECRYPTION BY CERTIFICATE MyCert;\nUPDATE YourTable\nSET EncryptedColumn = EncryptByKey(Key_GUID('MySymmetricKey'), CONVERT(varbinary, 'SensitiveData'));\n\n-- Decrypt data when needed\nSELECT CONVERT(varchar, DecryptByKey(EncryptedColumn)) AS DecryptedData\nFROM YourTable;