CREATE TABLE ArticleViewLog\n(\n    ID INT IDENTITY(1,1) PRIMARY KEY,\n    ArticleID INT,\n    ViewDateTime DATETIME DEFAULT GETDATE()\n);\n\nCREATE PROCEDURE LogArticleView\n(\n    @ArticleID int\n)\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    BEGIN TRANSACTION;\n\n    BEGIN TRY\n        INSERT INTO ArticleViewLog (ArticleID)\n        VALUES (@ArticleID);\n\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        -- Rollback the transaction\n        ROLLBACK TRANSACTION;\n\n        -- Raise an error and return\n        DECLARE @ErrorMessage NVARCHAR(4000);\n        DECLARE @ErrorSeverity INT;\n        DECLARE @ErrorState INT;\n\n        SELECT \n            @ErrorMessage = ERROR_MESSAGE(),\n            @ErrorSeverity = ERROR_SEVERITY(),\n            @ErrorState = ERROR_STATE();\n\n        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);\n    END CATCH;\nEND;