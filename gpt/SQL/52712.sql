CREATE PROCEDURE GetTopFiveMarksPerStudent\nAS\nBEGIN\n    -- First table: List of students by a criteria\n    SELECT StudentID, StudentName\n    INTO #Students\n    FROM Students\n    WHERE <YourCriteria>; -- Replace <YourCriteria> with your specific filter criteria\n\n    -- Second table: Top 5 marks per student in the first table\n    ;WITH RankedMarks AS (\n        SELECT \n            m.StudentID,\n            m.Mark,\n            ROW_NUMBER() OVER (PARTITION BY m.StudentID ORDER BY m.Mark DESC) AS Rank\n        FROM Marks m\n        INNER JOIN #Students s ON m.StudentID = s.StudentID\n    )\n    SELECT \n        StudentID,\n        Mark\n    INTO #TopFiveMarks\n    FROM RankedMarks\n    WHERE Rank <= 5;\n\n    -- Select from temporary tables to return the result sets\n    SELECT * FROM #Students;\n    SELECT * FROM #TopFiveMarks;\n\n    -- Clean up temporary tables\n    DROP TABLE #Students;\n    DROP TABLE #TopFiveMarks;\nEND;\nGO