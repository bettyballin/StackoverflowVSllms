CREATE TRIGGER trgYourTableChange\nON YourTable\nAFTER INSERT, UPDATE, DELETE\nAS\nBEGIN\n    DECLARE @messageBody XML;\n\n    -- Create the audit message\n    SET @messageBody = (\n        SELECT\n            (SELECT * FROM DELETED FOR XML PATH('OldValue'), TYPE),\n            (SELECT * FROM INSERTED FOR XML PATH('NewValue'), TYPE)\n        FOR XML PATH('AuditData'), TYPE\n    );\n\n    -- Begin a dialog\n    DECLARE @conversationHandle UNIQUEIDENTIFIER;\n    BEGIN DIALOG CONVERSATION @conversationHandle\n        FROM SERVICE [AuditService]\n        TO SERVICE 'AuditService'\n        ON CONTRACT [AuditContract]\n        WITH ENCRYPTION = OFF;\n\n    -- Send the message\n    SEND ON CONVERSATION @conversationHandle\n        MESSAGE TYPE [AuditMessage]\n        (@messageBody);\n\n    -- End the conversation\n    END CONVERSATION @conversationHandle;\nEND;