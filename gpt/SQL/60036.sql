BEGIN TRY\n    -- Start a transaction for schema change\n    BEGIN TRANSACTION SchemaChange;\n    \n    -- Example schema change: Adding a new column\n    ALTER TABLE YourTableName ADD NewColumnName VARCHAR(255);\n    \n    -- Commit the schema change transaction\n    COMMIT TRANSACTION SchemaChange;\n    \n    -- Start a new transaction for data updates\n    BEGIN TRANSACTION DataUpdate;\n    \n    -- Example data updates\n    -- Update the rows based on the new schema\n    UPDATE YourTableName\n    SET NewColumnName = 'DefaultValue'\n    WHERE SomeCondition = 'Value';\n    \n    -- Update other related tables if necessary\n    UPDATE AnotherTable\n    SET SomeColumn = 'NewValue'\n    WHERE SomeCondition = 'Value';\n    \n    -- Commit the data update transaction\n    COMMIT TRANSACTION DataUpdate;\n    \nEND TRY\nBEGIN CATCH\n    -- Rollback both transactions if any error occurs\n    IF @@TRANCOUNT > 0\n    BEGIN\n        ROLLBACK TRANSACTION;\n    END;\n    \n    -- Raise the error with the original message\n    THROW;\nEND CATCH;