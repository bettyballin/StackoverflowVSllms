CREATE OR REPLACE FUNCTION check_team_size() RETURNS TRIGGER AS $$\nBEGIN\n    IF (SELECT COUNT(*) FROM TeamMemberships WHERE team_id = NEW.team_id) >= 2 THEN\n        RAISE EXCEPTION 'A team can have at most two players';\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER team_size_check\nBEFORE INSERT ON TeamMemberships\nFOR EACH ROW\nEXECUTE FUNCTION check_team_size();