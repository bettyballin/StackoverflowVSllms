DECLARE @tableName NVARCHAR(255);\nDECLARE @indexName NVARCHAR(255);\nDECLARE @sql NVARCHAR(MAX);\n\nDECLARE tableCursor CURSOR FOR\nSELECT QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(name)\nFROM sys.tables;\n\nOPEN tableCursor;\nFETCH NEXT FROM tableCursor INTO @tableName;\n\nWHILE @@FETCH_STATUS = 0\nBEGIN\n    DECLARE indexCursor CURSOR FOR\n    SELECT QUOTENAME(name)\n    FROM sys.indexes\n    WHERE object_id = OBJECT_ID(@tableName)\n      AND type_desc IN ('CLUSTERED', 'NONCLUSTERED');\n\n    OPEN indexCursor;\n    FETCH NEXT FROM indexCursor INTO @indexName;\n\n    WHILE @@FETCH_STATUS = 0\n    BEGIN\n        SET @sql = N'ALTER INDEX ' + @indexName + ' ON ' + @tableName + ' REBUILD;';\n        EXEC sp_executesql @sql;\n        FETCH NEXT FROM indexCursor INTO @indexName;\n    END;\n\n    CLOSE indexCursor;\n    DEALLOCATE indexCursor;\n\n    FETCH NEXT FROM tableCursor INTO @tableName;\nEND;\n\nCLOSE tableCursor;\nDEALLOCATE tableCursor;