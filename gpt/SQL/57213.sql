CREATE PROCEDURE [dbo].[Search]\n    @Col1 INT = NULL,\n    @Col2 INT = NULL,\n    @Col3 INT = NULL,\n    @Col4 INT = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    DECLARE @SQL NVARCHAR(MAX);\n    SET @SQL = 'SELECT * FROM [dbo].[TestTable] WHERE 1=1';\n\n    IF @Col1 IS NOT NULL\n    BEGIN\n        SET @SQL = @SQL + ' AND [Col1] = @Col1';\n    END\n\n    IF @Col2 IS NOT NULL\n    BEGIN\n        SET @SQL = @SQL + ' AND [Col2] = @Col2';\n    END\n\n    IF @Col3 IS NOT NULL\n    BEGIN\n        SET @SQL = @SQL + ' AND [Col3] = @Col3';\n    END\n\n    IF @Col4 IS NOT NULL\n    BEGIN\n        SET @SQL = @SQL + ' AND [Col4] = @Col4';\n    END\n\n    EXEC sp_executesql @SQL,\n        N'@Col1 INT, @Col2 INT, @Col3 INT, @Col4 INT',\n        @Col1, @Col2, @Col3, @Col4;\nEND