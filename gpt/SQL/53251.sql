-- Define variables for batching\nDECLARE @BatchSize INT = 10000; -- Adjust batch size as needed\nDECLARE @RowCount INT;\nDECLARE @LastID INT = 0; -- Assuming there's an ID column to track progress\n\n-- Loop to handle batch insertion\nWHILE 1=1\nBEGIN\n    -- Perform batch insert\n    INSERT INTO TableName (Field1, Field2, Field3)\n    SELECT TOP (@BatchSize) Field1, Field2, Field3\n    FROM TableName2\n    WHERE ID > @LastID\n    ORDER BY ID;\n\n    -- Check the number of rows affected\n    SET @RowCount = @@ROWCOUNT;\n\n    -- Break the loop if no more rows are inserted\n    IF @RowCount = 0\n        BREAK;\n\n    -- Keep track of the last inserted ID\n    SELECT @LastID = MAX(ID) FROM TableName2 WHERE ID > @LastID;\nEND;