SELECT \n    user_id,\n    DATE_FORMAT(DATE(shift_start), '%m/%d/%Y') AS shift_start_date, \n    TIME_FORMAT(TIME(shift_start), '%h:%i %p') AS shift_start_time,\n    TIME_FORMAT(TIME(shift_end), '%h:%i %p') AS shift_end_time,\n    title\nFROM \n    shifts\nWHERE \n    user_id = ? AND \n    DATE(shift_start) BETWEEN \n        DATE_SUB(DATE(NOW()), INTERVAL WEEKDAY(NOW()) DAY) AND \n        DATE_ADD(\n            DATE(NOW()), INTERVAL (\n                SELECT \n                    IF(COUNT(*), 6, 4)\n                FROM \n                    shifts\n                WHERE \n                    DATE(shift_start) BETWEEN \n                        DATE_ADD(DATE(NOW()), INTERVAL 5 - WEEKDAY(NOW()) DAY) AND \n                        DATE_ADD(DATE(NOW()), INTERVAL 6 - WEEKDAY(NOW()) DAY)\n            ) - WEEKDAY(NOW()) DAY\n        )\nORDER BY \n    shift_start;