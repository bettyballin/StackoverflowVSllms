CREATE TRIGGER trg_ensure_single_subclass\nON students\nAFTER INSERT, UPDATE\nAS\nBEGIN\n    DECLARE @student_id INT;\n    SELECT @student_id = student_id FROM inserted;\n    \n    DECLARE @count INT;\n    SELECT @count = \n        (SELECT COUNT(*) FROM athletes WHERE student_id = @student_id) +\n        (SELECT COUNT(*) FROM musicians WHERE student_id = @student_id);\n    \n    IF @count != 1\n    BEGIN\n        ROLLBACK TRANSACTION;\n        THROW 50001, 'A student must be in exactly one subclass.', 1;\n    END\nEND;