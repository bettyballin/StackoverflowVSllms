CREATE OR REPLACE FUNCTION assign_child_id() RETURNS TRIGGER AS $$\nDECLARE\n    new_child_id INTEGER;\nBEGIN\n    -- Ensure sequence for the parent_id exists\n    PERFORM 1 FROM pg_class WHERE relname = 'child_id_seq_' || NEW.PARENT_ID;\n    IF NOT FOUND THEN\n        EXECUTE 'CREATE SEQUENCE child_id_seq_' || NEW.PARENT_ID;\n    END IF;\n\n    -- Get the next value from the sequence\n    EXECUTE 'SELECT nextval(''child_id_seq_' || NEW.PARENT_ID || ''')' INTO new_child_id;\n\n    -- Assign the new child_id\n    NEW.CHILD_ID := new_child_id;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;