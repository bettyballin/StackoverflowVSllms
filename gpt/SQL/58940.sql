-- Create a temporary table to hold batch updates\nCREATE TEMPORARY TABLE temp_tickets_extra (\n    ticket_id INT(11) NOT NULL,\n    manager_created INT(11) DEFAULT NULL,\n    manager_resolved INT(11) DEFAULT NULL,\n    PRIMARY KEY (ticket_id)\n);\n\n-- Insert data into the temporary table in batches\nINSERT INTO temp_tickets_extra (ticket_id, manager_created, manager_resolved)\nSELECT t.ticket_id, m1.manager_id, m2.manager_id\nFROM tickets t\nJOIN managers m1 ON t.manager_created_id = m1.id\nJOIN managers m2 ON t.manager_resolved_id = m2.id\nLIMIT 10000; -- Adjust batch size as needed\n\n-- Update the main table from the temporary table\nUPDATE tickets_extra te\nJOIN temp_tickets_extra tte ON te.ticket_id = tte.ticket_id\nSET te.manager_created = tte.manager_created,\n    te.manager_resolved = tte.manager_resolved;\n\n-- Drop the temporary table\nDROP TEMPORARY TABLE temp_tickets_extra;