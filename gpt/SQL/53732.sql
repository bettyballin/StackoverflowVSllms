SELECT it.item_id\nFROM item_tags it\nJOIN tags t ON it.tag_id = t.tag_id\nWHERE t.tag_name IN ('p1', 'p2', ..., 'pn')\nGROUP BY it.item_id\nHAVING COUNT(DISTINCT t.tag_name) = n -- n is the number of positive tags\nAND it.item_id NOT IN (\n    SELECT it2.item_id\n    FROM item_tags it2\n    JOIN tags t2 ON it2.tag_id = t2.tag_id\n    WHERE t2.tag_name IN ('n1', 'n2', ..., 'nk')\n);