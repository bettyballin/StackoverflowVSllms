DELIMITER $$\n\nCREATE PROCEDURE archive_account(IN user_id INT)\nBEGIN\n    DECLARE EXIT HANDLER FOR SQLEXCEPTION\n    BEGIN\n        -- Rollback the transaction if any error occurs\n        ROLLBACK;\n    END;\n\n    -- Start the transaction\n    START TRANSACTION;\n\n    -- Insert data into archive tables and delete from active tables\n    INSERT INTO credit_archive_acc SELECT * FROM credit_acc WHERE uid_usr = user_id;\n    DELETE FROM credit_acc WHERE uid_usr = user_id;\n\n    INSERT INTO user_archive_usr SELECT * FROM user_usr WHERE id_usr = user_id;\n    DELETE FROM user_usr WHERE id_usr = user_id;\n\n    -- Do this for other tables as needed\n    -- INSERT INTO other_archive_table SELECT * FROM other_table WHERE user_id = user_id;\n    -- DELETE FROM other_table WHERE user_id = user_id;\n\n    -- Commit the transaction\n    COMMIT;\nEND$$\n\nDELIMITER ;