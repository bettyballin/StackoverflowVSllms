CREATE TABLE ProductLineRandomImages (\n    productLineID INT,\n    imageID INT,\n    PRIMARY KEY (productLineID)\n);\n\n-- Populate this table periodically\nINSERT INTO ProductLineRandomImages (productLineID, imageID)\nSELECT pl.id, (SELECT i.id FROM Images i JOIN ProductImageLinks pil ON i.id = pil.imageID JOIN SpecificProducts sp ON sp.id = pil.specificProductID WHERE sp.productLineID = pl.id ORDER BY RAND() LIMIT 1)\nFROM ProductLines pl;