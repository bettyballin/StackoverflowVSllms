CREATE PROCEDURE sp_GetOpManualXMLDataFromInt\n(\n    @valueXPath NVARCHAR(255),\n    @criteriaXPath NVARCHAR(255),\n    @intCriteriaVal INT\n)\nAS\nBEGIN\n    DECLARE @xml XML;\n\n    -- Use a table variable to store the result\n    DECLARE @result TABLE\n    (\n        omId INT,\n        xmlNodes XML\n    );\n\n    -- Insert the filtered data into the table variable\n    INSERT INTO @result\n    SELECT \n        omID,\n        omText.query(@valueXPath) AS Value\n    FROM \n        dbo.htOperationsManuals\n    WHERE \n        omText.value(@criteriaXPath, 'int') = @intCriteriaVal;\n\n    -- Return the result\n    SELECT * FROM @result;\nEND;