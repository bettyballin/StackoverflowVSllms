DECLARE @ProcName NVARCHAR(255)\nDECLARE @FileName NVARCHAR(255)\nDECLARE @SQL NVARCHAR(MAX)\n\n-- Set the stored procedure name\nSET @ProcName = 'YourStoredProcedureName'\n-- Set the output file name\nSET @FileName = 'C:\Path\To\Your\Output\Directory\' + @ProcName + '.sql'\n\n-- Generate the script\nSET @SQL = 'EXEC sp_helptext ''' + @ProcName + ''''\nEXEC sp_executesql @SQL\n\n-- Save the script to a file\nSET @SQL = 'bcp "EXEC sp_helptext ''' + @ProcName + '''" queryout "' + @FileName + '" -c -T -S ' + @@SERVERNAME\nEXEC xp_cmdshell @SQL