CREATE PROCEDURE GetSiteData\n    @parameter INT = NULL,\n    @NewGroupId INT = NULL\nAS\nBEGIN\n    DECLARE @sql NVARCHAR(MAX);\n    DECLARE @params NVARCHAR(MAX);\n\n    SET @sql = 'SELECT * FROM YourTable WHERE 1=1';\n\n    IF @parameter IS NOT NULL\n    BEGIN\n        SET @sql = @sql + ' AND column = @parameter';\n    END\n\n    IF @NewGroupId IS NOT NULL\n    BEGIN\n        SET @sql = @sql + ' AND si.SiteId IN (SELECT gs.SiteId FROM [UtilityWeb].[dbo].[GroupSites] AS gs WHERE gs.GroupId = @NewGroupId)';\n    END\n\n    SET @params = '@parameter INT, @NewGroupId INT';\n\n    EXEC sp_executesql @sql, @params, @parameter, @NewGroupId;\nEND