DELIMITER //\n\nCREATE PROCEDURE UpdateAndSelect()\nBEGIN\n    DECLARE done INT DEFAULT FALSE;\n    DECLARE var INT DEFAULT 0;\n    DECLARE cur CURSOR FOR SELECT id, col1 FROM tbl2;\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;\n\n    OPEN cur;\n    read_loop: LOOP\n        FETCH cur INTO @id, @col1;\n        IF done THEN\n            LEAVE read_loop;\n        END IF;\n\n        SET var = var + 1;\n        UPDATE tbl2 SET col1 = var WHERE id = @id;\n        -- You can select or perform other operations with @id and var here if needed\n    END LOOP;\n\n    CLOSE cur;\nEND //\n\nDELIMITER ;