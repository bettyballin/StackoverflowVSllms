WITH Quartiles AS (\n  SELECT\n    PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY x) AS Q1,\n    PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY x) AS Q3\n  FROM y\n),\nIQR_Calculation AS (\n  SELECT\n    Q1,\n    Q3,\n    Q3 - Q1 AS IQR,\n    Q1 - 1.5 * (Q3 - Q1) AS Lower_Bound,\n    Q3 + 1.5 * (Q3 - Q1) AS Upper_Bound\n  FROM Quartiles\n)\nSELECT AVG(x) AS Average_X\nFROM y, IQR_Calculation\nWHERE x >= Lower_Bound AND x <= Upper_Bound;