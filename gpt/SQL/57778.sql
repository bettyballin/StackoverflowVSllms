-- Step 1: Create a temporary table to store intermediate results\nCREATE GLOBAL TEMPORARY TABLE temp_orders (\n    orderId NUMBER,\n    siteID  NUMBER\n) ON COMMIT DELETE ROWS;\n\n-- Step 2: Modify the GetOrder procedure to insert into the temporary table\nCREATE OR REPLACE PROCEDURE GetOrder(\n    p_siteID IN NUMBER\n) IS\nBEGIN\n    INSERT INTO temp_orders (orderId, siteID)\n    SELECT orderId, siteID\n    FROM Orders\n    WHERE siteID = p_siteID;\nEND GetOrder;\n\n-- Step 3: Procedure to get orders by customer name\nCREATE OR REPLACE PROCEDURE GetOrderbyCustName(\n    p_name     IN  VARCHAR2,\n    curReturn  OUT sys_refcursor\n) IS\nBEGIN\n    -- Clear the temporary table\n    DELETE FROM temp_orders;\n\n    FOR rec IN (SELECT siteID FROM customers WHERE name LIKE p_name) LOOP\n        -- Collect orders into the temporary table\n        GetOrder(rec.siteID);\n    END LOOP;\n\n    -- Return the combined results as a ref cursor\n    OPEN curReturn FOR\n    SELECT * FROM temp_orders;\nEND GetOrderbyCustName;