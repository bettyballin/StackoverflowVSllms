START TRANSACTION;\n\n-- Check if the record exists\nSELECT COUNT(*) INTO @exists FROM your_table WHERE critical_id = $id;\n\nIF @exists > 0 THEN\n    -- Update the record if it exists\n    UPDATE your_table\n    SET field = 'new_value'\n    WHERE critical_id = $id;\nELSE\n    -- Insert the record if it does not exist\n    INSERT INTO your_table (critical_id, field)\n    VALUES ($id, 'new_value');\nEND IF;\n\nCOMMIT;