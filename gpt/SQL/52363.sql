DECLARE @ConversationHandle UNIQUEIDENTIFIER;\nDECLARE @MessageBody NVARCHAR(MAX);\n\nWAITFOR (\n    RECEIVE TOP(1)\n    @ConversationHandle = conversation_handle,\n    @MessageBody = message_body\n    FROM [TargetQueue]\n), TIMEOUT 5000;\n\n-- Process the message\nIF @MessageBody IS NOT NULL\nBEGIN\n    -- Process the message\n\n    -- If handled successfully, end the conversation\n    END CONVERSATION @ConversationHandle;\nEND