CREATE PROCEDURE UnionSubs\n    @Ids NVARCHAR(MAX)\nAS\nBEGIN\n    DECLARE @SQL NVARCHAR(MAX)\n    SET @SQL = ''\n\n    -- Split the @Ids string and iterate over each ID\n    DECLARE @Id NVARCHAR(50)\n    DECLARE @Pos INT\n    SET @Pos = CHARINDEX(',', @Ids + ',')\n    \n    WHILE @Pos > 0\n    BEGIN\n        SET @Id = LEFT(@Ids, @Pos - 1)\n        SET @Ids = STUFF(@Ids, 1, @Pos, '')\n\n        IF LEN(@SQL) > 0\n            SET @SQL = @SQL + ' UNION '\n\n        SET @SQL = @SQL + 'SELECT * FROM Subs(' + @Id + ')'\n\n        SET @Pos = CHARINDEX(',', @Ids + ',')\n    END\n\n    EXEC sp_executesql @SQL\nEND