CREATE OR REPLACE FUNCTION prevent_insert_if_dropped_null()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF EXISTS (\n        SELECT 1 \n        FROM bar \n        WHERE ID = NEW.ID \n        AND dropped IS NULL\n    ) THEN\n        RAISE EXCEPTION 'Cannot insert record: an open record with the same ID already exists.';\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER check_before_insert\nBEFORE INSERT ON bar\nFOR EACH ROW\nEXECUTE FUNCTION prevent_insert_if_dropped_null();