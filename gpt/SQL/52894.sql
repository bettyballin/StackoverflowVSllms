BEGIN\n    -- Create the consumer groups\n    DBMS_RESOURCE_MANAGER.create_consumer_group(CONSUMER_GROUP => 'SYS_GROUP', COMMENT => 'System sessions');\n    DBMS_RESOURCE_MANAGER.create_consumer_group(CONSUMER_GROUP => 'OLTP_GROUP', COMMENT => 'OLTP sessions');\n    DBMS_RESOURCE_MANAGER.create_consumer_group(CONSUMER_GROUP => 'BATCH_GROUP', COMMENT => 'Batch processing sessions');\n\n    -- Create the resource plan\n    DBMS_RESOURCE_MANAGER.create_pending_area();\n    DBMS_RESOURCE_MANAGER.create_plan(PLAN => 'MY_RESOURCE_PLAN', COMMENT => 'Resource management plan');\n\n    -- Create plan directives\n    DBMS_RESOURCE_MANAGER.create_plan_directive(\n        PLAN => 'MY_RESOURCE_PLAN',\n        GROUP_OR_SUBPLAN => 'SYS_GROUP',\n        COMMENT => 'System sessions get highest priority',\n        MGMT_P1 => 100\n    );\n\n    DBMS_RESOURCE_MANAGER.create_plan_directive(\n        PLAN => 'MY_RESOURCE_PLAN',\n        GROUP_OR_SUBPLAN => 'OLTP_GROUP',\n        COMMENT => 'OLTP sessions get second priority',\n        MGMT_P1 => 0,\n        MGMT_P2 => 100\n    );\n\n    DBMS_RESOURCE_MANAGER.create_plan_directive(\n        PLAN => 'MY_RESOURCE_PLAN',\n        GROUP_OR_SUBPLAN => 'BATCH_GROUP',\n        COMMENT => 'Batch processing gets third priority',\n        MGMT_P1 => 0,\n        MGMT_P2 => 0,\n        MGMT_P3 => 100\n    );\n\n    -- Validate the pending area\n    DBMS_RESOURCE_MANAGER.validate_pending_area();\n\n    -- Submit the pending area\n    DBMS_RESOURCE_MANAGER.submit_pending_area();\nEND;\n/\n\n-- Switch the active resource plan\nALTER SYSTEM SET RESOURCE_MANAGER_PLAN = 'MY_RESOURCE_PLAN';