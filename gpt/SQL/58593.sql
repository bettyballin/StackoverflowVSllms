WITH DEPENDENCIES (NAME, TYPE, REFERENCED_OWNER, REFERENCED_NAME, REFERENCED_TYPE, LEVEL) AS (\n  SELECT \n    NAME, \n    TYPE, \n    REFERENCED_OWNER, \n    REFERENCED_NAME, \n    REFERENCED_TYPE, \n    1 AS LEVEL\n  FROM \n    ALL_DEPENDENCIES\n  WHERE \n    OWNER = :owner\n    AND NAME = :procedure_name\n    AND TYPE = 'PROCEDURE'\n    AND REFERENCED_TYPE = 'PROCEDURE'\n  UNION ALL\n  SELECT \n    d.NAME, \n    d.TYPE, \n    d.REFERENCED_OWNER, \n    d.REFERENCED_NAME, \n    d.REFERENCED_TYPE, \n    DEPENDENCIES.LEVEL + 1\n  FROM \n    ALL_DEPENDENCIES d\n  JOIN \n    DEPENDENCIES\n  ON \n    d.OWNER = DEPENDENCIES.REFERENCED_OWNER\n    AND d.NAME = DEPENDENCIES.REFERENCED_NAME\n  WHERE \n    d.TYPE = 'PROCEDURE'\n    AND d.REFERENCED_TYPE = 'PROCEDURE'\n)\nSELECT DISTINCT \n  REFERENCED_OWNER, \n  REFERENCED_NAME, \n  REFERENCED_TYPE\nFROM \n  DEPENDENCIES\nORDER BY \n  REFERENCED_OWNER, \n  REFERENCED_NAME;