CREATE PROCEDURE GetDatabaseNames\n    @servername NVARCHAR(255)\nAS\nBEGIN\n    DECLARE @sql NVARCHAR(MAX);\n\n    SET @sql = 'SELECT name FROM ' + QUOTENAME(@servername) + '.master.sys.databases ' +\n               'WHERE name NOT LIKE ''master'' ' +\n               'AND name NOT LIKE ''tempdb'' ' +\n               'AND name NOT LIKE ''msdb'' ' +\n               'AND name NOT LIKE ''model'' ' +\n               'AND name NOT LIKE ''Admin''';\n\n    EXEC sp_executesql @sql;\nEND;