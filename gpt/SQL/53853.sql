SELECT name, \n  ST_DistanceSphere(\n    ST_MakePoint(-71.35368, 42.290763), \n    ST_MakePoint(locations.lng, locations.lat)\n  ) / 1609.34 AS distance -- distance in miles\nFROM locations\nWHERE active = 1\n  AND ST_DWithin(\n    ST_MakePoint(-71.35368, 42.290763)::geography, \n    ST_MakePoint(locations.lng, locations.lat)::geography, \n    16093.4 -- 10 miles in meters\n  )\nORDER BY distance;