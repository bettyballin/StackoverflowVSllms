-- Master Database: Versioning Table\nCREATE TABLE SchemaVersion (\n    VersionNumber INT PRIMARY KEY,\n    ScriptText NVARCHAR(MAX) NOT NULL,\n    AppliedAt DATETIME NOT NULL DEFAULT GETDATE()\n);\n\n-- Child Database: Version Tracking Table\nCREATE TABLE AppliedVersion (\n    VersionNumber INT PRIMARY KEY,\n    AppliedAt DATETIME NOT NULL DEFAULT GETDATE()\n);\n\n-- Example of applying patches\nDECLARE @CurrentVersion INT;\nDECLARE @TargetVersion INT;\nDECLARE @ScriptText NVARCHAR(MAX);\n\n-- Get the current version of the child database\nSELECT @CurrentVersion = COALESCE(MAX(VersionNumber), 0) FROM AppliedVersion;\n\n-- Get the target version from the master database\nSELECT @TargetVersion = MAX(VersionNumber) FROM SchemaVersion;\n\n-- Apply patches if needed\nWHILE @CurrentVersion < @TargetVersion\nBEGIN\n    SELECT TOP 1 @CurrentVersion = VersionNumber, @ScriptText = ScriptText\n    FROM SchemaVersion\n    WHERE VersionNumber > @CurrentVersion\n    ORDER BY VersionNumber;\n\n    -- Execute the script\n    EXEC sp_executesql @ScriptText;\n\n    -- Record the applied version\n    INSERT INTO AppliedVersion (VersionNumber) VALUES (@CurrentVersion);\nEND;