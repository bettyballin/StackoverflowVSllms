DECLARE @tableName NVARCHAR(128) = 'T';\nDECLARE @columns NVARCHAR(MAX) = '';\nDECLARE @sql NVARCHAR(MAX) = '';\n\n-- Get the list of columns excluding the identity column\nSELECT @columns = STRING_AGG(name, ', ')\nFROM sys.columns\nWHERE object_id = OBJECT_ID(@tableName)\nAND is_identity = 0;\n\n-- Construct the dynamic SQL statement\nSET @sql = 'INSERT INTO ' + @tableName + ' (' + @columns + ')\n            SELECT ' + @columns + ' FROM #tmp;';\n\n-- Execute the dynamic SQL statement\nEXEC sp_executesql @sql;