CREATE TRIGGER trg_UpdateDistance\n   ON DistanceChart\n   AFTER INSERT, UPDATE\n   AS\n   BEGIN\n       SET NOCOUNT ON;\n\n       MERGE DistanceChart AS target\n       USING (SELECT StartLocation, EndLocation, Distance FROM inserted) AS source\n       ON target.StartLocation = source.EndLocation AND target.EndLocation = source.StartLocation\n       WHEN MATCHED THEN\n           UPDATE SET Distance = source.Distance\n       WHEN NOT MATCHED THEN\n           INSERT (StartLocation, EndLocation, Distance)\n           VALUES (source.EndLocation, source.StartLocation, source.Distance);\n   END;