CREATE PROCEDURE GetPagedUsers\n       @PageIndex INT,\n       @PageSize INT\n   AS\n   BEGIN\n       DECLARE @StartRow INT;\n       DECLARE @EndRow INT;\n\n       SET @StartRow = (@PageIndex * @PageSize) + 1;\n       SET @EndRow = @StartRow + @PageSize - 1;\n\n       WITH UserPaging AS\n       (\n           SELECT ROW_NUMBER() OVER (ORDER BY UserID) AS RowNumber, *\n           FROM Users\n       )\n       SELECT *\n       FROM UserPaging\n       WHERE RowNumber BETWEEN @StartRow AND @EndRow;\n   END