-- Trigger for updating the Club table\nCREATE TRIGGER trg_UpdateClub\nON dbo.Club\nAFTER UPDATE\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    DECLARE @idClub INT, @idCoach INT;\n\n    SELECT @idClub = INSERTED.idClub, @idCoach = INSERTED.idCoach\n    FROM INSERTED;\n\n    -- If the club already has a coach, set idClub of that coach to NULL\n    UPDATE Coach\n    SET idClub = NULL\n    WHERE idClub = @idClub AND idCoach <> @idCoach;\n\n    -- Update the new coach's idClub\n    UPDATE Coach\n    SET idClub = @idClub\n    WHERE idCoach = @idCoach;\n\n    -- If the new coach was previously assigned to another club, set idCoach of that club to NULL\n    UPDATE Club\n    SET idCoach = NULL\n    WHERE idCoach = @idCoach AND idClub <> @idClub;\nEND;\nGO\n\n-- Trigger for updating the Coach table\nCREATE TRIGGER trg_UpdateCoach\nON dbo.Coach\nAFTER UPDATE\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    DECLARE @idCoach INT, @idClub INT;\n\n    SELECT @idCoach = INSERTED.idCoach, @idClub = INSERTED.idClub\n    FROM INSERTED;\n\n    -- If the coach already has a club, set idCoach of that club to NULL\n    UPDATE Club\n    SET idCoach = NULL\n    WHERE idCoach = @idCoach AND idClub <> @idClub;\n\n    -- Update the new club's idCoach\n    UPDATE Club\n    SET idCoach = @idCoach\n    WHERE idClub = @idClub;\n\n    -- If the new club already has a coach, set idClub of that coach to NULL\n    UPDATE Coach\n    SET idClub = NULL\n    WHERE idClub = @idClub AND idCoach <> @idCoach;\nEND;\nGO