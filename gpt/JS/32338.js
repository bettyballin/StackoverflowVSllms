google.maps.event.addListener(map, 'idle', function() {\n    var bounds = map.getBounds();\n    if (bounds) {\n        var southWest = bounds.getSouthWest();\n        var northEast = bounds.getNorthEast();\n        var data = {\n            ne: northEast.toUrlValue(),\n            sw: southWest.toUrlValue(),\n            zoom: map.getZoom()\n        };\n\n        $.ajax({\n            type: "POST",\n            url: 'maps/get-markers',\n            data: JSON.stringify(data),\n            contentType: 'application/json',\n            dataType: 'json',\n            success: function(response) {\n                // code to add markers\n            },\n            error: function(xhr, status, error) {\n                console.error('AJAX Error: ' + status + error);\n            }\n        });\n    } else {\n        console.error('Bounds not defined');\n    }\n});