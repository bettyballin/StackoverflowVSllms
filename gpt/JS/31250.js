$(document).ready(function() {\n    $("#sortlist1").treeview();\n    \n    function handleDrop(event, ui, target) {\n        if (ui.sender !== null) {\n            // Dropping between lists\n            $(target).append($(ui.draggable));\n        }\n        // Else, sortable will handle the drop within the same list\n    }\n\n    $("#sortlist1").droppable({ \n        accept: ".item", \n        drop: function(ev, ui) {\n            handleDrop(ev, ui, "#sortlist1");\n        } \n    });\n\n    $("#sortlist2").droppable({ \n        accept: ".item",\n        drop: function(ev, ui) {\n            handleDrop(ev, ui, "#sortlist2");\n        } \n    });\n\n    $("#sortlist3").droppable({ \n        accept: ".item", \n        drop: function(ev, ui) {\n            handleDrop(ev, ui, "#sortlist3");\n        } \n    });\n\n    $('.sortlist').sortable({\n        handle: '.icono',\n        connectWith: '.sortlist',\n        update: function(event, ui) {\n            if (this === ui.item.parent()[0]) {\n                $('input#sortlist').val($('.sortlist').sortable('serialize'));\n            }\n        }\n    }).disableSelection();\n});