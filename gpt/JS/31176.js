$(document).ready(function () {\n    // Add custom validation method\n    $.validator.addMethod('authenticate', function (value, element) {\n        var deferred = new $.Deferred();\n        \n        $.getJSON("./json/authenticate.do", { password: value }, function (json) {\n            if (json.success) {\n                deferred.resolve();\n            } else {\n                deferred.reject();\n            }\n        });\n\n        return deferred.promise();\n    }, 'Wrong password');\n\n    $('form#changePasswordForm').validate({\n        rules: {\n            repeat_new_password: { equalTo: "#new_password" },\n            password: { authenticate: true }\n        },\n        submitHandler: function (form) {\n            $(form).ajaxSubmit({\n                dataType: "json",\n                success: function (json) {\n                    alert("foo");\n                }\n            });\n        }\n    });\n});