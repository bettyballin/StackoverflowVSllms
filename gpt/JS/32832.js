function httpRequest() {\n    var xmlhttp;\n\n    if (window.XMLHttpRequest) {\n        // code for modern browsers\n        xmlhttp = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        // code for old IE browsers\n        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");\n    } else {\n        alert("Your browser does not support XMLHTTP!");\n    }\n\n    return xmlhttp;\n}\n\nfunction validateRegForm(event) {\n    event.preventDefault(); // Stop form from submitting\n\n    var isValidForm = true;\n    var regFormDiv = document.getElementById("registration_form");\n\n    // Check if dynamic div exists, if so, remove it\n    var existingErrorDiv = document.getElementById('disp_errors');\n    if (existingErrorDiv) {\n        document.getElementById('reg_form').removeChild(existingErrorDiv);\n    }\n\n    // Dynamically create new 'div'\n    var errorDiv = document.createElement('div');\n    errorDiv.setAttribute('id', 'disp_errors');\n    errorDiv.setAttribute('style', 'background-color:pink;border:1px solid red;color:red;padding:10px;');\n    document.getElementById('reg_form').insertBefore(errorDiv, regFormDiv);\n\n    var xmlhttp = httpRequest();\n    xmlhttp.onreadystatechange = function() {\n        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n            var response = xmlhttp.responseText;\n            if (response) {\n                var newValue = response.split("|");\n                var available = [newValue[0], newValue[1]];\n\n                if (available[0] === "username_taken" || available[1] === "email_taken") {\n                    isValidForm = false;\n                    errorDiv.innerHTML = "Username or email is already taken.";\n                }\n\n                if (isValidForm) {\n                    // If the form is valid, submit it programmatically\n                    document.getElementById('reg_form').submit();\n                }\n            }\n        }\n    };\n\n    xmlhttp.open("POST", "your_server_endpoint_here", true);\n    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");\n    xmlhttp.send("username=" + encodeURIComponent(reg.username.value) + "&email=" + encodeURIComponent(reg.email.value));\n}\n\n// Attach the event listener to the form\ndocument.getElementById('reg_form').addEventListener('submit', validateRegForm);