$(document).ready(function() {\n    // Try to get the cached URL from local storage\n    var cachedUrl = localStorage.getItem('cachedUrl') || 'getPage.php?data=data';\n\n    function makeRequest(url) {\n        $.ajax({\n            method: "get",\n            url: url,\n            dataType: 'json',\n            timeout: 2000,\n            success: function(result, textStatus, xhr) {\n                if (xhr.status === 301) {\n                    // Manually handle the 301 redirect\n                    var newUrl = xhr.getResponseHeader('Location');\n                    if (newUrl) {\n                        // Cache the new location URL\n                        localStorage.setItem('cachedUrl', newUrl);\n                        // Make a new request to the new location\n                        makeRequest(newUrl);\n                    }\n                } else {\n                    // Handle the response content\n                    handleContent(result);\n                }\n            },\n            error: function(xhr, textStatus, errorThrown) {\n                // Handle error\n                console.error('AJAX request failed:', textStatus, errorThrown);\n            }\n        });\n    }\n\n    // Make the initial request\n    makeRequest(cachedUrl);\n});\n\nfunction handleContent(result) {\n    // Your content handling logic here\n}