$(document).ready(function() {\n\n    $('.content_box').hide();\n    $('.sf-menuUP a').click(function(){\n        $('.content_box').fadeIn('slow');\n    });\n\n    var hash = window.location.hash.substr(1);\n    var href = $('.sf-menuUP li a').each(function(){\n        var href = $(this).attr('href');\n        if(hash==href.substr(0,href.length-5)){\n            var toLoad = hash+'.html #content';\n            $('#content').load(toLoad, function() {\n                rebindSlimbox();\n            });\n        }\n    });\n\n    $('.sf-menuUP li a').click(function(){\n\n        var toLoad = $(this).attr('href')+' #content';\n        $('#content').fadeOut('fast', loadContent);\n        $('#load').remove();\n        $('#wrapper').append('<span id="load">LOADING...</span>');\n        $('#load').fadeIn('normal');\n        window.location.hash = $(this).attr('href').substr(0, $(this).attr('href').length-5);\n        \n        function loadContent() {\n            $('#content').load(toLoad, '', function() {\n                showNewContent();\n                rebindSlimbox();\n            });\n        }\n        \n        function showNewContent() {\n            $('#content').fadeIn('normal', hideLoader());\n        }\n        \n        function hideLoader() {\n            $('#load').fadeOut('normal');\n        }\n        \n        return false;\n    });\n\n    function rebindSlimbox() {\n        $("a[rel^='lightbox']").slimbox({\n            /* Put custom options here */\n        }, null, function(el) {\n            return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));\n        });\n    }\n\n    rebindSlimbox(); // Initial binding\n\n});