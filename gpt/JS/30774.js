// ==UserScript==\n// @name        Your Script Name\n// @namespace   Your Namespace\n// @include     http://example.com/*\n// @grant       GM_setValue\n// @grant       GM_getValue\n// @require     https://code.jquery.com/jquery-3.6.0.min.js\n// ==/UserScript==\n\n$(document).ready(function() {\n    $("a#linkid").click(function() {\n        setTimeout(function() {\n            GM_setValue("foo", 123); // now it should work\n        }, 0);\n    });\n    \n    GM_setValue("bar", 123); // this works properly\n});