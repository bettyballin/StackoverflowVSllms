var message = tinyMCE.activeEditor.getContent();\n\nif (message.length > 0) {\n    message = Base64.encode(message);\n    tinyMCE.activeEditor.setContent('');\n\n    var parameters = 'message=' + encodeURIComponent(message);\n    var url = "ChatResponse.aspx";\n    var ajaxPost = new XMLHttpRequest(); // Make sure you have this line to initialize the XMLHttpRequest\n    ajaxPost.open("POST", url, true);\n    ajaxPost.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");\n    ajaxPost.send(parameters);\n}