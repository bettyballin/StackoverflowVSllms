<script type="text/javascript">\n    var isAsyncPostBack = false;\n\n    // Hook into the PageRequestManager events\n    Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(initializeRequest);\n    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequest);\n\n    function initializeRequest(sender, args) {\n        // Set the flag to true when an async postback starts\n        isAsyncPostBack = true;\n    }\n\n    function endRequest(sender, args) {\n        // Reset the flag after the async postback completes\n        isAsyncPostBack = false;\n    }\n\n    // Attach the onbeforeunload event\n    window.onbeforeunload = function(e) {\n        if (isAsyncPostBack) {\n            // Prevent the onbeforeunload event if it's an AJAX request\n            return;\n        }\n\n        // Your custom onbeforeunload logic here\n        var message = 'Are you sure you want to leave this page?';\n        e = e || window.event;\n        if (e) {\n            e.returnValue = message;\n        }\n        return message;\n    };\n</script>