function fetch_ids(user) {\n  var url = 'http://test.com/ids/' + encodeURIComponent(user) + '.json?callback=?';\n  var ids = []; // Declare the array locally to avoid global scope issues\n\n  // Populate array ids[] with JSON data -- uid[] array declared globally\n  $.getJSON(url, function(data) {\n    for (var i = 0; i < data.length; i++) {\n      ids[i] = data[i];\n    }\n    // Call the second function after ids array is populated\n    manipulateArray(ids);\n  });\n}\n\nfunction manipulateArray(ids) {\n  // Assuming uid[] is declared globally\n  for (var i = 0; i < uid.length; i++) {\n    for (var j = 0; j < ids.length; j++) {\n      if (uid[i] == ids[j]) {\n        alert('matched: ' + uid[i]);\n      }\n    }\n  }\n}