let map;\nlet markers = [];\n\nfunction initMap() {\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: { lat: -34.397, lng: 150.644 },\n        zoom: 8,\n    });\n\n    // Add a search box to the map\n    const input = document.getElementById('search-input');\n    const searchBox = new google.maps.places.SearchBox(input);\n    map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\n\n    searchBox.addListener('places_changed', () => {\n        const places = searchBox.getPlaces();\n        if (places.length == 0) return;\n\n        // Clear out old markers\n        markers.forEach(marker => marker.setMap(null));\n        markers = [];\n\n        // For each place, get the icon, name and location.\n        const bounds = new google.maps.LatLngBounds();\n        places.forEach(place => {\n            if (!place.geometry || !place.geometry.location) return;\n\n            const marker = new google.maps.Marker({\n                map,\n                title: place.name,\n                position: place.geometry.location,\n            });\n\n            markers.push(marker);\n\n            if (place.geometry.viewport) {\n                bounds.union(place.geometry.viewport);\n            } else {\n                bounds.extend(place.geometry.location);\n            }\n        });\n        map.fitBounds(bounds);\n    });\n\n    // Add click event listener to add markers\n    map.addListener('click', (e) => {\n        addMarker(e.latLng);\n    });\n}\n\n// Add marker to the map\nfunction addMarker(location) {\n    const marker = new google.maps.Marker({\n        position: location,\n        map: map,\n    });\n    markers.push(marker);\n\n    // Save the marker's position to the database (use AJAX)\n    $.post('save_marker.php', {\n        lat: location.lat(),\n        lng: location.lng(),\n    }, (response) => {\n        console.log('Marker saved:', response);\n    });\n}\n\n// Initialize map when window loads\nwindow.onload = initMap;