<script type="text/javascript">\n    var usernameok = false;\n    var emailok = false;\n\n    function checksubmit() {\n      if (usernameok && emailok) {\n        document.getElementById("button").disabled = false;\n        document.getElementById("errorDiv").style.display = "none";\n      } else {\n        document.getElementById("button").disabled = true;\n        document.getElementById("errorDiv").style.display = "block";\n      }\n    }\n\n    function make_request() {\n      if (window.XMLHttpRequest) {\n        // code for modern browsers\n        httpxml = new XMLHttpRequest();\n      } else {\n        // code for old IE browsers\n        httpxml = new ActiveXObject("Microsoft.XMLHTTP");\n      }\n    }\n\n    function username(username) {\n      make_request();\n\n      function stateck() {\n        if (httpxml.readyState == 4) {\n          if (httpxml.responseText.indexOf("Username Ok") >= 0) {\n            usernameok = true;\n          } else {\n            usernameok = false;\n            document.getElementById("errorDiv").innerText = "Username taken or invalid";\n          }\n          checksubmit();\n        }\n      }\n\n      httpxml.onreadystatechange = stateck;\n      const user_url = "check_username.php?username=" + username.value;\n      httpxml.open("GET", user_url, true);\n      httpxml.send(null);\n    }\n\n    function email(email) {\n      make_request();\n\n      function stateck() {\n        if (httpxml.readyState == 4) {\n          if (httpxml.responseText.indexOf("Email Ok") >= 0) {\n            emailok = true;\n          } else {\n            emailok = false;\n            document.getElementById("errorDiv").innerText = "Invalid email";\n          }\n          checksubmit();\n        }\n      }\n\n      httpxml.onreadystatechange = stateck;\n      const email_url = "check_email.php?email=" + email.value;\n      httpxml.open("GET", email_url, true);\n      httpxml.send(null);\n    }\n</script>