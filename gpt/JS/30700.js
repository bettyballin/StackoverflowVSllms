$(function() {\n  $("#section-list").sortable({\n    items: "li",\n    update: function(event, ui) {\n      var sectionId = ui.item.closest('ul').attr('id').split('-').pop();\n      var questionId = ui.item.attr('id').split('_').pop();\n      var position = ui.item.index() + 1;\n\n      $.ajax({\n        url: "/questions/" + questionId + "/update_position",\n        type: "PATCH",\n        data: {\n          section_id: sectionId,\n          position: position\n        },\n        success: function() {\n          console.log("Position updated successfully");\n        },\n        error: function() {\n          console.error("Error updating position");\n        }\n      });\n    },\n    connectWith: ".connectedSortable"\n  }).disableSelection();\n\n  $("ul[id^=question-list]").sortable({\n    connectWith: "#section-list li ul"\n  }).disableSelection();\n});