const express = require('express');\nconst app = express();\n\napp.use((req, res, next) => {\n  if (req.secure) {\n    next();\n  } else {\n    res.redirect(301, `https://${req.headers.host}${req.url}`);\n  }\n});\n\n// Your other routes and middleware here\n\nconst http = require('http');\nconst https = require('https');\nconst fs = require('fs');\n\nconst httpServer = http.createServer(app);\nconst httpsServer = https.createServer({\n  key: fs.readFileSync('path/to/your/private.key'),\n  cert: fs.readFileSync('path/to/your/certificate.crt')\n}, app);\n\nhttpServer.listen(80);\nhttpsServer.listen(443);