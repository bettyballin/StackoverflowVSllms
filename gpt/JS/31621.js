chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n      if (request.action === "setProxy") {\n        chrome.proxy.settings.set(\n          {value: request.proxyConfig, scope: 'regular'},\n          function() {\n            sendResponse({status: "Proxy set"});\n          }\n        );\n      } else if (request.action === "resetProxy") {\n        chrome.proxy.settings.clear({scope: 'regular'}, function() {\n          sendResponse({status: "Proxy reset"});\n        });\n      }\n      return true;\n    });