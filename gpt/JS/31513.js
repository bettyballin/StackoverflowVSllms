window.addEvent('domready', function() {\n    var shouts = "timed.php";\n    var log = $('log_res');\n    function updateData(url, target) {\n        new Ajax(url, {\n            method: 'get',\n            update: $(target),\n            onComplete: function() {\n                log.removeClass('ajax-loading');\n            }\n        }).request();\n        log.set('html', '<div class="spinner"><img src="path/to/spinner.gif" alt="Loading..."></div>').addClass('ajax-loading');\n    }\n\n    var update = function() { updateData(shouts, 'log_res'); };\n    update();           // call it immediately\n    update.periodical(10000);   // and then periodically\n});