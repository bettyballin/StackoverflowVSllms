function saveMenuState() {\n    var menuState = [];\n    $('.menu-item').each(function() {\n        menuState.push({\n            id: $(this).attr('id'),\n            expanded: $(this).hasClass('expanded')\n        });\n    });\n\n    document.cookie = "menuState=" + encodeURIComponent(JSON.stringify(menuState)) + "; path=/";\n}\n\n// Call saveMenuState() on page unload\n$(window).on('beforeunload', saveMenuState);