function replaceSelectedText(textarea, replacementText) {\n    if (textarea.selectionStart !== undefined) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        var text = textarea.value;\n        textarea.value = text.substring(0, start) + replacementText + text.substring(end);\n        textarea.selectionStart = textarea.selectionEnd = start + replacementText.length;\n    }\n}\n\n// Example usage:\nvar textarea = document.getElementById('myTextarea');\nreplaceSelectedText(textarea, 'new text');