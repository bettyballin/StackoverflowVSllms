const express = require('express');\nconst paypal = require('paypal-rest-sdk');\n\npaypal.configure({\n  'mode': 'sandbox', // Change to 'live' for production\n  'client_id': 'YOUR_CLIENT_ID',\n  'client_secret': 'YOUR_CLIENT_SECRET'\n});\n\nconst app = express();\n\napp.post('/pay', (req, res) => {\n  const create_payment_json = {\n    "intent": "sale",\n    "payer": {\n      "payment_method": "paypal"\n    },\n    "redirect_urls": {\n      "return_url": "http://return.url",\n      "cancel_url": "http://cancel.url"\n    },\n    "transactions": [{\n      "item_list": {\n        "items": [{\n          "name": "membership",\n          "sku": "001",\n          "price": "5.00",\n          "currency": "USD",\n          "quantity": 1\n        }]\n      },\n      "amount": {\n        "currency": "USD",\n        "total": "5.00"\n      },\n      "description": "Membership payment"\n    }]\n  };\n\n  paypal.payment.create(create_payment_json, function (error, payment) {\n    if (error) {\n      throw error;\n    } else {\n      for(let i = 0; i < payment.links.length; i++) {\n        if (payment.links[i].rel === 'approval_url') {\n          res.redirect(payment.links[i].href);\n        }\n      }\n    }\n  });\n});\n\napp.get('/success', (req, res) => {\n  const payerId = req.query.PayerID;\n  const paymentId = req.query.paymentId;\n\n  const execute_payment_json = {\n    "payer_id": payerId,\n    "transactions": [{\n      "amount": {\n        "currency": "USD",\n        "total": "5.00"\n      }\n    }]\n  };\n\n  paypal.payment.execute(paymentId, execute_payment_json, function (error, payment) {\n    if (error) {\n      console.log(error.response);\n      throw error;\n    } else {\n      console.log("Get Payment Response");\n      console.log(JSON.stringify(payment));\n      res.send('Success');\n    }\n  });\n});\n\napp.get('/cancel', (req, res) => res.send('Cancelled'));\n\napp.listen(3000, () => console.log('Server Started'));