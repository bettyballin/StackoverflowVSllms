$(function() {\n       $.ajaxSetup({\n           beforeSend: function(xhr, settings) {\n               function getCookie(name) {\n                   var cookieValue = null;\n                   if (document.cookie && document.cookie !== '') {\n                       var cookies = document.cookie.split(';');\n                       for (var i = 0; i < cookies.length; i++) {\n                           var cookie = jQuery.trim(cookies[i]);\n                           if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                               cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                               break;\n                           }\n                       }\n                   }\n                   return cookieValue;\n               }\n               if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n                   xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));\n               }\n           }\n       });\n   });