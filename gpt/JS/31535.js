(function(jQuery) {\n\n  var ajaxQueue = $({});\n  \n  jQuery.ajaxQueue = function( ajaxOpts ) {\n    var jqXHR,\n        dfd = $.Deferred(),\n        promise = dfd.promise();\n\n    // Run the actual query\n    function doRequest( next ) {\n      jqXHR = $.ajax( ajaxOpts )\n        .done( dfd.resolve )\n        .fail( dfd.reject )\n        .then( next, next );\n    }\n    \n    // Add the request to the queue\n    ajaxQueue.queue(function( next ) {\n      promise.always(next);\n      doRequest(next);\n    });\n\n    return promise;\n  };\n\n})(jQuery);