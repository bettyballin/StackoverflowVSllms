<script type="text/javascript">\n  function updateProgress() {\n    new Ajax.Request('/fmfiles/progress_monitor', {\n      parameters: 'authenticity_token=' + encodeURIComponent(AUTH_TOKEN),\n      onSuccess: function(response) {\n        alert(response.responseText);\n        fillProgress('progressBar', response.responseText);\n      }\n    });\n  }\n\n  // Ensure setInterval is called correctly on submit button click\n  document.addEventListener("DOMContentLoaded", function() {\n    document.querySelector('form[name="Form_Import"]').addEventListener('submit', function() {\n      setInterval(updateProgress, 2000);\n    });\n  });\n</script>