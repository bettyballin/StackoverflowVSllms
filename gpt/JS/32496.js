$(document).ready(function() {\n    var canvas = document.getElementById('connectionCanvas');\n    var ctx = canvas.getContext('2d');\n    \n    function resizeCanvas() {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n    }\n    \n    window.addEventListener('resize', resizeCanvas);\n    resizeCanvas();\n\n    function drawLine(startX, startY, endX, endY) {\n        ctx.beginPath();\n        ctx.moveTo(startX, startY);\n        ctx.lineTo(endX, endY);\n        ctx.strokeStyle = '#000'; // Line color\n        ctx.lineWidth = 2; // Line width\n        ctx.stroke();\n    }\n\n    $("div .draggable").draggable({\n        revert: 'valid',\n        snap: false\n    });\n\n    $("div .droppable").droppable({\n        hoverClass: 'ui-state-hover',\n        helper: 'clone',\n        cursor: 'move',\n        drop: function(event, ui) {\n            $(this)\n                .addClass('ui-state-highlight')\n                .find("img")\n                .removeAttr("src")\n                .attr("src", "_assets/img/icons/check-user-48x48.png");\n\n            $(this).droppable('disable');\n\n            $(ui.draggable)\n                .addClass('ui-state-highlight')\n                .find("img")\n                .removeAttr("src")\n                .attr("src", "_assets/img/icons/check-user-48x48.png");\n\n            $(ui.draggable).draggable('disable');\n\n            var startX = $(ui.draggable).offset().left + $(ui.draggable).width() / 2;\n            var startY = $(ui.draggable).offset().top + $(ui.draggable).height() / 2;\n            var endX = $(this).offset().left + $(this).width() / 2;\n            var endY = $(this).offset().top + $(this).height() / 2;\n\n            drawLine(startX, startY, endX, endY);\n        }\n    });\n\n    $("div .droppable").bind("dblclick", function() {\n        $(this)\n            .removeClass('ui-state-highlight')\n            .find("img")\n            .removeAttr("src")\n            .attr("src", "_assets/img/icons/user-48x48.png");\n        $(this).droppable('enable');\n\n        EnableSource($(this));\n        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas on double-click\n    });\n});