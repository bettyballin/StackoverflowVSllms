<?php\nforeach ($userData as $user) {\n    $data = array(\n        'User' => array('id' => $user['id']),\n        'Site' => array(array('id' => $user['site_id']))\n    );\n\n    // Ensure create() is called to reset the model state\n    $this->User->create();\n    \n    // Use saveAssociated to handle HABTM associations\n    if (!$this->User->saveAssociated($data, array('deep' => true))) {\n        // Handle the error if saveAssociated fails\n        $errors = $this->User->validationErrors;\n        // Log or debug the errors\n    }\n}\n?>