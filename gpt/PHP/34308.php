function createUpdateQuery($psTableName, $psValues, $psWhere) {\n    // Initialize the query\n    $lsQuery = "UPDATE `$psTableName` SET ";\n    \n    // Initialize arrays to store sets and where conditions\n    $setParts = [];\n    $whereParts = [];\n    $params = [];\n\n    // Construct the SET part of the query\n    foreach ($psValues as $lsKey => $lsValue) {\n        $setParts[] = "`$lsKey` = ?";\n        $params[] = $lsValue;\n    }\n\n    // Construct the WHERE part of the query\n    if (isset($psWhere)) {\n        foreach ($psWhere as $lsKey => $lsValue) {\n            $whereParts[] = "`$lsKey` = ?";\n            $params[] = $lsValue;\n        }\n    }\n\n    // Combine all parts into a complete query string\n    $lsQuery .= implode(", ", $setParts);\n    if (count($whereParts) > 0) {\n        $lsQuery .= " WHERE " . implode(" AND ", $whereParts);\n    }\n\n    return [$lsQuery, $params];\n}\n\n// Example usage\n$psTableName = 'persons';\n$psValues = ['per_password' => '2a6445462a09d0743d945ef270b9485b'];\n$psWhere = ['per_email' => 'bla@gmail.com'];\n\nlist($query, $params) = createUpdateQuery($psTableName, $psValues, $psWhere);\n\n// Prepare statement using PDO (for example)\n$pdo = new PDO('mysql:host=your_host;dbname=your_db', 'username', 'password');\n$stmt = $pdo->prepare($query);\n$stmt->execute($params);