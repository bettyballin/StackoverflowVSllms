function getConnection() {\n    $host = 'your_host';\n    $bd = 'your_database';\n    $usuario = 'your_user';\n    $clave = 'your_password';\n    \n    try {\n        $cn = new PDO("mysql:host=$host;dbname=$bd", $usuario, $clave, array(\n            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n            PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true\n        ));\n        return $cn;\n    } catch (PDOException $e) {\n        print "Error!: " . $e->getMessage() . "<br/>";\n        die();\n    }\n}\n\nfunction getValue($cn, $comando) {\n    $resul = $cn->query($comando);\n    if (!$resul) return null;\n    \n    // Fetch all results to clear the unbuffered query\n    $res = $resul->fetchAll(PDO::FETCH_NUM);\n    if (!empty($res)) {\n        return $res[0][0];\n    }\n    return null;\n}\n\nfunction execWithParameters($cn, $comando, $parametros) {\n    $q = $cn->prepare($comando);\n    $q->execute($parametros);\n    if ($q->errorInfo()[0] != '00000') {\n        $e = $q->errorInfo();\n        echo $e[0].':'.$e[1].':'.$e[2];\n    }\n}\n\n// Example usage\n$cn = getConnection();\n$comando = "call p_generate_seq('bitacora')";\n$id = getValue($cn, $comando);\n$comando = 'INSERT INTO dsa_bitacora (id, estado, fch_creacion) VALUES (:id, :estado, :fch_creacion)';\n$parametros = array (\n    ':id'=> (int)$id,\n    ':estado'=>1,\n    ':fch_creacion'=>date('Y-m-d H:i:s')\n);\nexecWithParameters($cn, $comando, $parametros);