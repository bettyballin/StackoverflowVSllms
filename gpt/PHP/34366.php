// Start session at the top of your PHP file\nsession_start();\n\n// Process the script only if the form has been submitted\nif (array_key_exists('login', $_POST)) {\n    // Login code goes here...\n    \n    // Assume we have a boolean variable $login_successful\n    if ($login_successful) {\n        // Redirect to the referring page on successful login\n        header('Location: ' . $_SERVER['HTTP_REFERER']);\n        exit;\n    } else {\n        // If there was a problem, destroy the session and prepare error message\n        $_SESSION['error_message'] = 'Invalid username or password.';\n        session_destroy();\n        header('Location: ' . $_SERVER['HTTP_REFERER']);\n        exit;\n    }\n}