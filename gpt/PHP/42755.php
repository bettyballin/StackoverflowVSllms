<?php\n\nfunction isGsm0338($text) {\n    $gsm0338Chars = '@£$¥èéùìòÇ\nØø\rÅåΔ_ΦΓΛΩΠΨΣΘΞ\u000cÆæßÉ !"#¤%&\'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà';\n    $gsm0338ExtendedChars = '^{}\\[~]|€';\n\n    for ($i = 0; $i < mb_strlen($text); $i++) {\n        $char = mb_substr($text, $i, 1);\n        if (strpos($gsm0338Chars, $char) === false && strpos($gsm0338ExtendedChars, $char) === false) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction convertToUnicode($text) {\n    return mb_convert_encoding($text, 'UTF-16BE');\n}\n\nfunction prepareSmsMessage($text) {\n    if (isGsm0338($text)) {\n        // GSM 03.38 encoding\n        return $text;\n    } else {\n        // Unicode encoding\n        return convertToUnicode($text);\n    }\n}\n\n// Example usage\n$message = "Let's test öäü éàè אין תמיכה בעברית";\n$preparedMessage = prepareSmsMessage($message);\n\nif (isGsm0338($message)) {\n    echo "GSM 03.38 encoded message: " . $preparedMessage;\n} else {\n    echo "Unicode encoded message: " . bin2hex($preparedMessage);\n}\n?>