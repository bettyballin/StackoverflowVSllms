<?php\nfunction addChildElements($dom, $parent, $elements) {\n    foreach ($elements as $element => $content) {\n        $child = $dom->createElement($element, is_array($content) ? null : $content);\n        $parent->appendChild($child);\n        if (is_array($content)) {\n            addChildElements($dom, $child, $content);\n        }\n    }\n}\n\n$DOMXML = new DOMDocument('1.0', 'UTF-8');\n$root = $DOMXML->createElement('root');\n$DOMXML->appendChild($root);\n\n$elements = [\n    'el1' => [\n        'el2' => [\n            'el3' => [\n                'el4' => 'text'\n            ]\n        ]\n    ]\n];\n\naddChildElements($DOMXML, $root, $elements);\n\necho $DOMXML->saveXML();\n?>