/**\n * Truncates $str and returns it with $ending on the end, if $str is longer\n * than $limit characters\n *\n * @param string $str\n * @param int $length\n * @param string $ending\n * @return string\n */\nfunction truncate_string($str, $length, $ending = "...")\n{\n    if (mb_strlen($str) <= $length) {\n        return $str;\n    }\n    return mb_substr($str, 0, $length - mb_strlen($ending)) . $ending;\n}