ob_start(function($buffer) {\n    static $outputSize = 0;\n    $maxBufferSize = 1024 * 1024; // 1MB\n    $outputSize += strlen($buffer);\n    \n    if ($outputSize > $maxBufferSize) {\n        echo $buffer;\n        return ''; // Clear the buffer\n    }\n    \n    return $buffer;\n}, 4096); // Buffer chunk size\n\n// Business Logic, etc\n\nheader->output();\necho apply_post_filter(ob_get_clean());\nfooter->output();