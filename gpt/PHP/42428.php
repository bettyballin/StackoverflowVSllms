$uploadTempFile = $myField['tmp_name'];\nlist($uploadWidth, $uploadHeight, $uploadType) = getimagesize($uploadTempFile);\n\n// Create the source image from the uploaded file\n$srcImage = imagecreatefrompng($uploadTempFile);\n\n// Create a new true color image with the target dimensions\n$targetImage = imagecreatetruecolor(128, 128);\n\n// Enable alpha blending and save alpha for the target image\nimagealphablending($targetImage, false);\nimagesavealpha($targetImage, true);\n\n// Fill the target image with a transparent color\n$transparent = imagecolorallocatealpha($targetImage, 0, 0, 0, 127);\nimagefill($targetImage, 0, 0, $transparent);\n\n// Resample the image\nimagecopyresampled($targetImage, $srcImage, \n                   0, 0, \n                   0, 0, \n                   128, 128, \n                   $uploadWidth, $uploadHeight);\n\n// Save the resampled image to a file\nimagepng($targetImage, 'out.png', 9);\n\n// Free up memory\nimagedestroy($srcImage);\nimagedestroy($targetImage);