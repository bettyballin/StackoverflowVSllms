function analyze($matches) {\n    if ($matches[0] == '<example example2 />')\n        return 'something_awesome';\n    else if ($matches[1] == 'example')\n        return 'ftw';\n    // Add more conditions as needed\n}\n\n$src = '<example example2 /> some text <example2 />';\n\n$result = preg_replace_callback('/<(example )?(example2)+ \/>/', function($matches) {\n    return analyze($matches);\n}, $src);\n\necho $result;