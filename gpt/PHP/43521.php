$server = new SoapServer('path_to_wsdl.wsdl');\n\n// Retrieve the SOAP headers\n$headers = apache_request_headers();\n\n// Instantiate the handler with the headers\n$handler = new SoapHandler($headers);\n\n// Process the headers before handling the request\ntry {\n    $handler->processHeaders();\n    $server->setObject($handler);\n    $server->handle();\n} catch (SoapFault $fault) {\n    // Handle the SOAP fault\n    $server->fault($fault->faultcode, $fault->faultstring);\n}