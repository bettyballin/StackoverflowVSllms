$text = 'hello awesome <a href="" rel="external" title="so awesome is cool">stuff stuff</a>';\n\nfunction replaceAwesome($matches) {\n    // Check if the match is within the title attribute\n    if (strpos($matches[0], 'title="') !== false) {\n        return $matches[0]; // Return unchanged if it's in the title attribute\n    }\n    // Replace 'awesome' with your desired replacement\n    return str_replace('awesome', 'REPLACEMENT', $matches[0]);\n}\n\n$result = preg_replace_callback(\n    '/<a[^>]*title="[^"]*"[^>]*>.*?<\/a>|awesome/i',\n    'replaceAwesome',\n    $text\n);\n\necho $result;