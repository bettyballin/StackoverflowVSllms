function getUsers() {\n    $ldapHost = 'ldap://domain.com'; // LDAP server address\n    $ldapPort = 389; // Default LDAP port\n    $ldapUser = 'cn=admin,dc=domain,dc=com'; // LDAP user\n    $ldapPassword = 'password'; // LDAP password\n    $baseDn = 'dc=domain,dc=com'; // Base DN for LDAP search\n\n    // Connect to LDAP server\n    $ldapConnection = ldap_connect($ldapHost, $ldapPort);\n    if (!$ldapConnection) {\n        die('Could not connect to LDAP server.');\n    }\n\n    // Set LDAP protocol version\n    ldap_set_option($ldapConnection, LDAP_OPT_PROTOCOL_VERSION, 3);\n\n    // Bind to LDAP server\n    $ldapBind = ldap_bind($ldapConnection, $ldapUser, $ldapPassword);\n    if (!$ldapBind) {\n        die('Could not bind to LDAP server.');\n    }\n\n    // Search for all users\n    $searchFilter = '(objectClass=inetOrgPerson)'; // Adjust filter according to your LDAP schema\n    $attributes = array('cn', 'sn', 'mail'); // Attributes to retrieve\n    $result = ldap_search($ldapConnection, $baseDn, $searchFilter, $attributes);\n    if (!$result) {\n        die('LDAP search failed.');\n    }\n\n    // Retrieve entries from search result\n    $entries = ldap_get_entries($ldapConnection, $result);\n    if ($entries === false) {\n        die('Failed to get entries.');\n    }\n\n    // Process and return user entries\n    $users = array();\n    for ($i = 0; $i < $entries['count']; $i++) {\n        $users[] = array(\n            'cn' => $entries[$i]['cn'][0],\n            'sn' => $entries[$i]['sn'][0],\n            'mail' => $entries[$i]['mail'][0]\n        );\n    }\n\n    // Close LDAP connection\n    ldap_unbind($ldapConnection);\n\n    return $users;\n}\n\n// Example usage\n$users = getUsers();\nprint_r($users);