<?php\nfunction upvote($questionId, $userId, $pdo) {\n    // Check if the user has already voted\n    $stmt = $pdo->prepare("SELECT id FROM votes WHERE question_id = :question_id AND user_id = :user_id");\n    $stmt->execute(['question_id' => $questionId, 'user_id' => $userId]);\n    if ($stmt->rowCount() > 0) {\n        // User has already voted, so remove vote\n        $stmt = $pdo->prepare("DELETE FROM votes WHERE question_id = :question_id AND user_id = :user_id");\n        $stmt->execute(['question_id' => $questionId, 'user_id' => $userId]);\n        \n        // Decrement vote count\n        $stmt = $pdo->prepare("UPDATE questions SET vote_count = vote_count - 1 WHERE id = :question_id");\n        $stmt->execute(['question_id' => $questionId]);\n    } else {\n        // User has not voted, so add vote\n        $stmt = $pdo->prepare("INSERT INTO votes (question_id, user_id) VALUES (:question_id, :user_id)");\n        $stmt->execute(['question_id' => $questionId, 'user_id' => $userId]);\n        \n        // Increment vote count\n        $stmt = $pdo->prepare("UPDATE questions SET vote_count = vote_count + 1 WHERE id = :question_id");\n        $stmt->execute(['question_id' => $questionId]);\n    }\n}\n?>