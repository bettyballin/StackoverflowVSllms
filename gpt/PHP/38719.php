<?php\nsession_start();\nif (!isset($_SESSION['token'])) {\n    // Redirect to login page if not logged in\n    header('Location: login.php');\n    exit();\n}\n\n$token = $_SESSION['token'];\n\n// Validate token from the database\n$stmt = $db->prepare("SELECT id FROM users WHERE token = ?");\n$stmt->execute([$token]);\n$user = $stmt->fetch();\n\nif ($user) {\n    $user_id = $user['id'];\n    // Now use $user_id to query the database for the user's widgets\n} else {\n    // Token is invalid, redirect to login page\n    header('Location: login.php');\n    exit();\n}\n?>