<?php\nfunction online_friends($mysqli)\n{\n    $ID = ($_SESSION['ID']);\n    \n    // Prepare the first query to get friend IDs\n    $friend_query = $mysqli->prepare("SELECT friend_id FROM friends WHERE user_id = ? AND accepted = 'TRUE'");\n    $friend_query->bind_param('i', $ID);\n    $friend_query->execute();\n    $friend_query->bind_result($friend_id);\n    \n    $online_count = 0;\n    \n    // Prepare the second query to check if friends are online\n    $online_query = $mysqli->prepare("SELECT COUNT(*) FROM users WHERE ID = ? AND online = 'TRUE'");\n    \n    while ($friend_query->fetch()) {\n        $online_query->bind_param('i', $friend_id);\n        $online_query->execute();\n        $online_query->bind_result($count);\n        $online_query->fetch();\n        $online_count += $count;\n    }\n    \n    $friend_query->close();\n    $online_query->close();\n    \n    return $online_count;\n}\n\n// Example usage:\n$mysqli = new mysqli('localhost', 'username', 'password', 'database');\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\nsession_start();\necho online_friends($mysqli);\n$mysqli->close();\n?>