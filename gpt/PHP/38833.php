function mkdir_with_error($dir, $mode = 0777, $recursive = false) {\n    $last_error = null;\n\n    set_error_handler(function($errno, $errstr) use (&$last_error) {\n        $last_error = $errstr;\n    });\n\n    $result = mkdir($dir, $mode, $recursive);\n\n    restore_error_handler();\n\n    if (!$result) {\n        return "MKDIR failed, reason: $last_error";\n    }\n\n    return true;\n}\n\n// Usage example\n$result = mkdir_with_error('/somedir');\nif ($result !== true) {\n    echo $result;\n}