function is_https() {\n    // Check if server port is 443\n    if (!empty($_SERVER['SERVER_PORT']) && $_SERVER['SERVER_PORT'] == 443) {\n        return true;\n    }\n\n    // Check if HTTP_X_FORWARDED_PROTO header is set to "https"\n    if (!empty($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https') {\n        return true;\n    }\n\n    // Check if HTTP_X_FORWARDED_SSL header is set to "on"\n    if (!empty($_SERVER['HTTP_X_FORWARDED_SSL']) && $_SERVER['HTTP_X_FORWARDED_SSL'] == 'on') {\n        return true;\n    }\n\n    // Check if Request Scheme is https\n    if (!empty($_SERVER['REQUEST_SCHEME']) && $_SERVER['REQUEST_SCHEME'] == 'https') {\n        return true;\n    }\n\n    // If none of the above, assume HTTP\n    return false;\n}\n\nif (is_https()) {\n    // Redirect to HTTPS version\n    header('Location: https://example.com' . $_SERVER['REQUEST_URI']);\n    exit();\n} else {\n    // Redirect to HTTP version\n    header('Location: http://example.com' . $_SERVER['REQUEST_URI']);\n    exit();\n}