function fn() {\n    ob_start(); // Start output buffering\n    echo "Function Output";\n    $output = ob_get_clean(); // Get the contents of the buffer and clean it\n\n    if (debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 1)[0]['function'] === '{closure}') {\n        // If called within a closure, return the value\n        return $output;\n    }\n\n    echo $output; // Otherwise, echo the output\n}\n\n// Direct call\nfn(); // This will echo "Function Output"\n\n// Assignment call\n$var = fn(); // This will assign "Function Output" to $var\necho $var; // This will echo "Function Output"