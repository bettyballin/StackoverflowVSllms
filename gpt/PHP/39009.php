function checkBadges($userid, $points, $rank, $friends) {\n    global $database;\n\n    // Fetch all badges from the database\n    $q = $database->db_query("SELECT * FROM badges");\n    while ($bq = $database->db_fetch_assoc($q)) {\n        $valueToCheck = null;\n\n        // Determine which variable to check based on the badge_var field\n        switch ($bq['badge_var']) {\n            case 'points':\n                $valueToCheck = $points;\n                break;\n            case 'rank':\n                $valueToCheck = $rank;\n                break;\n            case 'friends':\n                $valueToCheck = $friends;\n                break;\n            default:\n                // Invalid badge_var, skip this badge\n                continue;\n        }\n\n        // Check the condition based on badge_sign\n        $conditionMet = false;\n        switch ($bq['badge_sign']) {\n            case '==':\n                if ($valueToCheck == $bq['badge_value']) {\n                    $conditionMet = true;\n                }\n                break;\n            case '>=':\n                if ($valueToCheck >= $bq['badge_value']) {\n                    $conditionMet = true;\n                }\n                break;\n            case '<=':\n                if ($valueToCheck <= $bq['badge_value']) {\n                    $conditionMet = true;\n                }\n                break;\n            case '!=':\n                if ($valueToCheck != $bq['badge_value']) {\n                    $conditionMet = true;\n                }\n                break;\n            default:\n                // Invalid badge_sign, skip this badge\n                continue;\n        }\n\n        // If the condition is met, award the badge\n        if ($conditionMet) {\n            giveBadge($userid, $bq['badge_id']);\n        }\n    }\n}