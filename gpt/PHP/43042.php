foreach($userfolders as $uf) {\n    $uf = sprintf($uf, $user_id);\n    $uf = ltrim($uf,'/');\n    $path = trim($base . '/' . $uf);\n\n    clearstatcache(); // Clear cache before checking\n    $res = is_dir($path); //returns false except last time returns 1\n\n    // Debugging output\n    error_log("Checking path: $path - is_dir: " . ($res ? 'true' : 'false'));\n\n    $this->assertFalse($res, $path);\n}