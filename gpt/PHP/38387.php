<?php\nfunction removeDuplicateIds($html) {\n    $dom = new DOMDocument();\n    @$dom->loadHTML($html);\n    \n    $ids = [];\n    \n    foreach ($dom->getElementsByTagName('*') as $element) {\n        if ($element->hasAttribute('id')) {\n            $id = $element->getAttribute('id');\n            if (in_array($id, $ids)) {\n                // Remove or modify the duplicate ID\n                $element->removeAttribute('id');\n                // Alternatively, you can modify the ID\n                // $element->setAttribute('id', $id . '_duplicate');\n            } else {\n                $ids[] = $id;\n            }\n        }\n    }\n    \n    return $dom->saveHTML();\n}\n\n$html = "<html><body><div id='test'></div><div id='test'></div></body></html>";\n$cleanHtml = removeDuplicateIds($html);\n\n$dom = new DOMDocument();\n@$dom->loadHTML($cleanHtml);\n\necho $dom->saveHTML();\n?>