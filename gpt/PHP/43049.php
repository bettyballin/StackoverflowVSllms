<?php\n// Ensure the script continues execution even if the user aborts the connection\nignore_user_abort(true);\n\n// Set a time limit for script execution (0 means no limit)\nset_time_limit(0);\n\nwhile (true) {\n    // Check if the client has disconnected\n    if (connection_aborted()) {\n        // Handle the disconnection\n        error_log("Client disconnected.");\n        break;\n    }\n\n    // Your long-running task here\n    // ...\n\n    // Sleep for a while to mimic a long-running task\n    sleep(1);\n}\n?>