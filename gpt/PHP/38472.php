if (!empty($_FILES)) {\n    $tempFile = $_FILES['Filedata']['tmp_name'];\n    $targetPath = $_SERVER['DOCUMENT_ROOT'] . "/app/webroot/posts/temp/";\n    $targetFile = str_replace('//', '/', $targetPath) . $_FILES['Filedata']['name'];\n\n    // Adding a unique identifier to the filename\n    $targetFile = str_replace(".", "_" . mt_rand(10000000, 99999999) . ".", $targetFile);\n\n    // Create the target directory if it doesn't exist\n    if (!file_exists($targetPath)) {\n        mkdir($targetPath, 0755, true);\n    }\n\n    // Move the uploaded file and check for errors\n    if (move_uploaded_file($tempFile, $targetFile)) {\n        echo "1";\n    } else {\n        echo "Failed to move uploaded file.";\n        error_log("Failed to move uploaded file to " . $targetFile);\n    }\n} else {\n    echo "No files uploaded.";\n    error_log("No files uploaded.");\n}