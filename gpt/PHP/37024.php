<?php\n$i = 0;\nwhile ($row = mysqli_fetch_array($results, MYSQLI_ASSOC)) {\n    $cat[$i] = $row['category'];\n    $cat_id[$i] = $row['cat_id'];\n\n    echo '<li><input type="checkbox" ';\n\n    // Check if $link_cat is an array and not empty\n    if (is_array($link_cat) && !empty($link_cat)) {\n        $catCount = count($link_cat);\n        for ($ct = 0; $ct < $catCount; $ct++) {\n            if ($cat_id[$i] == $link_cat[$ct]) {\n                echo 'checked="checked" ';\n                break; // Exit the loop early if a match is found\n            }\n        }\n    }\n\n    echo 'name="' . htmlspecialchars($cat_id[$i], ENT_QUOTES, 'UTF-8') . '" />' . htmlspecialchars($cat[$i], ENT_QUOTES, 'UTF-8') . '</li>';\n\n    $i++;\n}\n?>