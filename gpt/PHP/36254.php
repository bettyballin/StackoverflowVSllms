<?php\nsession_start(); // Ensure session is started\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['lang'])) {\n    $lang = filter_input(INPUT_POST, 'lang', FILTER_SANITIZE_STRING); // Sanitize input\n    if ($lang) {\n        $_SESSION['site_lang'] = $lang;\n        $redirectUrl = filter_var($_SESSION['page_refer'], FILTER_SANITIZE_URL);\n        header("Location: $redirectUrl");\n        exit;\n    }\n} else {\n    // Show form with language selection options\n    echo '<form method="POST" action="lang_choose.php">';\n    echo '<input type="submit" name="lang" value="en" />';\n    echo '<input type="submit" name="lang" value="fr" />';\n    echo '<input type="submit" name="lang" value="de" />';\n    echo '</form>';\n}\n?>