function replaceNodes(&$nodes) {\n    foreach ($nodes as &$node) {\n        // Check if the node needs to be replaced\n        if ($node['type'] == 'RefObject') {\n            $n = $this->site->get_node_where('id', $node['node_ref']);\n            // Replace node\n            $node = $this->site->get_node_where('object_id', $n['object_id']);\n            // Get children\n            $node['children'] = $this->site->get_descendants($node['lft'], $node['rgt']);\n            // Recursively replace nodes in children\n            replaceNodes($node['children']);\n        } elseif (isset($node['children']) && is_array($node['children'])) {\n            // Recursively replace nodes in children\n            replaceNodes($node['children']);\n        }\n    }\n}\n\n// Example usage:\nreplaceNodes($nodes);\nreturn $nodes;