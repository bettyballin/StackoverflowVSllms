<?php\n// Fetch the record\n$sql = "SELECT id, data, last_updated FROM records WHERE id = :id";\n$stmt = $pdo->prepare($sql);\n$stmt->execute(['id' => $recordId]);\n$record = $stmt->fetch(PDO::FETCH_ASSOC);\n\n// When updating the record\n$lastUpdated = $_POST['last_updated']; // This should come from the form\n\nif ($record['last_updated'] === $lastUpdated) {\n    // Proceed with the update\n    $sql = "UPDATE records SET data = :data, last_updated = NOW() WHERE id = :id";\n    $stmt = $pdo->prepare($sql);\n    $stmt->execute(['data' => $newData, 'id' => $recordId]);\n} else {\n    // Record has been modified, handle the conflict\n    echo "Record has been updated by another user. Please reload and try again.";\n}\n?>