<?php\necho "<ul>";\n\n$query = "\nSELECT c.category_name, cm.username, cm.text, cm.created_at\nFROM (\n    SELECT \n        category_id, username, text, created_at,\n        ROW_NUMBER() OVER (PARTITION BY category_id ORDER BY created_at DESC) as row_num\n    FROM comments\n) cm\nJOIN categories c ON c.id = cm.category_id\nWHERE cm.row_num <= 5\nORDER BY c.category_name, cm.created_at DESC\n";\n\n$result = mysqli_query($conn, $query);\n\n$current_category = null;\nwhile ($row = mysqli_fetch_assoc($result)) {\n    if ($current_category !== $row['category_name']) {\n        if ($current_category !== null) {\n            echo "</li>";\n        }\n        $current_category = $row['category_name'];\n        echo "<li><h2>{$current_category}</h2>";\n    }\n    \n    echo "{$row['username']} wrote {$row['text']} on {$row['created_at']}<br>";\n}\nif ($current_category !== null) {\n    echo "</li>";\n}\necho "</ul>";\n?>