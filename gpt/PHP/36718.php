class Database {\n        private $masterConnection;\n        private $slaveConnections = [];\n        private $currentSlaveIndex = 0;\n\n        public function __construct($config) {\n            $this->masterConnection = new mysqli(\n                $config['master']['host'],\n                $config['master']['username'],\n                $config['master']['password'],\n                $config['master']['database']\n            );\n\n            foreach ($config['slaves'] as $slaveConfig) {\n                $this->slaveConnections[] = new mysqli(\n                    $slaveConfig['host'],\n                    $slaveConfig['username'],\n                    $slaveConfig['password'],\n                    $slaveConfig['database']\n                );\n            }\n        }\n\n        private function getSlaveConnection() {\n            $connection = $this->slaveConnections[$this->currentSlaveIndex];\n            $this->currentSlaveIndex = ($this->currentSlaveIndex + 1) % count($this->slaveConnections);\n            return $connection;\n        }\n\n        public function query($sql) {\n            if (stripos($sql, 'SELECT') === 0) {\n                return $this->getSlaveConnection()->query($sql);\n            } else {\n                return $this->masterConnection->query($sql);\n            }\n        }\n    }