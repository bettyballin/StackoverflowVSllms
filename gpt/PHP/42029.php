<?php\n// Assuming you have a connection to your MySQL database already established\n$usrID = 2; // Example user ID\n\n$query = "\nSELECT \n    pm_info.is_read,\n    sender.usrFirst AS sender_name,\n    pm_data.date_sent,\n    pm_data.title,\n    pm_data.thread_id\nFROM \n    pm_info\nINNER JOIN \n    pm_data ON pm_info.thread_id = pm_data.thread_id\nINNER JOIN \n    tblUsers AS sender ON pm_data.sender_id = sender.usrID\nWHERE \n    pm_info.receiver_id = ?\n    AND pm_data.date_sent = (\n        SELECT MAX(date_sent) \n        FROM pm_data \n        WHERE pm_data.thread_id = pm_info.thread_id\n    )\nORDER BY \n    pm_data.date_sent DESC\n";\n\n$stmt = $mysqli->prepare($query);\n$stmt->bind_param("i", $usrID);\n$stmt->execute();\n$result = $stmt->get_result();\n\necho '<table id="messages">';\nwhile ($row = $result->fetch_assoc()) {\n    echo '<tr id="id-' . htmlspecialchars($row['thread_id']) . '">';\n    echo '<td>';\n    echo '<span>From: ' . htmlspecialchars($row['sender_name']) . '</span>';\n    echo '<span>' . htmlspecialchars($row['date_sent']) . '</span>';\n    echo '</td>';\n    echo '<td><div>' . htmlspecialchars($row['title']) . '</div></td>';\n    echo '</tr>';\n}\necho '</table>';\n\n$stmt->close();\n?>