function render($index) {\n    global $things; // Ensure $things is accessible within the function\n    $stack = array($index); // Initialize stack with the initial index\n\n    while (!empty($stack)) {\n        $currentIndex = array_pop($stack);\n\n        foreach ($things[$currentIndex] as $key => $data) {\n            echo '<div>';\n            // Irrelevant operations can be done here\n\n            if (isset($data['id'])) {\n                echo '<div class="wrap">';\n                $stack[] = $data['id']; // Push the next index onto the stack\n                echo '</div>';\n            }\n            echo '</div>';\n        }\n    }\n}