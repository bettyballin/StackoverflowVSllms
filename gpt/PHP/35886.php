<?php\nfunction saveArticleVersion($mysqli, $article_id, $title, $content) {\n    // Find the current version\n    $stmt = $mysqli->prepare("SELECT MAX(version) AS max_version FROM articles WHERE article_id = ?");\n    $stmt->bind_param("i", $article_id);\n    $stmt->execute();\n    $result = $stmt->get_result();\n    $row = $result->fetch_assoc();\n    $current_version = $row['max_version'] ?? 0;\n    $new_version = $current_version + 1;\n\n    // Insert the new version\n    $stmt = $mysqli->prepare("INSERT INTO articles (article_id, version, title, content, is_current) VALUES (?, ?, ?, ?, 1)");\n    $stmt->bind_param("iiss", $article_id, $new_version, $title, $content);\n    $stmt->execute();\n\n    // Update the current version table\n    $stmt = $mysqli->prepare("REPLACE INTO article_current_version (article_id, current_version) VALUES (?, ?)");\n    $stmt->bind_param("ii", $article_id, $new_version);\n    $stmt->execute();\n\n    // Optionally, update the previous version to set is_current to 0\n    $stmt = $mysqli->prepare("UPDATE articles SET is_current = 0 WHERE article_id = ? AND version < ?");\n    $stmt->bind_param("ii", $article_id, $new_version);\n    $stmt->execute();\n}\n?>