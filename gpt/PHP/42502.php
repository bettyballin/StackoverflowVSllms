// create media index\n    $index = Zend_Search_Lucene::create('/data/media_index');\n    // get all media\n    $media = $this->_getTable('Media')->get();\n    // iterate through media and build index\n    foreach ($media as $m) {\n        $doc = new Zend_Search_Lucene_Document();\n\n        // Ensure ID is indexed correctly\n        $doc->addField(Zend_Search_Lucene_Field::Keyword('id', $m->id));\n        $doc->addField(Zend_Search_Lucene_Field::UnIndexed('thumb_path', $m->thumb_path));\n        $doc->addField(Zend_Search_Lucene_Field::Keyword('title', $m->title));\n        $doc->addField(Zend_Search_Lucene_Field::UnStored('description', $m->description));\n        $doc->addField(Zend_Search_Lucene_Field::Keyword('type', $m->type));\n\n        $index->addDocument($doc);\n    }\n    // commit the index\n    $index->commit();