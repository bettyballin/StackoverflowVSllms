<?php\n$unenc_path = '../tmp/' . preg_replace('/[^0-9]/', '', microtime()) . rand(0, 1000) . "msg.txt";\n$enc_path = '../tmp/' . preg_replace('/[^0-9]/', '', microtime()) . rand(0, 1000) . "enc.txt";\n\n// Write the unencrypted message to a file\n$fp = fopen($unenc_path, "w");\nfwrite($fp, $msg);\nfclose($fp);\n\n$easy_access_emails = ['person@##.com'];\n$headers = "From: support@##.com <support@##.com>\n" .\n           "Reply-to: support@##.com\n" .\n           "Subject: " . $subject . "\n";\n\n// Load the certificate\n$key = implode("", file("../newcert.pem"));\n\n// Split headers into an array\n$ArrayMessageProperties = explode("\n", $headers);\n\n// Encrypt the message\nif (openssl_pkcs7_encrypt($unenc_path, $enc_path, $key, $ArrayMessageProperties)) {\n    $info = file_get_contents($enc_path);\n\n    foreach ($easy_access_emails as $email) {\n        mail($email, $subject, $info, $headers);\n    }\n} else {\n    die("Failed Encryption");\n}\n?>