<?php\n// Create a socket\n$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);\nif (!$socket) {\n    die("Socket creation failed: " . socket_strerror(socket_last_error()));\n}\n\n// Bind the socket to an address and port\nif (!socket_bind($socket, '0.0.0.0', 8080)) {\n    die("Socket bind failed: " . socket_strerror(socket_last_error($socket)));\n}\n\n// Listen for connections\nif (!socket_listen($socket)) {\n    die("Socket listen failed: " . socket_strerror(socket_last_error($socket)));\n}\n\n// Accept a connection\n$clientSocket = socket_accept($socket);\nif (!$clientSocket) {\n    die("Socket accept failed: " . socket_strerror(socket_last_error($socket)));\n}\n\n// Set the timeout for reading from the socket\n$timeoutSec = 5;\n$timeoutUsec = 0; // microseconds\n\n$stream = socket_export_stream($clientSocket);\nif (!$stream) {\n    die("Socket export stream failed");\n}\n\nstream_set_timeout($stream, $timeoutSec, $timeoutUsec);\n\n// Read data from the socket\n$data = fread($stream, 1024);\n$info = stream_get_meta_data($stream);\n\nif ($info['timed_out']) {\n    echo "Connection timed out.\n";\n    socket_shutdown($clientSocket);\n    socket_close($clientSocket);\n} else {\n    echo "Received data: " . $data . "\n";\n    // Process data\n}\n\n// Close the sockets\nsocket_close($clientSocket);\nsocket_close($socket);\n?>