<?php defined('SYSPATH') or die('No direct script access.');\n\nclass Controller_Register extends Controller_Template {\n\n    public function action_index() {\n        if ($_POST) {\n            $user = ORM::factory('User');\n            $user->username = $_POST['username'];\n            $user->password = Auth::instance()->hash_password($_POST['password']);\n            $user->email = $_POST['email'];\n            $user->save();\n\n            $this->redirect('login');\n        }\n\n        $this->template->content = View::factory('register');\n    }\n}