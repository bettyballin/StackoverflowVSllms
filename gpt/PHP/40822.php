function userHasPermission($userId, $permissionName, $pdo) {\n    $query = "\n        SELECT COUNT(*) \n        FROM UserRoles ur\n        JOIN RolePermissions rp ON ur.role_id = rp.role_id\n        JOIN Permissions p ON rp.permission_id = p.id\n        WHERE ur.user_id = :user_id AND p.permission_name = :permission_name\n    ";\n    \n    $stmt = $pdo->prepare($query);\n    $stmt->execute(['user_id' => $userId, 'permission_name' => $permissionName]);\n    \n    return $stmt->fetchColumn() > 0;\n}\n\n// Usage example\nif (userHasPermission($currentUserId, 'CREATE_POST', $pdo)) {\n    // User has permission to create post\n} else {\n    // Access denied\n}