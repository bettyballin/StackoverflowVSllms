foreach ($response['products'] as $product) { \n    if ($filter != "all" && $bb[$product['product-id']['value']] && $bb[$product['product-id']['value']][0] != $filter) {\n        continue;\n    }\n\n    $r = array();\n    $idd = 0;\n    $ca = 0;\n\n    foreach ($product as $key => $value) { \n        if ($key == "product-id") { \n            $idd = (int)$value['value'];\n            $r[0] = $idd ? "<input type='radio' name='product_id' value='" . $idd . "'/>" : "0&nbsp;";\n\n            // Display image based on value of $idd\n            if ($idd == 1021) {\n                $r[1] = "<img src='URL_FOR_ID_1021' alt='Image for product 1021' />";\n            } elseif ($idd == 1022) {\n                $r[1] = "<img src='URL_FOR_ID_1022' alt='Image for product 1022' />";\n            } else {\n                $r[1] = "<img src='DEFAULT_IMAGE_URL' alt='Default Image' />";\n            }\n\n            // price\n            $r[4] = $bb[$idd] ? $bb[$idd][3] : "ID";\n            // info\n            $r[5] = "<a href='checker/info.php?id=" . $idd . "' rel=\"shadowbox;width=400;height=200\" class=\"option\"><img src=\"http://www.flipconnect.co.uk/images/more-info.gif\" style=\"border:none; padding-top:24px;\" alt=\"more information about this pack\" /></a>";\n            // buy\n            $r[6] = "<a href='checker/next.php?id=" . $idd . "&amp;postcode=" . $postcode . "&amp;speed=" . $phone . "'><img src=\"http://www.flipconnect.co.uk/images/buy-now.gif\" style=\"border:none\" alt=\"buy this package\" /></a>";\n        }\n    }\n}