<?php\nfunction clean_json_string($json_str) {\n    // Remove trailing commas\n    $json_str = preg_replace('/,\s*([\]}])/m', '$1', $json_str);\n    \n    // Ensure keys are quoted\n    $json_str = preg_replace('/([{,])\s*([^{"\s]+)\s*:/m', '$1"$2":', $json_str);\n\n    return $json_str;\n}\n\n$raw_json = '{foo:"bar",}'; // Example of malformed JSON\n$clean_json = clean_json_string($raw_json);\n$data = json_decode($clean_json, true);\n\nif (json_last_error() === JSON_ERROR_NONE) {\n    print_r($data);\n} else {\n    echo 'Invalid JSON: ' . json_last_error_msg();\n}\n?>