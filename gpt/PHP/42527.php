<?php\nfunction createThumbnail($sourcePath, $destPath, $desiredWidth) {\n    // Load the image\n    $sourceImage = imagecreatefromjpeg($sourcePath);\n    $width = imagesx($sourceImage);\n    $height = imagesy($sourceImage);\n\n    // Calculate the desired height proportional to the desired width\n    $desiredHeight = floor($height * ($desiredWidth / $width));\n\n    // Create a new, empty image with desired dimensions\n    $virtualImage = imagecreatetruecolor($desiredWidth, $desiredHeight);\n\n    // Copy the source image into the new image with resizing\n    imagecopyresampled($virtualImage, $sourceImage, 0, 0, 0, 0, $desiredWidth, $desiredHeight, $width, $height);\n\n    // Save the thumbnail to disk\n    imagejpeg($virtualImage, $destPath);\n\n    // Clean up resources\n    imagedestroy($sourceImage);\n    imagedestroy($virtualImage);\n}\n\n// Usage example\n$sourcePath = 'path/to/source/image.jpg';\n$destPath = 'path/to/save/thumbnail.jpg';\n$desiredWidth = 150;\n\ncreateThumbnail($sourcePath, $destPath, $desiredWidth);\n?>