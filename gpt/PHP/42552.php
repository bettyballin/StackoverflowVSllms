// Function to get the current version of the forum\nfunction getForumVersion($forumId) {\n    $versionKey = "Forum::Version|$forumId";\n    $version = apc_fetch($versionKey);\n    if ($version === false) {\n        $version = 1; // Default version if not set\n        apc_store($versionKey, $version);\n    }\n    return $version;\n}\n\n// Function to increment the forum version key\nfunction incrementForumVersion($forumId) {\n    $versionKey = "Forum::Version|$forumId";\n    apc_inc($versionKey);\n}\n\n// Function to get cached threads with pagination\nfunction getCachedThreads($forumId, $limit, $offset) {\n    $version = getForumVersion($forumId);\n    $cacheKey = "Forum::getThreads|$forumId|$limit|$offset|$version";\n    $threads = apc_fetch($cacheKey);\n    \n    if ($threads === false) {\n        // Fetch the threads from the database\n        $threads = fetchThreadsFromDatabase($forumId, $limit, $offset);\n        apc_store($cacheKey, $threads);\n    }\n    \n    return $threads;\n}\n\n// Function to invalidate cache when a new thread is added\nfunction addThreadToForum($forumId, $threadData) {\n    // Add the new thread to the database\n    saveThreadToDatabase($forumId, $threadData);\n    \n    // Increment the version key to invalidate all cached pages\n    incrementForumVersion($forumId);\n}