<?php\n\nfunction longestCommonSubstring($str1, $str2) {\n    $len1 = strlen($str1);\n    $len2 = strlen($str2);\n    $result = 0; // for storing the length of the longest common substring\n    $end = 0; // for storing the ending index of the longest common substring in str1\n\n    // Create a 2D array to store lengths of longest common suffixes of substrings\n    $lengths = array_fill(0, $len1 + 1, array_fill(0, $len2 + 1, 0));\n\n    // Build the lengths array from the bottom up\n    for ($i = 1; $i <= $len1; $i++) {\n        for ($j = 1; $j <= $len2; $j++) {\n            if ($str1[$i - 1] == $str2[$j - 1]) {\n                $lengths[$i][$j] = $lengths[$i - 1][$j - 1] + 1;\n                if ($lengths[$i][$j] > $result) {\n                    $result = $lengths[$i][$j];\n                    $end = $i - 1;\n                }\n            } else {\n                $lengths[$i][$j] = 0;\n            }\n        }\n    }\n\n    // If there is no common substring, return an empty string\n    if ($result == 0) {\n        return "";\n    }\n\n    // The longest common substring is the substring of str1 ending at index 'end' with length 'result'\n    return substr($str1, $end - $result + 1, $result);\n}\n\n// Example usage\n$str1 = "there is a needle in a haystack";\n$str2 = "needle in a hay";\n\necho "Longest Common Substring: " . longestCommonSubstring($str1, $str2);\n?>