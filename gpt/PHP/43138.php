function stackItems($items, $rowWidth) {\n    $currentRow = [];\n    $currentWidth = 0;\n    $result = [];\n\n    foreach ($items as $item) {\n        $itemWidth = $item['width'];\n\n        if ($currentWidth + $itemWidth <= $rowWidth) {\n            $currentRow[] = $item;\n            $currentWidth += $itemWidth;\n        } else {\n            $result[] = $currentRow;\n            $currentRow = [$item];\n            $currentWidth = $itemWidth;\n        }\n    }\n\n    if (!empty($currentRow)) {\n        $result[] = $currentRow;\n    }\n\n    return $result;\n}