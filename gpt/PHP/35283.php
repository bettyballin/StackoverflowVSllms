<?php\n\n$css = 'body { background: #f00; font: 12px Arial; }';\n\n// Step 1: Match the entire CSS rule\n$pattern = '/(?<selector>[A-Za-z0-9\s,.:#_-]+)\s*{\s*(?<declarations>[^}]*)\s*}/';\npreg_match_all($pattern, $css, $matches, PREG_SET_ORDER);\n\n$result = [];\nforeach ($matches as $match) {\n    $selector = trim($match['selector']);\n    $declarations = trim($match['declarations']);\n\n    // Step 2: Match individual properties and values within the declaration block\n    preg_match_all('/(?<property>[A-Za-z-]+)\s*:\s*(?<value>[^;]+)\s*;?/', $declarations, $propValMatches, PREG_SET_ORDER);\n\n    $properties = [];\n    foreach ($propValMatches as $propVal) {\n        $properties[] = [\n            'property' => trim($propVal['property']),\n            'value' => trim($propVal['value'])\n        ];\n    }\n\n    $result[] = [\n        'selector' => $selector,\n        'properties' => $properties\n    ];\n}\n\nprint_r($result);\n?>