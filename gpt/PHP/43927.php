function updateUser($table, $id) {\n    if ($_POST) {\n        processUpdate($table, $id);\n    } else {\n        updateForm($table, $id);\n    }\n}\n\nfunction processUpdate($table, $id) {\n    print $table; // testing\n    print $id; // testing\n\n    // Ensure the global $_POST array is used\n    $email = addslashes($_POST['email']);\n    $lname = addslashes($_POST['lname']);\n    $fname = addslashes($_POST['fname']);\n\n    print $lname; // testing\n\n    // Which table do we update\n    switch ($table) {\n        case "maillist":\n            // Use prepared statements to avoid SQL injection\n            $conn = new mysqli("host", "username", "password", "database");\n            if ($conn->connect_error) {\n                die("Connection failed: " . $conn->connect_error);\n            }\n            $stmt = $conn->prepare("UPDATE maillist SET email=?, lname=?, fname=? WHERE id=?");\n            $stmt->bind_param("sssi", $email, $lname, $fname, $id);\n            $stmt->execute();\n            if ($stmt->error) {\n                die("Update failed: " . $stmt->error);\n            }\n            $stmt->close();\n            $conn->close();\n        break;\n    }\n}\n\nfunction updateForm($table, $id) {\n    // Output form HTML code here\n    echo '<form method="post" action="?mode=upd&id='.$id.'&table='.$table.'">';\n    echo '<input type="text" name="email" />';\n    echo '<input type="text" name="lname" />';\n    echo '<input type="text" name="fname" />';\n    echo '<input type="submit" value="Update" />';\n    echo '</form>';\n}