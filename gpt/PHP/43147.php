<?php\n\n$input = "asdasd asdasd  asdas1\n asda234 4545    54\n  34545 345  34534\n34 345\n";\n\n// Callback function to replace spaces according to the given rules\nfunction replace_spaces_callback($matches) {\n    if (isset($matches[1])) {\n        // Case for spaces at the start of a line\n        return str_repeat('&nbsp;', strlen($matches[1]));\n    } elseif (isset($matches[2])) {\n        // Case for repeated spaces\n        return str_repeat('&nbsp;', strlen($matches[2]));\n    }\n    return $matches[0];\n}\n\n// Regular expression to match spaces at the start of a line or repeated spaces\n$pattern = '/(^ +)|( {2,})/m';\n\n// Perform the replacement using preg_replace_callback\n$output = preg_replace_callback($pattern, 'replace_spaces_callback', $input);\n\necho nl2br(htmlspecialchars($output));\n?>