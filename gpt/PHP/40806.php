$data = json_decode(file_get_contents('php://input'), true);\n\nif (isset($data['ne']) && isset($data['sw'])) {\n    list($nelat, $nelng) = explode(',', $data['ne']);\n    list($swlat, $swlng) = explode(',', $data['sw']);\n\n    $nelng = (float)$nelng;\n    $swlng = (float)$swlng;\n    $nelat = (float)$nelat;\n    $swlat = (float)$swlat;\n\n    $lowerLng = min($swlng, $nelng);\n    $upperLng = max($swlng, $nelng);\n    $lowerLat = min($swlat, $nelat);\n    $upperLat = max($swlat, $nelat);\n\n    $sql = 'SELECT `a`.* FROM `locations` AS `a` WHERE \n            (a.`longitude` >= :lowerLng) AND (a.`longitude` <= :upperLng) AND \n            (a.`latitude` >= :lowerLat) AND (a.`latitude` <= :upperLat)';\n\n    $stmt = $pdo->prepare($sql);\n    $stmt->bindParam(':lowerLng', $lowerLng);\n    $stmt->bindParam(':upperLng', $upperLng);\n    $stmt->bindParam(':lowerLat', $lowerLat);\n    $stmt->bindParam(':upperLat', $upperLat);\n    $stmt->execute();\n\n    $results = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    echo json_encode($results);\n} else {\n    echo json_encode([]);\n}