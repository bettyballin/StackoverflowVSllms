<?php\nfunction incrementCounter($filePath) {\n    // Open the file in read-write mode\n    $fileHandle = fopen($filePath, 'c+');\n    \n    if ($fileHandle === false) {\n        throw new Exception("Could not open the file!");\n    }\n\n    // Acquire an exclusive lock\n    if (flock($fileHandle, LOCK_EX)) {\n        // Read the current value\n        $counterValue = intval(fread($fileHandle, filesize($filePath)));\n        \n        // Increment the counter\n        $counterValue++;\n\n        // Move the file pointer to the beginning of the file\n        ftruncate($fileHandle, 0); // Truncate the file to zero length\n        rewind($fileHandle); // Move the file pointer to the beginning of the file\n\n        // Write the new value to the file\n        fwrite($fileHandle, $counterValue);\n\n        // Release the lock\n        flock($fileHandle, LOCK_UN);\n    } else {\n        throw new Exception("Could not lock the file!");\n    }\n\n    // Close the file\n    fclose($fileHandle);\n}\n\n// Define the path to your counter file\n$filePath = 'counter.txt';\n\n// Call the function to increment the counter\ntry {\n    incrementCounter($filePath);\n    echo "Counter updated successfully!";\n} catch (Exception $e) {\n    echo "Error: " . $e->getMessage();\n}\n?>