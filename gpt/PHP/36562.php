<?php\nfunction editPage($page_id, $new_content, $author) {\n    global $pdo;\n\n    $pdo->beginTransaction();\n\n    try {\n        // Insert a new revision\n        $stmt = $pdo->prepare("INSERT INTO revisions (page_id, content, author) VALUES (:page_id, :content, :author)");\n        $stmt->execute(['page_id' => $page_id, 'content' => $new_content, 'author' => $author]);\n        $revision_id = $pdo->lastInsertId();\n\n        // Update the current_revision_id in pages\n        $stmt = $pdo->prepare("UPDATE pages SET current_revision_id = :revision_id WHERE id = :page_id");\n        $stmt->execute(['revision_id' => $revision_id, 'page_id' => $page_id]);\n\n        $pdo->commit();\n    } catch (Exception $e) {\n        $pdo->rollBack();\n        throw $e;\n    }\n}\n?>