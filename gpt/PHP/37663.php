require_once 'Zend/Search/Lucene.php';\nrequire_once 'Zend/Search/Lucene/Analysis/Analyzer.php';\nrequire_once 'Zend/Search/Lucene/Analysis/Analyzer/Common/TextNum.php';\nrequire_once 'Zend/Search/Lucene/Analysis/Analyzer/Common/TextNum/CaseInsensitive.php';\nrequire_once 'Zend/Search/Lucene/Analysis/TokenFilter.php';\nrequire_once 'Zend/Search/Lucene/Analysis/TokenFilter/LowerCase.php';\nrequire_once 'Zend/Search/Lucene/Analysis/TokenFilter/Alnum.php';\n\nclass CustomAnalyzer extends Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive\n{\n    public function __construct()\n    {\n        parent::__construct();\n\n        // Add custom filters\n        $this->addFilter(new Zend_Search_Lucene_Analysis_TokenFilter_Alnum());\n        $this->addFilter(new Zend_Search_Lucene_Analysis_TokenFilter_LowerCase());\n        // Custom filter to handle concatenated words\n        $this->addFilter(new Zend_Search_Lucene_Analysis_TokenFilter_WordConcatenator());\n    }\n}\n\nclass Zend_Search_Lucene_Analysis_TokenFilter_WordConcatenator extends Zend_Search_Lucene_Analysis_TokenFilter\n{\n    public function normalize(Zend_Search_Lucene_Analysis_Token $token)\n    {\n        // Normalize text by removing spaces for concatenated words\n        $token->setTermText(str_replace(' ', '', $token->getTermText()));\n        return $token;\n    }\n}\n\n// Set the custom analyzer\nZend_Search_Lucene_Analysis_Analyzer::setDefault(new CustomAnalyzer());\n\n// Indexing example\n$index = Zend_Search_Lucene::create('/path/to/index');\n\n$doc = new Zend_Search_Lucene_Document();\n$doc->addField(Zend_Search_Lucene_Field::Text('shop_name', 'FooBar'));\n$index->addDocument($doc);\n\n$doc = new Zend_Search_Lucene_Document();\n$doc->addField(Zend_Search_Lucene_Field::Text('shop_name', 'Foo Bar'));\n$index->addDocument($doc);\n\n$index->commit();\n\n// Searching example\n$index = Zend_Search_Lucene::open('/path/to/index');\n\n// Normalize search query to match indexed terms\n$query = Zend_Search_Lucene_Search_QueryParser::parse('FooBar');\n$hits = $index->find($query);\n\nforeach ($hits as $hit) {\n    echo $hit->shop_name . "\n";\n}\n\n$query = Zend_Search_Lucene_Search_QueryParser::parse('Foo Bar');\n$hits = $index->find($query);\n\nforeach ($hits as $hit) {\n    echo $hit->shop_name . "\n";\n}