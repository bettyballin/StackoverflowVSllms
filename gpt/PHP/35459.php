function get_user_scope($user_id) {\n       global $pdo;\n       $sql = "SELECT r.role_name FROM users u JOIN roles r ON u.role_id = r.id WHERE u.id = :user_id";\n       $stmt = $pdo->prepare($sql);\n       $stmt->execute(['user_id' => $user_id]);\n       return $stmt->fetchColumn();\n   }\n\n   function get_records($user_id) {\n       global $pdo;\n       $role = get_user_scope($user_id);\n\n       if ($role == 'admin') {\n           $sql = "SELECT * FROM records";\n       } elseif ($role == 'city_level') {\n           $sql = "SELECT * FROM records WHERE city_id = (SELECT city_id FROM users WHERE id = :user_id)";\n       } elseif ($role == 'national_level') {\n           $sql = "SELECT * FROM records WHERE country_id = (SELECT country_id FROM users WHERE id = :user_id)";\n       } else {\n           return [];\n       }\n\n       $stmt = $pdo->prepare($sql);\n       $stmt->execute(['user_id' => $user_id]);\n       return $stmt->fetchAll();\n   }