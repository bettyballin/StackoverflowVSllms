<?php\nfunction convertToDate($input, $format = 'mm-dd-yyyy') {\n    if ($format == 'mm-dd-yyyy') {\n        $date = DateTime::createFromFormat('m-d-Y', $input);\n    } else if ($format == 'dd-mm-yyyy') {\n        $date = DateTime::createFromFormat('d-m-Y', $input);\n    } else {\n        throw new Exception('Unsupported date format');\n    }\n\n    if (!$date) {\n        throw new Exception('Invalid date');\n    }\n\n    return $date->format('Ymd');\n}\n\n// Example usage:\ntry {\n    $date1 = convertToDate('12-31-2021', 'mm-dd-yyyy');\n    echo $date1; // Outputs: 20211231\n\n    $date2 = convertToDate('31-12-2021', 'dd-mm-yyyy');\n    echo $date2; // Outputs: 20211231\n} catch (Exception $e) {\n    echo 'Error: ' . $e->getMessage();\n}\n?>