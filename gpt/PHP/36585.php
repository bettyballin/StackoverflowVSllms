<?php\nob_start();\nsession_start();\ninclude("config.inc.php");\ninclude("jsonEncode.php");\n\n// Database connection\n$conn = new mysqli($db_host, $db_user, $db_password, $db_name);\nif ($conn->connect_error) {\n    die("Connection failed: " . $conn->connect_error);\n}\n\n// ausername and apassword sent from form\n$ausername = $_GET['username'];\n$apassword = $_GET['password'];\n\n// Prepare and bind\n$stmt = $conn->prepare("SELECT * FROM admin WHERE ausername = ? AND apassword = ? LIMIT 1");\n$stmt->bind_param("ss", $ausername, $apassword);\n\n// Execute the statement\n$stmt->execute();\n$result = $stmt->get_result();\n$data = $result->fetch_assoc();\n$count = $result->num_rows;\n\nif ($count == 1) {\n    $_SESSION['ausername'] = $ausername;\n    $_SESSION['apassword'] = $apassword;\n    $_SESSION['admin_id'] = $data['a_id'];\n    $a_id = $data['a_id'];\n    $_SESSION['LastLogin'] = $data['last_login'];\n    \n    // Update last login\n    $update_stmt = $conn->prepare("UPDATE admin SET last_login = NOW() WHERE a_id = ?");\n    $update_stmt->bind_param("i", $a_id);\n    $update_stmt->execute();\n    \n    $_SESSION['aloggedin'] = "1234";\n    // valid\n    $var = array('avalid' => 1, 'ausername' => $ausername, 'apassword' => $apassword);\n    print php_json_encode($var);\n} else {\n    // invalid\n    $var = array('avalid' => 0, 'ausername' => $ausername, 'apassword' => $apassword);\n    print php_json_encode($var);\n}\n\n// Close the statement and connection\n$stmt->close();\n$conn->close();\n?>