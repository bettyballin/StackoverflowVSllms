<?php\ninclude('secure.php');\ninclude('config.php');\n\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);  // replace with your database connection variables\n\n// Check connection\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\nif (isset($_GET['posID']) && isset($_POST['submitted'])) {\n    $posID = (int) $_GET['posID'];\n    \n    // Get the current 'approved' value\n    $stmt = $mysqli->prepare("SELECT `approved` FROM `positions` WHERE `posID` = ?");\n    $stmt->bind_param("i", $posID);\n    $stmt->execute();\n    $stmt->bind_result($currentApproved);\n    $stmt->fetch();\n    $stmt->close();\n    \n    // Toggle the 'approved' value\n    $newApproved = ($currentApproved == '0') ? '1' : '0';\n\n    // Prepare and bind\n    $stmt = $mysqli->prepare("UPDATE `positions` SET `approved` = ? WHERE `posID` = ?");\n    $stmt->bind_param("si", $newApproved, $posID);\n\n    // Execute the query\n    if ($stmt->execute()) {\n        echo "Edited row.";\n    } else {\n        echo "Error: " . $stmt->error;\n    }\n    $stmt->close();\n    \n    echo "Back To Listing";\n}\n\n$mysqli->close();\n?>