public function uploadPublicVideoAction()\n   {\n       $request = $this->getRequest();\n       $media = $this->_getTable('Media');\n\n       $form = $this->_getForm('UploadPublicVideo', $this->_helper->url('upload-public-video'));\n\n       if ($request->isPost()) {\n           if (isset($_POST['upload_public_video']) && $form->isValid($_POST)) {\n\n               $data = $form->getValues();\n               $data['user_id'] = $this->view->identity->id;\n\n               $ext = end(explode('.', $form->video->getFileName()));\n\n               $dbTrans = false;\n\n               try {\n                   $db = $this->_getDb();\n                   $dbTrans = $db->beginTransaction();\n\n                   $data['type'] = 'video';\n                   $data['status'] = 'public';\n                   $paths = $media->add($data, $ext);\n\n                   if (file_exists($paths[0])) {\n                       unlink($paths[0]);\n                   }\n                   if (file_exists($paths[1])) {\n                       unlink($paths[1]);\n                   }\n\n                   $form->video->addFilter('Rename', array('target' => $paths[0], 'overwrite' => true));\n\n                   // Track progress\n                   $progressSession = new Zend_Session_Namespace('upload_progress');\n                   $progressSession->progress = 0;\n\n                   // Upload the video\n                   $form->video->receive();\n\n                   $db->commit();\n\n                   $form->reset();\n\n                   $this->view->success = 'Public video successfully uploaded';\n\n               } catch (Exception $e) {\n                   if (true === $dbTrans) {\n                       $db->rollBack();\n                   }\n                   $this->view->error = $e->getMessage();\n               }\n           }\n       }\n\n       $this->view->headTitle('Upload Public Video');\n       $this->view->form = $form;\n   }