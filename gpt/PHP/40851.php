<?php\n\nfunction buildTree(array &$elements, $parentKey = '') {\n    $branch = [];\n\n    foreach ($elements as $key => $value) {\n        if (strpos($key, $parentKey) === 0) {\n            $parts = explode('-', str_replace($parentKey, '', $key));\n            if (count($parts) == 1) {\n                if (!isset($branch[$key . '-title'])) {\n                    $branch[$key . '-title'] = $value;\n                }\n                $children = buildTree($elements, $key . '-');\n                if ($children) {\n                    $branch[$key . '-sons'] = $children;\n                }\n                unset($elements[$key]);\n            }\n        }\n    }\n\n    return $branch;\n}\n\n$flatArray = [\n    '1' => 'animal',\n    '1-1' => 'turtle',\n    '1-1-1' => 'sea turtle',\n    '1-1-2' => 'box turtle',\n    '1-1-3' => 'green turtle',\n    '1-1-3-1' => 'green turtle with brown tail'\n];\n\n$tree = buildTree($flatArray);\nprint_r($tree);\n\n?>