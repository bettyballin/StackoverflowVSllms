<?php\nfunction writeToFile($filename, $data, $isImportant = true) {\n    $file = fopen($filename, 'c+');\n\n    if (flock($file, LOCK_EX)) { // acquire an exclusive lock\n        fseek($file, 0, SEEK_END); // move to the end of the file\n        fwrite($file, $data);\n        fflush($file); // flush output before releasing the lock\n        flock($file, LOCK_UN); // release the lock\n    } else {\n        if ($isImportant) {\n            // Handle the error for important writes, e.g., retry or log an error\n            error_log("Failed to acquire lock for writing to $filename");\n        } else {\n            // Fail gracefully for less important writes\n            fclose($file);\n            return false;\n        }\n    }\n\n    fclose($file);\n    return true;\n}\n\n// Usage example\nwriteToFile('example.txt', "Important write data\n", true);\nwriteToFile('example.txt', "Less important write data\n", false);\n?>