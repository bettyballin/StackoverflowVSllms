<?php\n$mysqli = new mysqli("localhost", "username", "password", "database");\n\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\nfunction generateShortUrl($id) {\n    $characters = "123456789abcdefghijklmnopqrstuvwxyz";\n    $base = strlen($characters);\n    $shortUrl = '';\n\n    while ($id > 0) {\n        $shortUrl = $characters[$id % $base] . $shortUrl;\n        $id = intval($id / $base);\n    }\n\n    return $shortUrl;\n}\n\nfunction storeUrl($originalUrl) {\n    global $mysqli;\n\n    // Insert URL into the database\n    $stmt = $mysqli->prepare("INSERT INTO urls (original_url) VALUES (?)");\n    $stmt->bind_param("s", $originalUrl);\n    $stmt->execute();\n\n    // Get the auto-incremented ID of the inserted URL\n    $id = $stmt->insert_id;\n\n    // Generate the short URL using the ID\n    $shortUrl = generateShortUrl($id);\n\n    // Store the short URL in the database\n    $stmt = $mysqli->prepare("UPDATE urls SET short_url = ? WHERE id = ?");\n    $stmt->bind_param("si", $shortUrl, $id);\n    $stmt->execute();\n\n    $stmt->close();\n\n    return $shortUrl;\n}\n\n// Example usage\n$originalUrl = "http://example.com";\n$shortUrl = storeUrl($originalUrl);\necho "Short URL is: " . $shortUrl;\n\n$mysqli->close();\n?>