<?php\n// Database connection\n$servername = "your_server";\n$username = "your_username";\n$password = "your_password";\n$dbname = "your_database";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die("Connection failed: " . $conn->connect_error);\n}\n\n// Check if referrer ID is set in the URL\nif (isset($_GET['ref'])) {\n    $referrer_id = intval($_GET['ref']);\n    \n    // Set a cookie for the referral that expires in 30 days\n    setcookie('referrer_id', $referrer_id, time() + (30 * 24 * 60 * 60), "/");\n}\n\n// Check if the user has a referral cookie\nif (isset($_COOKIE['referrer_id'])) {\n    $referrer_id = intval($_COOKIE['referrer_id']);\n    \n    // Here you can add logic to handle the referral, e.g., create a new user and log the referral\n    // Assume $new_user_id is the ID of the newly created user\n    // $new_user_id = createNewUser(); // This function handles your user creation logic\n    \n    // Example of logging the referral\n    $new_user_id = 123; // Replace with actual new user ID\n    $stmt = $conn->prepare("INSERT INTO referrals (referrer_id, referred_user_id) VALUES (?, ?)");\n    $stmt->bind_param("ii", $referrer_id, $new_user_id);\n    $stmt->execute();\n    $stmt->close();\n}\n\n$conn->close();\n?>