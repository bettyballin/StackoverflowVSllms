$im = imagecreatefromgif("bg.gif");\n\n$container = imagecreatetruecolor(400, 160);\nimagesavealpha($container, true);\n$trans_colour = imagecolorallocatealpha($container, 0, 0, 0, 127);\nimagefill($container, 0, 0, $trans_colour);\n\n// Ensure that the $im image also maintains its transparency\nimagesavealpha($im, true);\nimagealphablending($im, false);\n\n// Copy the source image onto the container\nimagecopy($container, $im, 0, 0, 0, 0, imagesx($im), imagesy($im));\n\n// Your code to add text to the image goes here\n\n// Output the final image\nheader('Content-Type: image/gif');\nimagegif($container);\n\n// Clean up memory\nimagedestroy($im);\nimagedestroy($container);