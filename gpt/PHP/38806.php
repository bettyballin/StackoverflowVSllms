<?php\nuse Ratchet\MessageComponentInterface;\nuse Ratchet\ConnectionInterface;\n\nrequire dirname(__DIR__) . '/vendor/autoload.php';\n\nclass MyWebSocketServer implements MessageComponentInterface {\n    public function onOpen(ConnectionInterface $conn) {\n        echo "New connection! ({$conn->resourceId})\n";\n    }\n\n    public function onMessage(ConnectionInterface $from, $msg) {\n        echo "Message received: {$msg}\n";\n        $from->send("Message received: {$msg}");\n    }\n\n    public function onClose(ConnectionInterface $conn) {\n        echo "Connection {$conn->resourceId} has disconnected\n";\n    }\n\n    public function onError(ConnectionInterface $conn, \Exception $e) {\n        echo "An error has occurred: {$e->getMessage()}\n";\n        $conn->close();\n    }\n}\n\nuse Ratchet\Server\IoServer;\nuse Ratchet\Http\HttpServer;\nuse Ratchet\WebSocket\WsServer;\n\n$server = IoServer::factory(\n    new HttpServer(\n        new WsServer(\n            new MyWebSocketServer()\n        )\n    ),\n    8080\n);\n\n$server->run();\n?>