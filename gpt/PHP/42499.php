$idir = "images/"; // Path To Images Directory\n$tdir = "images/"; // Path To Thumbnails Directory\n$twidth = 125; // Maximum Width For Thumbnail Images\n$theight = 100; // Maximum Height For Thumbnail Images\n\n$url = $_FILES['imagefile']['name']; // Set $url To Equal The Filename For Later Use\n\nif ($_FILES['imagefile']['type'] == "image/jpg" || $_FILES['imagefile']['type'] == "image/jpeg" || $_FILES['imagefile']['type'] == "image/pjpeg" || $_FILES['imagefile']['type'] == "image/png" || $_FILES['imagefile']['type'] == "image/gif") {\n    $file_ext = strrchr($_FILES['imagefile']['name'], '.'); // Get The File Extension\n    $fdate = date('ssU');\n    $copy = copy($_FILES['imagefile']['tmp_name'], "$idir" . $fdate . "$file_ext"); // Move Image To Permanent Location\n\n    if ($copy) { // If Successfully Copied\n        print 'Image uploaded successfully.'; // Successful Upload\n\n        // Create a new image from the uploaded file based on its type\n        switch ($_FILES['imagefile']['type']) {\n            case 'image/jpeg':\n            case 'image/jpg':\n            case 'image/pjpeg':\n                $simg = imagecreatefromjpeg("$idir" . "$fdate" . "$file_ext");\n                break;\n            case 'image/png':\n                $simg = imagecreatefrompng("$idir" . "$fdate" . "$file_ext");\n                break;\n            case 'image/gif':\n                $simg = imagecreatefromgif("$idir" . "$fdate" . "$file_ext");\n                break;\n            default:\n                die('Unsupported image format.');\n        }\n\n        $currwidth = imagesx($simg); // Current Image Width\n        $currheight = imagesy($simg); // Current Image Height\n\n        if ($currheight > $currwidth) { // If Height Is Greater Than Width\n            $zoom = $twidth / $currheight; // Length Ratio For Width\n            $newheight = $theight; // Height Is Equal To Max Height\n            $newwidth = $currwidth * $zoom; // Scale Width Accordingly\n        } else { // Otherwise, Width Is Greater Than Height (or equal)\n            $zoom = $theight / $currwidth; // Length Ratio For Height\n            $newwidth = $twidth; // Width Is Equal To Max Width\n            $newheight = $currheight * $zoom; // Scale Height Accordingly\n        }\n\n        // Create a new true color image with the thumbnail dimensions\n        $dimg = imagecreatetruecolor($newwidth, $newheight);\n\n        // Copy and resize the uploaded image to the new true color image\n        imagecopyresampled($dimg, $simg, 0, 0, 0, 0, $newwidth, $newheight, $currwidth, $currheight);\n\n        // Save the new thumbnail image to the thumbnails directory\n        $thumbname = $tdir . $fdate . "$file_ext";\n        switch ($_FILES['imagefile']['type']) {\n            case 'image/jpeg':\n            case 'image/jpg':\n            case 'image/pjpeg':\n                imagejpeg($dimg, $thumbname);\n                break;\n            case 'image/png':\n                imagepng($dimg, $thumbname);\n                break;\n            case 'image/gif':\n                imagegif($dimg, $thumbname);\n                break;\n        }\n\n        // Free up memory\n        imagedestroy($simg);\n        imagedestroy($dimg);\n\n        print 'Thumbnail created successfully.';\n    } else {\n        print 'Failed to upload image.';\n    }\n} else {\n    print 'Invalid image file type.';\n}\n?>