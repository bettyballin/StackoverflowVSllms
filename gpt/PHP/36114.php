<?php\n\n$imagesDir = '../images/';\n\nif ($_SERVER['REQUEST_METHOD'] === 'GET' && isset($_GET['action']) && $_GET['action'] === 'list') {\n    $images = array_diff(scandir($imagesDir), array('.', '..'));\n    echo json_encode(array_values($images));\n    exit;\n}\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['action'])) {\n    $action = $_POST['action'];\n\n    if ($action === 'delete' && isset($_POST['filename'])) {\n        $filename = basename($_POST['filename']);\n        $filePath = $imagesDir . $filename;\n        if (file_exists($filePath)) {\n            unlink($filePath);\n        }\n    }\n\n    if ($action === 'rename' && isset($_POST['filename'], $_POST['newName'])) {\n        $filename = basename($_POST['filename']);\n        $newName = basename($_POST['newName']);\n        $oldPath = $imagesDir . $filename;\n        $newPath = $imagesDir . $newName;\n        if (file_exists($oldPath) && !file_exists($newPath)) {\n            rename($oldPath, $newPath);\n        }\n    }\n\n    echo json_encode(['status' => 'success']);\n    exit;\n}