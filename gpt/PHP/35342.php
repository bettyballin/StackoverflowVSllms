use PHPUnit\Framework\TestCase;\n\nclass StuffDoer {\n    protected function doesLongRunningThing() {\n        sleep(10);\n        return "stuff";\n    }\n\n    public function doStuff() {\n        return $this->doesLongRunningThing();\n    }\n}\n\nclass StuffDoerTestCase extends TestCase {\n    public function testStuffDoer() {\n        // Create a partial mock for StuffDoer\n        $sd = $this->getMockBuilder(StuffDoer::class)\n                   ->setMethods(['doesLongRunningThing'])\n                   ->getMock();\n\n        // Configure the stub.\n        $sd->method('doesLongRunningThing')\n           ->willReturn('test stuff');\n\n        // Test the doStuff method\n        $result = $sd->doStuff();\n        $this->assertEquals('test stuff', $result);\n    }\n}