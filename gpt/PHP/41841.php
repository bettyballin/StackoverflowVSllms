$entityManager = $this->getDoctrine()->getManager();\n$connection = $entityManager->getConnection();\n$connection->beginTransaction();\n\ntry {\n    $id = $yourId; // Set this to your critical_id value\n    $newValue = 'new_value'; // Set this to your new value\n    \n    // Check if the record exists\n    $sql = 'SELECT COUNT(*) as count FROM your_table WHERE critical_id = :id';\n    $stmt = $connection->prepare($sql);\n    $stmt->execute(['id' => $id]);\n    $result = $stmt->fetch();\n\n    if ($result['count'] > 0) {\n        // Update the record if it exists\n        $sql = 'UPDATE your_table SET field = :newValue WHERE critical_id = :id';\n        $stmt = $connection->prepare($sql);\n        $stmt->execute(['newValue' => $newValue, 'id' => $id]);\n    } else {\n        // Insert the record if it does not exist\n        $sql = 'INSERT INTO your_table (critical_id, field) VALUES (:id, :newValue)';\n        $stmt = $connection->prepare($sql);\n        $stmt->execute(['id' => $id, 'newValue' => $newValue]);\n    }\n\n    $connection->commit();\n} catch (\Exception $e) {\n    $connection->rollBack();\n    throw $e;\n}