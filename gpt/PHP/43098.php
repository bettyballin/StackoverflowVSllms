<?php\n$title = "This is the title of the message.";\n$body = "This is the message body.";\n$post_fields = array(\n    'subject'   => $title,\n    'addbbcode20' => 100,\n    'message' => $body,\n    'lastclick' => $lclick[0],\n    'post' => 'Submit',\n    'attach_sig' => 'on',\n    'creation_time' => $lclick[0],\n    'form_token' => $security123[1],\n    'filecomment' => '',\n);\n\n// Wait (you might also do this by setting lastclick in the past by 3 seconds)\nsleep(3);\n\n// Set up curl session for posting the message\n$ch1 = curl_init();\ncurl_setopt($ch1, CURLOPT_URL, $purl);\ncurl_setopt($ch1, CURLOPT_POST, true);\ncurl_setopt($ch1, CURLOPT_POSTFIELDS, $post_fields);\ncurl_setopt($ch1, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch1, CURLOPT_FOLLOWLOCATION, 1);\ncurl_setopt($ch1, CURLOPT_HEADER, true);  // Get header along with body\ncurl_setopt($ch1, CURLOPT_COOKIE, 'cookie.txt');\ncurl_setopt($ch1, CURLOPT_COOKIEJAR, 'cookie.txt');\ncurl_setopt($ch1, CURLOPT_COOKIEFILE, 'cookie.txt');\n$result2 = curl_exec($ch1);\n$info = curl_getinfo($ch1);\ncurl_close($ch1);\n\n// Extract the URL from the response headers\nif (preg_match("/Location: (.*)/", $result2, $matches)) {\n    $redirectUrl = trim($matches[1]);\n\n    // Parse the URL to get the query string\n    $parsed_url = parse_url($redirectUrl);\n    parse_str($parsed_url['query'], $query_params);\n\n    // Get the 't' parameter\n    if (isset($query_params['t'])) {\n        $question_id = $query_params['t'];\n        echo "Question ID: " . $question_id;\n        // Now you can use $question_id to store or display the link\n    } else {\n        echo "Question ID not found in the URL.";\n    }\n} else {\n    echo "No redirection URL found in the response.";\n}\n?>