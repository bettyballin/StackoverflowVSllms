function cleanPath($path) {\n    $path = (string) $path;\n    $path = preg_replace(\n        array(\n            '#[\n\r\t\0]*#im',\n            '#/(\.){1,}/#i',\n            '#(\.){2,}#i',\n            '#(\.){2,}#i',\n            '#' . preg_quote(DIRECTORY_SEPARATOR, '#') . '{2,}#i'\n        ),\n        array(\n            '',\n            '',\n            '',\n            DIRECTORY_SEPARATOR\n        ),\n        $path\n    );\n    return rtrim($path, DIRECTORY_SEPARATOR);\n}