<?php\n\n// Start output buffering\nob_start();\n\n// Output a message to the client\necho "We'll email you as soon as this is done.";\n\n// Get the size of the output\n$size = ob_get_length();\n\n// Send headers to tell the browser to close the connection\nheader("Content-Length: $size");\nheader("Connection: close");\n\n// Flush the output buffer and send the response to the client\nob_end_flush();\nflush();\n\n// Continue with the long-running process\n// Ensure script doesn't time out\nignore_user_abort(true);\nset_time_limit(0);\n\n// Long-running process\nmail('dude@thatplace.com', "okay I'm done", 'Yup, all done.');\n\n?>