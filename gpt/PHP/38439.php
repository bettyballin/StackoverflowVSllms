$template = '\n<!--if({VERSION} == 2)-->\nHello World\n<!--endif -->\n';\n\n// Define the version variable for the sake of this example\n$version = 2;\n\n// Callback function to evaluate the condition\nfunction replace_if_statements($matches) {\n    global $version;\n    \n    // Replace {VERSION} with the actual $version variable\n    $condition = str_replace('{VERSION}', $version, $matches[1]);\n    \n    // Evaluate the condition\n    if (eval("return $condition;")) {\n        return $matches[2];\n    } else {\n        return '';\n    }\n}\n\n// Use preg_replace_callback instead of preg_replace with /e\n$result = preg_replace_callback(\n    '/<!--if\((.*?)\)-->(.*?)<!--endif -->/s',\n    'replace_if_statements',\n    $template\n);\n\necho $result;