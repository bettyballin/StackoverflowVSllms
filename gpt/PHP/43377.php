// src/Controller/RoomsController.php\n   namespace App\Controller;\n\n   use App\Controller\AppController;\n\n   class RoomsController extends AppController\n   {\n       public function checkAvailability($roomId, $startDate, $endDate)\n       {\n           $query = $this->Rooms->find()\n               ->where(['id' => $roomId])\n               ->andWhere([\n                   'OR' => [\n                       ['start_date <=' => $startDate, 'end_date >=' => $startDate],\n                       ['start_date <=' => $endDate, 'end_date >=' => $endDate],\n                       ['start_date >=' => $startDate, 'end_date <=' => $endDate]\n                   ]\n               ]);\n\n           $room = $query->first();\n\n           if ($room) {\n               $this->Flash->error(__('This room is not available for the selected dates.'));\n           } else {\n               $this->Flash->success(__('The room is available.'));\n           }\n\n           return $this->redirect(['action' => 'index']);\n       }\n   }