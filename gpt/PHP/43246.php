<?php\nfunction truncateToEndOfWord($text, $maxLength) {\n    if (strlen($text) <= $maxLength) {\n        return $text;\n    }\n    \n    $truncatedText = substr($text, 0, $maxLength);\n    \n    // Find the last space within the truncated text\n    $lastSpacePosition = strrpos($truncatedText, ' ');\n    \n    // If there's a space in the truncated text, cut off at the last space\n    if ($lastSpacePosition !== false) {\n        $truncatedText = substr($truncatedText, 0, $lastSpacePosition);\n    }\n    \n    return $truncatedText;\n}\n\n$body = "This is a long string that will be truncated to ensure it does not cut off in the middle of a word.";\n$maxLength = 260;\n\necho truncateToEndOfWord($body, $maxLength);\n?>