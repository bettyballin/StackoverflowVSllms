<?php\n// Directory where uploaded files will be saved\n$targetDir = "uploads/";\n\n// Ensure the uploads directory exists and is writable\nif (!is_dir($targetDir) && !mkdir($targetDir, 0755, true)) {\n    die("Failed to create upload directory.");\n}\n\n// Process the file upload\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $targetFile = $targetDir . basename($_FILES["fileToUpload"]["name"]);\n    $uploadOk = 1;\n    $fileType = strtolower(pathinfo($targetFile, PATHINFO_EXTENSION));\n\n    // Check if file is an actual image or fake image\n    if (isset($_POST["submit"])) {\n        $check = getimagesize($_FILES["fileToUpload"]["tmp_name"]);\n        if ($check !== false) {\n            echo "File is an image - " . $check["mime"] . ".";\n            $uploadOk = 1;\n        } else {\n            echo "File is not an image.";\n            $uploadOk = 0;\n        }\n    }\n\n    // Check file size (e.g., limit to 2MB)\n    if ($_FILES["fileToUpload"]["size"] > 2000000) {\n        echo "Sorry, your file is too large.";\n        $uploadOk = 0;\n    }\n\n    // Allow certain file formats (e.g., jpg, png, jpeg, gif)\n    $allowedTypes = ['jpg', 'png', 'jpeg', 'gif'];\n    if (!in_array($fileType, $allowedTypes)) {\n        echo "Sorry, only JPG, JPEG, PNG & GIF files are allowed.";\n        $uploadOk = 0;\n    }\n\n    // Check if $uploadOk is set to 0 by an error\n    if ($uploadOk == 0) {\n        echo "Sorry, your file was not uploaded.";\n    } else {\n        // Try to upload file\n        if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $targetFile)) {\n            echo "The file ". htmlspecialchars(basename($_FILES["fileToUpload"]["name"])) . " has been uploaded.";\n        } else {\n            echo "Sorry, there was an error uploading your file.";\n        }\n    }\n} else {\n    echo "Invalid request method.";\n}\n?>