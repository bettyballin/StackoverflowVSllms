function readfile_chunked($filename, $retbytes = true) {\n        $buffer = '';\n        $cnt = 0;\n        $handle = fopen($filename, 'rb');\n        if ($handle === false) {\n            return false;\n        }\n        while (!feof($handle)) {\n            $buffer = fread($handle, 1024 * 1024);\n            echo $buffer;\n            if ($retbytes) {\n                $cnt += strlen($buffer);\n            }\n        }\n        $status = fclose($handle);\n        if ($retbytes && $status) {\n            return $cnt;\n        }\n        return $status;\n    }