$old = array(\n    "FirstKey" => "value1",\n    "firstkey" => "duplicate_value",\n    "SecondKey" => "value2"\n);\n\n$new = array();\nforeach ($old as $key => $value) {\n    $key = strtolower($key);\n    if (!array_key_exists($key, $new)) {\n        $new[$key] = $value;\n    } else {\n        // Handle duplicates as needed, for example, merge values or throw an exception\n        $new[$key] .= ',' . $value; // Concatenate values as an example\n    }\n}\n\nprint_r($new);