<?php\n$mysqli = new mysqli("localhost", "username", "password", "database");\n\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n$user1_id = 1; // Starting with User #1\n\n// Step 1: Get User #1's details\n$user1_query = "SELECT have_card, want_card FROM users WHERE id = ?";\n$stmt = $mysqli->prepare($user1_query);\n$stmt->bind_param("i", $user1_id);\n$stmt->execute();\n$user1_result = $stmt->get_result();\n$user1 = $user1_result->fetch_assoc();\n$stmt->close();\n\n$have_card = $user1['have_card'];\n$want_card = $user1['want_card'];\n\n// Step 2: Find User #2 who has the card that User #1 wants\n$user2_query = "SELECT id, have_card, want_card FROM users WHERE have_card = ?";\n$stmt = $mysqli->prepare($user2_query);\n$stmt->bind_param("s", $want_card);\n$stmt->execute();\n$user2_result = $stmt->get_result();\n\nwhile ($user2 = $user2_result->fetch_assoc()) {\n    $user2_id = $user2['id'];\n    $user2_have_card = $user2['have_card'];\n    $user2_want_card = $user2['want_card'];\n\n    // Step 3: Find User #3 who has the card that User #2 wants\n    $user3_query = "SELECT id, have_card, want_card FROM users WHERE have_card = ?";\n    $stmt2 = $mysqli->prepare($user3_query);\n    $stmt2->bind_param("s", $user2_want_card);\n    $stmt2->execute();\n    $user3_result = $stmt2->get_result();\n\n    while ($user3 = $user3_result->fetch_assoc()) {\n        $user3_id = $user3['id'];\n        $user3_have_card = $user3['have_card'];\n        $user3_want_card = $user3['want_card'];\n\n        // Step 4: Check if User #3 wants the card that User #1 has\n        if ($user3_want_card == $have_card) {\n            echo "Circular match found:\n";\n            echo "User #1 (ID: $user1_id) gives card $have_card to User #3 (ID: $user3_id)\n";\n            echo "User #3 (ID: $user3_id) gives card $user3_have_card to User #2 (ID: $user2_id)\n";\n            echo "User #2 (ID: $user2_id) gives card $user2_have_card to User #1 (ID: $user1_id)\n";\n            // Optionally, you can break out of the loops if you only want the first match\n            break 2;\n        }\n    }\n    $stmt2->close();\n}\n\n$mysqli->close();\n?>