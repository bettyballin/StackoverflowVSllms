<?php\nfunction getHashPrefix($url) {\n    $hash = hash('sha256', $url, true);\n    return substr($hash, 0, 4);\n}\n\nfunction checkUrl($url, $apiKey) {\n    $hashPrefix = bin2hex(getHashPrefix($url));\n    $apiUrl = "https://safebrowsing.googleapis.com/v4/threatMatches:find?key=$apiKey";\n\n    $body = [\n        'client' => [\n            'clientId' => 'yourcompanyname',\n            'clientVersion' => '1.0'\n        ],\n        'threatInfo' => [\n            'threatTypes' => ['MALWARE', 'SOCIAL_ENGINEERING'],\n            'platformTypes' => ['ANY_PLATFORM'],\n            'threatEntryTypes' => ['URL'],\n            'threatEntries' => [\n                ['url' => $url]\n            ]\n        ]\n    ];\n\n    $options = [\n        'http' => [\n            'header'  => "Content-type: application/json",\n            'method'  => 'POST',\n            'content' => json_encode($body)\n        ]\n    ];\n\n    $context  = stream_context_create($options);\n    $result = file_get_contents($apiUrl, false, $context);\n\n    if ($result === FALSE) {\n        die('Error occurred');\n    }\n\n    $response = json_decode($result, true);\n    if (isset($response['matches'])) {\n        return true; // URL is unsafe\n    } else {\n        return false; // URL is safe\n    }\n}\n\n$apiKey = 'YOUR_API_KEY';\n$url = 'http://example.com';\nif (checkUrl($url, $apiKey)) {\n    echo "The URL is unsafe.";\n} else {\n    echo "The URL is safe.";\n}\n?>