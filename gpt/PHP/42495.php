<?php\n\nfunction splitAfterEveryThirdSemicolon($string) {\n    $pieces = explode(';', $string);\n    $output = [];\n    $temp = [];\n\n    foreach ($pieces as $index => $piece) {\n        if ($piece !== '') {\n            $temp[] = $piece;\n        }\n        if (($index + 1) % 3 == 0) {\n            $output[] = implode(';', $temp) . ';';\n            $temp = [];\n        }\n    }\n\n    if (!empty($temp)) {\n        $output[] = implode(';', $temp) . ';';\n    }\n\n    return $output;\n}\n\n$string = 'piece1;piece2;piece3;piece4;piece5;piece6;piece7;piece8;';\n$output = splitAfterEveryThirdSemicolon($string);\n\nprint_r($output);\n?>