<?php\n\n$leases = <<<EOD\nlease 172.17.2.3 {\n  starts 4 2009/07/16 11:54:39;\n  ends 4 2009/07/16 12:54:39;\n  cltt 4 2009/07/16 11:54:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:01;\n  uid "\001\000PV\300\000\001";\n  client-hostname "Yasin-PC";\n}\nlease 172.17.2.3 {\n  starts 4 2009/07/16 12:24:39;\n  ends 4 2009/07/16 13:24:39;\n  cltt 4 2009/07/16 12:24:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:01;\n  uid "\001\000PV\300\000\001";\n  client-hostname "Yasin-PC";\n}\nlease 172.17.2.3 {\n  starts 4 2009/07/16 12:54:39;\n  ends 4 2009/07/16 13:54:39;\n  cltt 4 2009/07/16 12:54:39;\n  binding state active;\n  next binding state free;\n  hardware ethernet 00:50:56:c0:00:01;\n  uid "\001\000PV\300\000\001";\n  client-hostname "Yasin-PC";\n}\nEOD;\n\npreg_match_all('/lease\s+(\d+\.\d+\.\d+\.\d+)\s*\{([^}]*)\}/s', $leases, $matches, PREG_SET_ORDER);\n\n$leaseArray = [];\n\nforeach ($matches as $match) {\n    $ip = $match[1];\n    $details = trim($match[2]);\n\n    if (!isset($leaseArray[$ip])) {\n        $leaseArray[$ip] = [];\n    }\n\n    $leaseArray[$ip][] = $details;\n}\n\nprint_r($leaseArray);\n\n?>