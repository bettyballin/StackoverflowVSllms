function parse_tweet($description, $colour='', $external=false) {\n    if ($external == true) {\n        $pre = 'http://politwitter.ca';\n    } else {\n        $pre = '';\n    }\n    \n    // Match URLs\n    $description = preg_replace("/(http:\/\/[^\s]+)/", "<a href=\"$1\" target=\"_blank\">$1</a>", $description);\n    \n    // Match www or ftp links\n    $description = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r<]*)#i", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $description);\n    \n    // Match @replies, stopping at non-alphanumeric characters\n    $description = preg_replace("/(^|[\n ])@([a-zA-Z0-9_]+)/", "\\1<a href=\"".$pre."/user/\\2\" rel=\"nofollow\">@\\2</a>", $description);\n    \n    // Match hashtags, stopping at non-alphanumeric characters\n    $description = preg_replace("/(^|[\n ])\#([a-zA-Z0-9_]+)/", "\\1<a href=\"".$pre."/hash/\\2\" rel=\"nofollow\" class=\"hash ".$colour."\">#\\2</a>", $description);\n    \n    return $description;\n}