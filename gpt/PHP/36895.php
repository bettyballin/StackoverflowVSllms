<?php\n$conn = new PDO("pgsql:host=yourhost;dbname=yourdb", "youruser", "yourpassword");\n\n$query = $conn->query("\n    SELECT \n        a.aid, \n        a.name, \n        json_agg(\n            json_build_object('sid', s.sid, 'length', s.length)\n        ) AS songs\n    FROM \n        albums a\n    JOIN \n        songs s ON a.aid = s.aid\n    GROUP BY \n        a.aid, a.name;\n");\n\n$albums = $query->fetchAll(PDO::FETCH_ASSOC);\n\nforeach ($albums as $album) {\n    $album['songs'] = json_decode($album['songs']);\n    // Now you can work with $album['songs'] as an array of objects\n    print_r($album);\n}\n?>