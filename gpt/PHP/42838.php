<?php\nsession_start();\n\n// Function to check if the user is logged in\nfunction isLoggedIn() {\n    // Example check (this should be replaced with your actual login check logic)\n    return isset($_SESSION['loggedin']) && $_SESSION['loggedin'] === true;\n}\n\n// Path to the directory where your media files are stored\n$mediaDir = '/path/to/your/media/files/';\n\nif (!isLoggedIn()) {\n    http_response_code(403);\n    echo "Access denied. Please log in to access this file.";\n    exit();\n}\n\n// Get the requested file name from the URL\n$file = basename($_GET['file']); // Ensure the file name is safe\n$filePath = $mediaDir . $file;\n\nif (file_exists($filePath)) {\n    // Serve the file with appropriate headers\n    header('Content-Type: ' . mime_content_type($filePath));\n    header('Content-Disposition: inline; filename="' . $file . '"');\n    header('Content-Length: ' . filesize($filePath));\n    readfile($filePath);\n    exit();\n} else {\n    http_response_code(404);\n    echo "File not found.";\n    exit();\n}\n?>