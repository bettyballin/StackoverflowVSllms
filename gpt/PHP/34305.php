// Assume $username is the authenticated user's username\n$username = $_SESSION['username']; // Replace with your authentication method\n\n// Define the root directory for user files\n$rootDir = '/var/www/uploads/';\n$userDir = $rootDir . $username . '/';\n\n// Ensure the user directory exists and is writable\nif (!is_dir($userDir)) {\n    mkdir($userDir, 0755, true);\n}\n\n// Sanitize the destination directory input to prevent directory traversal\n$destinationDir = basename($_POST['destination_dir']); // Only allow directory names, no paths\n$destinationPath = realpath($userDir . $destinationDir);\n\nif ($destinationPath === false || strpos($destinationPath, $userDir) !== 0) {\n    die('Invalid directory.');\n}\n\n// Move the uploaded file securely\n$uploadFile = $_FILES['upload']['tmp_name'];\n$destinationFile = $destinationPath . '/' . basename($_FILES['upload']['name']);\n\nif (move_uploaded_file($uploadFile, $destinationFile)) {\n    echo 'File uploaded successfully.';\n} else {\n    echo 'Failed to upload file.';\n}