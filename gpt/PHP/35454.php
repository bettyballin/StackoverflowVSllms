$xmlContent = <<<XML\n<stuff>\n  <foo>\n    <bar>bar1_value</bar>\n    <value>value1</value>\n    <pub>pub1_value</pub>\n  </foo>\n  <foo>\n    <bar>bar2_value</bar>\n    <pub>pub2_value</pub>\n  </foo>\n  <foo>\n    <bar>bar3_value</bar>\n    <pub>pub3_value</pub>\n  </foo>\n</stuff>\nXML;\n\n$dom = new DOMDocument();\n$dom->loadXML($xmlContent);\n\n$fooElements = $dom->getElementsByTagName('foo');\n\nforeach ($fooElements as $foo) {\n    $barValue = $foo->getElementsByTagName('bar')->item(0)->nodeValue ?? '';\n    $pubValue = $foo->getElementsByTagName('pub')->item(0)->nodeValue ?? '';\n\n    echo "Bar: $barValue, Pub: $pubValue\n";\n}