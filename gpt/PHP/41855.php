function getPictures() {\n    global $page, $per_page, $has_previous, $has_next;\n    $files = [];\n    \n    if ($handle = opendir(".")) {\n        while (($file = readdir($handle)) !== false) {\n            if (!is_dir($file) && ($type = getPictureType($file)) != '') {\n                $files[] = $file;\n            }\n        }\n        closedir($handle);\n    }\n\n    natsort($files);\n    $files = array_values($files); // Reindex the array\n\n    $lightbox = rand();\n    echo '<ul id="pictures">';\n\n    $total_files = count($files);\n    $skip = $page * $per_page;\n\n    if ($skip != 0) {\n        $has_previous = true;\n    }\n\n    $display_files = array_slice($files, $skip, $per_page);\n\n    foreach ($display_files as $file) {\n        $type = getPictureType($file);\n        if (!is_dir('thumbs')) {\n            mkdir('thumbs');\n        }\n        if (!file_exists('thumbs/' . $file)) {\n            makeThumb($file, $type);\n        }\n        echo '<li><a href="' . $file . '" class="zoom" rel="group">';\n        echo '<img src="thumbs/' . $file . '" alt="" />';\n        echo '</a></li>';\n    }\n\n    echo '</ul>';\n\n    if (($skip + $per_page) < $total_files) {\n        $has_next = true;\n    }\n}