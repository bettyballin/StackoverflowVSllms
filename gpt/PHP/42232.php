<?php\n$str = '';\n\nif (isset($_POST['submit']))\n{\n    if (!preg_match("/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/", $_POST['email'])) {\n        $str = "<span style='color: red'>Not a valid email address</span>";\n    } else {\n        $file = 'emails.txt';\n        $text = $_POST['email'] . "\n";\n\n        if (is_writable($file)) {\n            if (!$fh = fopen($file, 'a')) {\n                exit;\n            }\n\n            if (fwrite($fh, $text) === FALSE) {\n                exit;\n            }\n\n            fclose($fh);\n        }\n        header('Location: thankyou.html');\n        exit(); // Ensure the script stops executing after the redirect\n    }\n}\n?>