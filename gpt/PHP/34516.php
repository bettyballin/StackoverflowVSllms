function getComments($page, $commentsPerPage) {\n    global $pdo; // Assume $pdo is your PDO connection\n\n    $offset = ($page - 1) * $commentsPerPage;\n\n    // Fetch root level comments\n    $stmt = $pdo->prepare("SELECT * FROM comments WHERE parent_id IS NULL ORDER BY created_at DESC LIMIT :offset, :commentsPerPage");\n    $stmt->bindValue(':offset', $offset, PDO::PARAM_INT);\n    $stmt->bindValue(':commentsPerPage', $commentsPerPage, PDO::PARAM_INT);\n    $stmt->execute();\n    $comments = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    // Fetch nested comments for each root level comment\n    foreach ($comments as &$comment) {\n        $comment['replies'] = getNestedComments($comment['id']);\n    }\n\n    return $comments;\n}\n\nfunction getNestedComments($parentId) {\n    global $pdo;\n\n    $stmt = $pdo->prepare("SELECT * FROM comments WHERE parent_id = :parent_id ORDER BY created_at ASC");\n    $stmt->bindValue(':parent_id', $parentId, PDO::PARAM_INT);\n    $stmt->execute();\n    $comments = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    // Recursively fetch nested comments\n    foreach ($comments as &$comment) {\n        $comment['replies'] = getNestedComments($comment['id']);\n    }\n\n    return $comments;\n}