session_start();\n\n// Function to fetch user data\nfunction fetchUserData($userId) {\n    // Example database connection\n    $pdo = new PDO('mysql:host=hostname;dbname=database', 'username', 'password');\n    \n    // Fetch saved searches, lightboxes, and groups\n    $savedSearches = $pdo->query("SELECT * FROM saved_searches WHERE user_id = $userId")->fetchAll(PDO::FETCH_ASSOC);\n    $lightboxes = $pdo->query("SELECT * FROM lightboxes WHERE user_id = $userId")->fetchAll(PDO::FETCH_ASSOC);\n    $groups = $pdo->query("SELECT * FROM groups WHERE user_id = $userId")->fetchAll(PDO::FETCH_ASSOC);\n    \n    return [\n        'savedSearches' => $savedSearches,\n        'lightboxes' => $lightboxes,\n        'groups' => $groups,\n    ];\n}\n\n// Example login process\nfunction loginUser($username, $password) {\n    // Authenticate user (example authentication)\n    $userId = authenticate($username, $password);\n    \n    if ($userId) {\n        // Fetch user data and store in session\n        $_SESSION['userData'] = fetchUserData($userId);\n        $_SESSION['userId'] = $userId;\n        \n        // Redirect to dashboard or home page\n        header('Location: /dashboard.php');\n        exit();\n    } else {\n        // Handle login failure\n        echo "Invalid username or password.";\n    }\n}\n\n// Example usage\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    loginUser($username, $password);\n}\n\n// On-demand fetching example\nfunction getUserGroups() {\n    if (!isset($_SESSION['userId'])) {\n        return [];\n    }\n    \n    // Fetch groups if not already in session\n    if (!isset($_SESSION['userData']['groups'])) {\n        $_SESSION['userData']['groups'] = fetchUserGroups($_SESSION['userId']);\n    }\n    \n    return $_SESSION['userData']['groups'];\n}