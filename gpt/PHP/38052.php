function uploadNewVersion($fileId, $fileTmpPath) {\n    // Get the latest version number\n    $sql = "SELECT MAX(version) as version FROM file_versions WHERE file_id = ?";\n    // Execute the query and fetch the version...\n\n    $newVersion = $currentVersion + 1;\n    $filePath = "/storage/file_id_{$fileId}/version_{$newVersion}/";\n    // Save the file to the server\n    if (!file_exists($filePath)) {\n        mkdir($filePath, 0777, true);\n    }\n    move_uploaded_file($fileTmpPath, $filePath . "file");\n\n    // Insert into file_versions table\n    $sql = "INSERT INTO file_versions (file_id, version, is_draft, is_final, file_path) VALUES (?, ?, ?, ?, ?)";\n    // Execute the query with the provided parameters...\n}