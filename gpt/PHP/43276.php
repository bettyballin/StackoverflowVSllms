$mysqli = new mysqli("localhost", "username", "password", "database");\n\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n$query = "SELECT t.id, t.title, MAX(c.date) as last_comment_date\n          FROM threads t \n          LEFT JOIN comments c ON t.id = c.parentID\n          GROUP BY t.id, t.title\n          ORDER BY last_comment_date DESC";\n\nif ($result = $mysqli->query($query)) {\n    while ($thread = $result->fetch_assoc()) {\n        echo "<li><a href=\"?threadID=" . htmlspecialchars($thread['id']) . "\">" . htmlspecialchars($thread['title']) . "</a></li>\n";\n    }\n    $result->free();\n}\n\n$mysqli->close();