<?php\nfunction getPreferredLanguage($availableLanguages, $httpAcceptLanguage) {\n    $langs = [];\n    preg_match_all('/([a-z]{1,8}(?:-[a-z]{1,8})?)(?:;q=([0-9.]+))?/i', $httpAcceptLanguage, $langParse);\n\n    if (count($langParse[1])) {\n        $langs = array_combine($langParse[1], $langParse[2]);\n        foreach ($langs as $lang => $val) {\n            $langs[$lang] = $val ? $val : 1;\n        }\n        arsort($langs, SORT_NUMERIC);\n    }\n\n    foreach ($langs as $lang => $val) {\n        if (in_array($lang, $availableLanguages)) {\n            return $lang;\n        }\n    }\n\n    return $availableLanguages[0]; // Return default language if none match\n}\n\nfunction setLocale($httpAcceptLanguage) {\n    $availableLanguages = ['en_US', 'de_DE', 'fr_FR']; // Define your available languages here\n    $preferredLang = getPreferredLanguage($availableLanguages, $httpAcceptLanguage);\n    \n    $locale = '';\n    if (stripos(PHP_OS, 'WIN') === 0) {\n        // Windows locale settings\n        $locales = [\n            'en_US' => 'eng',\n            'de_DE' => 'deu',\n            'fr_FR' => 'fra',\n        ];\n    } else {\n        // Unix-like locale settings\n        $locales = [\n            'en_US' => 'en_US',\n            'de_DE' => 'de_DE',\n            'fr_FR' => 'fr_FR',\n        ];\n    }\n\n    $locale = isset($locales[$preferredLang]) ? $locales[$preferredLang] : $locales['en_US'];\n    setlocale(LC_ALL, $locale);\n    bindtextdomain('messages', './locale');\n    textdomain('messages');\n}\n\n// Example usage:\nsetLocale($_SERVER['HTTP_ACCEPT_LANGUAGE']);\n?>