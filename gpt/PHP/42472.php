// src/Model/Table/EntriesTable.php\nnamespace App\Model\Table;\n\nuse Cake\ORM\Table;\nuse Cake\I18n\FrozenTime;\n\nclass EntriesTable extends Table\n{\n    public function initialize(array $config): void\n    {\n        parent::initialize($config);\n\n        // Associations\n        $this->belongsTo('Users');\n        $this->hasMany('Comments');\n    }\n\n    public function getPopularEntries()\n    {\n        $lastMonth = (new FrozenTime())->subMonth(1);\n\n        $query = $this->find()\n            ->select(['Entries.id', 'Entries.title', 'comment_count' => 'COUNT(Comments.id)'])\n            ->leftJoinWith('Comments')\n            ->where(['Comments.created >' => $lastMonth])\n            ->group(['Entries.id'])\n            ->order(['comment_count' => 'DESC'])\n            ->limit(10); // Adjust limit as needed\n\n        return $query;\n    }\n}