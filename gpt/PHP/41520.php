$stmt = $conn->prepare("INSERT INTO `tblpm` (title, content, sender_id, date_sent) VALUES (?, ?, ?, NOW())");\n$stmt->bind_param("ssi", $subject, $message, $sender);\n$stmt->execute();\n$message_id = $stmt->insert_id;\n$stmt->close();\n\n// Use prepared statements for inserting into tblpm_info\n$stmt_info = $conn->prepare("INSERT INTO `tblpm_info` (message_id, sender_id, receiver_id) VALUES (?, ?, ?)");\nforeach ($recipients as $recipient_id) {\n    $stmt_info->bind_param("iii", $message_id, $sender, $recipient_id);\n    $stmt_info->execute();\n}\n$stmt_info->close();