try {\n    // Start the transaction\n    $db->beginTransaction();\n    \n    // Lock the table\n    $db->query('LOCK TABLES members WRITE');\n    \n    // Get the current maximum order value\n    $stmt = $db->query('SELECT MAX(`order`) AS max_order FROM members');\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $maxOrder = $result['max_order'];\n    \n    // Insert the new member with the next order value\n    $newOrder = $maxOrder + 1;\n    $stmt = $db->prepare('INSERT INTO members (`id`, `name`, `order`) VALUES (0, :name, :order)');\n    $stmt->execute([':name' => 'new member', ':order' => $newOrder]);\n    \n    // Commit the transaction\n    $db->commit();\n    \n    // Unlock the table\n    $db->query('UNLOCK TABLES');\n} catch (Exception $e) {\n    // Rollback the transaction if something failed\n    $db->rollBack();\n    throw $e;\n}