public function beforeFilter(\Cake\Event\EventInterface $event)\n{\n    parent::beforeFilter($event);\n    \n    // Allow unauthenticated users to access the 'register' method\n    $this->Authentication->allowUnauthenticated(['register']);\n    \n    // Check if the user is logged in\n    if ($this->Authentication->getIdentity()) {\n        // Define an array of methods that should not be accessible when logged in\n        $restrictedMethodsWhenLoggedIn = ['register'];\n\n        // Get the current action\n        $currentAction = $this->request->getParam('action');\n\n        // Redirect logged-in users trying to access restricted methods\n        if (in_array($currentAction, $restrictedMethodsWhenLoggedIn)) {\n            $this->Flash->error(__('This page is not accessible when logged in.'));\n            return $this->redirect(['controller' => 'Users', 'action' => 'dashboard']);\n        }\n    }\n}