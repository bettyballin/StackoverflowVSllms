function buildTree(array &$elements, $parentId = 0) {\n    $branch = array();\n\n    foreach ($elements as &$element) {\n        if ($element['ParentID'] == $parentId) {\n            $children = buildTree($elements, $element['CategoryID']);\n            if ($children) {\n                $element['Children'] = $children;\n            }\n            $branch[] = $element;\n            unset($element); // Optional: for better performance\n        }\n    }\n    return $branch;\n}\n\n$data = array(\n    array('CategoryID' => 1, 'ParentID' => 0, 'CategoryName' => 'Default Parent', 'lt' => 1, 'rt' => 14, 'tree_depth' => 1),\n    array('CategoryID' => 8, 'ParentID' => 1, 'CategoryName' => 'SysAdmin', 'lt' => 2, 'rt' => 7, 'tree_depth' => 2),\n    array('CategoryID' => 2, 'ParentID' => 8, 'CategoryName' => 'Linux', 'lt' => 3, 'rt' => 4, 'tree_depth' => 3),\n    array('CategoryID' => 3, 'ParentID' => 8, 'CategoryName' => 'Windows', 'lt' => 5, 'rt' => 6, 'tree_depth' => 3),\n    array('CategoryID' => 5, 'ParentID' => 1, 'CategoryName' => 'Code', 'lt' => 8, 'rt' => 13, 'tree_depth' => 2),\n    array('CategoryID' => 6, 'ParentID' => 5, 'CategoryName' => 'PHP', 'lt' => 9, 'rt' => 10, 'tree_depth' => 3),\n    array('CategoryID' => 7, 'ParentID' => 5, 'CategoryName' => 'Perl', 'lt' => 11, 'rt' => 12, 'tree_depth' => 3),\n);\n\n$tree = buildTree($data);\n\nprint_r($tree);