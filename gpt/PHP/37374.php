<form method="post" action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>">\n    <p>\n        <label for="nome">Nome Empresa:</label>\n        <input type="text" name="nome" id="nome"/>\n\n        <label for="concelho">Concelho:</label>\n        <select name="concelho">\n            <option id="" selected="selected" value="">Seleccione o Concelho</option>\n            <option value="1" id="1">Um</option>\n            <option value="2" id="1">Dois</option>\n        </select>\n\n        <label for="actividade">Actividade:</label>\n        <select name="actividade">\n            <option id="" selected="selected" value="">Seleccione a actividade</option>\n            <option value="1" id="1">Actividade Um</option>\n            <option value="2" id="1">Actividade Dois</option>\n        </select>\n    </p>\n    <p>\n        <input type="submit" name="pesquisar" value="Pesquisar"/>\n    </p>\n</form>\n\n<?php\nif (isset($_POST['pesquisar'])) {\n    $nome = $_POST['nome'];\n    $concelho = $_POST['concelho'];\n    $actividade = $_POST['actividade'];\n\n    // Using PDO for database connection and prepared statements\n    $dsn = 'mysql:host=your_host;dbname=your_dbname;charset=utf8';\n    $username = 'your_username';\n    $password = 'your_password';\n\n    try {\n        $pdo = new PDO($dsn, $username, $password);\n        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n        $queryStr = 'SELECT * FROM tbl_clientes WHERE 1=1';\n        $params = [];\n\n        if (!empty($nome)) {\n            $queryStr .= ' AND nome LIKE :nome';\n            $params[':nome'] = '%' . $nome . '%';\n        }\n\n        if (!empty($concelho)) {\n            $queryStr .= ' AND concelho = :concelho';\n            $params[':concelho'] = $concelho;\n        }\n\n        if (!empty($actividade)) {\n            $queryStr .= ' AND actividade = :actividade';\n            $params[':actividade'] = $actividade;\n        }\n\n        $stmt = $pdo->prepare($queryStr);\n        $stmt->execute($params);\n        $results = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        // Output or process $results as needed\n    } catch (PDOException $e) {\n        echo 'Connection failed: ' . $e->getMessage();\n    }\n}\n?>