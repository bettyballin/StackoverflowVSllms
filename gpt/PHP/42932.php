<?php\nif (!isset($_POST['username']) && !isset($_POST['password'])) {\n    // Visitor needs to enter a name and password\n?>\n    <h1>Please Log In</h1>\n    This page is secret.\n    <form method="post" action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>">\n    <table border="1">\n    <tr>\n      <th> Username </th>\n      <td> <input type="text" name="username"> </td>\n    </tr>\n    <tr>\n      <th> Password </th>\n      <td> <input type="password" name="password"> </td>\n    </tr>\n    <tr>\n      <td colspan="2" align="center">\n        <input type="submit" value="Log In">\n      </td>\n    </tr>\n    </table>\n    </form>\n<?php\n} else {\n    // connect to mysql\n    include('../cgi-bin/db.php');\n\n    $username = $_POST['username'];\n    $password = md5($_POST['password']);\n\n    $mysqli = new mysqli('localhost', 'your_username', 'your_password', 'quickwebcms');\n\n    if ($mysqli->connect_error) {\n        die('Cannot connect to database: ' . $mysqli->connect_error);\n    }\n\n    // query the database to see if there is a record which matches\n    $stmt = $mysqli->prepare("SELECT count(*) FROM auth WHERE username = ? AND password = ?");\n    $stmt->bind_param('ss', $username, $password);\n    $stmt->execute();\n    $stmt->bind_result($count);\n    $stmt->fetch();\n    $stmt->close();\n    $mysqli->close();\n\n    if ($count > 0) {\n        // visitor's name and password combination are correct\n        echo '<h1>Here it is!</h1>';\n        echo 'I bet you are glad you can see this secret page.';\n    } else {\n        // visitor's name and password combination are not correct\n        echo '<h1>Go Away!</h1>';\n        echo 'You are not authorized to view this resource.';\n    }\n}\n?>