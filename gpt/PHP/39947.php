<?php\nclass SessionHandler\n{\n    private $sessionDir;\n    \n    public function __construct($sessionDir)\n    {\n        $this->sessionDir = $sessionDir;\n        session_set_save_handler(\n            [$this, 'open'],\n            [$this, 'close'],\n            [$this, 'read'],\n            [$this, 'write'],\n            [$this, 'destroy'],\n            [$this, 'gc']\n        );\n        session_start();\n    }\n    \n    public function open($savePath, $sessionName)\n    {\n        return true;\n    }\n    \n    public function close()\n    {\n        return true;\n    }\n    \n    public function read($id)\n    {\n        $file = "$this->sessionDir/sess_$id";\n        if (file_exists($file)) {\n            return file_get_contents($file);\n        }\n        return '';\n    }\n    \n    public function write($id, $data)\n    {\n        $file = "$this->sessionDir/sess_$id";\n        return file_put_contents($file, $data) !== false;\n    }\n    \n    public function destroy($id)\n    {\n        $file = "$this->sessionDir/sess_$id";\n        if (file_exists($file)) {\n            unlink($file);\n        }\n        return true;\n    }\n    \n    public function gc($maxlifetime)\n    {\n        foreach (glob("$this->sessionDir/sess_*") as $file) {\n            if (filemtime($file) + $maxlifetime < time()) {\n                unlink($file);\n            }\n        }\n        return true;\n    }\n}\n?>