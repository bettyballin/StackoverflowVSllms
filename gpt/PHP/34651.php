<?php\nfunction alternate_replace($text, $delimiter, $start_tag, $end_tag) {\n    $count = 0;\n    return preg_replace_callback(\n        "/(" . preg_quote($delimiter, '/') . ")/",\n        function($matches) use (&$count, $start_tag, $end_tag) {\n            return (++$count % 2) ? $start_tag : $end_tag;\n        },\n        $text\n    );\n}\n\n$text = "This is *italic* and this is `code`.";\n\n$text = alternate_replace($text, '*', '<em>', '</em>');\n$text = alternate_replace($text, '`', '<code>', '</code>');\n\necho $text;\n?>