if (!(substr($res, 0, 6) == 'Failed')) {\n    libxml_use_internal_errors(true);  // Enable user error handling for XML\n\n    try {\n        $xml = new SimpleXMLElement($res);\n        $imagelink = (string) $xml->image_link; // This is the image link\n        $_SESSION['shack_link'] = $imagelink;\n        echo 'done';\n    } catch (Exception $e) {\n        // Handle the exception and log the error\n        error_log('Error creating a SimpleXML instance: ' . $e->getMessage());\n        echo 'Error creating a SimpleXML instance';\n    }\n\n    libxml_clear_errors();  // Clear any errors for the next iteration\n} else {\n    // Handle the case where $res starts with 'Failed'\n    echo 'Failed';\n}