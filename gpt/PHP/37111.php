if ($distance != "Any" && $customer_zip != "") {\n    // Get the origin zip code info\n    $zip_sql = "SELECT * FROM zip_code WHERE zip_code = '$customer_zip'";\n    $result = mysql_query($zip_sql);\n    $row = mysql_fetch_array($result);\n    $origin_lat = $row['lat'];\n    $origin_lon = $row['lon'];\n\n    // MySQL query to calculate distance using Haversine formula\n    $sql = "\n        SELECT\n            *,\n            ( 3959 * acos( cos( radians($origin_lat) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians($origin_lon) ) + sin( radians($origin_lat) ) * sin( radians( lat ) ) ) ) AS distance\n        FROM\n            zip_code\n        HAVING\n            distance < $distance\n        ORDER BY\n            distance;\n    ";\n\n    $result = mysql_query($sql);\n\n    while ($row = mysql_fetch_array($result)) {\n        // Process each row\n    }\n}