use phpmock\mockery\PHPMockery;\n\nclass MyTest extends PHPUnit\Framework\TestCase {\n    public function testGetFoo() {\n        // Mock the static factory method\n        $mock = PHPMockery::mock('DB_DataObject', 'factory')\n                          ->andReturn($this->createMock(DB_DataObject::class));\n\n        // Set expectations on the DB_DataObject mock\n        $dbDataObjectMock = $mock->getMock();\n        $dbDataObjectMock->expects($this->once())\n                         ->method('get')\n                         ->with($this->equalTo(123));\n\n        // Call the function\n        $result = getFoo(123, new DBFactory());\n\n        // Add assertions for the expected result\n        // $this->assertEquals($expectedData, $result);\n\n        // Verify the mock\n        $mock->verify();\n    }\n}