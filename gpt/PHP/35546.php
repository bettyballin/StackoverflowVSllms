<?php\n$servername = "localhost";\n$username = "username";\n$password = "password";\n$dbname = "database";\n\ntry {\n    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);\n    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n    $stmt = $conn->prepare("SELECT locationid, name, parentid FROM locations ORDER BY parentid, name");\n    $stmt->execute();\n\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    $locationTree = buildLocationTree($locations);\n\n    echo '<select>';\n    displayLocations($locationTree);\n    echo '</select>';\n} catch(PDOException $e) {\n    echo "Connection failed: " . $e->getMessage();\n}\n\nfunction buildLocationTree(array $locations, $parentId = 0) {\n    $branch = [];\n    foreach ($locations as $location) {\n        if ($location['parentid'] == $parentId) {\n            $children = buildLocationTree($locations, $location['locationid']);\n            if ($children) {\n                $location['children'] = $children;\n            }\n            $branch[] = $location;\n        }\n    }\n    return $branch;\n}\n\nfunction displayLocations(array $locations, $prefix = '--') {\n    foreach ($locations as $location) {\n        echo '<option value="' . $location['locationid'] . '">' . $prefix . $location['name'] . '</option>';\n        if (isset($location['children'])) {\n            displayLocations($location['children'], $prefix . '--');\n        }\n    }\n}\n?>