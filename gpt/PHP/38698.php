$docID = isset($_REQUEST['docID']) ? $_REQUEST['docID'] : null;\n\nif ($docID == null) {\n    die("Document ID was not given.");\n}\n\n$results = getDocumentResults($docID);\n\nif (verifyUser($user, $results['ProductId'])) {\n    header('Content-type: application/pdf');\n    header('Content-Disposition: inline; filename="downloadedFile.pdf"');\n    header('Cache-Control: public, must-revalidate, max-age=0');\n    header('Pragma: public');\n    // this is the BLOB data from the results.\n    print $results[1];\n} else {\n    die('You are not allowed to view this document.');\n}