<?php\n// Assume $result is the result set from the master-detail query\n$accounts = [];\n$groups = [];\n\nwhile ($row = $result->fetch_assoc()) {\n    if (!empty($row['GroupName'])) {\n        $groups[$row['GroupName']][] = $row;\n    } else {\n        $accounts[] = $row;\n    }\n}\n\n// Output master-detail list\nforeach ($groups as $groupName => $groupAccounts) {\n    echo "$groupName (" . count($groupAccounts) . ") " . array_sum(array_column($groupAccounts, 'Balance')) . "\n";\n    foreach ($groupAccounts as $account) {\n        echo "  " . $account['BankName'] . " " . $account['AcctNumber'] . " " . $account['Balance'] . "\n";\n    }\n    echo "..................................\n";\n}\n\nforeach ($accounts as $account) {\n    echo $account['BankName'] . " " . $account['AcctNumber'] . " " . $account['Balance'] . "\n";\n}\n?>