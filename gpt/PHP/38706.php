<?php\nfunction resizeAndRoundCorners($filename, $new_width, $new_height, $corner_radius)\n{\n    // Load the image\n    $image = imagecreatefromstring(file_get_contents($filename));\n    $width = imagesx($image);\n    $height = imagesy($image);\n\n    // Resize the image\n    $new_image = imagecreatetruecolor($new_width, $new_height);\n    imagecopyresampled($new_image, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);\n\n    // Create rounded corners\n    $corner_image = imagecreatetruecolor($corner_radius, $corner_radius);\n    $clear_color = imagecolorallocate($corner_image, 0, 0, 0);\n    $solid_color = imagecolorallocate($corner_image, 255, 255, 255);\n    imagecolortransparent($corner_image, $clear_color);\n    imagefill($corner_image, 0, 0, $solid_color);\n    imagefilledellipse($corner_image, $corner_radius, $corner_radius, $corner_radius * 2, $corner_radius * 2, $clear_color);\n\n    // Apply the rounded corners to each corner of the image\n    imagecopymerge($new_image, $corner_image, 0, 0, 0, 0, $corner_radius, $corner_radius, 100);\n    $corner_image = imagerotate($corner_image, 90, 0);\n    imagecopymerge($new_image, $corner_image, 0, $new_height - $corner_radius, 0, 0, $corner_radius, $corner_radius, 100);\n    $corner_image = imagerotate($corner_image, 90, 0);\n    imagecopymerge($new_image, $corner_image, $new_width - $corner_radius, $new_height - $corner_radius, 0, 0, $corner_radius, $corner_radius, 100);\n    $corner_image = imagerotate($corner_image, 90, 0);\n    imagecopymerge($new_image, $corner_image, $new_width - $corner_radius, 0, 0, 0, $corner_radius, $corner_radius, 100);\n\n    // Output the image\n    header('Content-Type: image/png');\n    imagepng($new_image);\n\n    // Clean up\n    imagedestroy($image);\n    imagedestroy($new_image);\n    imagedestroy($corner_image);\n}\n\n// Example usage\nresizeAndRoundCorners('path/to/your/image.jpg', 200, 200, 20);\n?>