<?php\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $secret = 'YOUR_PRIVATE_KEY';\n    $response = $_POST['g-recaptcha-response'];\n    $remoteip = $_SERVER['REMOTE_ADDR'];\n\n    $url = 'https://www.google.com/recaptcha/api/siteverify';\n    $data = [\n        'secret' => $secret,\n        'response' => $response,\n        'remoteip' => $remoteip\n    ];\n\n    $options = [\n        'http' => [\n            'header'  => "Content-type: application/x-www-form-urlencoded\r\n",\n            'method'  => 'POST',\n            'content' => http_build_query($data),\n        ],\n    ];\n\n    $context  = stream_context_create($options);\n    $result = file_get_contents($url, false, $context);\n    $resultJson = json_decode($result);\n\n    if ($resultJson->success !== true) {\n        echo 'Captcha verification failed.';\n    } else {\n        // Proceed with email sending or other logic\n        $message = $_POST['message_txt'];\n        $name = $_POST['name_txt'];\n        $email = $_POST['email_txt'];\n        \n        $emailBody = $message;\n        $to = 'xx';\n        $from = $name.' <'.$email.'>';\n        $subject = 'XX Website Enquiry';\n        $headers = 'From: '.$from;  \n        \n        if (mail($to, $subject, $emailBody, $headers)) {\n            $confirmation = 'sent';\n        } else {\n            $confirmation = 'error';\n        }\n    }\n}\n?>