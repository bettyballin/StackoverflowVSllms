<?php\n\n// Set an appropriate time limit for your script\nset_time_limit(0); // 0 means no time limit\n\n// Your long-running process\nwhile (true) {\n    // Periodically check if the connection has been aborted\n    if (connection_aborted()) {\n        // Handle the disconnection, clean up resources, log the event, etc.\n        error_log('Client disconnected, terminating script.');\n        break;\n    }\n\n    // Continue with your process\n    // ...\n\n    // Sleep or wait for a short period to reduce server load\n    sleep(1);\n}\n\n?>