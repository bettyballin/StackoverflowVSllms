$pgConnection = pg_connect('host=127.0.0.1 dbname=test user=myuser password=xxxxx') or die('cant connect');\n\npg_query($pgConnection, "BEGIN");\n\n$query = "INSERT INTO customer (name) VALUES ('blabla') RETURNING id";\n$result = pg_query($pgConnection, $query);\n\nif ($result) {\n    $last_id_results = pg_fetch_assoc($result);\n    print_r($last_id_results);\n    // Perform other operations with the new customer id\n    pg_query($pgConnection, "COMMIT");\n} else {\n    echo "Error in insert query: " . pg_last_error($pgConnection);\n    pg_query($pgConnection, "ROLLBACK");\n}\n\npg_close($pgConnection);