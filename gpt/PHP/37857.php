<?php\n$servername = "localhost";\n$username = "root";\n$password = "root";\n$dbname = "icrisis";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n  die("Connection failed: " . $conn->connect_error);\n}\n\n$orderBy = isset($_GET['orderby']) ? $_GET['orderby'] : 'ASC';\n$column = isset($_GET['column']) ? $_GET['column'] : 'user_name';\n\n$allowedColumns = ['user_name', 'Time_Date'];\n$allowedOrder = ['ASC', 'DESC'];\n\nif (!in_array($column, $allowedColumns) || !in_array($orderBy, $allowedOrder)) {\n  die('Invalid query parameters.');\n}\n\n$stmt = $conn->prepare("SELECT * FROM messages,user WHERE user_id = from_user ORDER BY $column $orderBy");\n$stmt->execute();\n$result = $stmt->get_result();\n\nwhile ($row = $result->fetch_assoc()) {\n  echo "<tr>\n          <td>&#8226;</td>\n          <td>{$row['Time_Date']}</td>\n          <td>{$row['user_name']}</td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td colspan='4'>{$row['msg_desc']}</td>\n        </tr>";\n}\n\n$stmt->close();\n$conn->close();\n?>