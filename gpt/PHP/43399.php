<?php\n// Define allowed MIME types and file extensions\n$allowedMimeTypes = ['image/jpeg', 'image/png', 'application/pdf'];\n$allowedExtensions = ['jpg', 'jpeg', 'png', 'pdf'];\n\n// Function to check MIME type using finfo\nfunction getMimeType($filePath) {\n    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n    $mimeType = finfo_file($finfo, $filePath);\n    finfo_close($finfo);\n    return $mimeType;\n}\n\n// Handle the file upload\nif (isset($_FILES['uploadedFile'])) {\n    $file = $_FILES['uploadedFile'];\n    $fileName = $file['name'];\n    $fileTmpPath = $file['tmp_name'];\n    $fileExtension = pathinfo($fileName, PATHINFO_EXTENSION);\n\n    // Check the MIME type and extension\n    $mimeType = getMimeType($fileTmpPath);\n    if (in_array($mimeType, $allowedMimeTypes) && in_array($fileExtension, $allowedExtensions)) {\n        // Generate a unique file name\n        $newFileName = uniqid() . '.' . $fileExtension;\n        $uploadDir = '/path/to/upload/directory/';\n        $uploadFilePath = $uploadDir . $newFileName;\n\n        // Move the file to the upload directory\n        if (move_uploaded_file($fileTmpPath, $uploadFilePath)) {\n            echo "File uploaded successfully.";\n        } else {\n            echo "Failed to move uploaded file.";\n        }\n    } else {\n        echo "Invalid file type.";\n    }\n} else {\n    echo "No file uploaded.";\n}\n\n// .htaccess file in the upload directory to prevent script execution\n/*\n<FilesMatch "\.(php|phar|phtml|php3|php4|php5|php7|php8|exe|sh|pl|cgi|py)$">\n    Order allow,deny\n    Deny from all\n</FilesMatch>\n*/\n?>