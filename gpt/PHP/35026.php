<?php\n$last_id = 0;\necho '<table width="400">';\nwhile ($row = mysql_fetch_array($res)) {\n    // Check if we are starting a new status post\n    if ($row['0'] != $last_id) {\n        if ($last_id != 0) {\n            // Close previous status post if it's not the first iteration\n            echo '</table></td></tr>';\n        }\n\n        // Output new status post\n        echo '<tr>\n                <td width="99" valign="top" style="border-bottom: 1px solid rgb(204, 204, 204); margin: 0px; padding: 10px;">\n                    <div class="imageSub" style="width: 90px;">\n                        <img class="female" src="http://cache2.mycrib.net/images/image_group66/0/43/t_6871399b0962b5fb4e29ce477541e165950078.jpg" alt="Something" width="90"/>\n                    </div>\n                </td>\n                <td width="489" style="border-bottom: 1px solid rgb(204, 204, 204); margin: 0px; padding: 10px;">\n                    so and so said blah blah blah @ wee hours of the morning! <br>';\n\n        // Start a new nested table for comments\n        echo '<table width="90%" style="border: 1px solid rgb(204, 204, 204); margin: 0px; padding: 10px;">';\n\n        $last_id = $row['0'];\n    }\n\n    // Output comment if it exists\n    if ($row['commentid'] != '') {\n        echo '<tr>\n                <td width="14%" rowspan="2" valign="top">\n                    <img class="male" src="http://cache2.mycrib.net/images/image_group34/0/39/T_653807517aff2b1f5662d865b40d87d527c8eb.jpg" alt="Something" width="45"/>\n                </td>\n                <td width="86%">Date Posted</td>\n              </tr>\n              <tr>\n                <td>Comment text</td>\n              </tr>';\n    }\n}\n\n// Close the last status post\nif ($last_id != 0) {\n    echo '</table></td></tr>';\n}\necho '</table>';\n?>