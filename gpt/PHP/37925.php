function highlightSearchTerms($text, $searchTerm) {\n    // Escape special characters in the search term for use in a regex pattern\n    $escapedSearchTerm = preg_quote($searchTerm, '/');\n    \n    // Define a callback function to wrap the search term with a span\n    $callback = function($matches) use ($escapedSearchTerm) {\n        return preg_replace("/($escapedSearchTerm)/i", '<span class="highlight">$1</span>', $matches[0]);\n    };\n    \n    // Use preg_replace_callback to ensure we only replace text outside of HTML tags\n    $highlightedText = preg_replace_callback('/(?<=^|>)[^><]+?(?=<|$)/', $callback, $text);\n    \n    return $highlightedText;\n}\n\n// Usage example:\n$text = "This is a <b>test</b> string with test search terms.";\n$searchTerm = "test";\necho highlightSearchTerms($text, $searchTerm);