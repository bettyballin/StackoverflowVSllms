<?php\n// Get the search variable from URL\n$var = isset($_GET['q']) ? $_GET['q'] : '';\n$trimmed = trim($var); // Trim whitespace from the stored variable\n\n// Rows to return\n$limit = 10;\n\n// Check for an empty string and display a message.\nif ($trimmed == "") {\n    echo "Please enter a name.";\n    exit;\n}\n\n// Connect to database using mysqli\n$mysqli = new mysqli("localhost", "root", "password", "itour");\n\n// Check connection\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n// Prepare SQL Query using prepared statements\n$query = $mysqli->prepare("SELECT * FROM events WHERE artist_name LIKE ? ORDER BY date LIMIT ?");\n$searchParam = '%' . $trimmed . '%';\n$query->bind_param('si', $searchParam, $limit);\n\n// Execute the query\n$query->execute();\n$result = $query->get_result();\n$numrows = $result->num_rows;\n\n// If no results, offer a google search as an alternative\nif ($numrows == 0) {\n    echo "Results";\n    echo "Sorry, your search: &quot;" . htmlspecialchars($trimmed) . "&quot; returned zero results";\n    // Google search\n    echo "<br><a href=\"https://www.google.com/search?q=" . urlencode($trimmed) . "\">Click here to try the search on Google</a>";\n    exit;\n}\n\n// Display what was searched for\necho "You searched for: &quot;" . htmlspecialchars($var) . "&quot;";\n\n// Begin to show results set\necho "<h2>Results</h2>";\n$count = 1;\n\n// Display the results returned\nwhile ($row = $result->fetch_assoc()) {\n    $title = htmlspecialchars($row["artist_name"]);\n    echo "$count.)&nbsp;$title<br>";\n    $count++;\n}\n\n$mysqli->close();\n?>