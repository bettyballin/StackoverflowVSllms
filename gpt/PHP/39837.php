// consumer.php\nrequire_once __DIR__ . '/vendor/autoload.php';\nuse PhpAmqpLib\Connection\AMQPStreamConnection;\n\n$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n$channel = $connection->channel();\n\n$channel->queue_declare('task_queue', false, true, false, false);\n\necho " [*] Waiting for messages. To exit press CTRL+C\n";\n\n$callback = function ($msg) {\n    $data = json_decode($msg->body, true);\n    // Here you can handle the task, e.g., send an email\n    echo ' [x] Received ', $msg->body, "\n";\n    // Simulate a task\n    sleep(2);\n    echo " [x] Done\n";\n    $msg->ack();\n};\n\n$channel->basic_qos(null, 1, null);\n$channel->basic_consume('task_queue', '', false, false, false, false, $callback);\n\nwhile ($channel->is_consuming()) {\n    $channel->wait();\n}\n\n$channel->close();\n$connection->close();