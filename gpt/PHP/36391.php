<?php\n\nrequire_once('connection.php');\n\n$username = $_POST['username'];\n$password = md5($_POST['password']);\n$email = $_POST['email'];\n$ip = $_SERVER['REMOTE_ADDR'];\nsession_start();\n\n// Check if username or email already exists\n$query = "SELECT COUNT(*) AS count FROM users WHERE username = ? OR email = ?";\n$stmt = $conn->prepare($query);\n$stmt->bind_param('ss', $username, $email);\n$stmt->execute();\n$stmt->bind_result($count);\n$stmt->fetch();\n$stmt->close();\n\nif ($count == 0) {\n    // Insert new user\n    $insert_query = "INSERT INTO users (username, password, email, rank, ip, active) VALUES (?, ?, ?, '1', ?, '0')";\n    $insert_stmt = $conn->prepare($insert_query);\n    $insert_stmt->bind_param('ssss', $username, $password, $email, $ip);\n\n    if ($insert_stmt->execute()) {\n        echo "You are signed up, please follow the link on your email to activate your account.";\n    } else {\n        die('Error: ' . $conn->error);\n    }\n\n    $insert_stmt->close();\n} else {\n    echo "Username or Email already exists<br><a href=\"sign_up.php\">Try Again</a><br>";\n}\n\n$conn->close();\n?>