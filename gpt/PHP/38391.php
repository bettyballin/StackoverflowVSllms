$this->db->select('zip');\n$this->db->from('custom_city');\n$this->db->join('city_to_zip', 'custom_city.id = city_to_zip.city_id', 'left');\n$this->db->where('city_to_zip.city_id', $_POST['city']);\n$zip = $this->db->get();\n$zip_array = $zip->result_array();\n\n// Extract zip codes into a simple array\n$zip_codes = array_map(function ($zip) {\n    return $zip['zip'];\n}, $zip_array);\n\n// Now use the zip codes array in the where_in clause\n$this->db->where_in('zip_code', $zip_codes);