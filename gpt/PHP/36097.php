function getSelfReferentialURL() {\n    // Determine the protocol\n    $protocol = 'http';\n    if ((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on') ||\n        (isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https') ||\n        (isset($_SERVER['HTTP_X_FORWARDED_SSL']) && $_SERVER['HTTP_X_FORWARDED_SSL'] === 'on')) {\n        $protocol = 'https';\n    }\n\n    // Get the server name\n    $serverName = isset($_SERVER['SERVER_NAME']) ? $_SERVER['SERVER_NAME'] : '';\n\n    // Determine the port\n    $port = '';\n    if (isset($_SERVER['SERVER_PORT']) && \n        $_SERVER['SERVER_PORT'] != '80' && \n        $_SERVER['SERVER_PORT'] != '443') {\n        $port = ':' . $_SERVER['SERVER_PORT'];\n    }\n\n    // Construct the URL\n    $url = $protocol . '://' . $serverName . $port;\n\n    return $url;\n}\n\necho getSelfReferentialURL();