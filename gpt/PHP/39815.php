// Assuming you have a Zend_Db_Adapter instance named $db\n\n$courseId = 1; // Replace with the actual course ID you want to query\n\n$sql = "\n    SELECT \n        l.locationid, \n        s.sessionid, \n        d.date\n    FROM \n        locations l\n    JOIN \n        sessions s ON l.locationid = s.locationid\n    JOIN \n        dates d ON s.sessionid = d.sessionid\n    WHERE \n        s.courseid = :courseid\n    ORDER BY \n        l.locationid, s.sessionid, d.date\n";\n\n$stmt = $db->prepare($sql);\n$stmt->execute(['courseid' => $courseId]);\n$results = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$organizedData = [];\n\nforeach ($results as $row) {\n    $locationId = $row['locationid'];\n    $sessionId = $row['sessionid'];\n    $date = $row['date'];\n\n    if (!isset($organizedData[$locationId])) {\n        $organizedData[$locationId] = [\n            'locationid' => $locationId,\n            'sessions' => []\n        ];\n    }\n\n    if (!isset($organizedData[$locationId]['sessions'][$sessionId])) {\n        $organizedData[$locationId]['sessions'][$sessionId] = [\n            'sessionid' => $sessionId,\n            'dates' => []\n        ];\n    }\n\n    $organizedData[$locationId]['sessions'][$sessionId]['dates'][] = $date;\n}\n\n// Now $organizedData contains the nested structure\n// You can pass this data to your view for rendering