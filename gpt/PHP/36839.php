<?php\n// Define a constant for the maximum upload size\ndefine('MAX_FILE_SIZE', 1024000);\n\nif (array_key_exists('upload', $_POST)) {\n    // Define constant for upload folder\n    define('UPLOAD_DIR', 'C:/Wamp/www/Version-1.4/posters_uploaded/');\n\n    // Replace any spaces in original filename with underscores. At the same time, assign to a simpler variable\n    $file = str_replace(' ', '_', $_FILES['image']['name']);\n    $fileExtension = strtolower(pathinfo($file, PATHINFO_EXTENSION));\n\n    // Convert the maximum size to KB\n    $max = number_format(MAX_FILE_SIZE / 1024, 1) . 'kb';\n    // Create an array of permitted MIME types\n    $permittedMIMEs = array('image/jpeg', 'image/pjpeg');\n    // Create an array of permitted file extensions\n    $permittedExtensions = array('jpg', 'jpeg');\n    \n    // Begin by assuming the file is unacceptable\n    $sizeOK = false;\n    $typeOK = false;\n    $extensionOK = false;\n\n    // Check that file is within the permitted size\n    if ($_FILES['image']['size'] > 0 && $_FILES['image']['size'] <= MAX_FILE_SIZE) {\n        $sizeOK = true;\n    }\n\n    // Check that file is of a permitted MIME type\n    foreach ($permittedMIMEs as $type) {\n        if ($type == $_FILES['image']['type']) {\n            $typeOK = true;\n            break;\n        }\n    }\n\n    // Check that file has a permitted extension\n    if (in_array($fileExtension, $permittedExtensions)) {\n        $extensionOK = true;\n    }\n\n    if ($sizeOK && $typeOK && $extensionOK) {\n        switch ($_FILES['image']['error']) {\n            case 0:\n                // No error; proceed with file upload\n                $destination = UPLOAD_DIR . '/' . $file;\n                if (move_uploaded_file($_FILES['image']['tmp_name'], $destination)) {\n                    echo 'File uploaded successfully.';\n                } else {\n                    echo 'Error uploading file.';\n                }\n                break;\n            case 3:\n                echo 'Error: File only partially uploaded.';\n                break;\n            case 4:\n                echo 'Error: No file uploaded.';\n                break;\n            default:\n                echo 'System error uploading file.';\n                break;\n        }\n    } else {\n        if (!$sizeOK) {\n            echo "Error: File size exceeds the maximum limit of $max.";\n        }\n        if (!$typeOK) {\n            echo 'Error: Incorrect file type.';\n        }\n        if (!$extensionOK) {\n            echo 'Error: Invalid file extension.';\n        }\n    }\n}\n?>