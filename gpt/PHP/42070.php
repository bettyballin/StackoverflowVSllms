<?php\nfunction test_input($data) {\n    $data = trim($data);\n    $data = stripslashes($data);\n    $data = htmlspecialchars($data);\n    return $data;\n}\n\n$errors = [];\n$data = [];\n\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    // Validate general text input\n    if (empty($_POST["text"])) {\n        $errors['text'] = "Text is required";\n    } else {\n        $data['text'] = test_input($_POST["text"]);\n        if (!preg_match("/^[a-zA-Z ]*$/", $data['text'])) {\n            $errors['text'] = "Only letters and white space allowed";\n        }\n    }\n\n    // Validate username\n    if (empty($_POST["username"])) {\n        $errors['username'] = "Username is required";\n    } else {\n        $data['username'] = test_input($_POST["username"]);\n        if (!preg_match("/^[a-zA-Z0-9_]{5,20}$/", $data['username'])) {\n            $errors['username'] = "Username must be 5-20 characters long and can contain letters, numbers and underscores";\n        }\n    }\n\n    // Validate password\n    if (empty($_POST["password"])) {\n        $errors['password'] = "Password is required";\n    } else {\n        $data['password'] = test_input($_POST["password"]);\n        if (!preg_match("/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/", $data['password'])) {\n            $errors['password'] = "Password must be at least 8 characters long and contain at least one letter and one number";\n        }\n    }\n\n    // Validate date\n    if (empty($_POST["date"])) {\n        $errors['date'] = "Date is required";\n    } else {\n        $data['date'] = test_input($_POST["date"]);\n        if (!preg_match("/^\d{4}-\d{2}-\d{2}$/", $data['date'])) {\n            $errors['date'] = "Date must be in YYYY-MM-DD format";\n        }\n    }\n\n    // Check if there are no errors\n    if (empty($errors)) {\n        // Process the data (e.g., save to database)\n        // ...\n        echo "Form submitted successfully!";\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html>\n<body>\n\n<h2>PHP Form Validation Example</h2>\n<form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>">\n    Text: <input type="text" name="text">\n    <span class="error"><?php echo $errors['text'] ?? ''; ?></span>\n    <br><br>\n    Username: <input type="text" name="username">\n    <span class="error"><?php echo $errors['username'] ?? ''; ?></span>\n    <br><br>\n    Password: <input type="password" name="password">\n    <span class="error"><?php echo $errors['password'] ?? ''; ?></span>\n    <br><br>\n    Date: <input type="date" name="date">\n    <span class="error"><?php echo $errors['date'] ?? ''; ?></span>\n    <br><br>\n    <input type="submit" name="submit" value="Submit">\n</form>\n\n</body>\n</html>