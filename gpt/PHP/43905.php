<?php\n   function streamVideo($file) {\n       if (!file_exists($file)) {\n           header("HTTP/1.1 404 Not Found");\n           exit;\n       }\n\n       $size = filesize($file);\n       $start = 0;\n       $end = $size - 1;\n       $length = $size;\n\n       if (isset($_SERVER['HTTP_RANGE'])) {\n           $range = $_SERVER['HTTP_RANGE'];\n           $range = str_replace('bytes=', '', $range);\n           $range = explode('-', $range);\n\n           $start = intval($range[0]);\n           if (isset($range[1]) && is_numeric($range[1])) {\n               $end = intval($range[1]);\n           }\n\n           $length = $end - $start + 1;\n\n           header("HTTP/1.1 206 Partial Content");\n           header("Content-Range: bytes $start-$end/$size");\n       } else {\n           header("HTTP/1.1 200 OK");\n       }\n\n       $fh = fopen($file, 'rb');\n       fseek($fh, $start);\n\n       header("Content-Type: video/mp4");\n       header("Content-Length: $length");\n       header("Accept-Ranges: bytes");\n\n       $buffer = 1024 * 8;\n       while(!feof($fh) && ($p = ftell($fh)) <= $end) {\n           if ($p + $buffer > $end) {\n               $buffer = $end - $p + 1;\n           }\n           set_time_limit(0);\n           echo fread($fh, $buffer);\n           flush();\n       }\n\n       fclose($fh);\n   }\n\n   if (isset($_GET['file'])) {\n       $file = basename($_GET['file']);\n       streamVideo($file);\n   } else {\n       header("HTTP/1.1 400 Bad Request");\n       echo "File not specified.";\n   }\n   ?>