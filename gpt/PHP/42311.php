<?php\n$term = 'cool';\nob_start();\n\nforeach($items as $item) {\n    // echoing results here\n    echo '<div>' . $item->text . '</div>';\n}\n\n$content = ob_get_contents();\nob_clean();\n\n// Adjust the regex to include surrounding tags\n$pattern = "/(<[^>]*>[^<]*)($term)([^<]*<[^>]*>)/i";\n$replace = "$1<span style=\"background: #f00\">$2</span>$3";\necho preg_replace($pattern, $replace, $content);\n?>