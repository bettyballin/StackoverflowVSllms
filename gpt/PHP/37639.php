// Step 3: Decode input\n$user_input = htmlspecialchars($_POST['user_input'], ENT_QUOTES, 'UTF-8');\n\n// Step 4: Purify input\nrequire_once 'HTMLPurifier.auto.php';\n$config = HTMLPurifier_Config::createDefault();\n$purifier = new HTMLPurifier($config);\n$clean_html = $purifier->purify($user_input);\n\n// Step 5: Escape for MySQL\n$mysqli = new mysqli("hostname", "username", "password", "database");\n$escaped_input = $mysqli->real_escape_string($clean_html);\n\n// Step 6: Store in database\n$query = "INSERT INTO your_table (column_name) VALUES ('$escaped_input')";\n$mysqli->query($query);\n\n// When outputting data\n$result = $mysqli->query("SELECT column_name FROM your_table WHERE id = some_id");\n$row = $result->fetch_assoc();\n$output = htmlspecialchars($row['column_name'], ENT_QUOTES, 'UTF-8');\necho $output;