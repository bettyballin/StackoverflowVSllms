function textFormat($text) {\n    $pattern = '/\[text\](?P<id>\d+)\[\/text\]/i';\n\n    $text = preg_replace_callback($pattern, function($matches) {\n        $id = $matches['id'];\n        return '<a href="index.php?function=getData&reference=text&id=' . $id . '">' . getTextTitle($id) . '</a>';\n    }, $text);\n\n    return $text;\n}\n\nfunction getTextTitle($id) {\n    $id = intval($id); // Make sure to sanitize the input\n    $sql = mysql_query("SELECT title FROM text WHERE id = $id");\n    $result = mysql_fetch_assoc($sql);\n    return $result['title'];\n}