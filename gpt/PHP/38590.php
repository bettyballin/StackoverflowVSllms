<?php\n// Create a new MySQLi connection\n$mysqli = new mysqli("localhost", "user", "password", "database");\n\n// Check connection\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n// Start transaction\n$mysqli->begin_transaction();\n\ntry {\n    // Insert data into the first table\n    $sql1 = "INSERT INTO first_table (column1, column2) VALUES ('value1', 'value2')";\n    if (!$mysqli->query($sql1)) {\n        throw new Exception("Insert failed: " . $mysqli->error);\n    }\n\n    // Get the id of the inserted row\n    $inserted_id = $mysqli->insert_id;\n\n    // Use the id to insert data into the second table\n    $sql2 = "INSERT INTO second_table (first_table_id, other_column) VALUES ($inserted_id, 'other_value')";\n    if (!$mysqli->query($sql2)) {\n        throw new Exception("Insert failed: " . $mysqli->error);\n    }\n\n    // Commit transaction\n    $mysqli->commit();\n} catch (Exception $e) {\n    // Rollback transaction if something goes wrong\n    $mysqli->rollback();\n    echo "Failed: " . $e->getMessage();\n}\n\n// Close connection\n$mysqli->close();\n?>