<?php\n// Function to generate a secure token\nfunction generateToken() {\n    return bin2hex(random_bytes(32)); // 64 characters long\n}\n\n// Function to hash passwords\nfunction hashPassword($password, $salt) {\n    return hash('sha256', $password . $salt);\n}\n\n// Function to verify the token and log the user in\nfunction checkRememberMeToken($pdo, $token) {\n    $stmt = $pdo->prepare("SELECT user_id FROM user_tokens WHERE token = :token");\n    $stmt->execute(['token' => $token]);\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    if ($user) {\n        $_SESSION['user_id'] = $user['user_id'];\n        return true;\n    }\n    return false;\n}\n\n// Login script\nsession_start();\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $pdo = new PDO('mysql:host=localhost;dbname=your_db', 'username', 'password');\n\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    $rememberMe = isset($_POST['remember_me']);\n\n    // Fetch user data from database\n    $stmt = $pdo->prepare("SELECT id, password, salt FROM users WHERE username = :username");\n    $stmt->execute(['username' => $username]);\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    if ($user && hashPassword($password, $user['salt']) === $user['password']) {\n        $_SESSION['user_id'] = $user['id'];\n\n        if ($rememberMe) {\n            $token = generateToken();\n            $stmt = $pdo->prepare("INSERT INTO user_tokens (user_id, token) VALUES (:user_id, :token)");\n            $stmt->execute(['user_id' => $user['id'], 'token' => $token]);\n\n            setcookie('remember_me', $token, time() + (86400 * 30), '/', '', true, true); // 30 days\n        }\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo "Invalid username or password.";\n    }\n}\n\n// Logout script\nif (isset($_GET['action']) && $_GET['action'] === 'logout') {\n    session_destroy();\n    setcookie('remember_me', '', time() - 3600, '/', '', true, true); // Expire the cookie\n    header('Location: login.php');\n    exit;\n}\n\n// Remember me token check on each page load\nif (!isset($_SESSION['user_id']) && isset($_COOKIE['remember_me'])) {\n    if (checkRememberMeToken($pdo, $_COOKIE['remember_me'])) {\n        header('Location: dashboard.php');\n        exit;\n    }\n}\n?>