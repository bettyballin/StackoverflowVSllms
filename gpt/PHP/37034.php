class XMLBuilder {\n    public function build($result) {\n        $root = new SimpleXMLElement('<data/>');\n        $this->addNodes($result, $root);\n        return $root->asXML();\n    }\n\n    private function addNodes($result, &$xmlNode) {\n        while ($row = pg_fetch_assoc($result)) {\n            $collection = $xmlNode->addChild('collection');\n            $this->processRow($row, $collection);\n        }\n    }\n\n    private function processRow($row, &$xmlNode) {\n        foreach ($row as $fieldname => $fieldvalue) {\n            if (is_array($fieldvalue)) {\n                $childNode = $xmlNode->addChild($fieldname);\n                $this->processRow($fieldvalue, $childNode);\n            } else {\n                $xmlNode->addChild($fieldname, htmlspecialchars($fieldvalue));\n            }\n        }\n    }\n}\n\n// Use the XMLBuilder class\n$result = pg_query($connection, "SELECT * FROM your_table");\n$xmlBuilder = new XMLBuilder();\n$xmlContent = $xmlBuilder->build($result);\necho $xmlContent;