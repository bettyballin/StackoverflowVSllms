<?php\n\n//=========================================================\n// Initializes Zend Framework (Zend_Loader).\n//=========================================================\nset_include_path(realpath('../library') . PATH_SEPARATOR . get_include_path());\nrequire_once('Zend/Loader.php');\nZend_Loader::registerAutoload();\n\n//=========================================================\n// Delete existing index and create a new one\n//=========================================================\ndefine('SEARCH_INDEX', 'test_search_index');\nif (file_exists(SEARCH_INDEX)) {\n    foreach (scandir(SEARCH_INDEX) as $file) {\n        if (!is_dir($file)) {\n            unlink(SEARCH_INDEX . "/$file");\n        }\n    }\n}\n\n$index = Zend_Search_Lucene::create(SEARCH_INDEX);\n\n//=========================================================\n// Create this data in index:\n// ts | contents\n// --------------+-----------------\n// 1236917100 | dog cat gerbil\n// 1236630752 | cow pig goat\n// 1235680249 | lion tiger bear\n// nonnumeric | bass goby trout\n//=========================================================\n\nfunction add_to_index($index, $ts, $contents) {\n    $doc = new Zend_Search_Lucene_Document();\n    \n    if (is_numeric($ts)) {\n        // Store numeric value as string if it is numeric\n        $doc->addField(Zend_Search_Lucene_Field::UnStored('ts', (string)$ts));\n    } else {\n        $doc->addField(Zend_Search_Lucene_Field::Text('ts', $ts));\n    }\n    \n    $doc->addField(Zend_Search_Lucene_Field::Text('contents', $contents));\n    $index->addDocument($doc);\n}\n\nadd_to_index($index, '1236917100', 'dog cat gerbil');\nadd_to_index($index, '1236630752', 'cow pig goat');\nadd_to_index($index, '1235680249', 'lion tiger bear');\nadd_to_index($index, 'nonnumeric', 'bass goby trout');\n\n// Save the index\n$index->commit();\n\n// Search query\n$query = 'ts:1236630752';\n$hits = $index->find($query);\n\nforeach ($hits as $hit) {\n    echo 'Document ID: ' . $hit->id . PHP_EOL;\n    echo 'Timestamp: ' . $hit->ts . PHP_EOL;\n    echo 'Contents: ' . $hit->contents . PHP_EOL;\n}\n\n$query = 'ts:nonnumeric';\n$hits = $index->find($query);\n\nforeach ($hits as $hit) {\n    echo 'Document ID: ' . $hit->id . PHP_EOL;\n    echo 'Timestamp: ' . $hit->ts . PHP_EOL;\n    echo 'Contents: ' . $hit->contents . PHP_EOL;\n}\n?>