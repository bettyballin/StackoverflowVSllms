header('Content-Type: application/rss+xml; charset=UTF-8');\n\n$item_template = "\n  <item>\n    <title><![CDATA[[[title]]]]></title>\n    <link>[[link]]</link>\n    <description><![CDATA[[[description]]]]></description>\n    <pubDate>[[date]]</pubDate>\n  </item>\n";\n\nwhile ($row = fetch_from_database()) {\n    $title = utf8_encode($row["title"]);\n    $description = utf8_encode($row["description"]);\n    $date = $row["date"];\n    $url = $row["url"];\n\n    $s .= str_replace(\n        array("[[title]]", "[[link]]", "[[description]]", "[[date]]"),\n        array(htmlentities($title, ENT_XML1, 'UTF-8'), $url, $description, $date),\n        $item_template\n    );\n}\n\necho "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";\necho "<rss version=\"2.0\">";\necho "<channel>";\necho $s;\necho "</channel>";\necho "</rss>";