<?php\n// Assuming you have Redis and PHP Redis extension installed\n$redis = new Redis();\n$redis->connect('127.0.0.1', 6379);\n\nfunction reportOffense($ip, $severity) {\n    global $redis;\n    $score = $severity === 'major' ? 10 : 1;\n    $key = "offense:$ip";\n    \n    // Increment the offense score\n    $redis->incrBy($key, $score);\n    \n    // Set an expiration time for forgiveness (e.g., 24 hours)\n    $redis->expire($key, 86400);\n}\n\nfunction isBlocked($ip) {\n    global $redis;\n    $key = "offense:$ip";\n    $score = $redis->get($key);\n    \n    // Define your threshold for blocking\n    $threshold = 20;\n    return ($score !== false && $score >= $threshold);\n}\n\n// Example usage:\n$clientIp = $_SERVER['REMOTE_ADDR'];\n\nif (isBlocked($clientIp)) {\n    http_response_code(403);\n    echo "Access denied.";\n    exit();\n}\n\n// Example offense reporting\n// Call this function whenever an offense occurs\n// reportOffense($clientIp, 'minor'); // For a minor offense\n// reportOffense($clientIp, 'major'); // For a major offense\n\necho "Welcome to the site!";\n?>