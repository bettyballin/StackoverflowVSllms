$ch = curl_init("https://www.ups.com/ups.app/xml/Rate");\ncurl_setopt($ch, CURLOPT_HEADER, 1);\ncurl_setopt($ch, CURLOPT_POST, 1);\ncurl_setopt($ch, CURLOPT_TIMEOUT, 90);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);\ncurl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $data);\n$result = curl_exec($ch);\n\n// Separate the headers and body\n$header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);\n$header = substr($result, 0, $header_size);\n$body = substr($result, $header_size);\n\n// Ensure the Content-Type is set correctly for XML\nheader('Content-Type: application/xml');\n\n// Output the body only, without wrapping it in HTML comments\necho $body;\n\n$data = strstr($result, '<?xml');\n$xml_parser = xml_parser_create();\nxml_parse_into_struct($xml_parser, $data, $vals, $index);\nxml_parser_free($xml_parser);\n\n$params = array();\n$level = array();\n\nforeach ($vals as $xml_elem) {\n    if ($xml_elem['type'] == 'open') {\n        if (array_key_exists('attributes', $xml_elem)) {\n            list($level[$xml_elem['level']], $extra) = array_values($xml_elem['attributes']);\n        } else {\n            $level[$xml_elem['level']] = $xml_elem['tag'];\n        }\n    }\n    if ($xml_elem['type'] == 'complete') {\n        $start_level = 1;\n        $php_stmt = '$params';\n        while ($start_level < $xml_elem['level']) {\n            $php_stmt .= '[$level[' . $start_level . ']]';\n            $start_level++;\n        }\n        $php_stmt .= '[$xml_elem[\'tag\']] = $xml_elem[\'value\'];';\n        eval($php_stmt);\n    }\n}\n\ncurl_close($ch);\n\n// Return the desired value\nreturn $params['RATINGSERVICESELECTIONRESPONSE']['RATEDSHIPMENT']['TOTALCHARGES']['MONETARYVALUE'];