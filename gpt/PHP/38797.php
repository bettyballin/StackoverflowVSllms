<?php\n\n$data = [\n    'amountNeeded' => 2,\n    'resources' => [\n        [\n            'resourceID' => 10,\n            'blocks' => [\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:00',\n                    'endTime' => '08:10'\n                ],\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:10',\n                    'endTime' => '08:20'\n                ],\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:20',\n                    'endTime' => '08:30'\n                ]\n            ]\n        ],\n        [\n            'resourceID' => 13,\n            'blocks' => [\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:00',\n                    'endTime' => '08:10'\n                ],\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:10',\n                    'endTime' => '08:20'\n                ],\n                [\n                    'availDate' => '2008-05-14',\n                    'startTime' => '08:30',\n                    'endTime' => '08:40'\n                ]\n            ]\n        ]\n    ]\n];\n\n$amountNeeded = $data['amountNeeded'];\n$resources = $data['resources'];\n\nfunction findPermutations($resources, $amountNeeded) {\n    $result = [];\n    $combinations = [];\n\n    foreach ($resources as $resource) {\n        foreach ($resource['blocks'] as $block) {\n            $combinations[] = [\n                'resourceID' => $resource['resourceID'],\n                'availDate' => $block['availDate'],\n                'startTime' => $block['startTime'],\n                'endTime' => $block['endTime']\n            ];\n        }\n    }\n\n    for ($i = 0; $i < count($combinations); $i++) {\n        for ($j = $i + 1; $j < count($combinations); $j++) {\n            if ($combinations[$i]['availDate'] == $combinations[$j]['availDate'] && \n                $combinations[$i]['startTime'] == $combinations[$j]['startTime'] && \n                $combinations[$i]['endTime'] == $combinations[$j]['endTime']) {\n                continue;\n            }\n\n            $result[] = [\n                $combinations[$i],\n                $combinations[$j]\n            ];\n        }\n    }\n\n    return $result;\n}\n\n$permutations = findPermutations($resources, $amountNeeded);\n\nforeach ($permutations as $permutation) {\n    foreach ($permutation as $slot) {\n        echo "Available on {$slot['availDate']} from {$slot['startTime']} to {$slot['endTime']} using resource {$slot['resourceID']}\n";\n    }\n    echo "\n";\n}\n?>