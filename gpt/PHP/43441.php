<?php\nsession_start();\ninclude 'db_connection.php'; // Make sure to include your database connection file\n\n$user_id = $_SESSION['user_id'];\n$today = date('Y-m-d');\n\n// Fetch last visit date and current streak\n$query = "SELECT visit_streak, last_visit_date FROM users WHERE id = ?";\n$stmt = $conn->prepare($query);\n$stmt->bind_param("i", $user_id);\n$stmt->execute();\n$stmt->bind_result($visit_streak, $last_visit_date);\n$stmt->fetch();\n$stmt->close();\n\n$yesterday = date('Y-m-d', strtotime('-1 day'));\n\n// Update the visit streak\nif ($last_visit_date == $yesterday) {\n    $visit_streak++;\n} else {\n    if ($last_visit_date != $today) {\n        $visit_streak = 1; // Reset streak if it's not a consecutive day\n    }\n}\n\n// Update the last visit date and visit streak in the database\n$query = "UPDATE users SET visit_streak = ?, last_visit_date = ? WHERE id = ?";\n$stmt = $conn->prepare($query);\n$stmt->bind_param("isi", $visit_streak, $today, $user_id);\n$stmt->execute();\n$stmt->close();\n\n// Check if the user deserves the badge\nif ($visit_streak == 75) {\n    // Award the badge\n    $query = "INSERT INTO user_badges (user_id, badge_name) VALUES (?, 'Fanatic')";\n    $stmt = $conn->prepare($query);\n    $stmt->bind_param("i", $user_id);\n    $stmt->execute();\n    $stmt->close();\n}\n\n$conn->close();\n?>