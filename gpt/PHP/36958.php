<?php\n   require_once __DIR__ . '/vendor/autoload.php';\n\n   use PhpAmqpLib\Connection\AMQPStreamConnection;\n   use PhpAmqpLib\Message\AMQPMessage;\n\n   $connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n   $channel = $connection->channel();\n\n   $channel->queue_declare('task_queue', false, true, false, false);\n\n   $data = json_encode(['image_id' => 12345]);\n   $msg = new AMQPMessage($data, ['delivery_mode' => AMQPMessage::DELIVERY_MODE_PERSISTENT]);\n\n   $channel->basic_publish($msg, '', 'task_queue');\n\n   echo ' [x] Sent ', $data, "\n";\n\n   $channel->close();\n   $connection->close();\n   ?>