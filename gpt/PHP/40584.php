<?php\n\n// Example list of servers with free space (in GB) and weights\n$servers = [\n    ['id' => 1, 'free_space' => 500, 'weight' => 33],\n    ['id' => 2, 'free_space' => 300, 'weight' => 33],\n    ['id' => 3, 'free_space' => 700, 'weight' => 33]\n];\n\n// Calculate the total adjusted weight\n$totalAdjustedWeight = 0;\n$adjustedWeights = [];\n\nforeach ($servers as $server) {\n    $adjustedWeight = $server['weight'] * $server['free_space'];\n    $adjustedWeights[] = ['id' => $server['id'], 'adjusted_weight' => $adjustedWeight];\n    $totalAdjustedWeight += $adjustedWeight;\n}\n\n// Generate a random number between 0 and the total adjusted weight\n$randomNumber = rand(0, $totalAdjustedWeight - 1);\n\n// Select a server based on the random number\n$runningTotal = 0;\n$selectedServer = null;\n\nforeach ($adjustedWeights as $adjustedWeight) {\n    $runningTotal += $adjustedWeight['adjusted_weight'];\n    if ($randomNumber < $runningTotal) {\n        $selectedServer = $adjustedWeight['id'];\n        break;\n    }\n}\n\necho "Selected Server ID: " . $selectedServer;