<?php\n$table_Header = $_GET['tableHeader'];\n$sort_Dir = $_GET['sortDir'];\n\nif ($table_Header == 'From') {\n    $sort_By = 'player_name';\n} else if ($table_Header == 'To') {\n    $sort_By = 'player_name';\n} else if ($table_Header == 'Gr') {\n    $sort_By = 'grp_abr';\n} else {\n    $sort_By = 'default_column'; // default sort column\n}\n\nif (isset($sort_Dir) && $sort_Dir == 'DESC') {\n    $sort_Dir = 'DESC';\n} else {\n    $sort_Dir = 'ASC';\n}\n\n// Using mysqli instead of deprecated mysql functions\n$mysqli = new mysqli("hostname", "username", "password", "database");\n\nif ($mysqli->connect_error) {\n    die("Connection failed: " . $mysqli->connect_error);\n}\n\n$query = "SELECT * FROM messages, Player WHERE player_id = from_user ORDER BY $sort_By $sort_Dir";\n$result = $mysqli->query($query);\n\necho "<thead>\n<tr>\n   <th style='color:royalblue;'>•</th>\n   <th align='center'>Time</th>\n   <th align='left' onClick='sort(\"From\", \"$sort_Dir\");'>De:</th>\n   <th align='left'>To:</th>\n   <th align='left'>Gr</th>\n</tr>\n</thead>";\n\nwhile ($row = $result->fetch_assoc()) {\n    echo "<tbody>\n    <tr class='highlight'>\n        <td width='30' align='center' style='color:royalblue'>•</td>\n        <td width='70' align='left'>{$row['Time_Date']}</td>\n        <td width='600' align='left'>{$row['player_name']}</td>\n        <td width='600' align='left'></td>\n        <td width='100' align='left'></td>\n    </tr>\n    <tr class='highlight'>\n        <td></td>\n        <td colspan='4'>{$row['msg_desc']}</td>\n    </tr>\n    </tbody>";\n}\n\n$mysqli->close();\n?>