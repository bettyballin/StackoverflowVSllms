// Database connection\n$con = new mysqli("hostname", "username", "password", "database");\n\n// Check connection\nif ($con->connect_error) {\n    die("Connection failed: " . $con->connect_error);\n}\n\n// Start transaction\n$con->begin_transaction();\n\ntry {\n    // Update AUCTIONS table\n    $alterQuery = "UPDATE AUCTIONS SET subcat= ? WHERE article_no= ?";\n    if ($altRecord = $con->prepare($alterQuery)) {\n        $altRecord->bind_param("ss", $subcat, $article_no);\n        $altRecord->execute();\n        $altRecord->close();\n    } else {\n        throw new Exception("AUCTIONS update failed: " . $con->error);\n    }\n\n    // Check if username exists\n    $checkUserQuery = "SELECT username FROM USERS WHERE username = ?";\n    if ($checkUserStmt = $con->prepare($checkUserQuery)) {\n        $checkUserStmt->bind_param("s", $username);\n        $checkUserStmt->execute();\n        $checkUserStmt->store_result();\n\n        if ($checkUserStmt->num_rows == 0) {\n            // Insert new user if username does not exist\n            $insertUserQuery = "INSERT INTO USERS (username) VALUES (?)";\n            if ($insertUserStmt = $con->prepare($insertUserQuery)) {\n                $insertUserStmt->bind_param("s", $username);\n                $insertUserStmt->execute();\n                $insertUserStmt->close();\n            } else {\n                throw new Exception("USER insert failed: " . $con->error);\n            }\n        }\n\n        $checkUserStmt->close();\n    } else {\n        throw new Exception("USER check failed: " . $con->error);\n    }\n\n    // Commit transaction\n    $con->commit();\n    echo "true";\n} catch (Exception $e) {\n    // Rollback transaction on error\n    $con->rollback();\n    echo "Transaction failed: " . $e->getMessage();\n}\n\n// Close connection\n$con->close();