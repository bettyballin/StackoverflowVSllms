class FriendsController extends AppController {\n    public function add() {\n        if ($this->request->is('post')) {\n            // Remove empty fields\n            $this->request->data['Friend'] = array_filter($this->request->data['Friend'], function($friend) {\n                return !empty($friend['name']) || !empty($friend['email']);\n            });\n\n            if ($this->Friend->saveAll($this->request->data['Friend'])) {\n                $this->Flash->success(__('The friends have been saved.'));\n                return $this->redirect(array('action' => 'index'));\n            } else {\n                $this->Flash->error(__('The friends could not be saved. Please, try again.'));\n            }\n        }\n    }\n}