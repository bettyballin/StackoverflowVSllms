<?php\n\nfunction getDirectoryHash($directory) {\n    if (!is_dir($directory)) {\n        throw new Exception("The provided path is not a directory.");\n    }\n\n    $fileList = [];\n    $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($directory));\n\n    foreach ($iterator as $file) {\n        if ($file->isFile()) {\n            $fileList[$file->getPathname()] = md5_file($file->getPathname());\n        }\n    }\n\n    ksort($fileList); // Sort files to ensure consistent hash\n    return md5(json_encode($fileList));\n}\n\n$directory = '/path/to/your/photo/gallery';\n$currentHash = getDirectoryHash($directory);\n\n// Load the previous hash from a cache file or database\n$previousHash = file_get_contents('/path/to/cache/hash.txt');\n\nif ($currentHash !== $previousHash) {\n    // Directory contents have changed\n    echo "Directory contents have changed.\n";\n    // Update the cached hash\n    file_put_contents('/path/to/cache/hash.txt', $currentHash);\n} else {\n    // Directory contents have not changed\n    echo "Directory contents have not changed.\n";\n}\n\n?>