<?php\n// Initial array\n$a = [\n    [\n        'spubid' => 'A00502',\n        'sfirst' => 'J.',\n        'smi' => 'A.',\n        'slast' => 'Doe'\n    ],\n    [\n        'spubid' => 'A00502',\n        'sfirst' => 'J.',\n        'smi' => 'F.',\n        'slast' => 'Kennedy'\n    ],\n    [\n        'spubid' => 'A00502',\n        'sfirst' => 'B.',\n        'smi' => 'F.',\n        'slast' => 'James'\n    ],\n    [\n        'spubid' => 'A00502',\n        'sfirst' => 'S.',\n        'smi' => 'M.',\n        'slast' => 'Williamson'\n    ]\n];\n\n// Process the array\n$result = [];\nforeach ($a as $key => $value) {\n    $spubid = $value['spubid'];\n    \n    if (!isset($result[$spubid])) {\n        // Initialize the primary array element\n        $result[$spubid] = $value;\n    } else {\n        // Append additional data to the primary element\n        $index = count($result[$spubid]) / 3; // to calculate the index correctly\n        $result[$spubid]['sfirst' . $index] = $value['sfirst'];\n        $result[$spubid]['smi' . $index] = $value['smi'];\n        $result[$spubid]['slast' . $index] = $value['slast'];\n    }\n}\n\n// Convert to the desired format\n$finalResult = array_values($result);\n\n// Print the final result\nprint_r($finalResult);\n?>