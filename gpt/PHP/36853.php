// Assuming you have a PDO connection\n$conn = new PDO($dsn, $username, $password);\n\n// Insert image into images table\n$stmt = $conn->prepare("INSERT INTO images (image_url) VALUES (:image_url)");\n$stmt->execute([':image_url' => $image_url]);\n$imageID = $conn->lastInsertId();\n\n// Tags array\n$tags = ['toronto', 'sushi', 'summer'];\n\nforeach ($tags as $tag) {\n    // Check if the tag exists\n    $stmt = $conn->prepare("SELECT id FROM tags WHERE tag = :tag");\n    $stmt->execute([':tag' => $tag]);\n    $tagID = $stmt->fetchColumn();\n\n    // If tag does not exist, insert it\n    if (!$tagID) {\n        $stmt = $conn->prepare("INSERT INTO tags (tag) VALUES (:tag)");\n        $stmt->execute([':tag' => $tag]);\n        $tagID = $conn->lastInsertId();\n    }\n\n    // Insert into image_tags\n    $stmt = $conn->prepare("INSERT INTO image_tags (image_id, tag_id) VALUES (:image_id, :tag_id)");\n    $stmt->execute([':image_id' => $imageID, ':tag_id' => $tagID]);\n}