function has_permission($user_id, $permission_name) {\n       global $pdo;\n       $sql = "SELECT COUNT(*) FROM role_permissions rp\n               JOIN roles r ON rp.role_id = r.id\n               JOIN permissions p ON rp.permission_id = p.id\n               JOIN users u ON u.role_id = r.id\n               WHERE u.id = :user_id AND p.permission_name = :permission_name";\n       $stmt = $pdo->prepare($sql);\n       $stmt->execute(['user_id' => $user_id, 'permission_name' => $permission_name]);\n       return $stmt->fetchColumn() > 0;\n   }