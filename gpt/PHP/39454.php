<?php\n\n// Include the AWS SDK for PHP\nrequire 'vendor/autoload.php';\n\nuse Aws\S3\S3Client;\nuse Aws\S3\Exception\S3Exception;\n\n// Your AWS credentials and S3 bucket details\n$bucket = 'your-bucket-name';\n$key = 'path/to/your-file.ext';\n$newFilename = 'desired-filename.ext';\n\n// Initialize the S3 client\n$s3 = new S3Client([\n    'version' => 'latest',\n    'region'  => 'your-region',\n    'credentials' => [\n        'key'    => 'your-aws-access-key-id',\n        'secret' => 'your-aws-secret-access-key',\n    ],\n]);\n\ntry {\n    // Get a presigned URL for the S3 object\n    $cmd = $s3->getCommand('GetObject', [\n        'Bucket' => $bucket,\n        'Key'    => $key\n    ]);\n\n    $request = $s3->createPresignedRequest($cmd, '+20 minutes');\n    $presignedUrl = (string)$request->getUri();\n\n    // Initialize a cURL session\n    $ch = curl_init($presignedUrl);\n\n    // Set cURL options to stream the file\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);\n    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);\n    curl_setopt($ch, CURLOPT_BUFFERSIZE, 1024); // Adjust the buffer size if needed\n\n    // Set headers to force download and rename the file\n    header('Content-Type: application/octet-stream');\n    header('Content-Disposition: attachment; filename="' . $newFilename . '"');\n\n    // Execute the cURL session and output the file directly to the browser\n    curl_exec($ch);\n\n    // Close the cURL session\n    curl_close($ch);\n\n} catch (S3Exception $e) {\n    echo 'Error: ' . $e->getMessage();\n}\n?>