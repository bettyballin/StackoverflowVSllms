<?php\nclass MySQLSessionHandler {\n    private $db;\n    private $table = 'sessions';\n\n    public function __construct($host, $user, $pass, $dbname) {\n        $this->db = new mysqli($host, $user, $pass, $dbname);\n        if ($this->db->connect_error) {\n            die("Connection failed: " . $this->db->connect_error);\n        }\n\n        session_set_save_handler(\n            [$this, 'open'],\n            [$this, 'close'],\n            [$this, 'read'],\n            [$this, 'write'],\n            [$this, 'destroy'],\n            [$this, 'gc']\n        );\n    }\n\n    public function open($savePath, $sessionName) {\n        return true;\n    }\n\n    public function close() {\n        return $this->db->close();\n    }\n\n    public function read($id) {\n        $stmt = $this->db->prepare("SELECT data FROM $this->table WHERE id = ? LIMIT 1");\n        $stmt->bind_param('s', $id);\n        $stmt->execute();\n        $stmt->bind_result($data);\n        $stmt->fetch();\n        $stmt->close();\n        return $data ? $data : '';\n    }\n\n    public function write($id, $data) {\n        $timestamp = time();\n        $stmt = $this->db->prepare("REPLACE INTO $this->table (id, data, timestamp) VALUES (?, ?, ?)");\n        $stmt->bind_param('ssi', $id, $data, $timestamp);\n        return $stmt->execute();\n    }\n\n    public function destroy($id) {\n        $stmt = $this->db->prepare("DELETE FROM $this->table WHERE id = ?");\n        $stmt->bind_param('s', $id);\n        return $stmt->execute();\n    }\n\n    public function gc($maxlifetime) {\n        $old = time() - $maxlifetime;\n        $stmt = $this->db->prepare("DELETE FROM $this->table WHERE timestamp < ?");\n        $stmt->bind_param('i', $old);\n        return $stmt->execute();\n    }\n}\n\n// Replace with your database credentials\n$host = 'your_db_host';\n$user = 'your_db_user';\n$pass = 'your_db_pass';\n$dbname = 'your_db_name';\n\n$handler = new MySQLSessionHandler($host, $user, $pass, $dbname);\nsession_start();\n?>