$subscribersManager = new DD_Subscribers_Manager();\n$subscribers = $subscribersManager->getAllSubscribers();\n\n$subject = $form->getElement('subject')->getValue();\n$body = $form->getElement('body')->getValue();\n$filename = $form->getElement('bulletin')->getValue();\n$filepath = Zend_Registry::get('rootDir') . '/public/downloads/archive/' . $filename;\n\n$config = array('ssl' => 'tls', 'port' => 587, 'auth' => 'login', 'username' => 'fake@email.com', 'password' => 'password');\n$smtpConnection = new Zend_Mail_Transport_Smtp('smtp.gmail.com', $config);\n\nforeach ($subscribers as $subscriber) {\n    $message = new Zend_Mail('utf-8');\n    $message->setFrom('fake@email.com', 'My Fake Mailing List')\n            ->addTo($subscriber->email)\n            ->setSubject($subject)\n            ->setBodyText($body);\n    $attachment = $message->createAttachment(file_get_contents($filepath));\n    $attachment->type = 'application/pdf';\n    $attachment->filename = $filename;\n\n    // Send the message inside the loop\n    $message->send($smtpConnection);\n}