function connect($new_link = false) \n{\n    if (!$this->LinkID) {\n        $server = ($this->DBPort != "") ? $this->DBHost . ":" . $this->DBPort : $this->DBHost;\n\n        if ($this->DBPersistent) {\n            $this->LinkID = @mysql_pconnect($server, $this->DBUser, $this->DBPassword);\n        } else {\n            $this->LinkID = @mysql_connect($server, $this->DBUser, $this->DBPassword, $new_link);\n        }\n\n        if (!$this->LinkID) {       \n            $this->halt("Connect failed: " . $this->describe_error(mysql_errno(), mysql_error()));\n            return 0;\n        }\n\n        if (!mysql_select_db($this->DBDatabase, $this->LinkID)) {\n            $this->LinkID = 0;\n            $this->halt($this->describe_error(mysql_errno(), mysql_error()));\n            return 0;\n        }\n    }\n\n    return $this->LinkID;\n}