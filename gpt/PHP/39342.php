<?php\nsession_start();\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['quantities'])) {\n    // Initialize the cart if not already done\n    if (!isset($_SESSION['cart'])) {\n        $_SESSION['cart'] = [];\n    }\n\n    $quantities = $_POST['quantities'];\n\n    foreach ($quantities as $widget_id => $quantity) {\n        if ($quantity > 0) {\n            // Check if the item is already in the cart\n            if (isset($_SESSION['cart'][$widget_id])) {\n                // Update the quantity\n                $_SESSION['cart'][$widget_id]['quantity'] += $quantity;\n            } else {\n                // Add new item to the cart\n                $_SESSION['cart'][$widget_id] = [\n                    'id' => $widget_id,\n                    'quantity' => $quantity\n                ];\n            }\n        }\n    }\n}\n\n// Redirect back to the search page or cart page\nheader('Location: search_page.php');\nexit();\n?>