// Assuming $site_path is defined and sanitized earlier in your script\n$site_path = '/var/www/html/'; // Example site path\n\nfunction getThumbnailPath($photo_url, $site_path) {\n    // Ensure the photo URL is not empty\n    if ($photo_url == '') {\n        return '';\n    }\n\n    // Build the full photo filepath\n    $file = $site_path . 'images/userphoto/' . $photo_url;\n\n    // Ensure the file exists\n    if (!file_exists($file)) {\n        return '';\n    }\n\n    // Get the position of the last '.' to find the extension\n    $ext_pos = strrpos($photo_url, '.');\n    if ($ext_pos === false) {\n        return '';\n    }\n\n    // Build the thumbnail file path\n    $thumbnail_url = substr($photo_url, 0, $ext_pos) . '_thumb' . substr($photo_url, $ext_pos);\n\n    // Ensure the thumbnail file exists\n    if (file_exists($site_path . 'images/userphoto/' . $thumbnail_url)) {\n        return $thumbnail_url;\n    }\n\n    return '';\n}\n\n// Example usage\n$photo_url = '2/34/12/thepicture.jpg';\n$thumbnail_url = getThumbnailPath($photo_url, $site_path);\n\nif ($thumbnail_url != '') {\n    // Do something with the thumbnail URL\n    echo 'Thumbnail URL: ' . $thumbnail_url;\n} else {\n    echo 'Thumbnail not found';\n}