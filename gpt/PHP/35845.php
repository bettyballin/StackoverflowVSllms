<?php\n// Database connection (ensure you are using the latest MySQLi or PDO for security)\n$mysqli = new mysqli("hostname", "username", "password", "database");\n\n// Validate and sanitize input\n$id = isset($_GET['id']) ? intval($_GET['id']) : 0;\n\n// Fetch topic details\n$stmt = $mysqli->prepare("SELECT * FROM topics WHERE id = ?");\n$stmt->bind_param("i", $id);\n$stmt->execute();\n$result = $stmt->get_result();\n$row = $result->fetch_assoc();\n\n$title = htmlspecialchars($row['title']);\n$text = bbcode($row['text']);\n\n// Fetch replies\n$replies = [];\n$stmt = $mysqli->prepare("SELECT * FROM replies WHERE topic_id = ?");\n$stmt->bind_param("i", $id);\n$stmt->execute();\n$result = $stmt->get_result();\n\nwhile ($r = $result->fetch_assoc()) {\n    $r['text'] = bbcode($r['text']);\n    $replies[] = $r;\n}\n\n// Close the statement and connection\n$stmt->close();\n$mysqli->close();\n\n// Include the view file\ninclude 'view/topic.php';\n?>