<?php\nsession_start();\nif (!isset($_SESSION['user_id'])) {\n    // Handle the case where the user is not logged in\n    exit('User not logged in');\n}\n\n$userId = $_SESSION['user_id'];\n$itemId = $_POST['item_id'];\n$voteValue = $_POST['vote_value'];\n\n// Validate the inputs\nif (!is_numeric($itemId) || !in_array($voteValue, [1, -1])) {\n    exit('Invalid input');\n}\n\n// Connect to the database (use prepared statements to prevent SQL injection)\n$conn = new mysqli('your_host', 'your_username', 'your_password', 'your_database');\nif ($conn->connect_error) {\n    die('Connection failed: ' . $conn->connect_error);\n}\n\n// Check if the user has already voted\n$stmt = $conn->prepare('SELECT * FROM votes WHERE user_id = ? AND item_id = ?');\n$stmt->bind_param('ii', $userId, $itemId);\n$stmt->execute();\n$result = $stmt->get_result();\n\nif ($result->num_rows > 0) {\n    // User has already voted\n    echo 'You have already voted';\n} else {\n    // Record the vote\n    $stmt = $conn->prepare('INSERT INTO votes (user_id, item_id, vote_value) VALUES (?, ?, ?)');\n    $stmt->bind_param('iii', $userId, $itemId, $voteValue);\n    if ($stmt->execute()) {\n        echo 'Vote recorded';\n    } else {\n        echo 'Error recording vote';\n    }\n}\n\n$stmt->close();\n$conn->close();\n?>