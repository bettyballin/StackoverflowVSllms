<?php\n$memcached = new Memcached();\n$memcached->addServer('127.0.0.1', 11211);\n\n// Error handling for connection\nif ($memcached->getStats() === false) {\n    die('Could not connect to Memcached server');\n}\n\n$key = 'therows1';\n\n// Validate and sanitize the key\nif (!preg_match('/^[a-zA-Z0-9_\-]+$/', $key)) {\n    die('Invalid cache key');\n}\n\n$rows = $memcached->get($key);\nif ($rows === false) {\n    $myfriends = findfriend2(); // Function to fetch data from MySQL\n    // Serialize data before storing\n    $memcached->set($key, serialize($myfriends), 30);\n    echo '<pre>';\n    print_r($myfriends); // Print the MySQL version\n    echo '</pre>';\n} else {\n    $rows = unserialize($rows); // Unserialize data after fetching\n    echo '<pre>';\n    print_r($rows); // Print the cached version\n    echo '</pre>';\n}\n?>