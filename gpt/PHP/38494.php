<?php\n// auth.example.com - authentication server\n\nsession_start();\n\nfunction authenticate($username, $password) {\n    // Replace with actual authentication logic\n    return $username === 'user' && $password === 'pass';\n}\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['username'], $_POST['password'])) {\n    if (authenticate($_POST['username'], $_POST['password'])) {\n        $_SESSION['user'] = $_POST['username'];\n        $sessionID = session_id();\n        echo json_encode(['session_id' => $sessionID]);\n    } else {\n        http_response_code(401);\n        echo json_encode(['error' => 'Invalid credentials']);\n    }\n} elseif (isset($_GET['session_id'])) {\n    session_id($_GET['session_id']);\n    session_start();\n    if (isset($_SESSION['user'])) {\n        setcookie('session_id', session_id(), 0, '/', '.example.com'); // Set cookie for all subdomains\n        echo json_encode(['status' => 'logged_in']);\n    } else {\n        http_response_code(403);\n        echo json_encode(['error' => 'Invalid session']);\n    }\n} else {\n    http_response_code(400);\n    echo json_encode(['error' => 'Bad request']);\n}\n?>