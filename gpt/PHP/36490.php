<?php\nrequire_once 'vendor/autoload.php';\n\nsession_start();\n\n$client = new Google_Client();\n$client->setAuthConfig('path/to/client_credentials.json');\n$client->setRedirectUri('http://your-redirect-uri/oauth2callback.php');\n$client->addScope(Google_Service_Gmail::GMAIL_READONLY);\n$client->addScope(Google_Service_Gmail::GMAIL_SEND);\n\nif (!isset($_GET['code'])) {\n    $auth_url = $client->createAuthUrl();\n    header('Location: ' . filter_var($auth_url, FILTER_SANITIZE_URL));\n} else {\n    $client->authenticate($_GET['code']);\n    $_SESSION['access_token'] = $client->getAccessToken();\n    $redirect_uri = 'http://your-redirect-uri/';\n    header('Location: ' . filter_var($redirect_uri, FILTER_SANITIZE_URL));\n}\n?>