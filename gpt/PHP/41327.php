<?php\n$file = 'counter.txt';\n\n// Open the file for reading and writing\n$fp = fopen($file, 'r+');\n\nif (flock($fp, LOCK_EX)) {  // Acquire an exclusive lock\n    // Read the current count\n    $count = (int) fread($fp, filesize($file));\n    \n    // Increment the count\n    $count++;\n    \n    // Move the pointer back to the beginning of the file\n    ftruncate($fp, 0);\n    rewind($fp);\n    \n    // Write the new count back to the file\n    fwrite($fp, $count);\n    \n    // Release the lock\n    flock($fp, LOCK_UN);\n}\n\n// Close the file\nfclose($fp);\n\n// Return the new count\necho $count;\n?>