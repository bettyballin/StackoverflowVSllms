<?php\n$mysqli = new mysqli("localhost", "user", "password", "database");\n\n// Fetch new offers (you can add your own logic to determine new offers)\n$new_offers_result = $mysqli->query("SELECT * FROM offers WHERE created_at >= NOW() - INTERVAL 1 DAY");\n\n$new_offers = $new_offers_result->fetch_all(MYSQLI_ASSOC);\n\nforeach ($new_offers as $offer) {\n    // Fetch subscriptions for the category of the offer\n    $category_id = $offer['category_id'];\n    $subscription_result = $mysqli->query("SELECT * FROM subscriptions WHERE category_id = $category_id");\n\n    $subscriptions = $subscription_result->fetch_all(MYSQLI_ASSOC);\n\n    foreach ($subscriptions as $subscription) {\n        $user_id = $subscription['user_id'];\n        $search_query = $subscription['search_query'];\n\n        // Check if the offer matches the search query\n        if (empty($search_query) || stripos($offer['title'] . ' ' . $offer['description'], $search_query) !== false) {\n            // Fetch user email\n            $user_result = $mysqli->query("SELECT email FROM users WHERE id = $user_id");\n            $user = $user_result->fetch_assoc();\n\n            // Send email notification\n            $to = $user['email'];\n            $subject = "New Offer Available";\n            $message = "A new offer matching your subscription is available: " . $offer['title'];\n            mail($to, $subject, $message);\n        }\n    }\n}\n?>