$dom = new DOMDocument();\n$dom->load($tempFileName);\n\n// Enable internal error handling\nlibxml_use_internal_errors(true);\n\n// Validate against the DTD\n$dom->validateOnParse = true;\n$isValid = $dom->validate();\n\nif ($isValid) {\n    echo '<p>XML is valid. Overwriting sitemap.xml.</p>';\n    file_put_contents('sitemap.xml', $dom->saveXML());\n} else {\n    echo '<p>XML is not valid. Please correct the following errors:</p>';\n    foreach (libxml_get_errors() as $error) {\n        echo "<br>", display_xml_error($error, $tempFileName);\n    }\n    libxml_clear_errors();\n}\n\nfunction display_xml_error($error, $xml) {\n    $return = $xml[$error->line - 1] . "<br>";\n    $return .= str_repeat('-', $error->column) . "^<br>";\n\n    switch ($error->level) {\n        case LIBXML_ERR_WARNING:\n            $return .= "Warning $error->code: ";\n            break;\n        case LIBXML_ERR_ERROR:\n            $return .= "Error $error->code: ";\n            break;\n        case LIBXML_ERR_FATAL:\n            $return .= "Fatal Error $error->code: ";\n            break;\n    }\n\n    $return .= trim($error->message) .\n               "<br>  Line: $error->line" .\n               "<br>  Column: $error->column";\n\n    return "$return<br>";\n}