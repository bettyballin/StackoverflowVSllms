// Begin a transaction\n$db->beginTransaction();\n\ntry {\n    // First stored procedure call\n    $stmt1 = $db->prepare("CALL first_stored_procedure()");\n    $stmt1->execute();\n    $result1 = $stmt1->fetchAll(PDO::FETCH_ASSOC);\n    $stmt1->closeCursor(); // Ensure all results are fetched and cursor is closed\n\n    // Second stored procedure call\n    $stmt2 = $db->prepare("CALL second_stored_procedure()");\n    $stmt2->execute();\n    $result2 = $stmt2->fetchAll(PDO::FETCH_ASSOC);\n    $stmt2->closeCursor();\n\n    // Continue with other stored procedures as needed\n    // ...\n\n    // Commit the transaction\n    $db->commit();\n\n} catch (Exception $e) {\n    // Rollback the transaction if any error occurs\n    $db->rollBack();\n    throw new Exception("Transaction failed: " . $e->getMessage());\n}\n\n// Process the results as needed