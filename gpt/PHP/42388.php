<?php\n\n$shippers = array(\n    "leg0" => array(\n        "UPS" => array("days" => 1, "cost" => 5000),\n        "FedEx" => array("days" => 2, "cost" => 3000),\n        "Conway" => array("days" => 5, "cost" => 1000)\n    ),\n    "leg1" => array(\n        "UPS" => array("days" => 1, "cost" => 3000),\n        "FedEx" => array("days" => 2, "cost" => 3000),\n        "Conway" => array("days" => 3, "cost" => 1000)\n    ),\n    "leg2" => array(\n        "UPS" => array("days" => 1, "cost" => 4000),\n        "FedEx" => array("days" => 1, "cost" => 3000),\n        "Conway" => array("days" => 2, "cost" => 5000)\n    )\n);\n\nfunction find_best_combination($shippers) {\n    $legs = array_keys($shippers);\n    $combinations = generate_combinations($shippers, $legs);\n    $best_combination = null;\n    $lowest_cost = PHP_INT_MAX;\n\n    foreach ($combinations as $combination) {\n        $total_days = 0;\n        $total_cost = 0;\n        foreach ($combination as $leg => $shipper) {\n            $total_days += $shippers[$leg][$shipper]['days'];\n            $total_cost += $shippers[$leg][$shipper]['cost'];\n        }\n\n        if ($total_days <= 5 && $total_cost < $lowest_cost) {\n            $lowest_cost = $total_cost;\n            $best_combination = $combination;\n        }\n    }\n\n    return $best_combination;\n}\n\nfunction generate_combinations($shippers, $legs, &$combinations = [], $current_combination = [], $current_leg = 0) {\n    if ($current_leg == count($legs)) {\n        $combinations[] = $current_combination;\n        return;\n    }\n\n    $leg = $legs[$current_leg];\n    foreach ($shippers[$leg] as $shipper => $details) {\n        $new_combination = $current_combination;\n        $new_combination[$leg] = $shipper;\n        generate_combinations($shippers, $legs, $combinations, $new_combination, $current_leg + 1);\n    }\n}\n\n$best_combination = find_best_combination($shippers);\n\nif ($best_combination === null) {\n    echo "No valid combination found within 5 days.\n";\n} else {\n    echo "Best combination:\n";\n    foreach ($best_combination as $leg => $shipper) {\n        echo $leg . ": " . $shipper . "\n";\n    }\n}\n?>