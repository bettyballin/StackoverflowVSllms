class HTML {\n    private $tags = [];\n    private $output = '';\n\n    public function tag($tag) {\n        $this->tags[] = $tag;\n        $this->output .= "<{$tag}>";\n        return $this;\n    }\n\n    public function attr($key, $value) {\n        $lastTag = array_pop($this->tags);\n        $this->output = rtrim($this->output, ">");\n        $this->output .= " {$key}=\"" . htmlspecialchars($value, ENT_QUOTES, 'UTF-8') . "\">";\n        $this->tags[] = $lastTag;\n        return $this;\n    }\n\n    public function text($text) {\n        $this->output .= htmlspecialchars($text, ENT_QUOTES, 'UTF-8');\n        return $this;\n    }\n\n    public function close() {\n        $tag = array_pop($this->tags);\n        $this->output .= "</{$tag}>";\n        return $this;\n    }\n\n    public function __toString() {\n        while (!empty($this->tags)) {\n            $this->close();\n        }\n        return $this->output;\n    }\n}\n\n// Example usage\n$html = new HTML;\n\n$html->tag("html");\n$html->tag("head")->close();\n$html->tag("body")->close();\n$html->close();\n\necho $html;