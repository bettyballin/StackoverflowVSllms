// error_handler.php\n\nfunction logRequestAndHeaders($message)\n{\n    $headers = getallheaders();\n    $request = $_REQUEST;\n\n    error_log($message);\n    error_log(json_encode(['request' => $request, 'headers' => $headers]));\n}\n\nset_error_handler(function ($errno, $errstr, $errfile, $errline) {\n    if ($errno == E_USER_ERROR) {\n        logRequestAndHeaders("HTTP 500 Error: $errstr in $errfile on line $errline");\n    }\n    return false; // Pass the error to the default handler\n});\n\n// Include this file in your main entry point