function getLogEntries($pdo, $tableName) {\n    $allowedTables = ['users', 'services']; // Define allowed tables\n    if (!in_array($tableName, $allowedTables)) {\n        throw new Exception('Invalid table name');\n    }\n\n    $stmt = $pdo->prepare("SELECT l.*, r.name AS reference_name \n                           FROM log l\n                           JOIN $tableName r ON r.id = l.reference_id\n                           WHERE l.reference_table_name = :tableName");\n    $stmt->execute([':tableName' => $tableName]);\n    return $stmt->fetchAll();\n}\n\n// Usage\ntry {\n    $entries = getLogEntries($pdo, 'users');\n    // Process entries\n} catch (Exception $e) {\n    // Handle exception\n}