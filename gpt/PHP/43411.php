// Place this at the top of theme header.php\n\necho test_out();\n\nfunction test_out() {\n    global $post;\n    error_log('stage_1');\n    $str = $post->post_content;\n    error_log('stage_2');\n    var_dump(isset($str));\n    error_log('stage_3');\n    $str = test_core_wp('test_shortcode', $str);\n    error_log('stage_4');\n\n    return $str;\n}\n\nfunction test_shortcode($content) {\n    return str_replace('[hw]', 'Hello World!', $content);\n}\n\nfunction test_core_wp($function, $a = NULL) {\n    $wrap = array('test_shortcode' => 'test_shortcode');\n\n    if (isset($a)) $args[] = $a;\n\n    return call_user_func_array($wrap[$function], $args);\n}\n\n// Additional debug function to check where test_out() might be called again\nfunction debug_backtrace_helper() {\n    ob_start();\n    debug_print_backtrace();\n    $trace = ob_get_clean();\n    error_log($trace);\n}\n\nadd_action('wp_head', 'debug_backtrace_helper');