class ImageHandler {\n    private $img;\n\n    public function __construct($width, $height) {\n        $this->img = imagecreate($width, $height);\n    }\n\n    public function outputImage() {\n        header('Content-Type: image/png');\n        imagepng($this->img);\n    }\n\n    public function __destruct() {\n        if ($this->img) {\n            imagedestroy($this->img);\n        }\n    }\n}\n\n$handler = new ImageHandler(200, 200);\n\n// Register a shutdown function to ensure imagedestroy is called\nregister_shutdown_function(function() use ($handler) {\n    unset($handler); // This will trigger the destructor\n});\n\n$handler->outputImage();