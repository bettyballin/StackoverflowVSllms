// Establish database connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die("Connection failed: " . $conn->connect_error);\n}\n\n// Count total number of rows\n$count_sql = "SELECT COUNT(*) AS total_rows\n              FROM posts p\n              JOIN postimages pi ON pi.post_id = p.id\n              JOIN images im ON pi.image_id = im.image_id\n              WHERE im.active = 1";\n$count_result = $conn->query($count_sql);\n$total_rows = $count_result->fetch_assoc()['total_rows'];\n\n// Fetch limited set of rows for the current page\n$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;\n$limit = 16;\n$offset = ($page - 1) * $limit;\n\n$data_sql = "SELECT p.*, im.*\n             FROM posts p\n             JOIN postimages pi ON pi.post_id = p.id\n             JOIN images im ON pi.image_id = im.image_id\n             WHERE im.active = 1\n             ORDER BY p.created_at\n             LIMIT $limit OFFSET $offset";\n$data_result = $conn->query($data_sql);\n\n// Fetch and display the images\nwhile ($row = $data_result->fetch_assoc()) {\n    // Display image\n}\n\n// Generate pagination links\n$total_pages = ceil($total_rows / $limit);\nfor ($i = 1; $i <= $total_pages; $i++) {\n    echo "<a href='gallery.php?page=$i'>$i</a> ";\n}\n\n// Close connection\n$conn->close();