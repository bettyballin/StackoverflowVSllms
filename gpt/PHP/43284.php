public function index() {\n    // Select books with their collections\n    $this->db->select('books.*, collections.collection_name');\n    $this->db->from('books');\n    $this->db->join('collections', 'collections.collectid = books.collectionid');\n    $books_query = $this->db->get();\n    $books = $books_query->result_array();\n\n    // Loop through books to get their corresponding tags\n    foreach ($books as &$book) {\n        $this->db->select('tags.tag_name');\n        $this->db->from('tags');\n        $this->db->join('BooksTags', 'BooksTags.tagid = tags.tagid');\n        $this->db->where('BooksTags.bookid', $book['bookid']);\n        $tags_query = $this->db->get();\n        $book['tags'] = $tags_query->result_array();\n    }\n\n    $data['books'] = $books;\n    $this->load->view('books_view', $data);\n}