<?php\nif (isset($_POST['code'])){\n    $map = $_POST['code'];\n    $map = preg_replace("/,\\s*}/i", "}", $map);\n    $map = str_replace("{", "[", $map);\n    $map = str_replace("}", "]", $map);\n    $map = json_decode('[' . $map . ']');\n\n    $arrayCount1 = 0;\n    $arrayCount2 = -1;\n\n    $H = sprintf('%05d', 00000);\n    $V = sprintf('%05d', 00000);\n    $id = 1;\n\n    // Open a file in write mode\n    $file = fopen("map_sql.txt", "w");\n    \n    // Write the initial SQL statement\n    fwrite($file, "INSERT INTO `map` (`id`, `horizontal`, `verticle`, `image`) VALUES\n");\n\n    for ($count1 = 0; $count1 < sizeof($map[0]); $count1++){\n        $arrayCount2++;\n        $arrayCount1 = 0;\n        $V = sprintf('%05d', $V + 1);\n        $H = sprintf('%05d', 00000);\n\n        for ($count2 = 0; $count2 < sizeof($map); $count2++){\n            $sql = "(" . $id . ", '" . $H . "', '" . $V . "', '" . $map[$arrayCount1][$arrayCount2] . "'),\n";\n            fwrite($file, $sql);\n            $arrayCount1++;\n            $id++;\n            $H = sprintf('%05d', $H + 1);\n        }\n    }\n\n    // Close the file\n    fclose($file);\n    \n    echo "SQL code has been written to map_sql.txt";\n}\n?>