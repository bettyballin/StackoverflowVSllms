<?php\n$title = isset($_GET['title']) ? basename($_GET['title']) : 'default';\n$url = isset($_GET['url']) ? $_GET['url'] : '';\n\n$ourFileName = $title . '.jpg';\n$ourFilePath = 'images/' . $ourFileName;\n$ourFileHandle = fopen($ourFilePath, 'w') or die("can't open file");\nfclose($ourFileHandle);\n\n$ch = curl_init("http://www.address.com/url=" . urlencode($url));\ncurl_setopt($ch, CURLOPT_HEADER, 0);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);\n$rawdata = curl_exec($ch);\ncurl_close($ch);\n\nif ($rawdata === false) {\n    die("Error fetching data from URL");\n}\n\n$fp = fopen($ourFilePath, 'w');\nfwrite($fp, $rawdata);\nfclose($fp);\n\necho "<img src=\"$ourFilePath\">";\n?>