<?php\nfunction isDomainAvailable($domain) {\n    // Remove "http://" or "https://" from the domain if present\n    $domain = preg_replace('/^https?:\/\//', '', $domain);\n\n    // Determine the WHOIS server based on the top-level domain (TLD)\n    $tld = substr(strrchr($domain, '.'), 1);\n    $whoisServer = getWhoisServer($tld);\n\n    if (!$whoisServer) {\n        throw new Exception("No WHOIS server found for TLD: $tld");\n    }\n\n    // Connect to the WHOIS server\n    $connection = fsockopen($whoisServer, 43);\n    if (!$connection) {\n        throw new Exception("Could not connect to WHOIS server: $whoisServer");\n    }\n\n    // Send the domain query\n    fwrite($connection, $domain . "\r\n");\n\n    // Get the response\n    $response = '';\n    while (!feof($connection)) {\n        $response .= fgets($connection, 128);\n    }\n\n    fclose($connection);\n\n    // Check if the domain is available based on the WHOIS response\n    return strpos($response, 'No match for') !== false || strpos($response, 'NOT FOUND') !== false;\n}\n\nfunction getWhoisServer($tld) {\n    $whoisServers = [\n        'com' => 'whois.verisign-grs.com',\n        'net' => 'whois.verisign-grs.com',\n        'org' => 'whois.pir.org',\n        'info' => 'whois.afilias.net',\n        'biz' => 'whois.biz',\n        // Add more TLDs and their respective WHOIS servers as needed\n    ];\n\n    return isset($whoisServers[$tld]) ? $whoisServers[$tld] : null;\n}\n\n// Example usage:\ntry {\n    $domain = 'example.com';\n    if (isDomainAvailable($domain)) {\n        echo "The domain $domain is available!";\n    } else {\n        echo "The domain $domain is already registered.";\n    }\n} catch (Exception $e) {\n    echo 'Error: ' . $e->getMessage();\n}\n?>