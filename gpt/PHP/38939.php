$string = getStringFromDatabase();\n\n// Clean the string as before\n$clean_string = preg_replace('/[[:^print:]]/', '', $string);\n\n// Ensure the string is in UTF-8\n$encoding = mb_detect_encoding($clean_string, 'UTF-8, ISO-8859-1', true);\nif ($encoding !== 'UTF-8') {\n    $clean_string = mb_convert_encoding($clean_string, 'UTF-8', $encoding);\n}\n\n// Load XML\n$xml = simplexml_load_string($clean_string);\n\nif ($xml === false) {\n    echo "Failed to parse XML\n";\n    foreach(libxml_get_errors() as $error) {\n        echo "\t", $error->message;\n    }\n} else {\n    echo "XML parsed successfully\n";\n}