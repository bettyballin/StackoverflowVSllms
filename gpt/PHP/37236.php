function convertToPath($string)\n{\n    // Convert to lowercase and trim whitespace\n    $string = mb_strtolower(trim($string), 'UTF-8');\n    \n    // Replace spaces with dashes\n    $string = preg_replace('/\s+/', '-', $string);\n    \n    // Remove unwanted punctuation, allowing dashes and underscores\n    $string = preg_replace('/[^\p{L}\p{N}-_]/u', '', $string);\n    \n    // Remove consecutive dashes\n    $string = preg_replace('/-+/', '-', $string);\n    \n    return $string;\n}