<?php\n$hostname = "smtp.gmail.com";\n$port = 587; // Use 587 for TLS\n$timeout = 30;\n\n$fp = fsockopen($hostname, $port, $errno, $errstr, $timeout);\n\nif (!$fp) {\n    echo "$errstr ($errno)<br />\n";\n} else {\n    // Initiate TLS\n    fputs($fp, "EHLO $hostname\r\n");\n    echo fgets($fp, 1024);\n    fputs($fp, "STARTTLS\r\n");\n    echo fgets($fp, 1024);\n\n    // You should handle the SMTP authentication here...\n\n    fclose($fp);\n}\n?>