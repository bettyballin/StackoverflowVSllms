<?php\nif (isset($_GET["subcat"])) {\n    $subcat = $_GET["subcat"];\n}\nif (isset($_GET["searchstring"])) {\n    $searchstring = $_GET["searchstring"];\n}\n$con = mysqli_connect("localhost","user","password", "database");\nif (!$con) {\n    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();\n    exit;\n}\n$table = 'USERS';\n$brand = '%' . $searchstring . '%';\n$rows = getRowsByArticleSearch($brand, $table);\necho "<table border='0' width='100%'><tr>" . "\n";\necho "<td width='15%'>Username</td>" . "\n";\necho "<td width='15%'>Firstname</td>" . "\n";\necho "<td width='15%'>Surname</td>" . "\n";\necho "</tr>\n";\nforeach ($rows as $row) {\n    $row['firstname'] = (is_null($row['firstname']) || $row['firstname'] == "") ? "No Info" : $row['firstname'];\n    $row['lastname'] = (is_null($row['lastname']) || $row['lastname'] == "") ? "No Info" : $row['lastname'];\n\n    var_dump($row['firstname']);\n    var_dump($row['lastname']);\n    \n    echo '<tr>' . "\n";\n    echo '<td><a href="#" onclick="updateByUser(\''. $row['username'] .'\',\''.$subcat.'\')">'.$row['username'].'</a></td>' . "\n";\n    echo '<td><a href="#" onclick="updateByUser(\''. $row['username'] .'\', \''.$subcat.'\')">'.$row['firstname'].'</a></td>' . "\n";\n    echo '<td><a href="#" onclick="updateByUser(\''. $row['username'] .'\', \''.$subcat.'\')">'.$row['lastname'].'</a></td>' . "\n";\n    echo '</tr>' . "\n";\n}\necho "</table>\n";\n\nfunction getRowsByArticleSearch($searchString, $table) {\n    $con = mysqli_connect("localhost","user","password", "database");\n    $recordsQuery = "SELECT username, firstname, lastname FROM $table WHERE lower(username) LIKE ?";\n    if ($getRecords = $con->prepare($recordsQuery)) {\n        $getRecords->bind_param("s", $searchString);\n        $getRecords->execute();\n        $getRecords->bind_result($username, $firstname, $lastname);\n        $rows = array();\n        while ($getRecords->fetch()) {\n            $row = array(\n                'username' => $username,\n                'firstname' => $firstname,\n                'lastname' => $lastname,\n            );\n            $rows[] = $row;\n        }\n        return $rows;\n    } else {\n        print_r($con->error);\n    }\n}\n?>