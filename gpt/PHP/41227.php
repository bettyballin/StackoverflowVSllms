<?php\n$pdo = new PDO('mysql:host=your_host;dbname=your_db', 'username', 'password');\n\n// Calculate scores\n$query = "\n    SELECT \n        i.id,\n        COUNT(v.id) AS votes,\n        DATEDIFF(NOW(), i.created_at) AS age_in_days,\n        (COUNT(v.id) / (DATEDIFF(NOW(), i.created_at) + 1)) AS score\n    FROM \n        illustrations i\n    LEFT JOIN \n        votes v ON i.id = v.illustration_id\n    GROUP BY \n        i.id";\n\n$illustrations = $pdo->query($query)->fetchAll(PDO::FETCH_ASSOC);\n\n// Update scores in a separate table\n$pdo->beginTransaction();\n$pdo->exec("TRUNCATE TABLE illustration_scores");\n\n$insertStmt = $pdo->prepare("INSERT INTO illustration_scores (illustration_id, score) VALUES (:id, :score)");\nforeach ($illustrations as $illustration) {\n    $insertStmt->execute([\n        ':id' => $illustration['id'],\n        ':score' => $illustration['score']\n    ]);\n}\n$pdo->commit();\n?>