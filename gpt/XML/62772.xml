<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://TestIndexMap.Employees">\n    <xsl:key name="employeeKey" match="ns0:Employee" use="concat(@FirstName, '|', @LastName, '|', Schedules/Schedule/@Date_join, '|', Schedules/Schedule/@Date_end)"/>\n\n    <xsl:template match="/">\n        <xsl:copy>\n            <xsl:apply-templates select="ns0:Employees"/>\n        </xsl:copy>\n    </xsl:template>\n\n    <xsl:template match="ns0:Employees">\n        <xsl:copy>\n            <xsl:apply-templates select="ns0:Employee[generate-id() = generate-id(key('employeeKey', concat(@FirstName, '|', @LastName, '|', Schedules/Schedule/@Date_join, '|', Schedules/Schedule/@Date_end))[1])]"/>\n        </xsl:copy>\n    </xsl:template>\n\n    <xsl:template match="ns0:Employee">\n        <xsl:copy>\n            <xsl:copy-of select="@*"/>\n            <Schedules>\n                <xsl:copy-of select="Schedules/Schedule"/>\n            </Schedules>\n        </xsl:copy>\n    </xsl:template>\n</xsl:stylesheet>