<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" version="3.1">\n  <servlet>\n    <servlet-name>jruby-rack</servlet-name>\n    <servlet-class>org.jruby.rack.RackServlet</servlet-class>\n    <init-param>\n      <param-name>rackup</param-name>\n      <param-value>\n        require 'rack'\n        require 'rack/request'\n\n        app = Proc.new do |env|\n          request = Rack::Request.new(env)\n          script_path = File.join(Dir.pwd, 'WEB-INF', 'ruby', request.path_info)\n          if File.exist?(script_path)\n            result = `jruby #{script_path}`\n            [200, {"Content-Type" => "text/html"}, [result]]\n          else\n            [404, {"Content-Type" => "text/html"}, ["File not found"]]\n          end\n        end\n\n        run app\n      </param-value>\n    </init-param>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>jruby-rack</servlet-name>\n    <url-pattern>*.rb</url-pattern>\n  </servlet-mapping>\n</web-app>