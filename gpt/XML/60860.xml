<project name="MyPHPProject" default="deploy" basedir=".">\n    <property name="src.dir" value="src"/>\n    <property name="build.dir" value="build"/>\n    <property name="dist.dir" value="dist"/>\n    <property name="db.user" value="root"/>\n    <property name="db.pass" value="password"/>\n    <property name="db.name" value="my_database"/>\n\n    <!-- Clean the build directory -->\n    <target name="clean">\n        <delete dir="${build.dir}"/>\n        <mkdir dir="${build.dir}"/>\n    </target>\n\n    <!-- Copy source files to the build directory -->\n    <target name="copy">\n        <mkdir dir="${build.dir}"/>\n        <copy todir="${build.dir}">\n            <fileset dir="${src.dir}"/>\n        </copy>\n    </target>\n\n    <!-- Set configuration variables -->\n    <target name="configure">\n        <replace file="${build.dir}/config.php" token="DB_USER" value="${db.user}"/>\n        <replace file="${build.dir}/config.php" token="DB_PASS" value="${db.pass}"/>\n        <replace file="${build.dir}/config.php" token="DB_NAME" value="${db.name}"/>\n    </target>\n\n    <!-- Install or reload the database -->\n    <target name="database">\n        <exec executable="mysql">\n            <arg value="-u${db.user}"/>\n            <arg value="-p${db.pass}"/>\n            <arg value="${db.name}"/>\n            <arg value="< ${build.dir}/sql/install.sql"/>\n        </exec>\n    </target>\n\n    <!-- Generate virtual host configuration -->\n    <target name="vhost">\n        <copy file="vhost-template.conf" tofile="/etc/apache2/sites-available/${db.name}.conf"/>\n        <replace file="/etc/apache2/sites-available/${db.name}.conf" token="PROJECT_ROOT" value="${build.dir}"/>\n        <exec executable="a2ensite">\n            <arg value="${db.name}.conf"/>\n        </exec>\n        <exec executable="systemctl">\n            <arg value="reload apache2"/>\n        </exec>\n    </target>\n\n    <!-- Main deployment target -->\n    <target name="deploy" depends="clean, copy, configure, database, vhost"/>\n</project>