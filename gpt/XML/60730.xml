<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">\n  <PropertyGroup>\n    <Configuration>Release</Configuration>\n    <Platform>Any CPU</Platform>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <SolutionFiles Include="YourSolution.sln" />\n    <ProjectsToBuild Include="YourLibraryProject.csproj;WebSiteA.csproj;WebSiteB.csproj" />\n  </ItemGroup>\n\n  <Target Name="BuildSolution">\n    <MSBuild Projects="@(SolutionFiles)" Properties="Configuration=$(Configuration);Platform=$(Platform)" Targets="Build" />\n  </Target>\n\n  <Target Name="PublishWebSiteA" DependsOnTargets="BuildSolution">\n    <MSBuild Projects="WebSiteA.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform);DeployOnBuild=true;PublishProfile=FolderProfileA" Targets="Build;Publish" />\n  </Target>\n\n  <Target Name="PublishWebSiteB" DependsOnTargets="PublishWebSiteA">\n    <MSBuild Projects="WebSiteB.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform);DeployOnBuild=true;PublishProfile=FolderProfileB" Targets="Build;Publish" />\n  </Target>\n\n  <Target Name="PublishAll" DependsOnTargets="PublishWebSiteB" />\n</Project>