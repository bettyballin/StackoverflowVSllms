<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n  <xsl:output method="xml" indent="yes"/>\n\n  <!-- Template to match 'a' nodes that have a 'b' subnode with type="foo" and value="1" -->\n  <xsl:template match="/">\n    <result>\n      <xsl:for-each select="//a[b[@type='foo' and @value='1']]">\n        <xsl:copy-of select="."/>\n      </xsl:for-each>\n    </result>\n  </xsl:template>\n\n</xsl:stylesheet>