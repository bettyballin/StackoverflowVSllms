<div id="recipe-status"><!-- I want form validation errors to go here --></div>\n<div id="recipe">\n  <%= form_remote_tag(\n        :url => { :action => 'import', :id => @recipe.id },\n        :before => "Element.show('wait-indicator')",\n        :success => "handleSuccess(request)",\n        :failure => "handleFailure(request)"\n      ) %>\n  <!-- Form goes here, I want this to be replaced if the submit succeeds -->\n</div>\n\n<script type="text/javascript">\n  function handleSuccess(request) {\n    var response = JSON.parse(request.responseText);\n    if (response.status === 'success') {\n      // Update the form div with response content\n      $('recipe').innerHTML = response.content;\n    } else if (response.status === 'error') {\n      // Update the status div with validation errors\n      $('recipe-status').innerHTML = response.errors.join('<br>');\n    }\n    Element.hide('wait-indicator');\n  }\n\n  function handleFailure(request) {\n    alert('Unable to import recipes at present');\n    Element.hide('wait-indicator');\n  }\n</script>