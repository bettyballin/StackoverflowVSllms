def generate_file_list(files)\n  file_tree = {}\n\n  files.each do |file|\n    parts = file.split('/')\n    current = file_tree\n\n    parts.each_with_index do |part, index|\n      if index == parts.size - 1\n        current[part] = nil\n      else\n        current[part] ||= {}\n        current = current[part]\n      end\n    end\n  end\n\n  generate_html(file_tree)\nend\n\ndef generate_html(file_tree, path = '')\n  html = "<ul>\n"\n\n  file_tree.each do |key, value|\n    if value.nil?\n      full_path = "#{path}#{key}"\n      html += "  <li><input type='checkbox' value='#{full_path}'> #{key}</li>\n"\n    else\n      full_path = "#{path}#{key}/"\n      html += "  <li>#{key}\n"\n      html += generate_html(value, full_path)\n      html += "  </li>\n"\n    end\n  end\n\n  html += "</ul>\n"\n  html\nend\n\nfiles = ['file1', 'dir1/file2', 'dir1/subdir1/file3']\nputs generate_file_list(files)