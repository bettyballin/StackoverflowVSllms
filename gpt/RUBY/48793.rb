<!-- Assure that your datetime_select fields have IDs -->\n<%= datetime_select 'reservation', 'pick_up_time', id: 'pick_up_time' %>\n<%= datetime_select 'reservation', 'return_time', id: 'return_time' %>\n\n<% with = "'amount=' + value + '&item=#{item.id.to_s}' + '&pick_up_time=' + encodeURIComponent(document.getElementById('pick_up_time').value) + '&return_time=' + encodeURIComponent(document.getElementById('return_time').value)" %>\n<%= text_field_tag "reservation[#{prefix}reserved_items][#{item.id}]", get_amount_value(item, @reservation), :size => 3, :onchange => remote_function(:url => { :controller => :items, :action => :availability }, :with => with, :update => availability_url) %>