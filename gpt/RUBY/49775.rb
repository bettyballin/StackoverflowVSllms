# In your Rails controller\nbefore_action :restrict_access_by_ip_and_api_key\n\nprivate\n\ndef restrict_access_by_ip_and_api_key\n  allowed_ips = ['192.168.1.100', '192.168.1.101'] # Replace with your allowed local IPs\n  allowed_api_keys = ['your_api_key_1', 'your_api_key_2'] # Replace with your actual API keys\n\n  unless allowed_ips.include?(request.remote_ip) && allowed_api_keys.include?(request.headers['X-Api-Key'])\n    render json: { error: 'Forbidden' }, status: :forbidden\n  end\nend