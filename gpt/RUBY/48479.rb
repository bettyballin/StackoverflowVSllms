require 'fileutils'\n\n# Define the base directory\nbase_dir = '/photos'\n\n# Traverse the directories and rename files\nDir.glob("#{base_dir}/*/*/*").each do |file_path|\n  if file_path =~ %r{#{base_dir}/(\d+)/(original|thumb)/.*\.jpg}\n    dir_number = $1\n    sub_dir = $2\n\n    # Construct the new file name\n    new_file_path = "#{base_dir}/#{dir_number}/#{sub_dir}.jpg"\n\n    # Rename the file\n    FileUtils.mv(file_path, new_file_path)\n    puts "Renamed #{file_path} to #{new_file_path}"\n  end\nend