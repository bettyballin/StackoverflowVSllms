# app/models/word.rb\nclass Word < ActiveRecord::Base\n  has_many :word1_links, class_name: 'Link', foreign_key: 'word1_id'\n  has_many :word2_links, class_name: 'Link', foreign_key: 'word2_id'\n\n  has_many :word1_synonyms, through: :word1_links, source: :word2\n  has_many :word2_synonyms, through: :word2_links, source: :word1\n\n  def synonyms\n    word1_synonyms + word2_synonyms\n  end\nend\n\n# app/models/link.rb\nclass Link < ActiveRecord::Base\n  belongs_to :word1, class_name: 'Word'\n  belongs_to :word2, class_name: 'Word'\nend