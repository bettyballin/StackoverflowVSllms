require 'socket'\n\nserver = TCPServer.new('127.0.0.1', 8080)\n\nloop do\n  client = server.accept\n\n  request = client.gets\n  next if request.nil?\n\n  method, path, version = request.split(' ')\n  host = path.split('/')[2]\n\n  proxy_socket = TCPSocket.new(host, 80)\n  proxy_socket.print("#{method} #{path} #{version}\r\n")\n\n  while line = client.gets\n    proxy_socket.print(line)\n    break if line == "\r\n"\n  end\n\n  while line = proxy_socket.gets\n    client.print(line)\n  end\n\n  proxy_socket.close\n  client.close\nend