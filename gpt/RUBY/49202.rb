require 'zip'\n\nclass StatisticsController < ApplicationController\n  def download_page\n    filename = "statistics_page.zip"\n    temp_file = Tempfile.new(filename)\n\n    begin\n      # Generate the HTML content\n      html_content = render_to_string(template: "statistics/show", layout: false)\n\n      # Create a zip file containing the HTML and assets\n      Zip::OutputStream.open(temp_file.path) do |zip|\n        # Add the HTML file\n        zip.put_next_entry("statistics_page.html")\n        zip.write(html_content)\n\n        # Add CSS files\n        # Assuming you have a method to get the paths of the CSS files\n        css_files.each do |css_file|\n          zip.put_next_entry(css_file)\n          zip.write(File.read(Rails.root.join("public", css_file)))\n        end\n\n        # Add image files\n        # Assuming you have a method to get the paths of the image files\n        image_files.each do |image_file|\n          zip.put_next_entry(image_file)\n          zip.write(File.read(Rails.root.join("public", image_file)))\n        end\n      end\n\n      # Send the zip file to the user\n      send_data File.read(temp_file.path), type: 'application/zip', disposition: 'attachment', filename: filename\n    ensure\n      temp_file.close\n      temp_file.unlink\n    end\n  end\n\n  private\n\n  def css_files\n    [\n      "assets/stylesheets/application.css",\n      # Add more CSS file paths as needed\n    ]\n  end\n\n  def image_files\n    [\n      "assets/images/logo.png",\n      # Add more image file paths as needed\n    ]\n  end\nend