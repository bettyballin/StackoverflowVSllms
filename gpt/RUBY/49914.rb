# app/models/publication.rb\nclass Publication < ApplicationRecord\n  belongs_to :writing, polymorphic: true\n\n  has_many :reference_citations, foreign_key: :reference_id, class_name: 'ReferenceCitation'\n  has_many :citations, through: :reference_citations, source: :citation\n\n  has_many :inverse_reference_citations, foreign_key: :citation_id, class_name: 'ReferenceCitation'\n  has_many :referenced_by, through: :inverse_reference_citations, source: :reference\nend\n\n# app/models/reference_citation.rb\nclass ReferenceCitation < ApplicationRecord\n  belongs_to :reference, class_name: 'Publication'\n  belongs_to :citation, class_name: 'Publication'\nend\n\n# app/models/book.rb\nclass Book < ApplicationRecord\n  has_many :publications, as: :writing\nend\n\n# app/models/chapter.rb\nclass Chapter < ApplicationRecord\n  has_many :publications, as: :writing\nend\n\n# app/models/article.rb\nclass Article < ApplicationRecord\n  has_many :publications, as: :writing\nend