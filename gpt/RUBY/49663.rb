module TextTruncationHelper\n  def smart_truncate(text, options = {})\n    sentence_count = options[:sentences]\n    word_count = options[:words]\n\n    if sentence_count\n      truncated_text = text.split(/(?<=\.)/)[0...sentence_count].join.strip\n    elsif word_count\n      truncated_text = text.split(/\s+/)[0...word_count].join(" ") + (text.split(/\s+/).length > word_count ? "..." : "")\n    else\n      truncated_text = text\n    end\n\n    truncated_text\n  end\nend\n\n# Usage examples:\ninclude TextTruncationHelper\n\ntext = "Once upon a time in a world far far away. And they found that many people were sleeping better."\nputs smart_truncate(text, sentences: 1)\n# => "Once upon a time in a world far far away."\n\nputs smart_truncate(text, words: 12)\n# => "Once upon a time in a world far far away. And they found that many ..."