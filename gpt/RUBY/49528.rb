# app/channels/appearance_channel.rb\nclass AppearanceChannel < ApplicationCable::Channel\n  def subscribed\n    stream_from "appearance_channel"\n    current_user.update(online: true)\n  end\n\n  def unsubscribed\n    current_user.update(online: false)\n  end\nend\n\n# app/models/user.rb\nclass User < ApplicationRecord\n  # Add an online boolean field to the users table\n  attribute :online, :boolean, default: false\nend\n\n# To get online users\ndef online_users\n  User.where(online: true)\nend