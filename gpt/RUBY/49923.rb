class User < ApplicationRecord\n  before_save :store_old_email\n  after_save :sync_with_mailchimp, if: :saved_change_to_email?\n\n  private\n\n  def store_old_email\n    @old_email = email_was if email_changed?\n  end\n\n  def sync_with_mailchimp\n    if @old_email != email\n      # Assume update_mailchimp_api is a method that handles the API call\n      update_mailchimp_api(self.email)\n    end\n  end\n\n  def update_mailchimp_api(new_email)\n    # Example Mailchimp API call\n    gibbon = Gibbon::Request.new(api_key: 'your_mailchimp_api_key')\n    gibbon.lists('your_list_id').members(Digest::MD5.hexdigest(new_email.downcase)).upsert(body: { email_address: new_email, status: "subscribed" })\n  end\nend