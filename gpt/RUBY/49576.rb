require 'faraday'\nrequire 'faraday_middleware'\n\nclass TreasureHuntClient\n  def initialize\n    @conn = Faraday.new(url: 'http://site.com') do |faraday|\n      faraday.request :xml  # encode request bodies as XML\n      faraday.response :logger  # log requests and responses\n      faraday.adapter Faraday.default_adapter  # make requests with Net::HTTP\n    end\n  end\n\n  def get_treasure_hunts(params)\n    response = @conn.post('/gettreasurehunts') do |req|\n      req.headers['Content-Type'] = 'application/xml'\n      req.body = params.to_xml(root: 'request')\n    end\n    response.body\n  end\nend\n\nclient = TreasureHuntClient.new\nparams = { id: 123, other_param: 'value' }\nresponse = client.get_treasure_hunts(params)\nputs response