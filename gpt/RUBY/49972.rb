def aggregate(feeds, time_limit)\n  return [] if feeds.blank?\n\n  result = []\n  bin = []\n  time_limit = time_limit.to_i.seconds  # Ensure time_limit is in seconds\n  feeds = feeds.sort_by { |f| -f.created_at.to_i }\n  bin_time = feeds.first.created_at\n\n  feeds.each do |feed|\n    if (bin_time - feed.created_at) < time_limit\n      bin << feed\n    else\n      result << [bin_time, bin]\n      bin_time = feed.created_at\n      bin = [feed]\n    end\n  end\n\n  result << [bin_time, bin] unless bin.empty?\n  result\nend