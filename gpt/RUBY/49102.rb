# Migration for creating questions table\nclass CreateQuestions < ActiveRecord::Migration[6.1]\n  def change\n    create_table :questions do |t|\n      t.string :title\n      t.text :body\n      t.timestamps\n    end\n  end\nend\n\n# Migration for creating votes table\nclass CreateVotes < ActiveRecord::Migration[6.1]\n  def change\n    create_table :votes do |t|\n      t.references :question, null: false, foreign_key: true\n      t.integer :user_id, null: false\n      t.integer :value, null: false # 1 for upvote, -1 for downvote\n      t.timestamps\n    end\n\n    add_index :votes, [:question_id, :user_id], unique: true\n  end\nend\n\n# Question model\nclass Question < ApplicationRecord\n  has_many :votes\n\n  def vote_sum\n    votes.sum(:value)\n  end\nend\n\n# Vote model\nclass Vote < ApplicationRecord\n  belongs_to :question\n  validates :user_id, uniqueness: { scope: :question_id }\nend