require 'active_resource'\nrequire 'nokogiri'\n\nclass User < ActiveResource::Base\n  self.site = "http://example.com"\nend\n\nclass Article < ActiveResource::Base\n  self.site = "http://example.com"\nend\n\ndef fetch_and_parse(url)\n  response = RestClient.get(url)\n  doc = Nokogiri::XML(response.body)\n\n  user_node = doc.at_xpath('//user')\n  article_node = doc.at_xpath('//article')\n\n  user = User.new(user_node.to_hash)\n  article = Article.new(article_node.to_hash)\n\n  return { user: user, article: article }\nend\n\nresult = fetch_and_parse("http://example.com/user/joe/articles/1.xml")\nputs result[:user].inspect\nputs result[:article].inspect