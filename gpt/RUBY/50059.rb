require 'open3'\n\npipe_name = "/tmp/irb_pipe"\n\n# Make sure the named pipe does not already exist\nif File.exist?(pipe_name)\n  File.delete(pipe_name)\nend\n\n# Create the named pipe\nsystem("mkfifo", pipe_name)\n\n# Open the named pipe for reading and writing\nFile.open(pipe_name, "r+") do |pipe|\n  Open3.popen3("irb --noprompt --noreadline") do |stdin, stdout, stderr, wait_thr|\n    Thread.new do\n      while (line = stdout.gets)\n        pipe.puts line\n      end\n    end\n\n    while (command = pipe.gets)\n      stdin.puts command\n    end\n  end\nend\n\n# Clean up\nFile.delete(pipe_name)