# Define the sender factory\nFactoryBot.define do\n  factory :sender do\n    name { "Dummy name" }\n  end\n\n  # Define the message factory\n  factory :message do\n    text { "Dummy text" }\n    association :sender\n\n    # Define a trait for messages with a specific sender\n    trait :with_sender do\n      transient do\n        sender { nil }\n      end\n\n      after(:build) do |message, evaluator|\n        message.sender = evaluator.sender if evaluator.sender\n      end\n    end\n  end\n\n  # Define a factory for my_message that uses the with_sender trait\n  factory :my_message, parent: :message do\n    with_sender\n  end\nend