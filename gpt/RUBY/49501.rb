#!/usr/bin/ruby\n\nrequire 'rubygems'\nrequire 'open-uri'\nrequire 'nokogiri'\n\ndef fetch_and_parse(url)\n  content = open(url).read\n\n  # Try parsing as XML first\n  begin\n    doc = Nokogiri::XML(content) { |config| config.strict }\n    if doc.errors.empty?\n      return doc, 'XML'\n    end\n  rescue Nokogiri::XML::SyntaxError\n    # Fallback to HTML parsing if XML parsing fails\n  end\n\n  # Parse as HTML if XML parsing fails or has errors\n  doc = Nokogiri::HTML(content)\n  return doc, 'HTML'\nend\n\nurl = 'http://weblog.rubyonrails.org/'\ndoc, doc_type = fetch_and_parse(url)\nputs "Parsed document type: #{doc_type}, class: #{doc.class}"