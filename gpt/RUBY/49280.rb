class Link < ActiveRecord::Base\n  # Custom validation method\n  validate :validate_and_format_urls\n\n  # Callback to format URLs before saving\n  before_save :add_http_prefix\n\n  private\n\n  def validate_and_format_urls\n    links = [:link1, :link2, :link3, :link4, :link5]\n    links.each do |link|\n      value = self.send(link)\n      next if value.blank?\n      unless value =~ /\A(http|https|ftp):\/\//\n        errors.add(link, "must start with http://, https://, or ftp://")\n      end\n    end\n  end\n\n  def add_http_prefix\n    links = [:link1, :link2, :link3, :link4, :link5]\n    links.each do |link|\n      value = self.send(link)\n      next if value.blank?\n      unless value =~ /\A(http|https|ftp):\/\//\n        self.send("#{link}=", "http://#{value}")\n      end\n    end\n  end\nend