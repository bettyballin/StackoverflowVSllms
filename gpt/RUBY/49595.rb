require 'nokogiri'\n\ndef get_pair(xml_str, key_xpath, value_xpath)\n  xml_doc = Nokogiri::XML(xml_str)\n\n  xml_doc.xpath(key_xpath).each do |key_node|\n    value_node = key_node.xpath(value_xpath).first\n    puts "#{key_node.value} #{value_node.value}" if value_node\n  end\nend\n\nxml_str = <<-XML\n<root>\n  <add key="A" value="B" />\n  <add key="C" value="D" />\n  <add foo="E" bar="F" />\n</root>\nXML\n\nget_pair(xml_str, "//*/@key", "../@value")\nget_pair(xml_str, "//*/@foo", "../@bar")