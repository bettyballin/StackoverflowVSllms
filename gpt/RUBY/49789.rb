class User < ApplicationRecord\n  has_many :ownerships\n  has_many :miniatures, through: :ownerships, uniq: true, conditions: "ownerships.have_count > 0"\n  has_many :favorites, through: :ownerships, source: :miniature, uniq: true, conditions: "ownerships.favorite = true"\nend\n\nclass Miniature < ApplicationRecord\n  has_many :ownerships\n  has_many :owners, through: :ownerships, source: :user, uniq: true, conditions: "ownerships.have_count > 0"\nend\n\nclass Ownership < ApplicationRecord\n  belongs_to :user\n  belongs_to :miniature\nend