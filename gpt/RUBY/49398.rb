require 'nokogiri'\n\nxml = <<-XML\n<samlp:LogoutRequest ID="123456789" Version="2.0" IssueInstant="200904051217" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">\n  <saml:NameID>@NOT_USED@</saml:NameID>\n  <samlp:SessionIndex>abcdefg</samlp:SessionIndex>\n</samlp:LogoutRequest>\nXML\n\nXPATH_QUERY = "//samlp:LogoutRequest[@ID='123456789' and @Version='2.0']/samlp:SessionIndex"\nSAML_XMLNS = 'urn:oasis:names:tc:SAML:2.0:assertion'\nSAMLP_XMLNS = 'urn:oasis:names:tc:SAML:2.0:protocol'\n\ndoc = Nokogiri::XML(xml)\nsession_index = doc.xpath(XPATH_QUERY, 'saml' => SAML_XMLNS, 'samlp' => SAMLP_XMLNS).text\nputs session_index