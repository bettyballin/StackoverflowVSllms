<!-- app/views/users/new.html.erb -->\n<%= form_with(model: @user, url: users_path, local: false) do |form| %>\n  <div id="form-errors"></div>\n  \n  <div class="field">\n    <%= form.label :email %>\n    <%= form.text_field :email %>\n  </div>\n\n  <div class="actions">\n    <%= form.submit "Submit" %>\n  </div>\n<% end %>\n\n<script>\n  document.addEventListener("turbolinks:load", function() {\n    const form = document.querySelector('form');\n    \n    form.addEventListener('ajax:success', function(event) {\n      const [data, status, xhr] = event.detail;\n      document.getElementById('form-errors').innerHTML = '';\n      alert(data.message);\n    });\n\n    form.addEventListener('ajax:error', function(event) {\n      const [data, status, xhr] = event.detail;\n      const errors = data.errors.join(', ');\n      document.getElementById('form-errors').innerHTML = `<div class="error">${errors}</div>`;\n    });\n  });\n</script>