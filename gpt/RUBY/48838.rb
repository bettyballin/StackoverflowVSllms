<%= submit_to_remote(\n    "save_widget",\n    "Save Widget & Generate Embed Code",\n    {\n        :url => widgets_url(:user_id => @user.id),\n        :update => "widget_form",\n        :method => :POST,\n        :html => {\n            :id => "save_widget_button",\n            :onclick => "this.value='Saving...'; this.disabled = 'true';",\n            :style => "width: 220px;"\n        },\n        :complete => "\n            $('save_widget_button').disabled='';\n            $('save_widget_button').value='Save Widget & Generate Embed Code';\n            var last_id = $j('select#widget_id').children(':last').attr('value');\n            alert(widget_objects[last_id]);\n        ",\n        :success => "\n            // Update the widget_objects JavaScript variable\n            widget_objects = <%= @widget_objects.to_json %>;\n            reportMessage('success', request.headerJSON.success, 'save_widget_status');\n            $('band_form').reset();\n        ",\n        :failure => "\n            reportMessage('failure', request.headerJSON.errors, 'save_widget_status');\n        "\n    }\n) %>