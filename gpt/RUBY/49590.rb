class Order < ActiveRecord::Base\n  has_many :previous_addresses\n  has_one :applicant\n  has_one :current_address\n\n  validate :validate_applicant_based_on_company\n\n  private\n\n  def validate_applicant_based_on_company\n    if company == 200\n      validates_length_of :middle_name, maximum: 20, allow_nil: true\n    elsif company == 201\n      validates_length_of :middle_name, maximum: 1, allow_nil: true\n    end\n  end\nend