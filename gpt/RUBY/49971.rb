module FormattedDate\n  extend ActiveSupport::Concern\n\n  included do\n    after_initialize :define_formatted_date_methods\n  end\n\n  private\n\n  def define_formatted_date_methods\n    datetime_attributes = self.class.columns.select { |c| c.type == :datetime }.map(&:name)\n\n    datetime_attributes.each do |attribute|\n      define_singleton_method("formatted_#{attribute}") do\n        value = read_attribute(attribute)\n        value ? value.to_s(:date) : nil\n      end\n    end\n  end\nend