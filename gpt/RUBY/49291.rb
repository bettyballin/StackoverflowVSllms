God.watch do |w|\n  w.name = "myapp"\n  w.start = "/etc/init.d/myapp start"\n  w.stop = "/etc/init.d/myapp stop"\n  w.pid_file = "/var/run/myapp.pid"\n\n  w.start_grace = 10.seconds\n  w.restart_grace = 10.seconds\n\n  w.interval = 30.seconds\n\n  w.uid = 'www-data'\n  w.gid = 'www-data'\n\n  w.env = { 'RAILS_ENV' => 'production' }\n\n  w.behavior(:clean_pid_file)\n\n  w.start_if do |start|\n    start.condition(:process_running) do |c|\n      c.interval = 5.seconds\n      c.running = false\n    end\n  end\n\n  w.restart_if do |restart|\n    restart.condition(:memory_usage) do |c|\n      c.above = 200.megabytes\n      c.times = [3, 5]\n    end\n\n    restart.condition(:cpu_usage) do |c|\n      c.above = 50.percent\n      c.times = [3, 5]\n    end\n  end\nend