class Project < ApplicationRecord\n  has_many :tasks, inverse_of :project\n  accepts_nested_attributes_for :tasks, reject_if: :all_blank, allow_destroy: true\n\n  validates :title, presence: true\n  validate :validate_tasks_count\n\n  private\n\n  def validate_tasks_count\n    if tasks.reject(&:marked_for_destruction?).size < 2\n      errors.add(:tasks, "must have at least 2 valid tasks")\n    end\n  end\nend\n\nclass Task < ApplicationRecord\n  belongs_to :project\n  validates :title, presence: true\nend