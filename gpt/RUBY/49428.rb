class QueryForm\n  include ActiveModel::Model\n\n  attr_accessor :name, :image, :analysis_type, :results_to_generate, :graph_type, :graph_width, :theme\n\n  validates :name, presence: true\n  validates :image, presence: true, if: -> { required_for_image? }\n  validates :graph_type, :graph_width, :theme, presence: true, if: -> { required_for_graph? }\n\n  def required_for_image?\n    # logic to check if image validations are needed\n  end\n\n  def required_for_graph?\n    analysis_type.to_s == 'development' || results_to_generate&.include?('graph')\n  end\nend