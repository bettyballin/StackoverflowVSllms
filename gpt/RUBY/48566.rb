# spec/support/matchers/have_access_control.rb\nRSpec::Matchers.define :have_access_control do |expected|\n  match do |actual|\n    roles = [:super_admin, :admin, :editor, :user]\n    @errors = []\n\n    roles.each do |role|\n      user = create(:user, role: role)\n      sign_in user\n\n      actual.call\n\n      if expected[:allowed].include?(role)\n        if response.status != 200\n          @errors << "#{role} should have been allowed but was not"\n        end\n      elsif expected[:disallowed].include?(role)\n        if response.status == 200\n          @errors << "#{role} should have been disallowed but was not"\n        end\n      end\n\n      sign_out user\n    end\n\n    @errors.empty?\n  end\n\n  failure_message do\n    @errors.join("\n")\n  end\nend