class Report < ActiveRecord::Base\n  def foo\n    if read_attribute(:foo).nil?\n      @foo = (expensive_sql_query)\n      write_attribute(:foo, @foo)\n      save # Ensure the record is saved after writing the attribute\n    else\n      @foo ||= read_attribute(:foo)\n    end\n    @foo\n  end\n\n  private\n\n  def expensive_sql_query\n    # Your expensive SQL query logic here\n  end\nend