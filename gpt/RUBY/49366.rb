class MySymbol\n  @table = {}\n\n  class << self\n    attr_accessor :table\n  end\n\n  def initialize(str)\n    @str = str\n  end\n\n  def to_s\n    @str\n  end\n\n  def ==(other)\n    self.object_id == other.object_id\n  end\nend\n\nclass String\n  def my_intern\n    table = MySymbol.table\n    unless table.has_key?(self)\n      table[self] = MySymbol.new(self)\n    end\n    table[self]\n  end\nend\n\nputs "foo".my_inter