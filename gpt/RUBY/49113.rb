def create\n  @task = Task.new(task_params)\n  @note = @task.notes.build(note_params)\n\n  if @task.valid? && @note.valid?\n    @task.save\n    redirect_to tasks_path\n  else\n    # Preserve errors from @note to @task, but avoid duplication\n    @task.errors.delete(:notes)\n    @note.errors.full_messages.each do |msg|\n      @task.errors.add(:base, "Note error: #{msg}")\n    end\n    render :new\n  end\nend\n\nprivate\n\ndef task_params\n  params.require(:task).permit(:your_task_attributes_here)\nend\n\ndef note_params\n  params.require(:note).permit(:body)\nend