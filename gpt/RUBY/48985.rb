input {\n  beats {\n    port => 5044\n  }\n}\n\nfilter {\n  if [fileset][module] == "iis" {\n    grok {\n      match => { "message" => "%{TIMESTAMP_ISO8601:timestamp} %{IPORHOST:client_ip} %{WORD:method} %{URIPATH:request} %{NUMBER:response} %{NUMBER:bytes}" }\n    }\n    date {\n      match => [ "timestamp", "yyyy-MM-dd HH:mm:ss" ]\n    }\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts => ["localhost:9200"]\n    index => "iis-logs-%{+YYYY.MM.dd}"\n  }\n  stdout { codec => rubydebug }\n}