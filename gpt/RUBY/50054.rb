require 'haml'\n\nmodule CustomHaml\n  class CustomEngine < Haml::TempleEngine\n    def compile_attributes(attributes)\n      attributes = attributes.sort_by { |k, v| k.to_s } # Sort attributes alphabetically if needed\n      attributes_string = attributes.map do |attr, value|\n        "#{attr}=\"#{value}\""\n      end.join(' ')\n      "{ #{attributes_string} }"\n    end\n  end\nend\n\n# Use the custom engine\nHaml::Template.options[:ugly] = true\nHaml::Template.options[:format] = :html5\n\ntemplate = <<HAML\n!!! XML\n%html{html_attrs('hr-HR')}\n  %head\n    %title Some title\n    %meta{'http-equiv' => 'Content-Type', :content => 'text/html; charset=utf-8'}/\n    %meta{'name' => "description", :content => 'Some title - YO!'}/\n    = stylesheets\n    = javascripts('test', :other)\n  %body\n    = yield\nHAML\n\nengine = CustomHaml::CustomEngine.new(template)\nputs engine.render