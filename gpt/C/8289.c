#include <stdio.h>\n#include <string.h>\n\nvoid format_float(char *buf, size_t buf_size, float value) {\n    if (value == (int)value) {\n        snprintf(buf, buf_size, "%d", (int)value);\n    } else {\n        snprintf(buf, buf_size, "%.6f", value);\n        // Remove trailing zeros\n        for (int i = strlen(buf) - 1; i > 0 && buf[i] == '0'; i--) {\n            buf[i] = '\0';\n        }\n        // Remove trailing decimal point if there are no fractional digits\n        if (buf[strlen(buf) - 1] == '.') {\n            buf[strlen(buf) - 1] = '\0';\n        }\n    }\n}\n\nint main() {\n    char out[50];\n    float myFloat = 15.6f;\n    float myInt = 5.0f;\n    float myLarge = 7000000.0f;\n\n    format_float(out, sizeof(out), myFloat);\n    printf("my float is %s\n", out);\n\n    format_float(out, sizeof(out), myInt);\n    printf("my int is %s\n", out);\n\n    format_float(out, sizeof(out), myLarge);\n    printf("my large is %s\n", out);\n\n    // Example with mixed format string\n    int myIntVal = 10;\n    sprintf(out, "%d ", myIntVal);\n    size_t len = strlen(out);\n    format_float(out + len, sizeof(out) - len, myFloat);\n    printf("mixed format: %s\n", out);\n\n    return 0;\n}