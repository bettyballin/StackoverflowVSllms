#include <emmintrin.h>\n#include <stddef.h>\n\nint fast_memcmp(const void *s1, const void *s2, size_t n) {\n    const __m128i *p1 = (const __m128i*)s1;\n    const __m128i *p2 = (const __m128i*)s2;\n    \n    size_t i;\n    for (i = 0; i < n / 16; ++i) {\n        __m128i eq = _mm_cmpeq_epi8(p1[i], p2[i]);\n        int mask = _mm_movemask_epi8(eq);\n        if (mask != 0xFFFF) {\n            return memcmp(&p1[i], &p2[i], 16);\n        }\n    }\n\n    // Handle the remaining bytes\n    const unsigned char *c1 = (const unsigned char*)&p1[i];\n    const unsigned char *c2 = (const unsigned char*)&p2[i];\n    for (i = (n / 16) * 16; i < n; ++i) {\n        if (c1[i] != c2[i]) {\n            return c1[i] - c2[i];\n        }\n    }\n    return 0;\n}