#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#define CHUNK_SIZE 4096\n\nvoid computeLPSArray(char* pattern, int M, int* lps) {\n    int length = 0;\n    int i = 1;\n    lps[0] = 0;\n\n    while (i < M) {\n        if (pattern[i] == pattern[length]) {\n            length++;\n            lps[i] = length;\n            i++;\n        } else {\n            if (length != 0) {\n                length = lps[length - 1];\n            } else {\n                lps[i] = 0;\n                i++;\n            }\n        }\n    }\n}\n\nvoid KMPSearch(char* pattern, char* text, int* lps, int chunk_offset) {\n    int M = strlen(pattern);\n    int N = strlen(text);\n\n    int i = 0;\n    int j = 0;\n    while (i < N) {\n        if (pattern[j] == text[i]) {\n            j++;\n            i++;\n        }\n        if (j == M) {\n            printf("Found pattern at index %d\n", i - j + chunk_offset);\n            j = lps[j - 1];\n        } else if (i < N && pattern[j] != text[i]) {\n            if (j != 0)\n                j = lps[j - 1];\n            else\n                i++;\n        }\n    }\n}\n\nvoid searchInFile(const char* filename, const char* pattern) {\n    FILE* file = fopen(filename, "rb");\n    if (file == NULL) {\n        perror("Failed to open file");\n        return;\n    }\n\n    int M = strlen(pattern);\n    int* lps = (int*) malloc(M * sizeof(int));\n    computeLPSArray(pattern, M, lps);\n\n    char* buffer = (char*) malloc(CHUNK_SIZE + M - 1);\n    if (buffer == NULL) {\n        perror("Failed to allocate buffer");\n        fclose(file);\n        free(lps);\n        return;\n    }\n\n    size_t bytesRead;\n    size_t chunk_offset = 0;\n    while ((bytesRead = fread(buffer + M - 1, 1, CHUNK_SIZE, file)) > 0) {\n        buffer[bytesRead + M - 1] = '\0';\n        KMPSearch(pattern, buffer, lps, chunk_offset);\n\n        chunk_offset += bytesRead;\n\n        // Move the last M-1 characters to the beginning of the buffer\n        memmove(buffer, buffer + CHUNK_SIZE, M - 1);\n    }\n\n    free(buffer);\n    free(lps);\n    fclose(file);\n}\n\nint main() {\n    const char* filename = "largefile.txt";\n    const char* pattern = "your_pattern";\n    \n    searchInFile(filename, pattern);\n    \n    return 0;\n}