#define _GNU_SOURCE\n#include <stdio.h>\n#include <stdlib.h>\n#include <dlfcn.h>\n#include <unistd.h>\n#include <string.h>\n#include <time.h>\n#include <sys/types.h>\n\n// Original write function pointer\nssize_t (*original_write)(int fd, const void *buf, size_t count);\n\nssize_t write(int fd, const void *buf, size_t count) {\n    // Get the process name\n    char proc_name[256];\n    snprintf(proc_name, sizeof(proc_name), "/proc/%d/comm", getpid());\n    FILE *f = fopen(proc_name, "r");\n    if (!f) return -1;\n    fgets(proc_name, sizeof(proc_name), f);\n    fclose(f);\n    proc_name[strcspn(proc_name, "\n")] = 0; // Remove newline\n\n    // Get the current timestamp\n    time_t t = time(NULL);\n    struct tm *tm_info = localtime(&t);\n    char time_str[26];\n    strftime(time_str, 26, "%Y-%m-%d %H:%M:%S", tm_info);\n\n    // Create the prefix\n    char prefix[512];\n    snprintf(prefix, sizeof(prefix), "[%s %d %s] ", proc_name, getpid(), time_str);\n\n    // Create the new buffer with the prefix\n    char new_buf[1024];\n    snprintf(new_buf, sizeof(new_buf), "%s%.*s", prefix, (int)count, (char *)buf);\n\n    // Call the original write function\n    if (!original_write) {\n        original_write = dlsym(RTLD_NEXT, "write");\n    }\n    return original_write(fd, new_buf, strlen(new_buf));\n}