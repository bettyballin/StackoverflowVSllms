typedef struct _CGPoint {\n    double x;\n    double y;\n} CGPoint;\n\ntypedef struct _CGSize {\n    double width;\n    double height;\n} CGSize;\n\ntypedef struct _CGRect {\n    CGPoint origin;\n    CGSize size;\n} CGRect;\n\ntypedef enum _NSComparisonResult {\n    NSOrderedAscending = -1,\n    NSOrderedSame,\n    NSOrderedDescending\n} NSComparisonResult;\n\nstatic inline NSComparisonResult CGRectCompareRowsFirst(const void *s1, const void *s2) {\n    CGRect r1 = *(CGRect *)s1, r2 = *(CGRect *)s2;\n\n    if (r1.origin.y < r2.origin.y)\n        return NSOrderedAscending;\n    else if (r1.origin.y > r2.origin.y)\n        return NSOrderedDescending;\n    else {\n        if (r1.origin.x < r2.origin.x)\n            return NSOrderedAscending;\n        else if (r1.origin.x > r2.origin.x)\n            return NSOrderedDescending;\n        else\n            return NSOrderedSame;\n    }\n}\n\nstatic void quick(CGRect *left, CGRect *right, NSComparisonResult(*f)(const void *, const void *)) {\n    if (right > left) {\n        CGRect pivot = left[(right - left) / 2];\n        CGRect *r = right, *l = left;\n        do {\n            while (f(&*l, &pivot) == NSOrderedAscending) l++;\n            while (f(&*r, &pivot) == NSOrderedDescending) r--;\n            if (l <= r) {\n                CGRect t = *l;\n                *l++ = *r;\n                *r-- = t;\n            }\n        } while (l <= r);\n        quick(left, r, f);\n        quick(l, right, f);\n    }\n}\n\nstatic void CGRectSortRowsFirst(CGRect *array, int length) {\n    quick(array, array + length - 1, CGRectCompareRowsFirst);\n}