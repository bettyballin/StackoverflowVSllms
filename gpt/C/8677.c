#include <stdio.h>\n#include <stdlib.h>\n\nint main() {\n    FILE *fp;\n    char path[1035];\n    int status;\n\n    // Open the command for reading\n    fp = popen("ls -l /", "r");\n    if (fp == NULL) {\n        perror("popen failed");\n        exit(EXIT_FAILURE);\n    }\n\n    // Read the output a line at a time and print it to stdout\n    while (fgets(path, sizeof(path)-1, fp) != NULL) {\n        printf("%s", path);\n    }\n\n    // Close the pipe and get the exit status\n    status = pclose(fp);\n    if (status == -1) {\n        perror("pclose failed");\n        exit(EXIT_FAILURE);\n    }\n\n    // Extract and print the exit status\n    if (WIFEXITED(status)) {\n        printf("Command exited with status %d\n", WEXITSTATUS(status));\n    } else {\n        printf("Command did not exit normally\n");\n    }\n\n    return 0;\n}