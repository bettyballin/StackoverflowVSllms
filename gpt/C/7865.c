#include <fcntl.h>\n#include <unistd.h>\n#include <stdio.h>\n#include <stdlib.h>\n\nint main() {\n    int fd = open("example.txt", O_RDWR);\n    if (fd == -1) {\n        perror("open");\n        exit(EXIT_FAILURE);\n    }\n\n    struct flock lock;\n    lock.l_type = F_WRLCK;  // Write lock\n    lock.l_whence = SEEK_SET;\n    lock.l_start = 0;\n    lock.l_len = 0;  // 0 means to lock the entire file\n\n    if (fcntl(fd, F_SETLK, &lock) == -1) {\n        perror("fcntl");\n        close(fd);\n        exit(EXIT_FAILURE);\n    }\n\n    // File is locked\n    printf("File locked.\n");\n\n    // Do work with the file...\n\n    // Unlock the file\n    lock.l_type = F_UNLCK;\n    if (fcntl(fd, F_SETLK, &lock) == -1) {\n        perror("fcntl");\n        close(fd);\n        exit(EXIT_FAILURE);\n    }\n\n    printf("File unlocked.\n");\n    close(fd);\n    return 0;\n}