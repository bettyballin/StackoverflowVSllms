#include <stdio.h>\n#include <stdlib.h>\n\nstruct node {\n    int key1;\n    int key2;\n    struct node* left;\n    struct node* right;\n};\n\n// Utility function to create a new BST node\nstruct node* newNode(int key1, int key2) {\n    struct node* temp = (struct node*)malloc(sizeof(struct node));\n    temp->key1 = key1;\n    temp->key2 = key2;\n    temp->left = temp->right = NULL;\n    return temp;\n}\n\n// Utility function for in-order traversal\nvoid storeInOrder(struct node* root, struct node** arr, int* index) {\n    if (root == NULL)\n        return;\n\n    storeInOrder(root->left, arr, index);\n    arr[(*index)++] = root;\n    storeInOrder(root->right, arr, index);\n}\n\n// Comparator function for sorting nodes by key2\nint compare(const void* a, const void* b) {\n    return (*(struct node**)a)->key2 - (*(struct node**)b)->key2;\n}\n\n// Utility function to build a balanced BST from sorted array\nstruct node* buildBST(struct node** arr, int start, int end) {\n    if (start > end)\n        return NULL;\n\n    int mid = (start + end) / 2;\n    struct node* root = arr[mid];\n    root->left = buildBST(arr, start, mid - 1);\n    root->right = buildBST(arr, mid + 1, end);\n\n    return root;\n}\n\n// Function to rearrange BST based on key2\nstruct node* rearrangeOnKey2(struct node* root) {\n    if (root == NULL)\n        return NULL;\n\n    int n = 0;\n    struct node* temp = root;\n    while (temp != NULL) { // Count nodes\n        n++;\n        temp = temp->left;\n    }\n\n    struct node** arr = (struct node**)malloc(n * sizeof(struct node*));\n    int index = 0;\n    storeInOrder(root, arr, &index);\n\n    qsort(arr, n, sizeof(struct node*), compare);\n\n    return buildBST(arr, 0, n - 1);\n}\n\n// Helper function to print in-order traversal of the BST\nvoid inorder(struct node* root) {\n    if (root != NULL) {\n        inorder(root->left);\n        printf("%d %d\n", root->key1, root->key2);\n        inorder(root->right);\n    }\n}\n\n// Driver code\nint main() {\n    struct node* root = newNode(5, 20);\n    root->left = newNode(3, 15);\n    root->right = newNode(8, 30);\n    root->left->left = newNode(1, 10);\n    root->right->left = newNode(7, 25);\n\n    printf("Original BST (in-order):\n");\n    inorder(root);\n\n    root = rearrangeOnKey2(root);\n\n    printf("\nBST rearranged by key2 (in-order):\n");\n    inorder(root);\n\n    return 0;\n}