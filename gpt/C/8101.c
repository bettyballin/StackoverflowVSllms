uint8_t next_schedule(uint8_t current, uint8_t mask) {\n    uint8_t rotated = current;\n    int bit_count = sizeof(rotated) * 8;  // Number of bits in the bit-string\n\n    for (int i = 0; i < bit_count; i++) {\n        rotated = (rotated << 1) | (rotated >> (bit_count - 1));  // Rotate left\n        if (rotated & mask) {  // Check if rotated bit is in the mask\n            return rotated & mask;  // Return the next scheduled bit\n        }\n    }\n\n    return 0;  // Return 0 if no valid next schedule found\n}