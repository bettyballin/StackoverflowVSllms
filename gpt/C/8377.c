#include <libavcodec/avcodec.h>\n   #include <libavformat/avformat.h>\n   #include <libswscale/swscale.h>\n\n   int main(int argc, char *argv[]) {\n       AVFormatContext *pFormatCtx = NULL;\n       int videoStream, frameFinished;\n       AVCodecContext *pCodecCtx = NULL;\n       AVCodec *pCodec = NULL;\n       AVFrame *pFrame = NULL;\n       AVPacket packet;\n       struct SwsContext *sws_ctx = NULL;\n\n       av_register_all();\n\n       if (avformat_open_input(&pFormatCtx, argv[1], NULL, NULL) != 0)\n           return -1;\n\n       if (avformat_find_stream_info(pFormatCtx, NULL) < 0)\n           return -1;\n\n       av_dump_format(pFormatCtx, 0, argv[1], 0);\n\n       videoStream = -1;\n       for (int i = 0; i < pFormatCtx->nb_streams; i++)\n           if (pFormatCtx->streams[i]->codecpar->codec_type == AVMEDIA_TYPE_VIDEO) {\n               videoStream = i;\n               break;\n           }\n\n       if (videoStream == -1)\n           return -1;\n\n       pCodecCtx = avcodec_alloc_context3(NULL);\n       avcodec_parameters_to_context(pCodecCtx, pFormatCtx->streams[videoStream]->codecpar);\n\n       pCodec = avcodec_find_decoder(pCodecCtx->codec_id);\n       if (pCodec == NULL)\n           return -1;\n\n       if (avcodec_open2(pCodecCtx, pCodec, NULL) < 0)\n           return -1;\n\n       pFrame = av_frame_alloc();\n\n       while (av_read_frame(pFormatCtx, &packet) >= 0) {\n           if (packet.stream_index == videoStream) {\n               avcodec_send_packet(pCodecCtx, &packet);\n               frameFinished = avcodec_receive_frame(pCodecCtx, pFrame);\n               if (frameFinished == 0) {\n                   // Process the decoded frame\n               }\n           }\n           av_packet_unref(&packet);\n       }\n\n       av_frame_free(&pFrame);\n       avcodec_free_context(&pCodecCtx);\n       avformat_close_input(&pFormatCtx);\n\n       return 0;\n   }