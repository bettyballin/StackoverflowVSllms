#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n\nint atomic_write(const char *filename, const char *data) {\n    char temp_filename[256];\n    snprintf(temp_filename, sizeof(temp_filename), "%s.tmp", filename);\n\n    FILE *temp_file = fopen(temp_filename, "w");\n    if (!temp_file) {\n        return -1;\n    }\n\n    if (fwrite(data, sizeof(char), strlen(data), temp_file) < strlen(data)) {\n        fclose(temp_file);\n        unlink(temp_filename);\n        return -1;\n    }\n\n    fclose(temp_file);\n\n    if (rename(temp_filename, filename) != 0) {\n        unlink(temp_filename);\n        return -1;\n    }\n\n    return 0;\n}\n\nint main() {\n    const char *filename = "example.txt";\n    const char *data = "This is some important data.";\n\n    if (atomic_write(filename, data) != 0) {\n        fprintf(stderr, "Failed to write data atomically\n");\n        return EXIT_FAILURE;\n    }\n\n    printf("Data written successfully\n");\n    return EXIT_SUCCESS;\n}