#include <DiskArbitration/DiskArbitration.h>\n#include <CoreFoundation/CoreFoundation.h>\n\nvoid diskAppeared(DADiskRef disk, void *context) {\n    CFDictionaryRef desc = DADiskCopyDescription(disk);\n    if (desc) {\n        CFShow(desc);\n        CFRelease(desc);\n    }\n}\n\nvoid diskDisappeared(DADiskRef disk, void *context) {\n    CFDictionaryRef desc = DADiskCopyDescription(disk);\n    if (desc) {\n        CFShow(desc);\n        CFRelease(desc);\n    }\n}\n\nint main() {\n    DASessionRef session = DASessionCreate(kCFAllocatorDefault);\n    if (!session) {\n        return 1;\n    }\n\n    DARegisterDiskAppearedCallback(session, NULL, diskAppeared, NULL);\n    DARegisterDiskDisappearedCallback(session, NULL, diskDisappeared, NULL);\n\n    CFRunLoopRun();\n    \n    CFRelease(session);\n    return 0;\n}