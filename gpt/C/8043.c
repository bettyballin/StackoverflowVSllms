#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <sys/wait.h>\n#include <semaphore.h>\n#include <fcntl.h>\n\n#define MAX_CHILDREN 10\n\nvoid do_stuff_with(int item) {\n    printf("%d\n", item);\n    sleep(1); // Simulate work\n}\n\nint main() {\n    int items[101];\n    for (int i = 0; i <= 100; i++) {\n        items[i] = i;\n    }\n\n    sem_t *sem = sem_open("/fork_semaphore", O_CREAT, 0644, MAX_CHILDREN);\n    if (sem == SEM_FAILED) {\n        perror("sem_open");\n        exit(EXIT_FAILURE);\n    }\n\n    for (int i = 0; i <= 100; i++) {\n        sem_wait(sem);  // Decrement semaphore\n\n        pid_t pid = fork();\n        if (pid == -1) {\n            perror("fork");\n            exit(EXIT_FAILURE);\n        } else if (pid == 0) {\n            // Child process\n            do_stuff_with(items[i]);\n            sem_post(sem);  // Increment semaphore\n            exit(0);\n        }\n    }\n\n    // Wait for all children to finish\n    for (int i = 0; i <= 100; i++) {\n        wait(NULL);\n    }\n\n    sem_close(sem);\n    sem_unlink("/fork_semaphore");\n\n    return 0;\n}