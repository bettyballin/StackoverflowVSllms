#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <sys/inotify.h>\n#include <limits.h>\n\n#define BUF_LEN (10 * (sizeof(struct inotify_event) + NAME_MAX + 1))\n\nint main(int argc, char *argv[]) {\n    if (argc != 2) {\n        fprintf(stderr, "Usage: %s <file-path>\n", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n    int inotify_fd = inotify_init();\n    if (inotify_fd == -1) {\n        perror("inotify_init");\n        exit(EXIT_FAILURE);\n    }\n\n    int wd = inotify_add_watch(inotify_fd, argv[1], IN_MODIFY);\n    if (wd == -1) {\n        perror("inotify_add_watch");\n        close(inotify_fd);\n        exit(EXIT_FAILURE);\n    }\n\n    printf("Watching %s for changes.\n", argv[1]);\n\n    char buf[BUF_LEN];\n    while (1) {\n        ssize_t num_read = read(inotify_fd, buf, BUF_LEN);\n        if (num_read == 0) {\n            fprintf(stderr, "read() from inotify fd returned 0!\n");\n            exit(EXIT_FAILURE);\n        }\n\n        if (num_read == -1) {\n            perror("read");\n            exit(EXIT_FAILURE);\n        }\n\n        for (char *ptr = buf; ptr < buf + num_read; ) {\n            struct inotify_event *event = (struct inotify_event *) ptr;\n            if (event->mask & IN_MODIFY) {\n                printf("File %s modified.\n", argv[1]);\n            }\n            ptr += sizeof(struct inotify_event) + event->len;\n        }\n    }\n\n    close(inotify_fd);\n    return 0;\n}