#include <stdatomic.h>\n#include <stdbool.h>\n\ntypedef struct {\n    struct my_data data[MAX_QUEUE_LEN];\n    atomic_int head;\n    atomic_int tail;\n} my_queue_t;\n\nmy_queue_t queue;\n\nvoid producer() {\n    // Produce data and update the queue\n    // Ensure memory order is correct for synchronization\n    atomic_fetch_add(&queue.head, 1);\n}\n\nvoid consumer() {\n    while (atomic_load(&queue.head) == atomic_load(&queue.tail)) {\n        // Busy-waiting; use proper memory order\n    }\n    // Consume data from the queue\n    atomic_fetch_add(&queue.tail, 1);\n}