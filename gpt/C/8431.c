#include <pbc/pbc.h>\n#include <pbc/pbc_test.h>\n\nint main(int argc, char **argv) {\n    pairing_t pairing;\n    element_t g, public_key, private_key, id, ciphertext, plaintext;\n    \n    pbc_demo_pairing_init(pairing, argc, argv);\n    \n    element_init_G1(g, pairing);\n    element_init_G1(public_key, pairing);\n    element_init_G1(private_key, pairing);\n    element_init_G1(ciphertext, pairing);\n    element_init_G1(plaintext, pairing);\n    element_init_Zr(id, pairing);\n    \n    // Generate system parameters and master key\n    element_random(g);\n    element_random(public_key);\n    \n    // Derive private key for a given id\n    element_from_hash(id, "user@example.com", strlen("user@example.com"));\n    element_pow_zn(private_key, g, id);\n    \n    // Encrypt a message\n    element_random(plaintext);\n    element_pow_zn(ciphertext, public_key, id);\n    element_mul(ciphertext, plaintext, ciphertext);\n    \n    // Decrypt the message\n    element_pow_zn(plaintext, ciphertext, private_key);\n    \n    element_clear(g);\n    element_clear(public_key);\n    element_clear(private_key);\n    element_clear(ciphertext);\n    element_clear(plaintext);\n    element_clear(id);\n    pairing_clear(pairing);\n    \n    return 0;\n}