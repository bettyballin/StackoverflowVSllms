#include <openssl/rsa.h>\n#include <openssl/pem.h>\n#include <openssl/err.h>\n\nvoid EncryptWithPublicKey(const char* publicKeyFile, const char* plaintext, const char* outputFile)\n{\n    FILE* pubKeyFile = fopen(publicKeyFile, "rb");\n    if (!pubKeyFile)\n    {\n        perror("Failed to open public key file");\n        return;\n    }\n\n    RSA* rsa = PEM_read_RSA_PUBKEY(pubKeyFile, NULL, NULL, NULL);\n    fclose(pubKeyFile);\n\n    if (!rsa)\n    {\n        ERR_print_errors_fp(stderr);\n        return;\n    }\n\n    unsigned char encrypted[256];\n    int result = RSA_public_encrypt(strlen(plaintext), (unsigned char*)plaintext, encrypted, rsa, RSA_PKCS1_OAEP_PADDING);\n    if (result == -1)\n    {\n        ERR_print_errors_fp(stderr);\n        RSA_free(rsa);\n        return;\n    }\n\n    FILE* outFile = fopen(outputFile, "wb");\n    if (!outFile)\n    {\n        perror("Failed to open output file");\n        RSA_free(rsa);\n        return;\n    }\n    fwrite(encrypted, sizeof(unsigned char), result, outFile);\n    fclose(outFile);\n\n    RSA_free(rsa);\n}