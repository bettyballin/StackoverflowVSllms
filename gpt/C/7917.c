typedef enum {\n    STATE_INIT,\n    STATE_WAIT_I2C,\n    STATE_PROCESS_DATA,\n    STATE_SLEEP,\n    STATE_DONE\n} TaskState;\n\ntypedef struct {\n    TaskState currentState;\n    // Additional task-specific data\n} Task;\n\nvoid taskInit(Task *task) {\n    task->currentState = STATE_INIT;\n}\n\nvoid taskRun(Task *task) {\n    switch (task->currentState) {\n        case STATE_INIT:\n            // Initialize I2C communication\n            startI2C();\n            task->currentState = STATE_WAIT_I2C;\n            break;\n        case STATE_WAIT_I2C:\n            // Check if I2C is done\n            if (isI2CDone()) {\n                task->currentState = STATE_PROCESS_DATA;\n            }\n            break;\n        case STATE_PROCESS_DATA:\n            // Process the received data\n            processData();\n            task->currentState = STATE_SLEEP;\n            break;\n        case STATE_SLEEP:\n            // Sleep for a defined period\n            sleep();\n            task->currentState = STATE_DONE;\n            break;\n        case STATE_DONE:\n            // Task completion\n            break;\n    }\n}\n\n// Main scheduler\nvoid scheduler(Task *tasks, int numTasks) {\n    while (1) {\n        for (int i = 0; i < numTasks; i++) {\n            taskRun(&tasks[i]);\n        }\n    }\n}\n\nint main() {\n    Task tasks[NUM_TASKS];\n    \n    for (int i = 0; i < NUM_TASKS; i++) {\n        taskInit(&tasks[i]);\n    }\n\n    scheduler(tasks, NUM_TASKS);\n    return 0;\n}