#include <sys/types.h>\n#include <sys/socket.h>\n#include <sys/un.h>\n#include <stdio.h>\n#include <unistd.h>\n#include <stdlib.h>\n\n#define SOCKET_PATH "/tmp/socket"\n\nvoid recvfd(int socket_fd);\n\nint main(int argc, char *argv[]) {\n    int server_fd, client_fd;\n    struct sockaddr_un addr;\n\n    // Create a Unix domain socket\n    if ((server_fd = socket(AF_UNIX, SOCK_STREAM, 0)) == -1) {\n        perror("socket");\n        exit(EXIT_FAILURE);\n    }\n\n    // Bind the socket to a file path\n    memset(&addr, 0, sizeof(addr));\n    addr.sun_family = AF_UNIX;\n    strncpy(addr.sun_path, SOCKET_PATH, sizeof(addr.sun_path) - 1);\n    unlink(SOCKET_PATH);\n\n    if (bind(server_fd, (struct sockaddr *)&addr, sizeof(addr)) == -1) {\n        perror("bind");\n        close(server_fd);\n        exit(EXIT_FAILURE);\n    }\n\n    // Listen for incoming connections\n    if (listen(server_fd, 5) == -1) {\n        perror("listen");\n        close(server_fd);\n        exit(EXIT_FAILURE);\n    }\n\n    // Accept a connection from a client\n    if ((client_fd = accept(server_fd, NULL, NULL)) == -1) {\n        perror("accept");\n        close(server_fd);\n        exit(EXIT_FAILURE);\n    }\n\n    // Receive the file descriptor from the client\n    recvfd(client_fd);\n\n    close(client_fd);\n    close(server_fd);\n    unlink(SOCKET_PATH);\n    return 0;\n}\n\nvoid recvfd(int socket_fd) {\n    struct msghdr msg = {0};\n    struct cmsghdr *cmsg;\n    char buf[CMSG_SPACE(sizeof(int))];\n    char dummy[1];\n    struct iovec io = { .iov_base = dummy, .iov_len = sizeof(dummy) };\n    int received_fd;\n\n    msg.msg_iov = &io;\n    msg.msg_iovlen = 1;\n    msg.msg_control = buf;\n    msg.msg_controllen = sizeof(buf);\n\n    if (recvmsg(socket_fd, &msg, 0) < 0) {\n        perror("recvmsg");\n        exit(EXIT_FAILURE);\n    }\n\n    cmsg = CMSG_FIRSTHDR(&msg);\n    if (cmsg && cmsg->cmsg_len == CMSG_LEN(sizeof(int)) && cmsg->cmsg_level == SOL_SOCKET && cmsg->cmsg_type == SCM_RIGHTS) {\n        received_fd = *((int *) CMSG_DATA(cmsg));\n        printf("Received file descriptor: %d\n", received_fd);\n    } else {\n        printf("Failed to receive file descriptor\n");\n    }\n}