#include <pthread.h>\n#include <stdio.h>\n\npthread_mutex_t lock_it = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t write_it = PTHREAD_COND_INITIALIZER;\nint ready = 0; // Shared state variable\n\nvoid* send_segments(void *v) {\n    for (;;) {\n        pthread_mutex_lock(&lock_it);\n        while (!ready) {\n            pthread_cond_wait(&write_it, &lock_it);\n        }\n        // Reset ready state\n        ready = 0;\n        printf("s1\n");\n        printf("s2\n");\n        printf("s3\n");\n        printf("s4\n");\n        printf("s5\n");\n        pthread_mutex_unlock(&lock_it);\n    }\n    return 0;\n}\n\nvoid* recv_acks(void *v) {\n    for (;;) {\n        pthread_mutex_lock(&lock_it);\n        printf("r1\n");\n        ready = 1; // Set ready state\n        pthread_cond_signal(&write_it);\n        printf("r2\n");\n        pthread_mutex_unlock(&lock_it);\n    }\n    return 0;\n}\n\nint main(int argc, char** argv) {\n    pthread_t t_send_segments, t_recv_acks;\n\n    pthread_create(&t_send_segments, NULL, send_segments, NULL);\n    pthread_create(&t_recv_acks, NULL, recv_acks, NULL);\n\n    pthread_join(t_send_segments, NULL);\n    pthread_join(t_recv_acks, NULL);\n\n    pthread_mutex_destroy(&lock_it);\n    pthread_cond_destroy(&write_it);\n\n    return 0;\n}