Function Sitemap() As ContentResult\n    Dim db As New EfrDotOrgEntities()\n    Dim Nodes = db.Node.ToList()\n    Dim RequestUrl As Uri = Url.RequestContext.HttpContext.Request.Url\n    Dim AbsoluteRoot As String = String.Format("{0}://{1}", RequestUrl.Scheme, RequestUrl.Authority)\n\n    Dim map As XDocument = <?xml version="1.0" encoding="UTF-8"?>\n                           <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n                           </urlset>\n\n    ' Get the root element (urlset)\n    Dim urlset As XElement = map.Element(XName.Get("urlset", "http://www.sitemaps.org/schemas/sitemap/0.9"))\n\n    For Each n As Node In Nodes\n        Dim urlElement As New XElement(XName.Get("url", "http://www.sitemaps.org/schemas/sitemap/0.9"),\n                                       New XElement(XName.Get("loc", "http://www.sitemaps.org/schemas/sitemap/0.9"), AbsoluteRoot + Url.RouteUrl("IdOnly", New With {.id = n.Id})))\n        urlset.Add(urlElement)\n    Next\n\n    Return Content(map.ToString(), "text/xml", Encoding.UTF8)\nEnd Functio