FILE *input_file = fopen(current->post_file_name.c_str(), "rb");\nFILE *output_file = fopen(current->results_file_name.c_str(), "wb");\n\nif(input_file && output_file) {\n    CURL *curl_handle = curl_easy_init();\n    if(curl_handle) {\n        struct curl_slist *header_opts = nullptr;\n        CURLcode rcd;\n\n        header_opts = curl_slist_append(header_opts, "Content-Type: application/soap+xml; charset=utf8");\n        curl_easy_reset(curl_handle);\n        curl_easy_setopt(curl_handle, CURLOPT_NOPROGRESS, 1L);\n        curl_easy_setopt(curl_handle, CURLOPT_WRITEDATA, output_file);\n        curl_easy_setopt(curl_handle, CURLOPT_READDATA, input_file);\n        curl_easy_setopt(curl_handle, CURLOPT_URL, fs_service_url.c_str());\n        curl_easy_setopt(curl_handle, CURLOPT_POST, 1L);\n        curl_easy_setopt(curl_handle, CURLOPT_HTTPHEADER, header_opts);\n\n        rcd = curl_easy_perform(curl_handle);\n        if(rcd != CURLE_OK) {\n            current->curl_result = rcd;\n            current->curl_error = curl_easy_strerror(rcd);\n        }\n\n        curl_slist_free_all(header_opts);\n        curl_easy_cleanup(curl_handle);\n    }\n    fclose(input_file);\n    fclose(output_file);\n} else {\n    if (input_file) fclose(input_file);\n    if (output_file) fclose(output_file);\n    // Handle file opening errors\n    current->curl_result = CURLE_FAILED_INIT;\n    current->curl_error = "Failed to open input or output file";\n}