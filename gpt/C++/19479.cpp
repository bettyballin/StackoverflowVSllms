#include <windows.h>\n#include <tchar.h>\n\nLONG RecursiveDeleteKey(HKEY hKeyParent, LPCWSTR lpszKeyChild) {\n    HKEY hKeyChild;\n    LONG lRes = RegOpenKeyEx(hKeyParent, lpszKeyChild, 0, KEY_READ | KEY_WRITE, &hKeyChild);\n    if (lRes != ERROR_SUCCESS) {\n        return lRes;\n    }\n\n    FILETIME time;\n    WCHAR szBuffer[256];\n    DWORD dwSize = 256;\n    while (RegEnumKeyEx(hKeyChild, 0, szBuffer, &dwSize, NULL, NULL, NULL, &time) == ERROR_SUCCESS) {\n        lRes = RecursiveDeleteKey(hKeyChild, szBuffer);\n        if (lRes != ERROR_SUCCESS) {\n            RegCloseKey(hKeyChild);\n            return lRes;\n        }\n        dwSize = 256;\n    }\n\n    RegCloseKey(hKeyChild);\n    return RegDeleteKey(hKeyParent, lpszKeyChild);\n}\n\n// Usage\nint main() {\n    HKEY hKeyParent = HKEY_CURRENT_USER; // or another root key\n    LPCWSTR lpszKeyChild = L"Software\\YourSubkey";\n\n    LONG result = RecursiveDeleteKey(hKeyParent, lpszKeyChild);\n    if (result == ERROR_SUCCESS) {\n        _tprintf(_T("The key and its subkeys are deleted successfully\n"));\n    } else {\n        _tprintf(_T("Failed to delete the key. Error code: %ld\n"), result);\n    }\n\n    return 0;\n}