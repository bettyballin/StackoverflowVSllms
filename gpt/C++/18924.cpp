#include <windows.h>\n#include <userenv.h>\n#include <iostream>\n\n#pragma comment(lib, "advapi32.lib")\n#pragma comment(lib, "userenv.lib")\n\nint main() {\n    HANDLE hToken;\n    BOOL result = LogonUser(\n        L"username",           // User name\n        L"domain",             // Domain or computer name\n        L"password",           // User password\n        LOGON32_LOGON_INTERACTIVE, // Logon type\n        LOGON32_PROVIDER_DEFAULT,  // Logon provider\n        &hToken                // Receives the token handle\n    );\n\n    if (result) {\n        STARTUPINFO si = { sizeof(STARTUPINFO) };\n        PROCESS_INFORMATION pi;\n\n        if (CreateProcessAsUser(\n            hToken,\n            NULL,\n            L"C:\\Windows\\System32\\notepad.exe",\n            NULL,\n            NULL,\n            FALSE,\n            0,\n            NULL,\n            NULL,\n            &si,\n            &pi\n        )) {\n            std::wcout << L"Process created successfully." << std::endl;\n            CloseHandle(pi.hProcess);\n            CloseHandle(pi.hThread);\n        } else {\n            std::wcerr << L"CreateProcessAsUser failed. Error: " << GetLastError() << std::endl;\n        }\n        CloseHandle(hToken);\n    } else {\n        std::wcerr << L"LogonUser failed. Error: " << GetLastError() << std::endl;\n    }\n\n    return 0;\n}