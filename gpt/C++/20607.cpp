#include <windows.h>\n#include <stdio.h>\n\nvoid SetServiceRecoveryOptions(SC_HANDLE schService) {\n    SERVICE_FAILURE_ACTIONS sfa;\n    SC_ACTION scActions[3];\n\n    // Set the actions to be taken on failure\n    scActions[0].Type = SC_ACTION_RESTART;\n    scActions[0].Delay = 60000; // 1 minute in milliseconds\n\n    scActions[1].Type = SC_ACTION_RESTART;\n    scActions[1].Delay = 60000; // 1 minute in milliseconds\n\n    scActions[2].Type = SC_ACTION_NONE;\n    scActions[2].Delay = 0;\n\n    sfa.dwResetPeriod = 86400; // Reset the failure count after 1 day\n    sfa.lpRebootMsg = NULL;\n    sfa.lpCommand = NULL;\n    sfa.cActions = 3;\n    sfa.lpsaActions = scActions;\n\n    if (!ChangeServiceConfig2(\n        schService,                  // handle to service\n        SERVICE_CONFIG_FAILURE_ACTIONS, // change: failure actions\n        &sfa)) {                      // new failure actions\n        printf("ChangeServiceConfig2 failed (%d)\n", GetLastError());\n    } else {\n        printf("Service recovery options set successfully.\n");\n    }\n}\n\nint main() {\n    SC_HANDLE schSCManager;\n    SC_HANDLE schService;\n\n    // Open the service control manager\n    schSCManager = OpenSCManager(\n        NULL,                    // local computer\n        NULL,                    // ServicesActive database\n        SC_MANAGER_ALL_ACCESS);  // full access rights\n\n    if (NULL == schSCManager) {\n        printf("OpenSCManager failed (%d)\n", GetLastError());\n        return 1;\n    }\n\n    // Open the service\n    schService = OpenService(\n        schSCManager,            // SCM database\n        TEXT("Sample_Srv"),      // name of service\n        SERVICE_ALL_ACCESS);     // full access\n\n    if (schService == NULL) {\n        printf("OpenService failed (%d)\n", GetLastError());\n        CloseServiceHandle(schSCManager);\n        return 1;\n    }\n\n    // Set the recovery options\n    SetServiceRecoveryOptions(schService);\n\n    // Cleanup\n    CloseServiceHandle(schService);\n    CloseServiceHandle(schSCManager);\n    \n    return 0;\n}