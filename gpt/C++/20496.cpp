void compute_sobel_edges(uint32_t* image, int width, int height, int* edges) {\n    int sobel_x[3][3] = {\n        {-1, 0, 1},\n        {-2, 0, 2},\n        {-1, 0, 1}\n    };\n    int sobel_y[3][3] = {\n        {-1, -2, -1},\n        { 0,  0,  0},\n        { 1,  2,  1}\n    };\n\n    for (int y = 1; y < height - 1; y++) {\n        for (int x = 1; x < width - 1; x++) {\n            int gx = 0;\n            int gy = 0;\n            for (int ky = 0; ky < 3; ky++) {\n                for (int kx = 0; kx < 3; kx++) {\n                    uint32_t pixel = image[(y + ky - 1) * width + (x + kx - 1)];\n                    uint8_t grey = ((pixel >> 16) & 0xFF) * 0.3 + ((pixel >> 8) & 0xFF) * 0.59 + (pixel & 0xFF) * 0.11;\n                    gx += sobel_x[ky][kx] * grey;\n                    gy += sobel_y[ky][kx] * grey;\n                }\n            }\n            edges[y * width + x] = sqrt(gx * gx + gy * gy);\n        }\n    }\n}