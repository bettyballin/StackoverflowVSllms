#include <atomic>\n#include <thread>\n#include <chrono>\n\nstd::atomic<bool> quitted(false), paused(false);\nstd::atomic<bool> should_quit(false), should_pause(false);\n\nvoid downloader_thread() {\n    quitted.store(false, std::memory_order_release);\n    while(!should_quit.load(std::memory_order_acquire)) {\n        fill_buffer(bfr);\n        if(should_pause.load(std::memory_order_acquire)) {\n            paused.store(true, std::memory_order_release);\n            while(should_pause.load(std::memory_order_acquire)) std::this_thread::sleep_for(std::chrono::milliseconds(50));\n            paused.store(false, std::memory_order_release);\n        }\n    }\n    quitted.store(true, std::memory_order_release);\n}\n\nvoid ui_thread() {\n    // std::thread(downloader_thread).detach();\n    // ...\n    should_pause.store(true, std::memory_order_release);\n    while(!paused.load(std::memory_order_acquire)) std::this_thread::sleep_for(std::chrono::milliseconds(50));\n    // resize buffer or something else non-thread-safe\n    should_pause.store(false, std::memory_order_release);\n}