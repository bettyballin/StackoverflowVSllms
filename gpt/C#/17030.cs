using System;\nusing System.ComponentModel;\nusing System.Configuration.Install;\nusing System.ServiceProcess;\n\n[RunInstaller(true)]\npublic class ProjectInstaller : Installer\n{\n    private ServiceProcessInstaller serviceProcessInstaller;\n    private ServiceInstaller serviceInstaller;\n\n    public ProjectInstaller()\n    {\n        serviceProcessInstaller = new ServiceProcessInstaller();\n        serviceInstaller = new ServiceInstaller();\n\n        serviceInstaller.ServiceName = "YourServiceName";\n        serviceInstaller.StartType = ServiceStartMode.Automatic;\n\n        Installers.Add(serviceProcessInstaller);\n        Installers.Add(serviceInstaller);\n    }\n\n    protected override void OnBeforeInstall(IDictionary savedState)\n    {\n        base.OnBeforeInstall(savedState);\n\n        string username = Context.Parameters["username"];\n        string password = Context.Parameters["password"];\n\n        if (!string.IsNullOrEmpty(username) && !string.IsNullOrEmpty(password))\n        {\n            serviceProcessInstaller.Account = ServiceAccount.User;\n            serviceProcessInstaller.Username = username;\n            serviceProcessInstaller.Password = password;\n        }\n        else\n        {\n            serviceProcessInstaller.Account = ServiceAccount.LocalSystem; // Default to LocalSystem if no user is provided\n        }\n    }\n}