using System;\nusing System.DirectoryServices;\nusing System.DirectoryServices.AccountManagement;\n\npublic class UserService\n{\n    public static void ListAllUsers()\n    {\n        // Specify the domain context to use the current user's credentials\n        using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))\n        {\n            // Create a user principal and a principal searcher\n            UserPrincipal userPrincipal = new UserPrincipal(ctx);\n            PrincipalSearcher searcher = new PrincipalSearcher(userPrincipal);\n\n            foreach (var result in searcher.FindAll())\n            {\n                UserPrincipal user = result as UserPrincipal;\n                if (user != null)\n                {\n                    Console.WriteLine("User found: " + user.SamAccountName);\n                }\n            }\n        }\n    }\n}