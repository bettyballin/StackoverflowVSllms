using System;\nusing System.IO;\n\npublic class MultiTextWriter : TextWriter\n{\n    private readonly TextWriter _consoleWriter;\n    private readonly StreamWriter _fileWriter;\n\n    public MultiTextWriter(TextWriter consoleWriter, StreamWriter fileWriter)\n    {\n        _consoleWriter = consoleWriter;\n        _fileWriter = fileWriter;\n    }\n\n    public override Encoding Encoding => _consoleWriter.Encoding;\n\n    public override void Write(char value)\n    {\n        _consoleWriter.Write(value);\n        _fileWriter.Write(value);\n    }\n\n    public override void WriteLine(string value)\n    {\n        _consoleWriter.WriteLine(value);\n        _fileWriter.WriteLine(value);\n    }\n\n    protected override void Dispose(bool disposing)\n    {\n        if (disposing)\n        {\n            _consoleWriter.Dispose();\n            _fileWriter.Dispose();\n        }\n        base.Dispose(disposing);\n    }\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        using (var fileWriter = new StreamWriter("log.txt"))\n        {\n            var multiWriter = new MultiTextWriter(Console.Out, fileWriter);\n            Console.SetOut(multiWriter);\n\n            Console.WriteLine("This will be written to both console and log file.");\n\n            // Your application logic here\n        }\n    }\n}