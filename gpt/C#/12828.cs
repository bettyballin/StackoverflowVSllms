public class RoleMap : ClassMap<Role>\n   {\n       public RoleMap()\n       {\n           Table("Roles");\n           Id(x => x.RoleId).GeneratedBy.Identity();\n           Map(x => x.RoleName).Not.Nullable();\n           HasManyToMany(x => x.Permissions)\n               .Table("RolePermissions")\n               .ParentKeyColumn("RoleId")\n               .ChildKeyColumn("PermissionId")\n               .Cascade.All()\n               .CustomType<PermissionType>();\n       }\n   }\n\n   public class UserMap : ClassMap<User>\n   {\n       public UserMap()\n       {\n           Table("Users");\n           Id(x => x.UserId).GeneratedBy.Identity();\n           Map(x => x.UserName).Not.Nullable();\n           HasManyToMany(x => x.Permissions)\n               .Table("UserPermissions")\n               .ParentKeyColumn("UserId")\n               .ChildKeyColumn("PermissionId")\n               .Cascade.All()\n               .CustomType<PermissionType>();\n       }\n   }