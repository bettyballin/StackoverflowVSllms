cdsDBDataContext db = new cdsDBDataContext();\n\nvar query = from items in db.cdsItems\n            where items.ItemHandHeldFlag.Equals("Y") &&\n                  (items.ItemQtyOnHand - items.ItemQtyCommitted) > 0\n            select new \n            {\n                products_quantity = items.ItemPromoFlag != "N" ? 100000 :\n                                    (new[] { "1", "2", "31" }.Contains(items.ItemCat1) && items.ItemSaleStatus == "S") ? 100000 :\n                                    items.ItemSaleStatus == "O" ? 0 :\n                                    items.ItemQtyOnHand - items.ItemQtyCommitted\n            };\n\nforeach (var item in query)\n{\n    // Update the osc_products.products_quantity with the calculated value\n    // Example usage, adapt as needed:\n    // osc_products.products_quantity = item.products_quantity;\n}