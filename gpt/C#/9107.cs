using System;\nusing System.IO;\nusing System.Net.Sockets;\nusing System.Text;\n\npublic class WebServer\n{\n    private const int MaxLineLength = 1024; // Set your limit here\n\n    public string ReadLimitedLine(NetworkStream ns)\n    {\n        using (StreamReader sr = new StreamReader(ns, Encoding.UTF8, true, 1024, leaveOpen: true))\n        {\n            StringBuilder sb = new StringBuilder();\n            char[] buffer = new char[1];\n            int charsRead;\n            while (sb.Length < MaxLineLength && (charsRead = sr.Read(buffer, 0, 1)) > 0)\n            {\n                if (buffer[0] == '\n')\n                {\n                    break;\n                }\n                sb.Append(buffer[0]);\n            }\n\n            if (sb.Length >= MaxLineLength)\n            {\n                throw new IOException("Line length limit exceeded.");\n            }\n\n            return sb.ToString();\n        }\n    }\n}