string file = Path.GetTempFileName(); // pretend this is a real file\nstring tmpFile = Path.GetTempFileName();\n\nusing (var fileStream = File.Create(tmpFile))\nusing (var writer = XmlWriter.Create(fileStream))\n{\n    writer.WriteStartElement("root");\n    for (int i = 0; i < 100; i++)\n    {\n        writer.WriteElementString("test", null, \n            "All work and no play makes Jack a dull boy");\n    }\n    writer.WriteEndElement();\n}\n\n// Ensure the streams are closed before deleting and moving files\nFile.Delete(file);\nFile.Move(tmpFile, file);