using (SqlConnection conn = new SqlConnection(connectionString))\n{\n    using (SqlCommand cmd = new SqlCommand("dbo.GetRecordsByIds", conn))\n    {\n        cmd.CommandType = CommandType.StoredProcedure;\n        cmd.Parameters.Add(new SqlParameter("@myList", "1,2,3"));\n\n        conn.Open();\n        using (SqlDataReader reader = cmd.ExecuteReader())\n        {\n            while (reader.Read())\n            {\n                // Process the results\n            }\n        }\n    }\n}