using RazorLight;\n   using System.Net.Mail;\n\n   public class EmailService\n   {\n       private readonly RazorLightEngine _razorEngine;\n\n       public EmailService()\n       {\n           _razorEngine = new RazorLightEngineBuilder()\n               .UseEmbeddedResourcesProject(typeof(EmailService))\n               .UseMemoryCachingProvider()\n               .Build();\n       }\n\n       public async Task SendWelcomeEmailAsync(string toEmail, string userName)\n       {\n           var model = new WelcomeEmailModel { UserName = userName };\n           string body = await _razorEngine.CompileRenderAsync("WelcomeEmailTemplate.cshtml", model);\n\n           MailMessage mail = new MailMessage("from@example.com", toEmail, "Welcome!", body);\n           mail.IsBodyHtml = true;\n\n           SmtpClient client = new SmtpClient("smtp.example.com");\n           client.Send(mail);\n       }\n   }\n\n   public class WelcomeEmailModel\n   {\n       public string UserName { get; set; }\n   }\n\n   // Usage\n   var emailService = new EmailService();\n   await emailService.SendWelcomeEmailAsync("user@example.com", "John Doe");