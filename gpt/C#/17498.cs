// Example using NHibernate in a web service\npublic class ProductService\n{\n    private readonly ISessionFactory _sessionFactory;\n\n    public ProductService(ISessionFactory sessionFactory)\n    {\n        _sessionFactory = sessionFactory;\n    }\n\n    public IList<Product> GetAllProducts()\n    {\n        using (var session = _sessionFactory.OpenSession())\n        {\n            return session.Query<Product>().ToList();\n        }\n    }\n}