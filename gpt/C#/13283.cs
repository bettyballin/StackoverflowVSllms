using Moq;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing Xunit;\n\npublic class MyServiceTests\n{\n    [Fact]\n    public async Task TestMethod()\n    {\n        // Arrange\n        var mockSet = new Mock<DbSet<MyEntity>>();\n        var mockContext = new Mock<IMyDbContext>();\n        mockContext.Setup(m => m.MyEntities).Returns(mockSet.Object);\n\n        var service = new MyService(mockContext.Object);\n\n        // Act\n        await service.MyMethod();\n\n        // Assert\n        mockSet.Verify(m => m.AddAsync(It.IsAny<MyEntity>(), It.IsAny<CancellationToken>()), Times.Once());\n        mockContext.Verify(m => m.SaveChangesAsync(It.IsAny<CancellationToken>()), Times.Once());\n    }\n}