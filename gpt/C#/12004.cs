public class UserRepository : IUserRepository\n   {\n       private static readonly string NHibernateSessionKey = "NHibernateSession";\n\n       private ISession CurrentSession\n       {\n           get\n           {\n               return HttpContext.Current.Items[NHibernateSessionKey] as ISession;\n           }\n       }\n\n       public User GetByID(string userID)\n       {\n           return CurrentSession.Get<User>(userID);\n       }\n   }