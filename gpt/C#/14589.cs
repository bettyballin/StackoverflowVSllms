public class MyViewModel\n{\n    private readonly IUserDialogService _userDialogService;\n\n    public MyViewModel(IUserDialogService userDialogService)\n    {\n        _userDialogService = userDialogService;\n    }\n\n    public void HandleMessage(Message msg)\n    {\n        string reply;\n        if (msg.Type == 1)\n        {\n            reply = "...";\n        }\n        else\n        {\n            string question = msg.Question;\n            reply = _userDialogService.ShowModalDialog(question);\n        }\n        // Now you can send the reply\n        SendReply(reply);\n    }\n\n    private void SendReply(string reply)\n    {\n        // Implementation for sending reply\n    }\n}