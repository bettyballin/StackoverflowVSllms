using (var session = sessionFactory.OpenSession())\n{\n    // Assume categories are instantiated and added to the tree as described\n    session.Save(beverages);\n    session.Flush();\n    \n    // Evict each object from the session\n    session.Evict(beverages);\n    session.Evict(beer);\n    session.Evict(lightBeer);\n    session.Evict(darkBeer);\n\n    // Clear the session to ensure no objects are cached\n    session.Clear();\n\n    // Now load the Beverages from the database again\n    var fromDB = session.Get<ProductCategory>(beverages.Id);\n\n    // Perform your checks\n    Assert.That(fromDB, Is.EqualTo(beverages)); // EqualTo\n    Assert.That(fromDB, Is.Not.SameAs(beverages)); // Not SameAs\n    Assert.That(fromDB.Children.Count, Is.EqualTo(1));\n    var fromDBChild = fromDB.Children.First();\n    Assert.That(fromDBChild, Is.EqualTo(beer)); // EqualTo\n    Assert.That(fromDBChild, Is.Not.SameAs(beer)); // Not SameAs\n}