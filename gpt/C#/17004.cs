class Result\n{\n    public bool IsSuccess { get; set; }\n    public string Value { get; set; }\n}\n\nResult Walk_r(Node tree)\n{\n    // base case\n    if (tree == null)\n    {\n        return new Result { IsSuccess = false };\n    }\n\n    // some condition where we want to succeed\n    if (/* condition for success */)\n    {\n        return new Result { IsSuccess = true, Value = /* the value */ };\n    }\n\n    // recursive calls\n    var leftResult = Walk_r(tree.Left);\n    if (leftResult.IsSuccess)\n    {\n        return leftResult;\n    }\n\n    var rightResult = Walk_r(tree.Right);\n    if (rightResult.IsSuccess)\n    {\n        return rightResult;\n    }\n\n    return new Result { IsSuccess = false };\n}\n\nvoid MainFunction()\n{\n    var result = Walk_r(tree);\n    if (result.IsSuccess)\n    {\n        // process result.Value\n    }\n    else\n    {\n        // handle failure\n    }\n}