using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Net;\n\nclass Program\n{\n    static void Main()\n    {\n        string ftpAddress = "ftp://yourserver.com/";\n        string username = "yourUsername";\n        string password = "yourPassword";\n\n        List<string> directories = GetDirectoryList(ftpAddress, username, password);\n        string latestVersion = GetLatestVersion(directories);\n\n        Console.WriteLine($"Latest version folder: {latestVersion}");\n    }\n\n    static List<string> GetDirectoryList(string ftpAddress, string username, string password)\n    {\n        List<string> directories = new List<string>();\n        \n        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpAddress);\n        request.Method = WebRequestMethods.Ftp.ListDirectory;\n        request.Credentials = new NetworkCredential(username, password);\n\n        using (FtpWebResponse response = (FtpWebResponse)request.GetResponse())\n        using (StreamReader reader = new StreamReader(response.GetResponseStream()))\n        {\n            string line;\n            while ((line = reader.ReadLine()) != null)\n            {\n                directories.Add(line);\n            }\n        }\n\n        return directories;\n    }\n\n    static string GetLatestVersion(List<string> directories)\n    {\n        Version latestVersion = new Version(0, 0, 0);\n        string latestVersionFolder = string.Empty;\n\n        foreach (var dir in directories)\n        {\n            if (Version.TryParse(dir, out Version currentVersion))\n            {\n                if (currentVersion > latestVersion)\n                {\n                    latestVersion = currentVersion;\n                    latestVersionFolder = dir;\n                }\n            }\n        }\n\n        return latestVersionFolder;\n    }\n}