SmtpClient smtp;\n\nif (!string.IsNullOrEmpty(Util.get_setting("SmtpServer", "")))\n{\n   smtp = new SmtpClient(Util.get_setting("SmtpServer", ""));\n}\nelse\n{\n   smtp = new SmtpClient();\n}\n\nif (!string.IsNullOrEmpty(Util.get_setting("SmtpServerAuthenticatePassword", "")))\n   smtp.Credentials = new System.Net.NetworkCredential(\n       Util.get_setting("SmtpServerAuthenticateUser", ""), \n       Util.get_setting("SmtpServerAuthenticatePassword", ""));\n\nif (!string.IsNullOrEmpty(Util.get_setting("SmtpServerPort", "")))\n   smtp.Port = int.Parse(Util.get_setting("SmtpServerPort", ""));\n\n// Enable SSL\nsmtp.EnableSsl = true;\n\n// Set the delivery method\nsmtp.DeliveryMethod = SmtpDeliveryMethod.Network;\n\n// Set the target name\nsmtp.TargetName = "STARTTLS/smtp.att.yahoo.com";\n\nsmtp.Send(message);