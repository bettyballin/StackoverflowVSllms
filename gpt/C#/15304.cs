[WebMethod(EnableSession=true)]\npublic Dictionary<string, object> GetArchivedFiles(int pageSize, int page)\n{\n    if(HttpContext.Current.User.Identity.IsAuthenticated && Session["UserId"] != null)\n    {\n        // Do some computing and return a Dictionary. \n    }\n\n    // Method will fall through here if the user is not authenticated.\n    HttpContext.Current.Response.StatusCode = (int) HttpStatusCode.Unauthorized;\n    HttpContext.Current.Response.AddHeader("X-Redirect", "true");\n    return null;\n}