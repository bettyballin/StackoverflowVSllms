using System;\nusing System.IO;\n\nclass Program\n{\n    static void Main()\n    {\n        AppDomain.CurrentDomain.ProcessExit += new EventHandler(OnProcessExit);\n        // Your application logic here\n    }\n\n    static void OnProcessExit(object sender, EventArgs e)\n    {\n        try\n        {\n            File.AppendAllText("log.txt", "Application exiting at " + DateTime.Now + Environment.NewLine);\n            // Additional cleanup logic\n        }\n        catch (Exception ex)\n        {\n            File.AppendAllText("log.txt", "Error during shutdown: " + ex.Message + Environment.NewLine);\n        }\n    }\n}