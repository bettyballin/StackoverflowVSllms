public class MyDbContextTests\n     {\n         private DbContextOptions<MyDbContext> options;\n\n         public MyDbContextTests()\n         {\n             options = new DbContextOptionsBuilder<MyDbContext>()\n                 .UseInMemoryDatabase(databaseName: "TestDatabase")\n                 .Options;\n         }\n\n         [Fact]\n         public void Test_AddEntity()\n         {\n             using (var context = new MyDbContext(options))\n             {\n                 var entity = new MyEntity { Name = "Test" };\n                 context.MyEntities.Add(entity);\n                 context.SaveChanges();\n\n                 Assert.Equal(1, context.MyEntities.Count());\n             }\n         }\n     }