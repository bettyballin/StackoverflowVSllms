using System;\nusing System.Net;\nusing System.Threading.Tasks;\nusing Titanium.Web.Proxy;\nusing Titanium.Web.Proxy.EventArguments;\nusing Titanium.Web.Proxy.Models;\n\nclass Program\n{\n    static async Task Main(string[] args)\n    {\n        var proxyServer = new ProxyServer();\n\n        // Optionally, set the certificate engine\n        proxyServer.CertificateManager.CertificateEngine = Network.CertificateEngine.BouncyCastle;\n\n        // Optionally, set the root certificate\n        // proxyServer.CertificateManager.RootCertificate = new X509Certificate2("rootCert.pfx", "password");\n\n        var explicitEndPoint = new ExplicitProxyEndPoint(IPAddress.Any, 8000, true);\n\n        proxyServer.AddEndPoint(explicitEndPoint);\n        proxyServer.Start();\n\n        proxyServer.BeforeRequest += OnRequest;\n\n        Console.WriteLine("Proxy Server running...");\n        Console.ReadKey();\n\n        proxyServer.BeforeRequest -= OnRequest;\n        proxyServer.Stop();\n    }\n\n    private static async Task OnRequest(object sender, SessionEventArgs e)\n    {\n        Console.WriteLine($"Request: {e.HttpClient.Request.Url}");\n        \n        // Modify request if needed\n        // e.HttpClient.Request.Url = "https://example.com";\n    }\n}