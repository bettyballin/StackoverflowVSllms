using System;\nusing System.Diagnostics;\nusing System.Security.Principal;\nusing System.Windows.Forms;\n\nnamespace YourNamespace\n{\n    static class Program\n    {\n        [STAThread]\n        static void Main()\n        {\n            if (!IsRunAsAdmin())\n            {\n                // Restart the application with elevated privileges\n                var processInfo = new ProcessStartInfo(Application.ExecutablePath)\n                {\n                    UseShellExecute = true,\n                    Verb = "runas"\n                };\n\n                try\n                {\n                    Process.Start(processInfo);\n                }\n                catch (Exception)\n                {\n                    // Handle the case when the user cancels the UAC prompt\n                    MessageBox.Show("This application requires elevated privileges to run correctly.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);\n                }\n\n                Application.Exit();\n                return;\n            }\n\n            // Your main application code here\n            Application.EnableVisualStyles();\n            Application.SetCompatibleTextRenderingDefault(false);\n            Application.Run(new MainForm());\n        }\n\n        private static bool IsRunAsAdmin()\n        {\n            var wi = WindowsIdentity.GetCurrent();\n            var wp = new WindowsPrincipal(wi);\n            return wp.IsInRole(WindowsBuiltInRole.Administrator);\n        }\n    }\n}