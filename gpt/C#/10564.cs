public class MyShapeClass : ShapeElement\n{\n    public override void OnInitialize()\n    {\n        base.OnInitialize();\n        // Bind the compartment items to the shape\n        this.SetupCompartmentItems();\n    }\n\n    private void SetupCompartmentItems()\n    {\n        var compartment = this.FindCompartment("CompartmentName");\n        if (compartment != null)\n        {\n            foreach (var item in this.ModelElement.Items)\n            {\n                compartment.AddItem(item);\n            }\n        }\n    }\n\n    private ElementListCompartment FindCompartment(string compartmentName)\n    {\n        foreach (var child in this.NestedChildShapes)\n        {\n            if (child is ElementListCompartment && child.Name == compartmentName)\n            {\n                return (ElementListCompartment)child;\n            }\n        }\n        return null;\n    }\n}