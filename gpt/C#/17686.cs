using System.IO;\n   using System.IO.Compression;\n   using System.Web;\n\n   public void DownloadCompressedFile(HttpResponse response, byte[] fileContent, string fileName)\n   {\n       response.Clear();\n       response.Buffer = false;\n       response.AddHeader("Content-Disposition", "attachment; filename=" + fileName);\n       response.ContentType = "application/octet-stream";\n       response.AddHeader("Content-Encoding", "gzip");\n\n       using (GZipStream gzipStream = new GZipStream(response.OutputStream, CompressionMode.Compress))\n       {\n           gzipStream.Write(fileContent, 0, fileContent.Length);\n       }\n\n       response.End();\n   }