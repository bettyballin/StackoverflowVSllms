using System;\nusing System.Net.Sockets;\nusing System.Threading.Tasks;\n\nclass Program\n{\n    static async Task Main(string[] args)\n    {\n        string server = "127.0.0.1";\n        int port = 12345;\n        int delayMilliseconds = 1000; // 1 second delay\n\n        using (TcpClient client = new TcpClient())\n        {\n            await client.ConnectAsync(server, port);\n            NetworkStream stream = client.GetStream();\n\n            // Simulate network delay\n            await Task.Delay(delayMilliseconds);\n\n            // Send data\n            byte[] data = System.Text.Encoding.ASCII.GetBytes("Hello, Foo!");\n            stream.Write(data, 0, data.Length);\n\n            // Read response\n            byte[] responseData = new byte[256];\n            int bytes = await stream.ReadAsync(responseData, 0, responseData.Length);\n            string response = System.Text.Encoding.ASCII.GetString(responseData, 0, bytes);\n            Console.WriteLine("Received: {0}", response);\n        }\n    }\n}