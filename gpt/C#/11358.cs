protected void Page_Load(object sender, EventArgs e)\n{\n    if (User.Identity.IsAuthenticated)\n    {\n        // User is authenticated with Windows Authentication.\n        string userName = User.Identity.Name;\n        \n        // Check if the user is internal or external based on some logic.\n        // Example: Check if the username contains a specific domain.\n        if (userName.Contains("yourdomain"))\n        {\n            // Internal user logic\n        }\n        else\n        {\n            // External user logic\n        }\n    }\n    else\n    {\n        // User is not authenticated, prompt for credentials.\n        Response.StatusCode = 401;\n        Response.End();\n    }\n}