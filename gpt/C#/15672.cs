using System;\n    using System.Data.SqlClient;\n\n    public class EmailRepository\n    {\n        private string connectionString = "your_connection_string_here";\n\n        public SqlDataReader GetPendingEmails()\n        {\n            using (SqlConnection connection = new SqlConnection(connectionString))\n            {\n                string query = "SELECT * FROM EmailQueue WHERE IsSent = 0 AND ScheduledDateTime <= GETDATE()";\n                SqlCommand command = new SqlCommand(query, connection);\n                connection.Open();\n                return command.ExecuteReader();\n            }\n        }\n\n        public void MarkEmailAsSent(int emailId)\n        {\n            using (SqlConnection connection = new SqlConnection(connectionString))\n            {\n                string query = "UPDATE EmailQueue SET IsSent = 1 WHERE Id = @Id";\n                SqlCommand command = new SqlCommand(query, connection);\n                command.Parameters.AddWithValue("@Id", emailId);\n                connection.Open();\n                command.ExecuteNonQuery();\n            }\n        }\n    }