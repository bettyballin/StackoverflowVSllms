using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Program\n{\n    static void Main()\n    {\n        // Example prime factors and their powers\n        Dictionary<int, int> primeFactors = new Dictionary<int, int>\n        {\n            { 2, 3 },\n            { 3, 1 }\n        };\n\n        List<int> factors = GetAllFactors(primeFactors);\n        factors.Sort();\n        Console.WriteLine(string.Join(", ", factors));\n    }\n\n    static List<int> GetAllFactors(Dictionary<int, int> primeFactors)\n    {\n        List<int> factors = new List<int>();\n        GetFactorsRecursive(primeFactors.Keys.ToList(), primeFactors, 1, factors);\n        return factors;\n    }\n\n    static void GetFactorsRecursive(List<int> primes, Dictionary<int, int> primeFactors, int currentProduct, List<int> factors, int index = 0)\n    {\n        if (index == primes.Count)\n        {\n            factors.Add(currentProduct);\n            return;\n        }\n\n        int prime = primes[index];\n        int maxPower = primeFactors[prime];\n\n        for (int power = 0; power <= maxPower; power++)\n        {\n            GetFactorsRecursive(primes, primeFactors, currentProduct * (int)Math.Pow(prime, power), factors, index + 1);\n        }\n    }\n}