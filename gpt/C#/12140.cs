public class UserService\n{\n    private readonly ISecurityRepository _securityRepository;\n    private readonly IUnitOfWork _unitOfWork;\n\n    public UserService(ISecurityRepository securityRepository, IUnitOfWork unitOfWork)\n    {\n        _securityRepository = securityRepository;\n        _unitOfWork = unitOfWork;\n    }\n\n    public Entities.User GetUser(Guid userId)\n    {\n        using (_unitOfWork)\n        {\n            var user = _securityRepository.GetUser(userId);\n            _unitOfWork.Commit();\n            return user;\n        }\n    }\n}