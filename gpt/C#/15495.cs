public class YourEntityHandler\n{\n    private readonly ISessionFactory _sessionFactory;\n\n    public YourEntityHandler(ISessionFactory sessionFactory)\n    {\n        _sessionFactory = sessionFactory;\n    }\n\n    public OperationResult Get()\n    {\n        using (var session = _sessionFactory.OpenSession())\n        {\n            var entities = session.Query<YourEntityClass>().ToList();\n            return new OperationResult.OK(entities);\n        }\n    }\n\n    public OperationResult Post(YourEntityClass entity)\n    {\n        using (var session = _sessionFactory.OpenSession())\n        {\n            using (var transaction = session.BeginTransaction())\n            {\n                session.Save(entity);\n                transaction.Commit();\n            }\n            return new OperationResult.Created();\n        }\n    }\n}