using System.Web;\n   using Moq;\n   using Xunit; // or any other testing framework you are using\n\n   public class YourControllerTests\n   {\n       [Fact]\n       public void Test_Method_With_Ajax_Request()\n       {\n           // Arrange\n           var controller = new YourController();\n\n           var httpRequest = new Mock<HttpRequestBase>();\n           httpRequest.Setup(x => x.Headers["X-Requested-With"]).Returns("XMLHttpRequest");\n\n           var httpContext = new Mock<HttpContextBase>();\n           httpContext.Setup(x => x.Request).Returns(httpRequest.Object);\n\n           // Set the controller context\n           var controllerContext = new ControllerContext() { HttpContext = httpContext.Object };\n           controller.ControllerContext = controllerContext;\n\n           // Act\n           var result = controller.YourActionMethod();\n\n           // Assert\n           // Your assertions here\n       }\n   }