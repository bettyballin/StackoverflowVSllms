using System;\nusing System.Threading.Tasks;\nusing Titanium.Web.Proxy;\nusing Titanium.Web.Proxy.EventArguments;\nusing Titanium.Web.Proxy.Models;\n\nclass Program\n{\n    static async Task Main(string[] args)\n    {\n        var proxyServer = new ProxyServer();\n\n        // Optionally set proxy server options\n        proxyServer.TrustRootCertificate = true;\n\n        // Create an explicit endpoint (HTTP/HTTPS)\n        var explicitEndPoint = new ExplicitProxyEndPoint(System.Net.IPAddress.Any, 8000, true);\n\n        // Attach event handlers\n        proxyServer.BeforeRequest += OnRequest;\n        proxyServer.BeforeResponse += OnResponse;\n\n        // Add the endpoint to the proxy server\n        proxyServer.AddEndPoint(explicitEndPoint);\n        proxyServer.Start();\n\n        Console.WriteLine("Proxy server started. Press any key to exit...");\n        Console.ReadKey();\n\n        // Stop the proxy server\n        proxyServer.Stop();\n    }\n\n    private static Task OnRequest(object sender, SessionEventArgs e)\n    {\n        Console.WriteLine($"Request: {e.HttpClient.Request.Url}");\n        return Task.CompletedTask;\n    }\n\n    private static Task OnResponse(object sender, SessionEventArgs e)\n    {\n        Console.WriteLine($"Response: {e.HttpClient.Response.StatusCode}");\n        return Task.CompletedTask;\n    }\n}