var sessionFactory = Fluently.Configure()\n    .Database(/* your database configuration here */)\n    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<YourEntity>()\n        .ExportTo("path/to/export/directory"))\n    .ExposeConfiguration(cfg =>\n    {\n        cfg.SetProperty(NHibernate.Cfg.Environment.GenerateStatistics, "true");\n        cfg.WriteXml("path/to/export/directory/hibernate.cfg.xml");\n    })\n    .BuildSessionFactory();