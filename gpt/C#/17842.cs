using System;\nusing System.Data;\nusing System.Data.SqlClient;\nusing System.Threading;\nusing System.Windows;\n\nnamespace YourNamespace\n{\n    public partial class MainWindow : Window\n    {\n        private bool _continueListening;\n        private SqlConnection _connection;\n\n        public MainWindow()\n        {\n            InitializeComponent();\n            StartListeningForChanges();\n        }\n\n        private void StartListeningForChanges()\n        {\n            _continueListening = true;\n            _connection = new SqlConnection("Your Connection String");\n            _connection.Open();\n\n            Thread listenerThread = new Thread(ListenForMessages);\n            listenerThread.Start();\n        }\n\n        private void ListenForMessages()\n        {\n            while (_continueListening)\n            {\n                using (SqlCommand command = new SqlCommand("WAITFOR (RECEIVE TOP(1) message_body FROM OrderChangeQueue);", _connection))\n                {\n                    SqlDataReader reader = command.ExecuteReader();\n                    if (reader.HasRows)\n                    {\n                        reader.Read();\n                        string message = reader.GetString(0);\n                        Dispatcher.Invoke(() => UpdateGui(message));\n                    }\n                    reader.Close();\n                }\n            }\n        }\n\n        private void UpdateGui(string message)\n        {\n            // Implement your GUI update logic based on the received message\n            MessageBox.Show(message);\n        }\n\n        private void OnClosing(object sender, System.ComponentModel.CancelEventArgs e)\n        {\n            _continueListening = false;\n            _connection.Close();\n        }\n    }\n}