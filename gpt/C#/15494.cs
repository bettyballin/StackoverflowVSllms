using System;\nusing System.Collections.Generic;\nusing System.ComponentModel.Composition;\nusing System.ComponentModel.Composition.Hosting;\n\nnamespace Vialis\n{\n    class Program\n    {\n        [ImportMany(typeof(ILedController))]\n        public IEnumerable<ILedController> Controllers { get; set; }\n\n        static void Main(string[] args)\n        {\n            new Program();\n        }\n\n        public Program()\n        {\n            compose();\n            selectController();\n\n            Console.ReadLine();\n        }\n\n        private void compose()\n        {\n            var catalog = new AggregateCatalog();\n            catalog.Catalogs.Add(new AssemblyCatalog(typeof(LyanController).Assembly));\n            catalog.Catalogs.Add(new AssemblyCatalog(typeof(VialisController).Assembly));\n            var container = new CompositionContainer(catalog);\n\n            container.ComposeParts(this);\n        }\n\n        private void selectController()\n        {\n            Console.Clear();\n            Console.WriteLine("Please select the controller to use\n");\n\n            byte i = 0;\n\n            foreach (var controller in Controllers)\n            {\n                Console.WriteLine("\t{0}) {1}", i, controller.ToString());\n                i++;\n            }\n\n            Console.Write("\nYour selection: ");\n            var input = Convert.ToInt32(Console.ReadLine());\n\n            Controllers[input].DisplayText(10, 10, "Hello World");\n        }\n    }\n}