using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Linq;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        string inputFilePath = "path_to_your_input_file.reg";\n        string outputFilePath = "path_to_your_output_file.reg";\n\n        // Read all lines from the input .reg file\n        var lines = File.ReadAllLines(inputFilePath);\n\n        var regEntries = new Dictionary<string, string>();\n        string currentKey = null;\n\n        foreach (var line in lines)\n        {\n            if (string.IsNullOrWhiteSpace(line) || line.StartsWith(";"))\n            {\n                // Skip empty lines and comments\n                continue;\n            }\n\n            if (line.StartsWith("[") && line.EndsWith("]"))\n            {\n                // It's a registry key\n                currentKey = line;\n                continue;\n            }\n\n            if (currentKey != null)\n            {\n                // Combine the current key with the value\n                var fullEntry = $"{currentKey}, {line}";\n                regEntries[fullEntry] = currentKey;\n            }\n        }\n\n        var sortedEntries = regEntries.Keys.OrderBy(entry => entry);\n\n        using (var writer = new StreamWriter(outputFilePath))\n        {\n            string lastKey = null;\n            foreach (var entry in sortedEntries)\n            {\n                var parts = entry.Split(new[] { ", " }, 2, StringSplitOptions.None);\n                var key = parts[0];\n                var value = parts[1];\n\n                if (key != lastKey)\n                {\n                    if (lastKey != null)\n                    {\n                        writer.WriteLine();\n                    }\n                    writer.WriteLine(key);\n                    lastKey = key;\n                }\n                writer.WriteLine(value);\n            }\n        }\n\n        Console.WriteLine("Registry file cleaned and saved successfully.");\n    }\n}