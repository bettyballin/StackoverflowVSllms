public class MyController : Controller\n    {\n        [HttpPost]\n        public ActionResult SubmitForm(MyViewModel model)\n        {\n            if (!ModelState.IsValid)\n            {\n                if (Request.IsAjaxRequest())\n                {\n                    return Json(new { success = false, errors = ModelState.Values.SelectMany(v => v.Errors).Select(e => e.ErrorMessage) });\n                }\n                return View(model);\n            }\n\n            // Process the form submission\n            // ...\n\n            if (Request.IsAjaxRequest())\n            {\n                return Json(new { success = true });\n            }\n            return RedirectToAction("Success");\n        }\n    }