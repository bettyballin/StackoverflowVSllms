using (SqlConnection connection = new SqlConnection(connectionString))\n{\n    connection.Open();\n    SqlTransaction transaction = connection.BeginTransaction();\n    try\n    {\n        // Perform your database operations here\n        SqlCommand command1 = new SqlCommand("UPDATE ...", connection, transaction);\n        command1.ExecuteNonQuery();\n\n        SqlCommand command2 = new SqlCommand("UPDATE ...", connection, transaction);\n        command2.ExecuteNonQuery();\n\n        // Commit the transaction if all commands succeed\n        transaction.Commit();\n    }\n    catch (Exception ex)\n    {\n        // Rollback the transaction if any command fails\n        transaction.Rollback();\n        // Handle the exception (log it, rethrow it, etc.)\n    }\n}