using System;\nusing System.Text;\n\npublic class Rfc3986Escaper\n{\n    public static string EscapeDataString(string value)\n    {\n        const string RFC3986ReservedCharacters = "!*'();:@&=+$,/?#[]";\n        StringBuilder escaped = new StringBuilder();\n\n        foreach (char ch in value)\n        {\n            if (RFC3986ReservedCharacters.IndexOf(ch) != -1 || !IsUnreserved(ch))\n            {\n                escaped.Append('%' + $"{(int)ch:X2}");\n            }\n            else\n            {\n                escaped.Append(ch);\n            }\n        }\n\n        return escaped.ToString();\n    }\n\n    private static bool IsUnreserved(char ch)\n    {\n        if (ch >= 'A' && ch <= 'Z') return true;\n        if (ch >= 'a' && ch <= 'z') return true;\n        if (ch >= '0' && ch <= '9') return true;\n        if (ch == '-' || ch == '.' || ch == '_' || ch == '~') return true;\n        return false;\n    }\n}\n\n// Usage\nstring original = "This is a test string with special characters: !*'();:@&=+$,/?#[]";\nstring escaped = Rfc3986Escaper.EscapeDataString(original);\nConsole.WriteLine(escaped);