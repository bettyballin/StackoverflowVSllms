using System;\nusing System.Windows.Forms;\n\npublic class NullableDateTimePicker : DateTimePicker\n{\n    private DateTimePickerFormat originalFormat;\n    private string originalCustomFormat;\n\n    public NullableDateTimePicker()\n    {\n        this.Format = DateTimePickerFormat.Custom;\n        this.CustomFormat = " ";\n        this.ValueChanged += NullableDateTimePicker_ValueChanged;\n    }\n\n    private void NullableDateTimePicker_ValueChanged(object sender, EventArgs e)\n    {\n        if (this.Value != DateTimePicker.MinimumDateTime)\n        {\n            this.CustomFormat = originalCustomFormat;\n        }\n    }\n\n    public new DateTime? Value\n    {\n        get\n        {\n            if (base.Value == DateTimePicker.MinimumDateTime)\n            {\n                return null;\n            }\n            return base.Value;\n        }\n        set\n        {\n            if (value.HasValue)\n            {\n                base.Value = value.Value;\n                this.Format = originalFormat;\n                this.CustomFormat = originalCustomFormat;\n            }\n            else\n            {\n                base.Value = DateTimePicker.MinimumDateTime;\n                this.Format = DateTimePickerFormat.Custom;\n                this.CustomFormat = " ";\n            }\n        }\n    }\n\n    protected override void OnDropDown(EventArgs eventargs)\n    {\n        if (this.CustomFormat == " ")\n        {\n            this.Format = originalFormat;\n            this.CustomFormat = originalCustomFormat;\n        }\n        base.OnDropDown(eventargs);\n    }\n\n    protected override void OnCloseUp(EventArgs eventargs)\n    {\n        if (base.Value == DateTimePicker.MinimumDateTime)\n        {\n            this.Format = DateTimePickerFormat.Custom;\n            this.CustomFormat = " ";\n        }\n        base.OnCloseUp(eventargs);\n    }\n\n    protected override void OnCreateControl()\n    {\n        base.OnCreateControl();\n        originalFormat = this.Format;\n        originalCustomFormat = this.CustomFormat;\n    }\n}