using System;\nusing System.IO;\nusing System.IO.Pipes;\nusing System.Threading;\n\npublic class PipeServer\n{\n    private static void Main()\n    {\n        using (var pipeServer = new NamedPipeServerStream("testpipe", PipeDirection.InOut))\n        {\n            Console.WriteLine("NamedPipeServerStream object created.");\n            Console.WriteLine("Waiting for a client connection...");\n            pipeServer.WaitForConnection();\n            Console.WriteLine("Client connected.");\n\n            using (StreamReader sr = new StreamReader(pipeServer))\n            using (StreamWriter sw = new StreamWriter(pipeServer))\n            {\n                sw.AutoFlush = true;\n\n                string request = sr.ReadLine();\n                Console.WriteLine($"Received from client: {request}");\n                string response = $"Echo: {request}";\n                sw.WriteLine(response);\n                Console.WriteLine($"Sent to client: {response}");\n            }\n        }\n    }\n}