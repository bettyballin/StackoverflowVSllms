using System.ServiceModel;\nusing System.ServiceModel.Description;\nusing System.ServiceModel.Dispatcher;\n\npublic class XhtmlOperationBehavior : IOperationBehavior\n{\n    public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters) { }\n\n    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation) { }\n\n    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)\n    {\n        dispatchOperation.Formatter = new XhtmlMessageFormatter();\n    }\n\n    public void Validate(OperationDescription operationDescription) { }\n}\n\n[ServiceContract]\npublic interface IMyService\n{\n    [OperationContract]\n    [XhtmlBehavior]\n    string GetXhtmlResponse();\n}\n\npublic class MyService : IMyService\n{\n    public string GetXhtmlResponse()\n    {\n        return "<p>This is an XHTML response</p>";\n    }\n}\n\npublic class XhtmlBehaviorAttribute : Attribute, IOperationBehavior\n{\n    public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters) { }\n\n    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation) { }\n\n    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)\n    {\n        dispatchOperation.Formatter = new XhtmlMessageFormatter();\n    }\n\n    public void Validate(OperationDescription operationDescription) { }\n}