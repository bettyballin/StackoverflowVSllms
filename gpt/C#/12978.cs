public static void ExecuteWithLock(object syncRoot, Action action, Action onFailure)\n{\n    if (System.Threading.Monitor.TryEnter(syncRoot))\n    {\n        try\n        {\n            action();\n        }\n        finally\n        {\n            System.Threading.Monitor.Exit(syncRoot);\n        }\n    }\n    else\n    {\n        onFailure();\n    }\n}\n\n// Usage\nExecuteWithLock(syncRoot, \n    () => {\n        // do something\n    }, \n    () => {\n        // do something else\n    });