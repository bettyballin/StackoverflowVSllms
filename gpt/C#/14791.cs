public void Consumer()\n{\n    if (Interlocked.CompareExchange(ref Slot.Free, 0, 1) == 1)\n    {\n        // Write Slot.Data to disk\n        // Slot.Free is automatically set to 0 by CompareExchange\n    }\n}\n\npublic void Producer()\n{\n    if (Interlocked.CompareExchange(ref Slot.Free, 1, 0) == 0)\n    {\n        // Create item and place it in the slot\n        Slot.Data = newItem; // Add new item\n        // Slot.Free is automatically set to 1 by CompareExchange\n    }\n}