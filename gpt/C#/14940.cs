string query = "IF NOT EXISTS (SELECT 1 FROM FriendRequests WHERE UserId = @UserId AND FriendUserId = @FriendUserId) " +\n               "BEGIN " +\n               "INSERT INTO FriendRequests (UserId, FriendUserId) VALUES (@UserId, @FriendUserId) " +\n               "END";\n\nusing (SqlConnection conn = new SqlConnection(yourConnectionString))\n{\n    using (SqlCommand cmd = new SqlCommand(query, conn))\n    {\n        cmd.Parameters.AddWithValue("@UserId", UserId);\n        cmd.Parameters.AddWithValue("@FriendUserId", PossibleFriend);\n        conn.Open();\n        cmd.ExecuteNonQuery();\n    }\n}