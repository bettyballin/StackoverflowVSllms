public static string Base64UrlEncode(string input)\n{\n    var bytesToEncode = System.Text.Encoding.UTF8.GetBytes(input);\n    var base64Encoded = Convert.ToBase64String(bytesToEncode);\n    \n    // Convert to URL-safe base64 variant\n    var base64UrlEncoded = base64Encoded.Replace("=", String.Empty)\n                                        .Replace('+', '-')\n                                        .Replace('/', '_');\n    return base64UrlEncoded;\n}