using (var session = sessionFactory.OpenSession())\n   using (var transaction = session.BeginTransaction())\n   {\n       try\n       {\n           // Batch multiple operations\n           foreach (var entity in entities)\n           {\n               session.SaveOrUpdate(entity);\n           }\n           transaction.Commit();\n       }\n       catch\n       {\n           transaction.Rollback();\n           throw;\n       }\n   }