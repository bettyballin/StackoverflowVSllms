using System;\nusing NHibernate;\nusing NHibernate.Metadata;\nusing System.Collections.Generic;\n\npublic class ColumnEnumerator\n{\n    private ISessionFactory sessionFactory;\n\n    public ColumnEnumerator(ISessionFactory sessionFactory)\n    {\n        this.sessionFactory = sessionFactory;\n    }\n\n    public IList<string> GetColumnNames<T>()\n    {\n        string entityName = typeof(T).FullName;\n        IList<string> columnNames = new List<string>();\n\n        IClassMetadata classMetadata = sessionFactory.GetClassMetadata(entityName);\n        if (classMetadata != null)\n        {\n            foreach (string propertyName in classMetadata.PropertyNames)\n            {\n                string[] columnNamesForProperty = classMetadata.GetPropertyColumnNames(propertyName);\n                foreach (string columnName in columnNamesForProperty)\n                {\n                    columnNames.Add(columnName);\n                }\n            }\n        }\n\n        return columnNames;\n    }\n}