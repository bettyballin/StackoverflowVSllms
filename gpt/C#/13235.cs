using System;\nusing System.DirectoryServices.AccountManagement;\nusing System.Web;\n\npublic string GetDisplayName()\n{\n    string username = HttpContext.Current.User.Identity.Name;\n    string[] nameParts = username.Split('\\');\n    if (nameParts.Length != 2)\n    {\n        throw new InvalidOperationException("The username is not in the expected format DOMAIN\\USERNAME.");\n    }\n\n    string domain = nameParts[0];\n    string userName = nameParts[1];\n\n    using (PrincipalContext context = new PrincipalContext(ContextType.Domain, domain))\n    {\n        UserPrincipal user = UserPrincipal.FindByIdentity(context, userName);\n        if (user != null)\n        {\n            return user.DisplayName;\n        }\n        else\n        {\n            throw new InvalidOperationException("User not found in Active Directory.");\n        }\n    }\n}