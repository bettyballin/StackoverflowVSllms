using System;\nusing System.Data.SqlClient;\nusing System.Configuration;\nusing System.Web.UI;\n\npublic partial class messages : System.Web.UI.Page\n{\n    protected void Page_Load(object sender, EventArgs e)\n    {\n        string connString = ConfigurationManager.ConnectionStrings["YourConnectionStringName"].ConnectionString;\n        using (SqlConnection conn = new SqlConnection(connString))\n        {\n            conn.Open();\n\n            if (!string.IsNullOrEmpty(Request["usr"]) && !string.IsNullOrEmpty(Request["msg"]))\n            {\n                string user = Request["usr"];\n                string message = Request["msg"];\n                string sql = "INSERT INTO messages (usr, msg, [date]) VALUES (@User, @Message, @Date)";\n                using (SqlCommand comm = new SqlCommand(sql, conn))\n                {\n                    comm.Parameters.AddWithValue("@User", user);\n                    comm.Parameters.AddWithValue("@Message", message);\n                    comm.Parameters.AddWithValue("@Date", DateTime.Now);\n                    comm.ExecuteNonQuery();\n                }\n            }\n\n            string selectSql = "SELECT TOP 5 usr, msg FROM messages ORDER BY [date] DESC";\n            using (SqlCommand comm = new SqlCommand(selectSql, conn))\n            using (SqlDataReader dr = comm.ExecuteReader())\n            {\n                while (dr.Read())\n                {\n                    Response.Write($"{dr["usr"]}: {dr["msg"]}<br />");\n                }\n            }\n        }\n    }\n}