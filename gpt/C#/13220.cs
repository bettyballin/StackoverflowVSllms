public Photo SavePhotoWithId(Photo photo, Stream uploadedPhoto)\n{\n    // Step 1: Generate a temporary unique filename\n    string tempFilename = Path.GetTempFileName();\n\n    // Save the photo temporarily\n    SavePhotoToFileSystem(tempFilename, uploadedPhoto);\n\n    // Step 2: Insert the photo record in the database\n    photo.FileName = tempFilename; // Temporary filename\n    rep.InsertPhoto(photo);\n    rep.SaveAll();\n\n    // Get the generated photoid\n    int photoId = photo.PhotoId;\n\n    // Step 3: Rename the file using photoid\n    string newFilename = $"{photoId}.jpg"; // or any desired format\n    string newFilePath = Path.Combine(photoDirectory, newFilename);\n    File.Move(tempFilename, newFilePath);\n\n    // Update the photo record with the new filename\n    photo.FileName = newFilename;\n    rep.UpdatePhoto(photo);\n    rep.SaveAll();\n\n    return photo;\n}\n\nprivate void SavePhotoToFileSystem(string filename, Stream photoStream)\n{\n    using (var fileStream = new FileStream(filename, FileMode.Create, FileAccess.Write))\n    {\n        photoStream.CopyTo(fileStream);\n    }\n}