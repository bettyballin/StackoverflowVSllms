using (var connection = new SqlConnection(connectionString))\n   {\n       using (var command = new SqlCommand("GetCustomersByCity", connection))\n       {\n           command.CommandType = CommandType.StoredProcedure;\n           command.Parameters.AddWithValue("@City", "London");\n\n           connection.Open();\n           using (var reader = command.ExecuteReader())\n           {\n               while (reader.Read())\n               {\n                   Console.WriteLine(reader["Name"]);\n               }\n           }\n       }\n   }