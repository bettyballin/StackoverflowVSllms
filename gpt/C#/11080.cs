class Program\n{\n    static void Main(string[] args)\n    {\n        int i = 0;\n        try\n        {\n            while (true)\n            {\n                WriteAndDeleteFile(ref i);\n            }\n        }\n        catch (System.UnauthorizedAccessException ex)\n        {\n            System.Console.Out.WriteLine("Boom at: " + i.ToString());\n        }\n    }\n\n    static void WriteAndDeleteFile(ref int i)\n    {\n        int retryCount = 5;\n        bool success = false;\n\n        while (retryCount > 0 && !success)\n        {\n            try\n            {\n                using (System.IO.TextWriter writer = new System.IO.StreamWriter("file.txt"))\n                {\n                    i++;\n                    System.Console.Out.WriteLine(i);\n                    writer.Write(i);\n                }\n\n                System.IO.File.Delete("file.txt");\n                success = true;\n            }\n            catch (System.IO.IOException)\n            {\n                // If the file is being used by another process, wait and retry\n                System.Threading.Thread.Sleep(100); // Wait 100ms before retrying\n                retryCount--;\n            }\n        }\n\n        if (!success)\n        {\n            throw new System.UnauthorizedAccessException("Failed to write/delete file after multiple attempts.");\n        }\n    }\n}