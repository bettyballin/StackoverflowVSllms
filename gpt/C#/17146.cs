using System;\nusing System.Collections.Generic;\nusing System.Data;\nusing System.Data.SqlClient;\n\npublic DataTable GetBookings(List<int> buildingIDs, DateTime fromDate)\n{\n    DataTable resultTable = new DataTable();\n    string connectionString = "your_connection_string_here";\n\n    using (SqlConnection connection = new SqlConnection(connectionString))\n    {\n        connection.Open();\n        \n        // Construct the query with parameters\n        string query = @"SELECT id, startDateTime, endDateTime \n                           FROM tb_bookings \n                          WHERE buildingID IN ({0}) \n                            AND startDateTime <= @fromDate";\n\n        // Create the parameterized query\n        string inClause = string.Join(",", buildingIDs.Select((id, index) => "@buildingID" + index));\n        query = string.Format(query, inClause);\n\n        using (SqlCommand command = new SqlCommand(query, connection))\n        {\n            // Add parameters for building IDs\n            for (int i = 0; i < buildingIDs.Count; i++)\n            {\n                command.Parameters.Add(new SqlParameter("@buildingID" + i, SqlDbType.Int) { Value = buildingIDs[i] });\n            }\n            \n            // Add parameter for fromDate\n            command.Parameters.Add(new SqlParameter("@fromDate", SqlDbType.DateTime) { Value = fromDate });\n\n            using (SqlDataAdapter adapter = new SqlDataAdapter(command))\n            {\n                adapter.Fill(resultTable);\n            }\n        }\n    }\n\n    return resultTable;\n}