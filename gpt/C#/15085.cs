using System;\nusing System.Data.Common;\nusing System.Threading.Tasks;\n\npublic class DatabaseExample\n{\n    private readonly DbProviderFactory _factory;\n    private readonly string _connectionString;\n\n    public DatabaseExample(DbProviderFactory factory, string connectionString)\n    {\n        _factory = factory;\n        _connectionString = connectionString;\n    }\n\n    public async Task ExecuteQueryAsync(string query)\n    {\n        await Task.Run(() =>\n        {\n            using (var connection = _factory.CreateConnection())\n            {\n                connection.ConnectionString = _connectionString;\n                connection.Open();\n\n                using (var command = connection.CreateCommand())\n                {\n                    command.CommandText = query;\n                    using (var reader = command.ExecuteReader())\n                    {\n                        while (reader.Read())\n                        {\n                            // Process each row\n                        }\n                    }\n                }\n            }\n        });\n    }\n}