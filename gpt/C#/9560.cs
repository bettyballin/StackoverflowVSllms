using RazorEngine;\n   using RazorEngine.Templating;\n   using System.Net.Mail;\n\n   public class EmailModel\n   {\n       public string Heading { get; set; }\n       public string UserName { get; set; }\n       public string Body { get; set; }\n   }\n\n   public class EmailService\n   {\n       public string GenerateEmailBody(EmailModel model)\n       {\n           string template = System.IO.File.ReadAllText("EmailTemplate.cshtml");\n           string emailBody = Engine.Razor.RunCompile(template, "emailTemplateKey", typeof(EmailModel), model);\n           return emailBody;\n       }\n\n       public void SendEmail(string toEmail, string subject, string body)\n       {\n           MailMessage mail = new MailMessage();\n           SmtpClient smtpServer = new SmtpClient("your_smtp_server");\n\n           mail.From = new MailAddress("your_email@example.com");\n           mail.To.Add(toEmail);\n           mail.Subject = subject;\n           mail.Body = body;\n           mail.IsBodyHtml = true;\n\n           smtpServer.Port = 587;\n           smtpServer.Credentials = new System.Net.NetworkCredential("username", "password");\n           smtpServer.EnableSsl = true;\n\n           smtpServer.Send(mail);\n       }\n   }\n\n   // Usage\n   var model = new EmailModel\n   {\n       Heading = "Heading Here",\n       UserName = "John Doe",\n       Body = "First part of the email body goes here"\n   };\n\n   EmailService emailService = new EmailService();\n   string emailBody = emailService.GenerateEmailBody(model);\n   emailService.SendEmail("recipient@example.com", "Subject Here", emailBody);