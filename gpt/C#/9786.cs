public partial class MainForm : Form\n{\n    public MainForm()\n    {\n        InitializeComponent();\n        \n        // Ensure CausesValidation is set appropriately\n        cancelButton.CausesValidation = false;\n        submitButton.CausesValidation = true;\n    }\n\n    private void submitButton_Click(object sender, EventArgs e)\n    {\n        // Validate all controls on the form\n        if (this.ValidateChildren())\n        {\n            // Proceed with form submission\n        }\n        else\n        {\n            // Handle validation failure\n        }\n    }\n}\n\npublic partial class CustomTextBox : TextBox\n{\n    ErrorProvider errorProvider;\n\n    public CustomTextBox()\n    {\n        InitializeComponent();\n        errorProvider = new ErrorProvider();\n        errorProvider.DataSource = this;\n    }\n\n    protected override void OnValidating(CancelEventArgs e)\n    {\n        base.OnValidating(e);\n        if (this.Text.Trim() == "")\n        {\n            errorProvider.SetError(this, "Required field");\n            e.Cancel = true;\n            return;\n        }\n        errorProvider.SetError(this, "");\n    }\n}