public async Task<IActionResult> Upload(IFormFile file)\n{\n    if (file == null || file.Length == 0)\n    {\n        return BadRequest("No file uploaded.");\n    }\n\n    var userId = User.FindFirst(ClaimTypes.NameIdentifier).Value;\n    var uploadsFolderPath = Path.Combine(_hostingEnvironment.ContentRootPath, "Uploads", userId);\n\n    if (!Directory.Exists(uploadsFolderPath))\n    {\n        Directory.CreateDirectory(uploadsFolderPath);\n    }\n\n    var filePath = Path.Combine(uploadsFolderPath, file.FileName);\n\n    using (var stream = new FileStream(filePath, FileMode.Create))\n    {\n        await file.CopyToAsync(stream);\n    }\n\n    // Save file path and metadata to database\n    var fileRecord = new FileRecord\n    {\n        UserId = userId,\n        FilePath = filePath,\n        FileName = file.FileName\n    };\n    _context.FileRecords.Add(fileRecord);\n    await _context.SaveChangesAsync();\n\n    return Ok(new { filePath });\n}