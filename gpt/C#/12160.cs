public class MyService : IMyService\n{\n    public void MyServiceMethod()\n    {\n        // Capture header value\n        string factoryIdFromHeader = WebOperationContext.Current.IncomingRequest.Headers["FactoryId"];\n        \n        // Store the header value in a context\n        OperationContext.Current.Extensions.Add(new HeaderContextExtension(factoryIdFromHeader));\n        \n        // Proceed with your service logic\n    }\n}\n\npublic class HeaderContextExtension : IExtension<OperationContext>\n{\n    public string FactoryIdFromHeader { get; private set; }\n\n    public HeaderContextExtension(string factoryId)\n    {\n        FactoryIdFromHeader = factoryId;\n    }\n\n    public void Attach(OperationContext owner) { }\n\n    public void Detach(OperationContext owner) { }\n}