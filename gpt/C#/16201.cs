using System;\nusing System.Net.Http;\nusing System.Net.Http.Headers;\nusing System.Text;\nusing System.Threading.Tasks;\n\nclass Program\n{\n    static async Task Main()\n    {\n        string JIRA_URL = "http://your-jira-instance";\n        string username = "your_username";\n        string password = "your_password";\n        string issueKey = "PROJECT-123";\n        string parentIssueKey = "PROJECT-456";\n        string subtaskType = "Sub-task"; // Ensure this matches your JIRA setup\n\n        using (var client = new HttpClient())\n        {\n            var byteArray = Encoding.ASCII.GetBytes($"{username}:{password}");\n            client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(byteArray));\n            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));\n\n            // Update issue type to subtask\n            var updateIssueTypeContent = new StringContent($"{{\"fields\": {{\"issuetype\": {{\"name\": \"{subtaskType}\"}}}}}}", Encoding.UTF8, "application/json");\n            HttpResponseMessage response = await client.PutAsync($"{JIRA_URL}/rest/api/2/issue/{issueKey}", updateIssueTypeContent);\n\n            if (response.IsSuccessStatusCode)\n            {\n                // Set parent issue\n                var setParentContent = new StringContent($"{{\"update\": {{\"parent\": [{{\"set\": {{\"key\": \"{parentIssueKey}\"}}}}]}}}}", Encoding.UTF8, "application/json");\n                response = await client.PutAsync($"{JIRA_URL}/rest/api/2/issue/{issueKey}", setParentContent);\n\n                if (response.IsSuccessStatusCode)\n                {\n                    Console.WriteLine("Issue converted to subtask and parent set successfully.");\n                }\n                else\n                {\n                    Console.WriteLine("Error setting parent issue: " + response.ReasonPhrase);\n                }\n            }\n            else\n            {\n                Console.WriteLine("Error updating issue type: " + response.ReasonPhrase);\n            }\n        }\n    }\n}