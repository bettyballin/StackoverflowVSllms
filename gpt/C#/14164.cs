using System;\nusing StructureMap;\n\nObjectFactory.Initialize(registry =>\n{\n    registry.Scan(assembly =>\n    {\n        assembly.TheCallingAssembly();\n\n        // Telling StructureMap to sweep a folder called "extensions" directly\n        // underneath the application root folder for any assemblies found in that folder\n        assembly.AssembliesFromPath("extensions", addedAssembly =>\n        {\n            Console.WriteLine($"Found assembly: {addedAssembly.FullName}");\n            return addedAssembly.GetName().Name.ToLower().Contains("extension");\n        });\n\n        // Direct StructureMap to add any Registries that it finds in these assemblies,\n        // assuming that all the StructureMap directives are contained in registry classes\n        assembly.LookForRegistries();\n    });\n});