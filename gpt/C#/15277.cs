public void SaveImageWithRetry(string imagePath, Action saveAction, int maxRetries = 3, int delayMilliseconds = 500)\n{\n    int attempt = 0;\n    while (attempt < maxRetries)\n    {\n        try\n        {\n            saveAction();\n            return; // Success, exit the method\n        }\n        catch (IOException)\n        {\n            attempt++;\n            if (attempt >= maxRetries)\n                throw; // Re-throw the exception if max retries reached\n            System.Threading.Thread.Sleep(delayMilliseconds); // Wait before retrying\n        }\n    }\n}\n\n// Usage example\nSaveImageWithRetry(Server.MapPath(imageFilename), () => chart.SaveImage(Server.MapPath(imageFilename), ChartImageFormat.Png));