using System;\nusing System.IO;\nusing System.Threading;\nusing System.Xml.Linq;\n\npublic class MyFileReaderWriter\n{\n    private readonly string _filePath;\n    private readonly ReaderWriterLockSlim _lock = new ReaderWriterLockSlim();\n\n    public MyFileReaderWriter(string filePath)\n    {\n        _filePath = filePath;\n    }\n\n    public XDocument Read()\n    {\n        _lock.EnterReadLock();\n        try\n        {\n            return XDocument.Load(_filePath);\n        }\n        finally\n        {\n            _lock.ExitReadLock();\n        }\n    }\n\n    public void Write(XDocument doc)\n    {\n        _lock.EnterWriteLock();\n        try\n        {\n            doc.Save(_filePath);\n        }\n        finally\n        {\n            _lock.ExitWriteLock();\n        }\n    }\n\n    public void Append(XElement element)\n    {\n        _lock.EnterWriteLock();\n        try\n        {\n            var doc = XDocument.Load(_filePath);\n            doc.Root.Add(element);\n            doc.Save(_filePath);\n        }\n        finally\n        {\n            _lock.ExitWriteLock();\n        }\n    }\n}