using System;\nusing System.IO;\nusing System.Windows.Forms;\n\nstatic class Program\n{\n    [STAThread]\n    static void Main()\n    {\n        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;\n        Application.ThreadException += Application_ThreadException;\n        Application.EnableVisualStyles();\n        Application.SetCompatibleTextRenderingDefault(false);\n        Application.Run(new MainForm());\n    }\n\n    private static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)\n    {\n        Exception ex = (Exception)e.ExceptionObject;\n        LogException(ex);\n    }\n\n    private static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)\n    {\n        LogException(e.Exception);\n    }\n\n    private static void LogException(Exception ex)\n    {\n        string logPath = "error_log.txt";\n        File.AppendAllText(logPath, $"{DateTime.Now}: {ex.Message}{Environment.NewLine}{ex.StackTrace}{Environment.NewLine}");\n    }\n}