try\n{\n    // Start a transaction or use a similar mechanism if needed for atomicity\n    using (var transaction = new System.Transactions.TransactionScope())\n    {\n        var modifiedProducts = dTiendasDs.Productos.GetChanges(DataRowState.Modified) as dTiendasDs.ProductosDataTable;\n        var modifiedPrices = dTiendasDs.Precios.GetChanges(DataRowState.Modified) as dTiendasDs.PreciosDataTable;\n\n        if (modifiedProducts != null)\n        {\n            productsAdapter.Update(modifiedProducts);\n        }\n\n        if (modifiedPrices != null)\n        {\n            pricesAdapter.Update(modifiedPrices);\n        }\n\n        // Accept changes only after successful updates\n        dTiendasDs.AcceptChanges();\n\n        // Complete the transaction\n        transaction.Complete();\n    }\n}\ncatch (Exception ex)\n{\n    // Handle the exception as needed, log it, show a message, etc.\n    MessageBox.Show($"Error updating the database: {ex.Message}");\n}