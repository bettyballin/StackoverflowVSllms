using System;\nusing System.Net;\nusing System.Net.Sockets;\nusing System.Text;\n\nclass AsyncTcpClient\n{\n    private Socket _clientSocket;\n    private readonly byte[] _buffer = new byte[1024];\n\n    public void StartClient(string ipAddress, int port)\n    {\n        _clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n        var endPoint = new IPEndPoint(IPAddress.Parse(ipAddress), port);\n\n        var connectEventArgs = new SocketAsyncEventArgs { RemoteEndPoint = endPoint };\n        connectEventArgs.Completed += OnConnectCompleted;\n        _clientSocket.ConnectAsync(connectEventArgs);\n    }\n\n    private void OnConnectCompleted(object sender, SocketAsyncEventArgs e)\n    {\n        if (e.SocketError == SocketError.Success)\n        {\n            Console.WriteLine("Connected to server.");\n            StartReceive();\n        }\n        else\n        {\n            Console.WriteLine($"Failed to connect: {e.SocketError}");\n        }\n    }\n\n    private void StartReceive()\n    {\n        var receiveEventArgs = new SocketAsyncEventArgs();\n        receiveEventArgs.SetBuffer(_buffer, 0, _buffer.Length);\n        receiveEventArgs.Completed += OnReceiveCompleted;\n        _clientSocket.ReceiveAsync(receiveEventArgs);\n    }\n\n    private void OnReceiveCompleted(object sender, SocketAsyncEventArgs e)\n    {\n        if (e.SocketError == SocketError.Success)\n        {\n            int bytesRead = e.BytesTransferred;\n            if (bytesRead > 0)\n            {\n                string receivedText = Encoding.ASCII.GetString(_buffer, 0, bytesRead);\n                Console.WriteLine($"Received: {receivedText}");\n                StartReceive();\n            }\n            else\n            {\n                Console.WriteLine("Connection closed by the server.");\n                _clientSocket.Close();\n            }\n        }\n        else\n        {\n            Console.WriteLine($"Receive error: {e.SocketError}");\n            _clientSocket.Close();\n        }\n    }\n\n    static void Main(string[] args)\n    {\n        var client = new AsyncTcpClient();\n        client.StartClient("127.0.0.1", 9000);\n        Console.ReadLine();\n    }\n}