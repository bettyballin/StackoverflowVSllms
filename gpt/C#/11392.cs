using System;\nusing System.Collections.Generic;\nusing System.Data.SqlClient;\nusing System.Linq;\nusing System.Text;\n\npublic class UserSearch\n{\n    private string _connectionString;\n\n    public UserSearch(string connectionString)\n    {\n        _connectionString = connectionString;\n    }\n\n    public List<string> SearchUsers(List<string> names)\n    {\n        using (SqlConnection connection = new SqlConnection(_connectionString))\n        {\n            connection.Open();\n            var query = BuildQuery(names);\n            using (SqlCommand command = new SqlCommand(query, connection))\n            {\n                for (int i = 0; i < names.Count; i++)\n                {\n                    command.Parameters.AddWithValue($"@name{i}", names[i]);\n                }\n\n                var results = new List<string>();\n                using (SqlDataReader reader = command.ExecuteReader())\n                {\n                    while (reader.Read())\n                    {\n                        results.Add(reader.GetString(0));\n                    }\n                }\n                return results;\n            }\n        }\n    }\n\n    private string BuildQuery(List<string> names)\n    {\n        StringBuilder query = new StringBuilder();\n        query.Append("SELECT DISTINCT u.FullName ");\n        query.Append("FROM Users u ");\n        query.Append("INNER JOIN ConnectNames cn ON u.UserID = cn.UserID ");\n        query.Append("INNER JOIN Names n ON cn.NameID = n.NameID ");\n        query.Append("WHERE n.Name IN (");\n\n        for (int i = 0; i < names.Count; i++)\n        {\n            if (i > 0)\n                query.Append(", ");\n            query.Append($"@name{i}");\n        }\n\n        query.Append(")");\n\n        return query.ToString();\n    }\n}