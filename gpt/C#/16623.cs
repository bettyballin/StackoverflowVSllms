using System;\nusing System.Collections.Generic;\nusing System.Text.RegularExpressions;\n\npublic class HtmlTruncator\n{\n    public static string TruncateHtml(string input, int maxLength)\n    {\n        int printedLength = 0;\n        int position = 0;\n        Stack<string> tags = new Stack<string>();\n        string result = "";\n\n        Regex regex = new Regex(@"<[^>]+>|[^<]+");\n        MatchCollection matches = regex.Matches(input);\n\n        foreach (Match match in matches)\n        {\n            string str = match.Value;\n\n            if (str[0] == '<')\n            {\n                if (str[1] == '/')\n                {\n                    tags.Pop();\n                }\n                else\n                {\n                    Match tagMatch = Regex.Match(str, @"<\s*([^\s>!\/]+)");\n                    if (tagMatch.Success)\n                    {\n                        tags.Push(tagMatch.Groups[1].Value);\n                    }\n                }\n                result += str;\n            }\n            else\n            {\n                int strLength = str.Length;\n\n                if (printedLength + strLength > maxLength)\n                {\n                    result += str.Substring(0, maxLength - printedLength);\n                    printedLength = maxLength;\n                    break;\n                }\n                else\n                {\n                    result += str;\n                    printedLength += strLength;\n                }\n            }\n        }\n\n        while (tags.Count > 0)\n        {\n            result += $"</{tags.Pop()}>";\n        }\n\n        return result;\n    }\n\n    public static void Main()\n    {\n        string html = "Hello, my <strong>name</strong> is <em>Sam</em>. I&acute;m a web developer.";\n        string truncatedHtml = TruncateHtml(html, 26);\n        Console.WriteLine(truncatedHtml);\n    }\n}