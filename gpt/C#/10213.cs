OpenIdRelyingParty openid = new OpenIdRelyingParty();\nif (openid.Response != null)\n{\n    // Stage 3: OpenID Provider sending assertion response\n    switch (openid.Response.Status)\n    {\n        case AuthenticationStatus.Authenticated:\n            ClaimsResponse fetch = openid.Response.GetExtension<ClaimsResponse>();\n            if (fetch != null)\n            {\n                string nick = fetch.Nickname;\n                string homepage = openid.Response.ClaimedIdentifier;\n                string email = fetch.Email;\n                string comment = Session["pendingComment"] as string;\n                string entryId = Session["pendingEntryId"] as string;\n                if (!String.IsNullOrEmpty(comment) && !String.IsNullOrEmpty(entryId))\n                {\n                    AddNewComment(nick, email, homepage, comment, entryId, true);\n                }\n            }\n            else\n            {\n                // Handle case where ClaimsResponse is null\n                // This might happen if the provider does not support the requested claims\n            }\n            break;\n    }\n}