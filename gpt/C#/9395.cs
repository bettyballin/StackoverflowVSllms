using System;\nusing System.Data.SqlClient;\n\nclass Program\n{\n    static void Main()\n    {\n        string connectionString = "your_connection_string_here";\n        string query = @"\n            PRINT 'We are here';\n            SELECT Name FROM Table1;\n            -- do some logic\n            SELECT Name, Country FROM Table1;\n            PRINT 'We are done';";\n\n        using (SqlConnection connection = new SqlConnection(connectionString))\n        {\n            SqlCommand command = new SqlCommand(query, connection);\n            connection.Open();\n            connection.InfoMessage += new SqlInfoMessageEventHandler(OnInfoMessage);\n\n            using (SqlDataReader reader = command.ExecuteReader())\n            {\n                do\n                {\n                    while (reader.Read())\n                    {\n                        for (int i = 0; i < reader.FieldCount; i++)\n                        {\n                            Console.Write(reader[i].ToString() + " ");\n                        }\n                        Console.WriteLine();\n                    }\n                } while (reader.NextResult());\n            }\n        }\n    }\n\n    private static void OnInfoMessage(object sender, SqlInfoMessageEventArgs e)\n    {\n        Console.WriteLine("Message from server: " + e.Message);\n    }\n}