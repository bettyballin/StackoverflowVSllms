using System.ComponentModel;\nusing System.Configuration.Install;\nusing System.ServiceProcess;\nusing Microsoft.Win32;\n\n[RunInstaller(true)]\npublic class MyServiceInstaller : Installer\n{\n    private ServiceProcessInstaller processInstaller;\n    private ServiceInstaller serviceInstaller;\n\n    public MyServiceInstaller()\n    {\n        processInstaller = new ServiceProcessInstaller\n        {\n            Account = ServiceAccount.LocalSystem\n        };\n\n        serviceInstaller = new ServiceInstaller\n        {\n            ServiceName = "MyService",\n            DisplayName = "My Service",\n            StartType = ServiceStartMode.Automatic\n        };\n\n        Installers.Add(processInstaller);\n        Installers.Add(serviceInstaller);\n    }\n\n    public override void Install(System.Collections.IDictionary stateSaver)\n    {\n        base.Install(stateSaver);\n        string keyPath = @"SYSTEM\CurrentControlSet\Services\MyService";\n        using (RegistryKey key = Registry.LocalMachine.OpenSubKey(keyPath, true))\n        {\n            if (key != null)\n            {\n                // Add the command line arguments here\n                key.SetValue("ImagePath", key.GetValue("ImagePath") + " -commandlineoption");\n            }\n        }\n    }\n}