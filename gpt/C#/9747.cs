ReportDocument repDoc = (ReportDocument)System.Web.HttpContext.Current.Session["StudyReportCrystalDocument"];\n// Stop buffering the response\nResponse.Buffer = false;\n// Clear the response content and headers\nResponse.ClearContent();\nResponse.ClearHeaders();\ntry\n{\n    repDoc.ExportToHttpResponse(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat, Response, true, "StudyReport");\n}\ncatch (System.Threading.ThreadAbortException)\n{\n    // This exception is thrown by Response.End(), so we can ignore it\n}\ncatch (Exception ex)\n{\n    // Log the exception for further analysis\n    // You can use any logging framework or mechanism you prefer\n    // Example: Log the exception message and stack trace\n    System.Diagnostics.Debug.WriteLine($"Exception: {ex.Message}");\n    System.Diagnostics.Debug.WriteLine($"Stack Trace: {ex.StackTrace}");\n\n    // Optionally, display a user-friendly message\n    Response.Write("An error occurred while generating the report. Please try again later.");\n}\nfinally\n{\n    // Ensure the response is ended properly\n    Response.End();\n}