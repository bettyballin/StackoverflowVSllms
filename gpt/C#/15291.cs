using System;\nusing System.Runtime.InteropServices;\n\nclass Program\n{\n    [DllImport("kernel32.dll")]\n    public static extern bool GetVersionEx(ref OSVERSIONINFO osvi);\n    \n    [StructLayout(LayoutKind.Sequential)]\n    public struct OSVERSIONINFO\n    {\n        public int dwOSVersionInfoSize;\n        public int dwMajorVersion;\n        public int dwMinorVersion;\n        public int dwBuildNumber;\n        public int dwPlatformId;\n        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 128)]\n        public string szCSDVersion;\n    }\n    \n    static void Main()\n    {\n        OSVERSIONINFO osvi = new OSVERSIONINFO();\n        osvi.dwOSVersionInfoSize = Marshal.SizeOf(typeof(OSVERSIONINFO));\n        \n        if (GetVersionEx(ref osvi))\n        {\n            if (osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 1) // Windows XP\n            {\n                Console.WriteLine("Running on Windows XP, applying registration fallback...");\n                // Apply registration fallback logic here\n            }\n            else\n            {\n                Console.WriteLine("Running on newer Windows version.");\n            }\n        }\n    }\n}