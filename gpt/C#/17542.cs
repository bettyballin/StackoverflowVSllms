using System.Web.UI;\nusing System.Web.UI.WebControls;\n\n[ToolboxData("<{0}:MyCustomDropDownList runat=server></{0}:MyCustomDropDownList>")]\npublic class MyCustomDropDownList : DropDownList\n{\n    protected override void OnInit(EventArgs e)\n    {\n        base.OnInit(e);\n\n        // Find the ScriptManager on the page\n        ScriptManager scriptManager = ScriptManager.GetCurrent(Page);\n\n        if (scriptManager == null)\n        {\n            throw new InvalidOperationException("A ScriptManager is required on the page.");\n        }\n\n        // Add the web service reference\n        ServiceReference serviceReference = new ServiceReference("~/Path/To/Service.asmx");\n        scriptManager.Services.Add(serviceReference);\n\n        // Include the embedded JavaScript file\n        Type type = this.GetType();\n        ClientScriptManager cs = Page.ClientScript;\n        string scriptUrl = cs.GetWebResourceUrl(type, "Namespace.ResourceName.js");\n        cs.RegisterClientScriptInclude(type, "Namespace.ResourceName.js", scriptUrl);\n    }\n}