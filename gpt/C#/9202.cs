using System;\nusing System.Collections.Generic;\nusing System.Data.SqlClient;\nusing System.Threading.Tasks;\n\npublic class ViewCounterService\n{\n    private static Dictionary<int, long> viewCounts = new Dictionary<int, long>();\n    private static object lockObject = new object();\n    private static readonly string connectionString = "YourConnectionStringHere";\n\n    public void IncrementView(int objectId)\n    {\n        lock (lockObject)\n        {\n            if (viewCounts.ContainsKey(objectId))\n            {\n                viewCounts[objectId]++;\n            }\n            else\n            {\n                viewCounts[objectId] = 1;\n            }\n        }\n    }\n\n    public async Task UpdateDatabaseAsync()\n    {\n        Dictionary<int, long> updates;\n        lock (lockObject)\n        {\n            updates = new Dictionary<int, long>(viewCounts);\n            viewCounts.Clear();\n        }\n\n        using (SqlConnection conn = new SqlConnection(connectionString))\n        {\n            await conn.OpenAsync();\n            foreach (var update in updates)\n            {\n                var cmd = new SqlCommand("UPDATE ObjectCounters SET NumViews = NumViews + @NumViews WHERE ObjectId = @ObjectId", conn);\n                cmd.Parameters.AddWithValue("@NumViews", update.Value);\n                cmd.Parameters.AddWithValue("@ObjectId", update.Key);\n                await cmd.ExecuteNonQueryAsync();\n            }\n        }\n    }\n}