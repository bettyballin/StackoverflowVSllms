public int GetUserIdByUsername(string username)\n{\n    using (var connection = new SqlConnection("your_connection_string"))\n    {\n        connection.Open();\n        \n        using (var command = new SqlCommand("SELECT dbo.fn_GetUserId_Username(@Username)", connection))\n        {\n            command.Parameters.Add(new SqlParameter("@Username", SqlDbType.VarChar, 32) { Value = username });\n\n            try\n            {\n                var result = command.ExecuteScalar();\n                if (result != null && int.TryParse(result.ToString(), out int userId))\n                {\n                    return userId;\n                }\n                else\n                {\n                    return -1; // or any default value indicating not found\n                }\n            }\n            catch (Exception e)\n            {\n                // Handle the exception properly\n                throw new Exception("An error occurred while fetching UserId by username.", e);\n            }\n        }\n    }\n}