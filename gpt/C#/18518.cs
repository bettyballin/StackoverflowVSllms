using Gtk;\nusing System;\n\npublic class PopupMenuExample : Window\n{\n    ScrolledWindow scrolledwindow1;\n\n    public PopupMenuExample() : base("PopupMenu Example")\n    {\n        SetDefaultSize(400, 300);\n        SetPosition(WindowPosition.Center);\n\n        scrolledwindow1 = new ScrolledWindow();\n        scrolledwindow1.Add(new Label("Right-click to see the popup menu"));\n        Add(scrolledwindow1);\n\n        scrolledwindow1.ButtonPressEvent += OnButtonPressEvent;\n\n        ShowAll();\n    }\n\n    void OnButtonPressEvent(object sender, ButtonPressEventArgs args)\n    {\n        if (args.Event.Button == 3) // Right mouse button\n        {\n            HandlePopupMenu(sender, new PopupMenuArgs());\n        }\n    }\n\n    [GLib.ConnectBefore]\n    public void HandlePopupMenu(object o, PopupMenuArgs args)\n    {\n        Console.WriteLine("test");\n        Menu mbox = new Menu();\n        MenuItem Test = new MenuItem("test");\n        Test.Activated += delegate(object sender, EventArgs e) {\n            Console.WriteLine("test");\n        };\n        mbox.Append(Test);\n        mbox.ShowAll();\n        mbox.Popup();\n    }\n\n    public static void Main()\n    {\n        Application.Init();\n        new PopupMenuExample();\n        Application.Run();\n    }\n}