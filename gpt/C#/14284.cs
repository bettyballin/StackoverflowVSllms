using System;\nusing System.IO;\nusing System.Text;\nusing Microsoft.AspNetCore.StaticFiles;\n\npublic class FileContentTypeAnalyzer\n{\n    public static string GetMimeType(string filePath)\n    {\n        var provider = new FileExtensionContentTypeProvider();\n        if (!provider.TryGetContentType(filePath, out string contentType))\n        {\n            contentType = "application/octet-stream"; // default to binary\n        }\n        return contentType;\n    }\n\n    public static bool IsTextFile(string filePath)\n    {\n        // Read a portion of the file to determine if it is text\n        const int sampleSize = 1024;\n        byte[] buffer = new byte[sampleSize];\n\n        using (FileStream fs = File.OpenRead(filePath))\n        {\n            int bytesRead = fs.Read(buffer, 0, buffer.Length);\n            return IsText(buffer, bytesRead);\n        }\n    }\n\n    private static bool IsText(byte[] buffer, int length)\n    {\n        // Check for null bytes and non-UTF-8 encoding\n        for (int i = 0; i < length; i++)\n        {\n            if (buffer[i] == 0)\n                return false;\n        }\n        try\n        {\n            Encoding.UTF8.GetString(buffer, 0, length);\n            return true;\n        }\n        catch\n        {\n            return false;\n        }\n    }\n\n    public static string GetFileEncoding(string filePath)\n    {\n        using (var reader = new StreamReader(filePath, true))\n        {\n            reader.Peek(); // you need to read at least one character to detect encoding\n            return reader.CurrentEncoding.WebName;\n        }\n    }\n\n    public static void Main(string[] args)\n    {\n        string filePath = "path/to/your/file.txt";\n        string mimeType = GetMimeType(filePath);\n        Console.WriteLine($"MIME Type: {mimeType}");\n\n        bool isText = IsTextFile(filePath);\n        Console.WriteLine($"Is Text File: {isText}");\n\n        if (isText)\n        {\n            string encoding = GetFileEncoding(filePath);\n            Console.WriteLine($"Text File Encoding: {encoding}");\n        }\n        else\n        {\n            Console.WriteLine("The file is binary and may need MIME encoding.");\n        }\n    }\n}