[HttpPost]\n[AllowAnonymous]\n[ValidateAntiForgeryToken]\npublic async Task<ActionResult> Register(RegisterViewModel model)\n{\n    if (ModelState.IsValid)\n    {\n        var user = new ApplicationUser { UserName = model.Email, Email = model.Email };\n        var result = await UserManager.CreateAsync(user, model.Password);\n        if (result.Succeeded)\n        {\n            // Save additional profile info\n            var profile = new UserProfile\n            {\n                UserId = user.Id,\n                Address = model.Address,\n                PhoneNumber = model.PhoneNumber\n            };\n            db.UserProfiles.Add(profile);\n            await db.SaveChangesAsync();\n\n            await SignInManager.SignInAsync(user, isPersistent: false, rememberBrowser: false);\n            return RedirectToAction("Index", "Home");\n        }\n        AddErrors(result);\n    }\n\n    // If we got this far, something failed, redisplay form\n    return View(model);\n}