using (SqlConnection connection = new SqlConnection(connectionString))\n     {\n         connection.Open();\n         SqlTransaction transaction = connection.BeginTransaction();\n         try\n         {\n             SqlCommand command = connection.CreateCommand();\n             command.Transaction = transaction;\n             command.CommandText = "INSERT INTO Users (Name) VALUES ('John Doe')";\n             command.ExecuteNonQuery();\n             transaction.Commit();\n         }\n         catch\n         {\n             transaction.Rollback();\n         }\n     }