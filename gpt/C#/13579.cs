// Define the service contract\n   [ServiceContract]\n   public interface IMyService\n   {\n       [OperationContract]\n       string MySecureMethod(string input);\n   }\n\n   // Implement the service contract\n   public class MyService : IMyService\n   {\n       public string MySecureMethod(string input)\n       {\n           return "Secure response: " + input;\n       }\n   }\n\n   // Configure the service host with message security\n   Uri baseAddress = new Uri("http://localhost:8080/MyService");\n   using (ServiceHost host = new ServiceHost(typeof(MyService), baseAddress))\n   {\n       WSHttpBinding binding = new WSHttpBinding(SecurityMode.Message);\n       binding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;\n\n       host.AddServiceEndpoint(typeof(IMyService), binding, "");\n       host.Credentials.ServiceCertificate.SetCertificate(\n           StoreLocation.LocalMachine, \n           StoreName.My, \n           X509FindType.FindBySubjectName, \n           "MyServiceCertificate");\n\n       host.Open();\n       Console.WriteLine("Service is running...");\n       Console.ReadLine();\n       host.Close();\n   }