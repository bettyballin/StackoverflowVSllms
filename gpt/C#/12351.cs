public class AjaxAuthorizeAttribute : AuthorizeAttribute\n   {\n       protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)\n       {\n           if (filterContext.HttpContext.Request.IsAjaxRequest())\n           {\n               filterContext.HttpContext.Response.StatusCode = 401;\n               filterContext.HttpContext.Response.SuppressFormsAuthenticationRedirect = true;\n               filterContext.Result = new JsonResult\n               {\n                   Data = new { Message = "Unauthorized" },\n                   JsonRequestBehavior = JsonRequestBehavior.AllowGet\n               };\n           }\n           else\n           {\n               base.HandleUnauthorizedRequest(filterContext);\n           }\n       }\n   }