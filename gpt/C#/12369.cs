using System;\n     using System.Data.SqlClient;\n     using System.Threading;\n\n     public class SmsScheduler\n     {\n         private static readonly string connectionString = "your_connection_string_here";\n         private static Timer _timer;\n\n         public static void Start()\n         {\n             _timer = new Timer(CheckAndSendMessages, null, TimeSpan.Zero, TimeSpan.FromMinutes(1));\n         }\n\n         private static void CheckAndSendMessages(object state)\n         {\n             using (var connection = new SqlConnection(connectionString))\n             {\n                 connection.Open();\n                 var command = new SqlCommand(\n                     "SELECT Id, PhoneNumber, Message FROM ScheduledMessages WHERE ScheduledTime <= @CurrentTime AND Sent = 0",\n                     connection);\n                 command.Parameters.AddWithValue("@CurrentTime", DateTime.UtcNow);\n\n                 var reader = command.ExecuteReader();\n                 var smsService = new SmsService();\n\n                 while (reader.Read())\n                 {\n                     var id = reader.GetInt32(0);\n                     var phoneNumber = reader.GetString(1);\n                     var message = reader.GetString(2);\n\n                     smsService.SendSms(phoneNumber, message);\n\n                     var updateCommand = new SqlCommand(\n                         "UPDATE ScheduledMessages SET Sent = 1 WHERE Id = @Id",\n                         connection);\n                     updateCommand.Parameters.AddWithValue("@Id", id);\n                     updateCommand.ExecuteNonQuery();\n                 }\n             }\n         }\n     }