public class MyServiceClient : ClientBase<IMyService>, IMyService\n{\n    public MyServiceClient()\n    {\n        Endpoint.EndpointBehaviors.Add(new CustomEndpointBehavior());\n    }\n\n    public object MyServiceMethod()\n    {\n        var response = Channel.MyServiceMethod();\n\n        // Check the custom header to determine response type.\n        var responseTypeHeader = OperationContext.Current.IncomingMessageHeaders.GetHeader<string>("ResponseType", string.Empty);\n        \n        if (responseTypeHeader == "ActualResponse")\n        {\n            return Deserialize<ActualResponse>(response);\n        }\n        else if (responseTypeHeader == "ErrorResponse")\n        {\n            return Deserialize<ErrorResponse>(response);\n        }\n\n        throw new InvalidOperationException("Unknown response type.");\n    }\n\n    private T Deserialize<T>(Message responseMessage)\n    {\n        using (var reader = responseMessage.GetReaderAtBodyContents())\n        {\n            var serializer = new DataContractSerializer(typeof(T));\n            return (T)serializer.ReadObject(reader);\n        }\n    }\n}