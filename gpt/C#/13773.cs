var factory = new ConnectionFactory() { HostName = "localhost" };\n   using(var connection = factory.CreateConnection())\n   using(var channel = connection.CreateModel())\n   {\n       channel.QueueDeclare(queue: "dataQueue", durable: true, exclusive: false, autoDelete: false, arguments: null);\n       var consumer = new EventingBasicConsumer(channel);\n       consumer.Received += (model, ea) =>\n       {\n           var body = ea.Body.ToArray();\n           var message = Encoding.UTF8.GetString(body);\n           ProcessData(message);\n       };\n       channel.BasicConsume(queue: "dataQueue", autoAck: true, consumer: consumer);\n   }